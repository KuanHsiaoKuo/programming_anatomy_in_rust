<!DOCTYPE HTML>
<html lang="cn" class="sidebar-visible no-js rust">
<head>
    <!-- Book generated using mdBook -->
    <meta charset="UTF-8">
    <title>Cargo run: rustc - Programming Anatomy In Rust ğŸ¦€</title>


    <!-- Custom HTML head -->
    
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta name="description" content="ä»¥rustä¸ºä¾‹åˆ†äº«å­¦ä¹ ç¼–ç¨‹å¸¸è€ƒè™‘çš„æ–¹æ–¹é¢é¢">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#ffffff"/>

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
    <link rel="stylesheet" href="../../css/variables.css">
    <link rel="stylesheet" href="../../css/general.css">
    <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

    <!-- Fonts -->
    <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

    <!-- Highlight.js Stylesheets -->
    <link rel="stylesheet" href="../../highlight.css">
    <link rel="stylesheet" href="../../tomorrow-night.css">
    <link rel="stylesheet" href="../../ayu-highlight.css">

    <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../assets/pagetoc/pagetoc_style.css">
        <link rel="stylesheet" href="../../assets/css/mdbook-admonish.css">

        <!-- MathJax -->
        <script async type="text/javascript"
                src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>
<body>
<!-- Provide site root to javascript -->
<script type="text/javascript">
    var path_to_root = "../../";
    var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "rust";
</script>

<!-- Work around some values being stored in localStorage wrapped in quotes -->
<script type="text/javascript">
    try {
        var theme = localStorage.getItem('mdbook-theme');
        var sidebar = localStorage.getItem('mdbook-sidebar');

        if (theme.startsWith('"') && theme.endsWith('"')) {
            localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
        }

        if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
            localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
        }
    } catch (e) {
    }
</script>

<!-- Set the theme before any content is loaded, prevents flash -->
<script type="text/javascript">
    var theme;
    try {
        theme = localStorage.getItem('mdbook-theme');
    } catch (e) {
    }
    if (theme === null || theme === undefined) {
        theme = default_theme;
    }
    var html = document.querySelector('html');
    html.classList.remove('no-js')
    html.classList.remove('rust')
    html.classList.add(theme);
    html.classList.add('js');
</script>

<!-- Hide / unhide sidebar before it is displayed -->
<script type="text/javascript">
    var html = document.querySelector('html');
    var sidebar = 'hidden';
    if (document.body.clientWidth >= 1080) {
        try {
            sidebar = localStorage.getItem('mdbook-sidebar');
        } catch (e) {
        }
        sidebar = sidebar || 'visible';
    }
    html.classList.remove('sidebar-visible');
    html.classList.add("sidebar-" + sidebar);
</script>

<nav id="sidebar" class="sidebar" aria-label="Table of contents">
    <div class="sidebar-scrollbox">
        <ol class="chapter"><li class="chapter-item expanded "><a href="../../../index.html"><strong aria-hidden="true">1.</strong> æ€»è§ˆ</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../checklist.html"><strong aria-hidden="true">1.1.</strong> å¾…å®Œæˆ</a></li><li class="chapter-item expanded "><a href="../../layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html"><strong aria-hidden="true">1.2.</strong> Substrateä»‹ç»ä¸è§£æ</a></li><li class="chapter-item expanded "><a href="../../layer5_ecosystem/1_learning_resource/talks.html"><strong aria-hidden="true">1.3.</strong> Rustè¯é¢˜</a></li></ol></li><li class="chapter-item expanded "><a href="../../layer1_underlying_abstract/layer1_underlying_abstract.html"><strong aria-hidden="true">2.</strong> Layer1: åº•å±‚æŠ½è±¡</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../layer1_underlying_abstract/1_virtual_memory/virtual_memory.html"><strong aria-hidden="true">2.1.</strong> è™šæ‹Ÿå†…å­˜ç®¡ç†</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../layer1_underlying_abstract/1_virtual_memory/memory_manage_safety.html"><strong aria-hidden="true">2.1.1.</strong> å†…å­˜ç®¡ç†ä¸å†…å­˜å®‰å…¨</a></li><li class="chapter-item expanded "><a href="../../layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html"><strong aria-hidden="true">2.1.2.</strong> æ‰€æœ‰æƒä¸‰ä»¶å¥—</a></li></ol></li><li class="chapter-item expanded "><a href="../../layer1_underlying_abstract/2_type_system/type_system.html"><strong aria-hidden="true">2.2.</strong> ç±»å‹ç³»ç»Ÿ</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../layer1_underlying_abstract/2_type_system/built_in_types.html"><strong aria-hidden="true">2.2.1.</strong> åŸºç¡€å†…ç½®ç±»å‹</a></li><li class="chapter-item expanded "><a href="../../layer1_underlying_abstract/2_type_system/collections.html"><strong aria-hidden="true">2.2.2.</strong> é›†åˆç±»å‹</a></li><li class="chapter-item expanded "><a href="../../layer1_underlying_abstract/2_type_system/user_defined_types.html"><strong aria-hidden="true">2.2.3.</strong> è‡ªå®šä¹‰ç±»å‹</a></li><li class="chapter-item expanded "><a href="../../layer1_underlying_abstract/2_type_system/generics_traits_objects.html"><strong aria-hidden="true">2.2.4.</strong> æ³›å‹ã€ç‰¹å¾åŠç‰¹å¾å¯¹è±¡</a></li></ol></li><li class="chapter-item expanded "><a href="../../layer1_underlying_abstract/3_language_grammar/language_grammar.html"><strong aria-hidden="true">2.3.</strong> è¯­è¨€è¯­æ³•</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../layer1_underlying_abstract/3_language_grammar/annotation_rustdoc.html"><strong aria-hidden="true">2.3.1.</strong> æ³¨é‡Šä¸æ–‡æ¡£(rustdoc)</a></li><li class="chapter-item expanded "><a href="../../layer1_underlying_abstract/3_language_grammar/keywords_glossary.html"><strong aria-hidden="true">2.3.2.</strong> è¯æ³•ç»“æ„æ‰«ç›²</a></li><li class="chapter-item expanded "><a href="../../layer1_underlying_abstract/3_language_grammar/binding_match_patterns.html"><strong aria-hidden="true">2.3.3.</strong> ç»‘å®šã€èµ‹å€¼ä¸åŒ¹é…</a></li><li class="chapter-item expanded "><a href="../../layer1_underlying_abstract/3_language_grammar/logical_decision_loops.html"><strong aria-hidden="true">2.3.4.</strong> é€»è¾‘åˆ¤æ–­ä¸å¾ªç¯â™»ï¸</a></li><li class="chapter-item expanded "><a href="../../layer1_underlying_abstract/3_language_grammar/statements_expressions.html"><strong aria-hidden="true">2.3.5.</strong> è¯­å¥ä¸è¡¨è¾¾å¼</a></li><li class="chapter-item expanded "><a href="../../layer1_underlying_abstract/3_language_grammar/code_quality.html"><strong aria-hidden="true">2.3.6.</strong> ä»£ç è´¨é‡</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../layer2_design_abstract/layer2_design_abstract.html"><strong aria-hidden="true">3.</strong> Layer2: è®¾è®¡æŠ½è±¡</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../layer2_design_abstract/4_programming_paradigm/4_programming_paradigm.html"><strong aria-hidden="true">3.1.</strong> ç¼–ç¨‹èŒƒå¼</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../layer2_design_abstract/4_programming_paradigm/fp.html"><strong aria-hidden="true">3.1.1.</strong> å‡½æ•°å¼ç¼–ç¨‹</a></li><li class="chapter-item expanded "><a href="../../layer2_design_abstract/4_programming_paradigm/oop.html"><strong aria-hidden="true">3.1.2.</strong> é¢å‘å¯¹è±¡ç¼–ç¨‹</a></li><li class="chapter-item expanded "><a href="../../layer2_design_abstract/4_programming_paradigm/gp.html"><strong aria-hidden="true">3.1.3.</strong> æ³›å‹ç¼–ç¨‹</a></li></ol></li><li class="chapter-item expanded "><a href="../../layer2_design_abstract/5_design_pattern/5_design_pattern.html"><strong aria-hidden="true">3.2.</strong> è®¾è®¡æ¨¡å¼</a></li><li class="chapter-item expanded "><a href="../../layer2_design_abstract/6_module_manage/6_module_manage.html"><strong aria-hidden="true">3.3.</strong> æ¨¡å—ç®¡ç†</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../layer2_design_abstract/6_module_manage/module_system.html"><strong aria-hidden="true">3.3.1.</strong> æ¨¡å—ç³»ç»Ÿ</a></li><li class="chapter-item expanded "><a href="../../layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html"><strong aria-hidden="true">3.3.2.</strong> Cargoä¸é¡¹ç›®ç”Ÿå‘½å‘¨æœŸ</a></li><li class="chapter-item expanded "><a href="../../layer2_design_abstract/6_module_manage/cargo_rustc.html" class="active"><strong aria-hidden="true">3.3.3.</strong> Cargo run: rustc</a></li><li class="chapter-item expanded "><a href="../../layer2_design_abstract/6_module_manage/rust_plugins.html"><strong aria-hidden="true">3.3.4.</strong> Rustæ‰©å±•å·¥å…·</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../layer3_task_abstract/layer3_task_abstract.html"><strong aria-hidden="true">4.</strong> Layer3: ä»»åŠ¡æŠ½è±¡</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../layer3_task_abstract/7_concurrency/7_concurrency.html"><strong aria-hidden="true">4.1.</strong> å¹¶å‘ç¼–ç¨‹</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../layer3_task_abstract/7_concurrency/io_models.html"><strong aria-hidden="true">4.1.1.</strong> ç³»ç»ŸIOæ¨¡å‹</a></li><li class="chapter-item expanded "><a href="../../layer3_task_abstract/7_concurrency/1_multi_models/multi_models.html"><strong aria-hidden="true">4.1.2.</strong> å¤šçº¿ç¨‹æ¨¡å‹</a></li><li class="chapter-item expanded "><a href="../../layer3_task_abstract/7_concurrency/2_async_models/async_models.html"><strong aria-hidden="true">4.1.3.</strong> å¼‚æ­¥æ¨¡å‹</a></li></ol></li><li class="chapter-item expanded "><a href="../../layer3_task_abstract/8_meta_programming/8_meta_programming.html"><strong aria-hidden="true">4.2.</strong> å…ƒç¼–ç¨‹</a></li></ol></li><li class="chapter-item expanded "><a href="../../layer4_protocol_abstract/layer4_protocol_abstract.html"><strong aria-hidden="true">5.</strong> Layer4: åè®®æŠ½è±¡</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../layer4_protocol_abstract/9_multilingual_programming/9_multilingual_programming.html"><strong aria-hidden="true">5.1.</strong> è·¨è¯­è¨€ç¼–ç¨‹</a></li><li class="chapter-item expanded "><a href="../../layer4_protocol_abstract/10_computer_network/10_computer_network.html"><strong aria-hidden="true">5.2.</strong> è®¡ç®—æœºç½‘ç»œ</a></li></ol></li><li class="chapter-item expanded "><a href="../../layer5_ecosystem/layer5_ecosystem.html"><strong aria-hidden="true">6.</strong> Layer5: ç”Ÿæ€ç¯å¢ƒ</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../layer5_ecosystem/1_learning_resource/learning_resource.html"><strong aria-hidden="true">6.1.</strong> å­¦ä¹ èµ„æº</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../layer5_ecosystem/1_learning_resource/1_books/books.html"><strong aria-hidden="true">6.1.1.</strong> ä¹¦ç±æ•´ç†</a></li><li class="chapter-item expanded "><a href="../../layer5_ecosystem/1_learning_resource/2_courses/courses.html"><strong aria-hidden="true">6.1.2.</strong> çº¿ä¸Šè¯¾ç¨‹</a></li><li class="chapter-item expanded "><a href="../../layer5_ecosystem/1_learning_resource/3_blogs/blogs.html"><strong aria-hidden="true">6.1.3.</strong> åšå®¢æ–‡ç« </a></li><li class="chapter-item expanded "><a href="../../layer5_ecosystem/1_learning_resource/4_videos/videos.html"><strong aria-hidden="true">6.1.4.</strong> åœ¨çº¿è§†é¢‘</a></li><li class="chapter-item expanded "><a href="../../layer5_ecosystem/1_learning_resource/5_projects/projects.html"><strong aria-hidden="true">6.1.5.</strong> å¼€æºé¡¹ç›®</a></li></ol></li><li class="chapter-item expanded "><a href="../../layer5_ecosystem/2_lang_update/lang_update.html"><strong aria-hidden="true">6.2.</strong> å®˜æ–¹åŠ¨æ€</a></li><li class="chapter-item expanded "><a href="../../layer5_ecosystem/3_community/community.html"><strong aria-hidden="true">6.3.</strong> ç¤¾åŒºçƒ­ç‚¹</a></li><li class="chapter-item expanded "><a href="../../layer5_ecosystem/4_academic/academic.html"><strong aria-hidden="true">6.4.</strong> å­¦æœ¯è®¨è®º</a></li><li class="chapter-item expanded "><a href="../../layer5_ecosystem/5_open_source/open_source.html"><strong aria-hidden="true">6.5.</strong> å¼€æºè§‚å¯Ÿ</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../layer5_ecosystem/5_open_source/1_underlying/underlying.html"><strong aria-hidden="true">6.5.1.</strong> åº•å±‚å¼€å‘</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../layer5_ecosystem/5_open_source/1_underlying/command/command.html"><strong aria-hidden="true">6.5.1.1.</strong> å‘½ä»¤è¡Œå·¥å…·</a></li><li class="chapter-item expanded "><a href="../../layer5_ecosystem/5_open_source/1_underlying/data/data.html"><strong aria-hidden="true">6.5.1.2.</strong> æ•°æ®å¤„ç†</a></li><li class="chapter-item expanded "><a href="../../layer5_ecosystem/5_open_source/1_underlying/embedded/embedded.html"><strong aria-hidden="true">6.5.1.3.</strong> åµŒå…¥å¼</a></li><li class="chapter-item expanded "><a href="../../layer5_ecosystem/5_open_source/1_underlying/os/os.html"><strong aria-hidden="true">6.5.1.4.</strong> ç³»ç»Ÿå¼€å‘</a></li><li class="chapter-item expanded "><a href="../../layer5_ecosystem/5_open_source/1_underlying/performance/performance.html"><strong aria-hidden="true">6.5.1.5.</strong> æ€§èƒ½å·¥å…·</a></li></ol></li><li class="chapter-item expanded "><a href="../../layer5_ecosystem/5_open_source/2_network/network.html"><strong aria-hidden="true">6.5.2.</strong> ç½‘ç»œç›¸å…³</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../layer5_ecosystem/5_open_source/2_network/cloud/cloud.html"><strong aria-hidden="true">6.5.2.1.</strong> äº‘åŸç”Ÿ</a></li><li class="chapter-item expanded "><a href="../../layer5_ecosystem/5_open_source/2_network/frontend/frontend.html"><strong aria-hidden="true">6.5.2.2.</strong> å‰ç«¯åŸºå»º</a></li><li class="chapter-item expanded "><a href="../../layer5_ecosystem/5_open_source/2_network/network/network.html"><strong aria-hidden="true">6.5.2.3.</strong> ç½‘ç»œåŸºå»º</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs.html"><strong aria-hidden="true">6.5.2.3.1.</strong> IPFS: æ˜Ÿé™…æ–‡ä»¶ç³»ç»Ÿ(InterPlanetary File System)</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs_website.html"><strong aria-hidden="true">6.5.2.3.1.1.</strong> åˆ©ç”¨IPFSæ„å»ºè‡ªå·±çš„å»ä¸­å¿ƒåŒ–åˆ†å¸ƒå¼ç½‘ç«™</a></li><li class="chapter-item expanded "><a href="../../layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs_pubsub.html"><strong aria-hidden="true">6.5.2.3.1.2.</strong> IPFS pubsubåŠŸèƒ½</a></li><li class="chapter-item expanded "><a href="../../layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs_companion.html"><strong aria-hidden="true">6.5.2.3.1.3.</strong> IPFSä¼´ä¾£æ’ä»¶</a></li><li class="chapter-item expanded "><a href="../../layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs_ngrok.html"><strong aria-hidden="true">6.5.2.3.1.4.</strong> IPFS+ngrok</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../layer5_ecosystem/5_open_source/2_network/web/web.html"><strong aria-hidden="true">6.5.2.4.</strong> webå¼€å‘</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../layer5_ecosystem/5_open_source/2_network/web/webassembly_try.html"><strong aria-hidden="true">6.5.2.4.1.</strong> åŸºäºRustå°è¯•WebAssembly</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../layer5_ecosystem/5_open_source/3_media/media.html"><strong aria-hidden="true">6.5.3.</strong> å¤šåª’ä½“</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../layer5_ecosystem/5_open_source/3_media/av/av.html"><strong aria-hidden="true">6.5.3.1.</strong> éŸ³è§†é¢‘å¤„ç†</a></li><li class="chapter-item expanded "><a href="../../layer5_ecosystem/5_open_source/3_media/game/game.html"><strong aria-hidden="true">6.5.3.2.</strong> æ¸¸æˆå¼€å‘</a></li></ol></li><li class="chapter-item expanded "><a href="../../layer5_ecosystem/5_open_source/4_other/other.html"><strong aria-hidden="true">6.5.4.</strong> å…¶ä»–</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../layer5_ecosystem/5_open_source/4_other/lang-with-rust/lang_with_rust.html"><strong aria-hidden="true">6.5.4.1.</strong> Rustä¸å…¶ä»–è¯­è¨€</a></li><li class="chapter-item expanded "><a href="../../layer5_ecosystem/5_open_source/4_other/scientific-research/scientific_research.html"><strong aria-hidden="true">6.5.4.2.</strong> ç§‘å­¦è‰ºæœ¯ç ”ç©¶</a></li><li class="chapter-item expanded "><a href="../../layer5_ecosystem/5_open_source/4_other/tools/tools.html"><strong aria-hidden="true">6.5.4.3.</strong> å…¶ä»–å·¥å…·</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../layer5_ecosystem/6_security/security.html"><strong aria-hidden="true">6.6.</strong> å®‰å…¨å‚è€ƒ</a></li><li class="chapter-item expanded "><a href="../../layer5_ecosystem/7_business/business.html"><strong aria-hidden="true">6.7.</strong> å•†ä¸šè§‚å¯Ÿ</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../layer5_ecosystem/7_business/blockchain/blockchain.html"><strong aria-hidden="true">6.7.1.</strong> åŒºå—é“¾</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../layer5_ecosystem/7_business/blockchain/build-a-block-in-rust.html"><strong aria-hidden="true">6.7.1.1.</strong> ä½¿ç”¨rustå»ºç«‹ä¸€ä¸ªç®€å•çš„åŒºå—é“¾</a></li><li class="chapter-item expanded "><a href="../../layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html"><strong aria-hidden="true">6.7.1.2.</strong> Substrateä»‹ç»ä¸è§£æ</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../layer5_ecosystem/7_business/blockchain/substrate/substrate_started.html"><strong aria-hidden="true">6.7.1.2.1.</strong> Substrateå°è¯•</a></li><li class="chapter-item expanded "><a href="../../layer5_ecosystem/7_business/blockchain/substrate/substrate_pallets.html"><strong aria-hidden="true">6.7.1.2.2.</strong> Substrateæ·±å…¥pallet</a></li><li class="chapter-item expanded "><a href="../../layer5_ecosystem/7_business/blockchain/substrate/substrate_smart_contracts.html"><strong aria-hidden="true">6.7.1.2.3.</strong> Substrateæ™ºèƒ½åˆçº¦</a></li><li class="chapter-item expanded "><a href="../../layer5_ecosystem/7_business/blockchain/substrate/substrate_connect.html"><strong aria-hidden="true">6.7.1.2.4.</strong> Substrateè¿æ¥å…¶ä»–é“¾</a></li><li class="chapter-item expanded "><a href="../../layer5_ecosystem/7_business/blockchain/substrate/substrate_ref.html"><strong aria-hidden="true">6.7.1.2.5.</strong> Substrateå¤‡å¿˜</a></li><li class="chapter-item expanded "><a href="../../layer5_ecosystem/7_business/blockchain/substrate/substrate_projects.html"><strong aria-hidden="true">6.7.1.2.6.</strong> Substrateå¼€æºé¡¹ç›®</a></li><li class="chapter-item expanded "><a href="../../layer5_ecosystem/7_business/blockchain/substrate/awesome_substrate.html"><strong aria-hidden="true">6.7.1.2.7.</strong> SubstrateæƒŠå¥‡èµ„æº</a></li></ol></li><li class="chapter-item expanded "><a href="../../layer5_ecosystem/7_business/blockchain/nervos_ckb_anatomy.html"><strong aria-hidden="true">6.7.1.3.</strong> Nervos CKBä»‹ç»ä¸è§£æ</a></li><li class="chapter-item expanded "><a href="../../layer5_ecosystem/7_business/blockchain/solana.html"><strong aria-hidden="true">6.7.1.4.</strong> Solana</a></li></ol></li><li class="chapter-item expanded "><a href="../../layer5_ecosystem/7_business/practices/practices.html"><strong aria-hidden="true">6.7.2.</strong> ç”Ÿäº§å®è·µ</a></li><li class="chapter-item expanded "><a href="../../layer5_ecosystem/7_business/products/products.html"><strong aria-hidden="true">6.7.3.</strong> ä¼˜ç§€äº§å“</a></li></ol></li><li class="chapter-item expanded "><a href="../../layer5_ecosystem/8_libs/libs.html"><strong aria-hidden="true">6.8.</strong> åŸºç¡€åº“</a></li><li class="chapter-item expanded "><a href="../../layer5_ecosystem/9_frameworks/frameworks.html"><strong aria-hidden="true">6.9.</strong> æ¡†æ¶å¼•æ“</a></li></ol></li><li class="chapter-item expanded "><a href="../../checklist.html">Checklist</a></li></ol>
    </div>
    <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
</nav>

<div id="page-wrapper" class="page-wrapper">

    <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
        <div id="menu-bar" class="menu-bar sticky bordered">
            <div class="left-buttons">
                <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents"
                        aria-label="Toggle Table of Contents" aria-controls="sidebar">
                    <i class="fa fa-bars"></i>
                </button>
                <button id="theme-toggle" class="icon-button" type="button" title="Change theme"
                        aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                    <i class="fa fa-paint-brush"></i>
                </button>
                <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                    <li role="none">
                        <button role="menuitem" class="theme" id="light">Light</button>
                    </li>
                    <li role="none">
                        <button role="menuitem" class="theme" id="rust">Rust (default)</button>
                    </li>
                    <li role="none">
                        <button role="menuitem" class="theme" id="coal">Coal</button>
                    </li>
                    <li role="none">
                        <button role="menuitem" class="theme" id="navy">Navy</button>
                    </li>
                    <li role="none">
                        <button role="menuitem" class="theme" id="ayu">Ayu</button>
                    </li>
                </ul>
                    <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)"
                            aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S"
                            aria-controls="searchbar">
                        <i class="fa fa-search"></i>
                    </button>
            </div>

            <h1 class="menu-title">Programming Anatomy In Rust ğŸ¦€</h1>
            <h4 class="menu-bar"><a href="https://kuanhsiaokuo.github.io/think-tool-kit/">ä¿æŒæ‰¹åˆ¤ï¼Œæœ‰æ‰€å–èˆï¼ŒçŸ¥è¡Œåˆä¸€, æ–¹è§çœŸæˆ‘</a> -- ç»ƒæ­¦ä¸ç»ƒåŠŸ
                åˆ°å¤´ä¸€åœºç©º -- ã€Šèµ›åšè‹±é›„ä¼ ã€‹ </h4>
            <div class="right-buttons">
                    <a href="../../print.html" title="Print this book" aria-label="Print this book">
                        <i id="print-button" class="fa fa-print"></i>
                    </a>
                    <a href="https://github.com/KuanHsiaoKuo/programming_anatomy_in_rust.git" title="Git repository" aria-label="Git repository">
                        <i id="git-repository-button" class="fa fa-rust"></i>
                    </a>
            </div>
        </div>

            <div id="search-wrapper" class="hidden">
                <form id="searchbar-outer" class="searchbar-outer">
                    <input type="search" name="search" id="searchbar" name="searchbar"
                           placeholder="Search this book ..." aria-controls="searchresults-outer"
                           aria-describedby="searchresults-header">
                </form>
                <div id="searchresults-outer" class="searchresults-outer hidden">
                    <div id="searchresults-header" class="searchresults-header"></div>
                    <ul id="searchresults">
                    </ul>
                </div>
            </div>

        <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
        <script type="text/javascript">
            document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
            document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
            Array.from(document.querySelectorAll('#sidebar a')).forEach(function (link) {
                link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
            });
        </script>

        <div id="content" class="content">
            <main>

                <!-- Page table of contents -->
                <div class="sidetoc">
                    <nav class="pagetoc"></nav>
                </div>
                <h1 id="cargoä¸rustc"><a class="header" href="#cargoä¸rustc">cargoä¸rustc</a></h1>
<!--ts-->
<ul>
<li><a href="#cargo%E4%B8%8Erustc">cargoä¸rustc</a>
<ul>
<li><a href="#rustc">rustc</a>
<ul>
<li><a href="#rustc%E6%98%AF%E4%BB%80%E4%B9%88">rustcæ˜¯ä»€ä¹ˆ</a></li>
<li><a href="#%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8">åŸºç¡€ä½¿ç”¨</a></li>
<li><a href="#rustc%E4%B8%8Ecargo%E7%9A%84%E5%85%B3%E7%B3%BB">rustcä¸cargoçš„å…³ç³»</a></li>
</ul>
</li>
<li><a href="#cargo-style">cargo style</a></li>
<li><a href="#cargo-essential-structure">cargo essential structure</a></li>
<li><a href="#cargo-%E6%89%A9%E5%B1%95">.cargo æ‰©å±•</a>
<ul>
<li><a href="#tree-overview">tree overview</a></li>
<li><a href="#bin">bin</a></li>
<li><a href="#env">env</a></li>
<li><a href="#git">git</a></li>
<li><a href="#registry">registry</a></li>
</ul>
</li>
<li><a href="#cargo-%E4%B8%8E-git-%E7%9A%84%E5%85%B3%E8%81%94">Cargo ä¸ git çš„å…³è”ï¼</a>
<ul>
<li><a href="#cargo-tree">cargo tree</a></li>
<li><a href="#git-1">git</a></li>
<li><a href="#%E5%85%B3%E4%BA%8E%E4%BE%9D%E8%B5%96%E5%86%B2%E7%AA%81%E9%97%AE%E9%A2%98">å…³äºä¾èµ–å†²çªé—®é¢˜</a></li>
</ul>
</li>
<li><a href="#cargo%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3">Cargoç›¸å…³é—®é¢˜è§£å†³</a>
<ul>
<li><a href="#%E7%89%88%E6%9C%AC%E5%86%B2%E7%AA%81failed-to-select-a-version-for-the-requirement">ç‰ˆæœ¬å†²çªï¼šfailed to select a version for the requirement</a></li>
</ul>
</li>
<li><a href="#cargo%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84">Cargoé¡¹ç›®ç»“æ„</a>
<ul>
<li><a href="#%E5%9F%BA%E7%A1%80%E8%AF%B4%E6%98%8E">åŸºç¡€è¯´æ˜</a></li>
<li><a href="#cargotoml%E5%92%8Ccargolock">cargo.tomlå’Œcargo.lock</a></li>
<li><a href="#%E6%9E%84%E5%BB%BA%E6%B8%85%E7%90%86%E6%9B%B4%E6%96%B0%E4%BB%A5%E5%8F%8A%E5%AE%89%E8%A3%85">æ„å»ºã€æ¸…ç†ã€æ›´æ–°ä»¥åŠå®‰è£…</a></li>
<li><a href="#mainrs-%E5%92%8C-librs">main.rs å’Œ lib.rs</a></li>
<li><a href="#%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8substrate%E7%9A%84substrate-node-template">å®é™…åº”ç”¨ï¼šSubstrateçš„substrate-node-template</a>
<ul>
<li><a href="#%E5%8C%BA%E5%88%ABcargo-run%E4%B8%8Ecargo-build">åŒºåˆ«cargo runä¸cargo build</a></li>
<li><a href="#%E5%9C%A8node%E5%8C%85%E9%87%8C%E9%9D%A2%E5%AD%98%E5%9C%A8mainrs">åœ¨nodeåŒ…é‡Œé¢å­˜åœ¨main.rs</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">å‚è€ƒèµ„æº</a>
<ul>
<li><a href="#online-book">online-book</a></li>
<li><a href="#fragment">fragment</a></li>
<li><a href="#local">local</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Thu Jul 14 08:50:34 UTC 2022 -->
<!--te-->
<h2 id="rustc"><a class="header" href="#rustc">rustc</a></h2>
<h3 id="rustcæ˜¯ä»€ä¹ˆ"><a class="header" href="#rustcæ˜¯ä»€ä¹ˆ">rustcæ˜¯ä»€ä¹ˆ</a></h3>
<p>å…¨ç§°åº”è¯¥æ˜¯&quot;rust complier&quot;, æ˜¯ Rust ç¼–ç¨‹è¯­è¨€çš„ç¼–è¯‘å™¨ï¼Œç”±é¡¹ç›®æœ¬èº«æä¾›ã€‚ç¼–è¯‘å™¨è·å–æºä»£ç å¹¶ç”ŸæˆäºŒè¿›åˆ¶ä»£ç ï¼Œä½œä¸ºåº“æˆ–å¯æ‰§è¡Œæ–‡ä»¶ã€‚</p>
<h3 id="åŸºç¡€ä½¿ç”¨"><a class="header" href="#åŸºç¡€ä½¿ç”¨">åŸºç¡€ä½¿ç”¨</a></h3>
<pre><code class="language-shell">rustc target_file.rs
</code></pre>
<h3 id="rustcä¸cargoçš„å…³ç³»"><a class="header" href="#rustcä¸cargoçš„å…³ç³»">rustcä¸cargoçš„å…³ç³»</a></h3>
<p>è¿™å…¶å®å°±ç±»ä¼¼å‰ç«¯webpack.configå’Œpackage.jsonçš„å…³ç³», cargoåœ¨è¿è¡Œæ—¶ä¼šé»˜è®¤è°ƒç”¨rustcæŒ‡ä»¤ã€‚</p>
<div id="admonition-æŸ¥çœ‹cargoå¦‚ä½•è°ƒç”¨rustc" class="admonition tip">
<div class="admonition-title">
<p>æŸ¥çœ‹cargoå¦‚ä½•è°ƒç”¨rustc</p>
<p><a class="admonition-anchor-link" href="#admonition-æŸ¥çœ‹cargoå¦‚ä½•è°ƒç”¨rustc"></a></p>
</div>
<div>
<pre><code class="language-shell">$ cargo build --verbose
</code></pre>
<blockquote>
<p>verboseï¼šå°±æ˜¯è¯¦ç»†ä¿¡æ¯çš„æ„æ€ï¼Œè¿è¡Œåå°†ä¼šæ‰“å°å‡ºæ¯æ¬¡è°ƒç”¨rustcçš„è¿‡ç¨‹ã€‚</p>
</blockquote>
</div>
</div>
<h2 id="cargo-style"><a class="header" href="#cargo-style">cargo style</a></h2>
<p>cargoå¯ä»¥çœ‹ä½œæ˜¯åŸºäºrustcçš„&quot;ç®¡ç†æ¡†æ¶&quot;ï¼Œä¸»è¦è¿˜æ˜¯å¯¹äºé¡¹ç›®ç”¨åˆ°çš„åŒ…çš„ç®¡ç†ã€‚</p>
<div id="admonition-æŸ¥çœ‹cargo" class="admonition tip">
<div class="admonition-title">
<p>æŸ¥çœ‹cargo</p>
<p><a class="admonition-anchor-link" href="#admonition-æŸ¥çœ‹cargo"></a></p>
</div>
<div>
<p><a href="/layer2_design_abstract/6_module_manage/cargo_crate_lifetime">è¿™é‡Œ</a>å¯ä»¥çœ‹åˆ°å…·ä½“æœ‰å“ªäº›åŠŸèƒ½</p>
</div>
</div>
<h2 id="cargo-essential-structure"><a class="header" href="#cargo-essential-structure">cargo essential structure</a></h2>
<p>ä½†æ˜¯å¯¹äºå¤§å¤šæ•°åœºæ™¯ä¸‹ï¼Œä¸€èˆ¬é‡‡ç”¨å¦‚ä¸‹çš„é¡¹ç›®ç»“æ„</p>
<div id="admonition-rust-package-structure" class="admonition tip">
<div class="admonition-title">
<p>rust package structure</p>
<p><a class="admonition-anchor-link" href="#admonition-rust-package-structure"></a></p>
</div>
<div>
<pre><code class="language-shell">$ tree use-benchmarking -L 2                                                                                                                                                                                                             â”€â•¯
use-benchmarking
â”œâ”€â”€ Cargo.toml
â”œâ”€â”€ README.md
â””â”€â”€ src
    â”œâ”€â”€ benchmarking.rs
    â”œâ”€â”€ lib.rs
    â”œâ”€â”€ mock.rs
    â”œâ”€â”€ tests.rs
    â””â”€â”€ weights.rs

1 directory, 7 files
</code></pre>
</div>
</div>
<h2 id="cargo-æ‰©å±•"><a class="header" href="#cargo-æ‰©å±•">.cargo æ‰©å±•</a></h2>
<p>é™¤äº†cargo, å®ƒçš„å…¨å±€ç›¸å…³é…ç½®æ–‡ä»¶éƒ½ä¼šæ”¾åœ¨$HOME/.cargoç›®å½•ä¸‹ï¼Œè¿™é‡Œå€¼å¾—çœ‹çœ‹</p>
<h3 id="tree-overview"><a class="header" href="#tree-overview">tree overview</a></h3>
<pre><code class="language-shell">tree -L 1 $HOME/.cargo                                                                                                                                                                                                                 â”€â•¯
â”œâ”€â”€ bin # å®‰è£…çš„äºŒè¿›åˆ¶ç›¸å…³å¯æ‰§è¡Œæ–‡ä»¶
â”œâ”€â”€ env # rustupçš„ç¯å¢ƒå˜é‡è®¾ç½®è„šæœ¬
â”œâ”€â”€ git
â””â”€â”€ registry
</code></pre>
<h3 id="bin"><a class="header" href="#bin">bin</a></h3>
<pre><code class="language-shell">tree -L 1 $HOME/.cargo/bin                                                                                                                                                                                                             â”€â•¯
â”œâ”€â”€ cargo -&gt; /usr/local/bin/rustup-init
â”œâ”€â”€ cargo-clippy -&gt; /usr/local/bin/rustup-init
â”œâ”€â”€ cargo-fmt -&gt; /usr/local/bin/rustup-init
â”œâ”€â”€ cargo-miri -&gt; /usr/local/bin/rustup-init
â”œâ”€â”€ clippy-driver -&gt; /usr/local/bin/rustup-init
â”œâ”€â”€ mdbook
â”œâ”€â”€ mdbook-admonish
â”œâ”€â”€ mdbook-checklist
â”œâ”€â”€ mdbook-mermaid
â”œâ”€â”€ mdbook-pdf
â”œâ”€â”€ mdbook-rss
â”œâ”€â”€ mdbook-template
â”œâ”€â”€ rls -&gt; /usr/local/bin/rustup-init
â”œâ”€â”€ rust-gdb -&gt; /usr/local/bin/rustup-init
â”œâ”€â”€ rust-lldb -&gt; /usr/local/bin/rustup-init
â”œâ”€â”€ rustc -&gt; /usr/local/bin/rustup-init
â”œâ”€â”€ rustdoc -&gt; /usr/local/bin/rustup-init
â”œâ”€â”€ rustfmt -&gt; /usr/local/bin/rustup-init
â””â”€â”€ rustup -&gt; /usr/local/bin/rustup-init

0 directories, 19 files
</code></pre>
<h3 id="env"><a class="header" href="#env">env</a></h3>
<pre><code class="language-shell">#!/bin/sh
# rustup shell setup
# affix colons on either side of $PATH to simplify matching
case &quot;:${PATH}:&quot; in
    *:&quot;$HOME/.cargo/bin&quot;:*)
        ;;
    *)
        # Prepending path in case a system-installed rustc needs to be overridden
        export PATH=&quot;$HOME/.cargo/bin:$PATH&quot;
        ;;
esac
</code></pre>
<h3 id="git"><a class="header" href="#git">git</a></h3>
<pre><code class="language-shell">tree -L 3 $HOME/.cargo/git                                                                                                                                                                                                             â”€â•¯
/Users/kuanhsiaokuo/.cargo/git
â”œâ”€â”€ checkouts
â”‚Â Â  â”œâ”€â”€ substrate-7e08433d4c370a21
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ 174735e
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ 257cdb5
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ 279593d
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ 3348e14
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ 346471d
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ 4d28ebe
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ 7ba4e4c
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ 7eb671f
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ 814752f
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ 852bab0
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ b6c1c1b
â”‚Â Â  â”‚Â Â  â””â”€â”€ bf9683e
â”‚Â Â  â””â”€â”€ unveil-rs-403565214a7cc66c
â”‚Â Â      â””â”€â”€ 3d8e9ad
â””â”€â”€ db
    â”œâ”€â”€ substrate-7e08433d4c370a21
    â”‚Â Â  â”œâ”€â”€ FETCH_HEAD
    â”‚Â Â  â”œâ”€â”€ HEAD
    â”‚Â Â  â”œâ”€â”€ config
    â”‚Â Â  â”œâ”€â”€ description
    â”‚Â Â  â”œâ”€â”€ hooks
    â”‚Â Â  â”œâ”€â”€ info
    â”‚Â Â  â”œâ”€â”€ objects
    â”‚Â Â  â””â”€â”€ refs
    â””â”€â”€ unveil-rs-403565214a7cc66c
        â”œâ”€â”€ FETCH_HEAD
        â”œâ”€â”€ HEAD
        â”œâ”€â”€ config
        â”œâ”€â”€ description
        â”œâ”€â”€ hooks
        â”œâ”€â”€ info
        â”œâ”€â”€ objects
        â””â”€â”€ refs

27 directories, 8 files
</code></pre>
<h3 id="registry"><a class="header" href="#registry">registry</a></h3>
<pre><code class="language-shell">tree -L 2 $HOME/.cargo/registry                                                                                                                                                                                                        â”€â•¯
/Users/kuanhsiaokuo/.cargo/registry
â”œâ”€â”€ cache
â”‚Â Â  â””â”€â”€ github.com-1ecc6299db9ec823
â”œâ”€â”€ index
â”‚Â Â  â””â”€â”€ github.com-1ecc6299db9ec823
â””â”€â”€ src
    â””â”€â”€ github.com-1ecc6299db9ec823

6 directories, 0 files
</code></pre>
<h2 id="cargo-ä¸-git-çš„å…³è”"><a class="header" href="#cargo-ä¸-git-çš„å…³è”">Cargo ä¸ git çš„å…³è”ï¼</a></h2>
<h3 id="cargo-tree"><a class="header" href="#cargo-tree">cargo tree</a></h3>
<ol>
<li>Cargo.tomlæ˜¯åˆ†ç­‰çº§çš„ï¼Œæœ€å¤–å±‚çš„Cargo.tomlé‡Œé¢å¯ä»¥åªç”¨ä¸€ä¸ªmembersï¼Œç„¶åé‡Œé¢åˆ—å‡ºå†…éƒ¨åŒ…å«çš„å…¶ä»–packages</li>
</ol>
<div id="admonition-substrate-node-templateä¸ºä¾‹" class="admonition info">
<div class="admonition-title">
<p>substrate-node-templateä¸ºä¾‹</p>
<p><a class="admonition-anchor-link" href="#admonition-substrate-node-templateä¸ºä¾‹"></a></p>
</div>
<div>
<blockquote>
<p>æœ€å¤–å±‚çš„Cargo.toml</p>
</blockquote>
<pre><code class="language-toml">[workspace]
members = [
    &quot;node&quot;,
    &quot;pallets/template&quot;,
    &quot;runtime&quot;,
]
[profile.release]
panic = &quot;unwind&quot;
</code></pre>
</div>
</div>
<ol start="2">
<li>ç„¶åå†…éƒ¨çš„å…¶ä»–packageså°±éœ€è¦åˆ—å‡ºç”¨åˆ°çš„[dependencies]</li>
<li>dependenciesçš„å®Œæ•´ä½¿ç”¨å‚æ•°å¦‚ä¸‹ï¼š</li>
</ol>
<div id="admonition-dependencieså†™æ³•ä¸€" class="admonition info">
<div class="admonition-title">
<p>dependencieså†™æ³•ä¸€</p>
<p><a class="admonition-anchor-link" href="#admonition-dependencieså†™æ³•ä¸€"></a></p>
</div>
<div>
<pre><code class="language-toml">[dependencies]
pallet-aura = { version = &quot;4.0.0-dev&quot;, default-features = false, git = &quot;https://github.com/paritytech/substrate.git&quot;, branch = &quot;polkadot-v0.9.24&quot; }
</code></pre>
</div>
</div>
<div id="admonition-dependencieså†™æ³•äºŒ" class="admonition info">
<div class="admonition-title">
<p>dependencieså†™æ³•äºŒ</p>
<p><a class="admonition-anchor-link" href="#admonition-dependencieså†™æ³•äºŒ"></a></p>
</div>
<div>
<pre><code class="language-toml">[dependencies.pallet-aura]
version = &quot;4.0.0-dev&quot;
default-features = false
git = &quot;https://github.com/paritytech/substrate.git&quot;
branch = &quot;polkadot-v0.9.24&quot;
</code></pre>
<blockquote>
<p>è¿™é‡Œçš„branchä¹Ÿå¯ä»¥ç”¨tag(git tag)</p>
</blockquote>
</div>
</div>
<h3 id="git-1"><a class="header" href="#git-1">git</a></h3>
<blockquote>
<p>ä¸Šé¢dependencieé‡Œé¢çš„git+branch/tagå”¯ä¸€ç¡®å®šäº†ä¸€ä»½ä»£ç ï¼Œcargoä¸‹è½½å¯¹åº”çš„gitä»£ç ä¹‹åï¼Œä¼šä»æœ€å¤–å±‚Cargo.tomlé¡ºç€membersä¸€å±‚å±‚æ‰¾åˆ°[package]å¦‚ä¸‹æ‰€ç¤ºçš„Cargo.tomlæ¥ç¡®å®šå¯¹åº”çš„ä¾èµ–åŒ…</p>
</blockquote>
<div id="admonition-substrateframeauracargotoml" class="admonition tip">
<div class="admonition-title">
<p>substrate/frame/aura/Cargo.toml</p>
<p><a class="admonition-anchor-link" href="#admonition-substrateframeauracargotoml"></a></p>
</div>
<div>
<pre><code class="language-toml">[package]
name = &quot;pallet-aura&quot;
version = &quot;4.0.0-dev&quot;
authors = [&quot;Parity Technologies &lt;admin@parity.io&gt;&quot;]
edition = &quot;2021&quot;
license = &quot;Apache-2.0&quot;
homepage = &quot;https://substrate.io&quot;
repository = &quot;https://github.com/paritytech/substrate/&quot;
description = &quot;FRAME AURA consensus pallet&quot;
readme = &quot;README.md&quot;
</code></pre>
</div>
</div>
<h3 id="å…³äºä¾èµ–å†²çªé—®é¢˜"><a class="header" href="#å…³äºä¾èµ–å†²çªé—®é¢˜">å…³äºä¾èµ–å†²çªé—®é¢˜</a></h3>
<p>ç›®å‰Cargoæ— æ³•è§£å†³ä¾èµ–å†²çªé—®é¢˜ï¼Œä¸€èˆ¬éƒ½ä¼šæ˜¯å› ä¸ºdependenciesé‡Œé¢çš„git+branch/tagå¯¹åº”çš„ä¾èµ–æ›´æ–°å¯¼è‡´ã€‚</p>
<div id="admonition-é¡ºè—¤æ‘¸ç“œä¸€ä¸€æ’æŸ¥" class="admonition tip">
<div class="admonition-title">
<p>é¡ºè—¤æ‘¸ç“œï¼Œä¸€ä¸€æ’æŸ¥</p>
<p><a class="admonition-anchor-link" href="#admonition-é¡ºè—¤æ‘¸ç“œä¸€ä¸€æ’æŸ¥"></a></p>
</div>
<div>
<p>è¿™æ—¶éœ€è¦æ ¹æ®å†²çªçš„åŒ…ï¼Œåˆ‡æ¢åˆ†æ”¯/tag, æ‰¾åˆ°å¯¹åº”çš„branch/tagæ¥æ›´æ–°</p>
</div>
</div>
<blockquote>
<p>åº”ç”¨åœºæ™¯: <a href="/layer5_ecosystem/7_business/blockchain/substrate/substrate_deep_try.html#%E6%B7%BB%E5%8A%A0%E4%BE%9D%E8%B5%96-cargotomldependincies">substrateæ·»åŠ pallet</a></p>
</blockquote>
<h2 id="cargoç›¸å…³é—®é¢˜è§£å†³"><a class="header" href="#cargoç›¸å…³é—®é¢˜è§£å†³">Cargoç›¸å…³é—®é¢˜è§£å†³</a></h2>
<h3 id="ç‰ˆæœ¬å†²çªfailed-to-select-a-version-for-the-requirement"><a class="header" href="#ç‰ˆæœ¬å†²çªfailed-to-select-a-version-for-the-requirement">ç‰ˆæœ¬å†²çªï¼šfailed to select a version for the requirement</a></h3>
<ul>
<li>åˆ é™¤registry
<a href="https://web.archive.org/web/20220702104818/https://blog.illixion.com/2021/10/fix-failed-to-select-a-version-cargo/">How to fix &quot;failed to select a version for the requirement&quot; in Rust's Cargo - Manual</a></li>
</ul>
<pre><code class="language-admonist info title='è§£å†³æ–¹æ¡ˆ'">Apparently, Cargo can sometimes get into a state where its local registry cache will corrupt itself, and Cargo wonâ€™t be able to discover new versions of the dependencies. To resolve this, delete the ~/.cargo/registry folder and run the build command again.
</code></pre>
<ul>
<li>ä¿®æ”¹dependencies
<a href="https://web.archive.org/web/20220702110637/https://qiita.com/bc_yuuuuuki/items/6f566ddef60a201af1bc">cargo install å‡ºç°éœ€æ±‚ç‰ˆæœ¬é€‰æ‹©å¤±è´¥æ€ä¹ˆåŠ--Qiita</a></li>
</ul>
<h2 id="cargoé¡¹ç›®ç»“æ„"><a class="header" href="#cargoé¡¹ç›®ç»“æ„">Cargoé¡¹ç›®ç»“æ„</a></h2>
<h3 id="åŸºç¡€è¯´æ˜"><a class="header" href="#åŸºç¡€è¯´æ˜">åŸºç¡€è¯´æ˜</a></h3>
<p><img src="https://web.archive.org/web/20220621034241im_/https://pp88.org/rust.zui.jia.shi.jian.rust.zui.jia.shi.jian/cargo.xiang.mu.pei.zhi.ji.jie.gou/project-structure.png" alt="hello_world_project_sturcture" /></p>
<ul>
<li>cargo.tomlå’Œcargo.lockæ–‡ä»¶æ€»æ˜¯ä½äºé¡¹ç›®æ ¹ç›®å½•ä¸‹ã€‚</li>
<li>æºä»£ç ä½äºsrcç›®å½•ä¸‹ã€‚</li>
<li>é»˜è®¤çš„åº“å…¥å£æ–‡ä»¶æ˜¯src/lib.rsã€‚</li>
<li>é»˜è®¤çš„å¯æ‰§è¡Œç¨‹åºå…¥å£æ–‡ä»¶æ˜¯src/main.rsã€‚</li>
<li>å…¶ä»–å¯é€‰çš„å¯æ‰§è¡Œæ–‡ä»¶ä½äºsrc/bin/*.rs(è¿™é‡Œæ¯ä¸€ä¸ªrsæ–‡ä»¶å‡å¯¹åº”ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶)ã€‚</li>
<li>å¤–éƒ¨æµ‹è¯•æºä»£ç æ–‡ä»¶ä½äºtestsç›®å½•ä¸‹ã€‚</li>
<li>ç¤ºä¾‹ç¨‹åºæºä»£ç æ–‡ä»¶ä½äºexamplesã€‚</li>
<li>åŸºå‡†æµ‹è¯•æºä»£ç æ–‡ä»¶ä½äºbenchesç›®å½•ä¸‹ã€‚</li>
</ul>
<h3 id="cargotomlå’Œcargolock"><a class="header" href="#cargotomlå’Œcargolock">cargo.tomlå’Œcargo.lock</a></h3>
<p>cargo.tomlå’Œcargo.lockæ˜¯cargoé¡¹ç›®ä»£ç ç®¡ç†çš„æ ¸å¿ƒä¸¤ä¸ªæ–‡ä»¶ï¼Œcargoå·¥å…·çš„æ‰€æœ‰æ´»åŠ¨å‡åŸºäºè¿™ä¸¤ä¸ªæ–‡ä»¶ã€‚</p>
<p>cargo.tomlæ˜¯cargoç‰¹æœ‰çš„é¡¹ç›®æ•°æ®æè¿°æ–‡ä»¶ï¼Œå¯¹äºçŒ¿ä»¬è€Œè¨€ï¼Œcargo.tomlæ–‡ä»¶å­˜å‚¨äº†é¡¹ç›®çš„æ‰€æœ‰ä¿¡æ¯ï¼Œå®ƒç›´æ¥é¢å‘rustçŒ¿ï¼ŒçŒ¿ä»¬å¦‚æœæƒ³è®©è‡ªå·±çš„rusté¡¹ç›®èƒ½å¤ŸæŒ‰ç…§æœŸæœ›çš„æ–¹å¼è¿›è¡Œæ„å»ºã€æµ‹è¯•å’Œè¿è¡Œï¼Œé‚£ä¹ˆï¼Œå¿…é¡»æŒ‰ç…§åˆç†çš„æ–¹å¼æ„å»ºâ€™cargo.tomlâ€™ã€‚</p>
<p>è€Œcargo.lockæ–‡ä»¶åˆ™ä¸ç›´æ¥é¢å‘çŒ¿ï¼ŒçŒ¿ä»¬ä¹Ÿä¸éœ€è¦ç›´æ¥å»ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶ã€‚lockæ–‡ä»¶æ˜¯cargoå·¥å…·æ ¹æ®åŒä¸€é¡¹ç›®çš„tomlæ–‡ä»¶ç”Ÿæˆçš„é¡¹ç›®ä¾èµ–è¯¦ç»†æ¸…å•æ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬ä¸ç”¨ä¸ç®¡ä»–ï¼Œåªéœ€è¦å¯¹ç€cargo.tomlæ–‡ä»¶æ’¸å°±è¡Œäº†ã€‚</p>
<h3 id="æ„å»ºæ¸…ç†æ›´æ–°ä»¥åŠå®‰è£…"><a class="header" href="#æ„å»ºæ¸…ç†æ›´æ–°ä»¥åŠå®‰è£…">æ„å»ºã€æ¸…ç†ã€æ›´æ–°ä»¥åŠå®‰è£…</a></h3>
<blockquote>
<p>é¢†ä¼šäº†tomlæè¿°æ–‡ä»¶çš„å†™æ³•ï¼Œæ˜¯ä¸€ä¸ªé‡è¦çš„æ–¹é¢ã€‚å¦ä¸€ä¸ªé‡è¦çš„æ–¹é¢ï¼Œå°±æ˜¯cargoå·¥å…·æœ¬èº«ä¸ºæˆ‘ä»¬ç¨‹åºçŒ¿æä¾›çš„å„ç§å¥½ç”¨çš„å·¥å…·ã€‚å¦‚æœå¤§å®¶æ„Ÿå…´è¶£ï¼Œè‡ªå·±åœ¨ç»ˆç«¯ä¸­è¾“å…¥â€™cargo â€“helpâ€™æŸ¥çœ‹å³å¯ã€‚</p>
</blockquote>
<ol>
<li>å…¶ä¸­å¼€å‘æ—¶æœ€å¸¸ç”¨çš„å‘½ä»¤å°±æ˜¯'cargo build'ï¼Œç”¨äºæ„å»ºé¡¹ç›®ã€‚</li>
<li>æ­¤å¤–ï¼Œ'cargo clean'å‘½ä»¤å¯ä»¥æ¸…ç†targetæ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰å†…å®¹ï¼›</li>
<li>'cargo update'æ ¹æ®tomlæè¿°æ–‡ä»¶é‡æ–°æ£€ç´¢å¹¶æ›´æ–°å„ç§ä¾èµ–é¡¹çš„ä¿¡æ¯ï¼Œå¹¶å†™å…¥lockæ–‡ä»¶ï¼Œä¾‹å¦‚ä¾èµ–é¡¹ç‰ˆæœ¬çš„æ›´æ–°å˜åŒ–ç­‰ç­‰ï¼›</li>
<li>'cargo install'å¯ç”¨äºå®é™…çš„ç”Ÿäº§éƒ¨ç½²ã€‚è¿™äº›å‘½ä»¤åœ¨å®é™…çš„å¼€å‘éƒ¨ç½²ä¸­å‡æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚</li>
</ol>
<h3 id="mainrs-å’Œ-librs"><a class="header" href="#mainrs-å’Œ-librs">main.rs å’Œ lib.rs</a></h3>
<div id="admonition-mainrs-vs-librs" class="admonition info">
<div class="admonition-title">
<p>main.rs vs lib.rs</p>
<p><a class="admonition-anchor-link" href="#admonition-mainrs-vs-librs"></a></p>
</div>
<div>
<pre><code class="language-text">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“                                              
â”ƒ                                     _                                        â”ƒ                                              
â”ƒ                          _ __  __ _(_)_ _    _ _ ___                         â”ƒ                                              
â”ƒ                         | '  \/ _` | | ' \ _| '_(_-&lt;                         â”ƒ                                              
â”ƒ                         |_|_|_\__,_|_|_||_(_)_| /__/                         â”ƒ                                              
â”ƒ                                                                              â”ƒ                                              
â”ƒ _                 _ _                             _             _   _        â”ƒ                                              
â”ƒ| |_  __ _ _ _  __| | |___ ___  _ _ _  _ _ _  _ _ (_)_ _  __ _  | |_| |_  ___ â”ƒ                                              
â”ƒ| ' \/ _` | ' \/ _` | / -_|_-&lt; | '_| || | ' \| ' \| | ' \/ _` | |  _| ' \/ -_)â”ƒ                                              
â”ƒ|_||_\__,_|_||_\__,_|_\___/__/ |_|  \_,_|_||_|_||_|_|_||_\__, |  \__|_||_\___|â”ƒ                                              
â”ƒ                                                         |___/                â”ƒ                                              
â”ƒ                                                                              â”ƒ                                              
â”ƒ                       _ __ _ _ ___  __ _ _ _ __ _ _ __                       â”ƒ                                              
â”ƒ                      | '_ \ '_/ _ \/ _` | '_/ _` | '  \                      â”ƒ                                              
â”ƒ                      | .__/_| \___/\__, |_| \__,_|_|_|_|                     â”ƒ                                              
â”ƒ                      |_|           |___/                                     â”ƒ                                              
â”ƒ                                                                              â”ƒ                                              
â”ƒ1. cargo new --bin                                                            â”ƒ                                              
â”ƒ- Calling the command line parsing logic with the argument values             â”ƒ                                              
â”ƒ- Setting up any other configuration                                          â”ƒ                                              
â”ƒ- Calling a run function in lib.rs           â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”»â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ- Handling the error if run returns an error â”ƒAll are rust basic entry:       â•³    _ _ _                                    â”ƒ
â”ƒ                                             â”ƒ1. main.rs is the running entry â•³   | (_) |__   _ _ ___                       â”ƒ
â”ƒ                                             â”ƒ2. lib.rs is the library entry  â•³   | | | '_ \_| '_(_-&lt;                       â”ƒ
â”ƒ                                             â”ƒâ•³â•³â•³â•³â•³â•³â•³â•³â•³â•³â•³â•³â•³â•³â•³â•³â•³â•³â•³â•³â•³â•³â•³â•³â•³â•³â•³â•³â•³â•³â•³â•³    |_|_|_.__(_)_| /__/                       â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”«                                                                              â”ƒ
                                              â”ƒ   _                 _ _               _ _   _   _          _           _     â”ƒ
                                              â”ƒ  | |_  __ _ _ _  __| | |___ ___  __ _| | | | |_| |_  ___  | |___  __ _(_)__  â”ƒ
                                              â”ƒ  | ' \/ _` | ' \/ _` | / -_|_-&lt; / _` | | | |  _| ' \/ -_) | / _ \/ _` | / _| â”ƒ
                                              â”ƒ  |_||_\__,_|_||_\__,_|_\___/__/ \__,_|_|_|  \__|_||_\___| |_\___/\__, |_\__| â”ƒ
                                              â”ƒ                                                                  |___/       â”ƒ
                                              â”ƒ        __   _   _          _           _          _     _                 _  â”ƒ
                                              â”ƒ   ___ / _| | |_| |_  ___  | |_ __ _ __| |__  __ _| |_  | |_  __ _ _ _  __| | â”ƒ
                                              â”ƒ  / _ \  _| |  _| ' \/ -_) |  _/ _` (_-&lt; / / / _` |  _| | ' \/ _` | ' \/ _` | â”ƒ
                                              â”ƒ  \___/_|    \__|_||_\___|  \__\__,_/__/_\_\ \__,_|\__| |_||_\__,_|_||_\__,_| â”ƒ
                                              â”ƒ                                                                              â”ƒ
                                              â”ƒ                                                                              â”ƒ
                                              â”ƒ                                                                              â”ƒ
                                              â”ƒ                                                                              â”ƒ
                                              â”ƒ                                                                              â”ƒ
                                              â”ƒ                                                                              â”ƒ
                                              â”ƒ                                                                              â”ƒ
                                              â”ƒ                                                                              â”ƒ
                                              â”ƒ                                                                              â”ƒ
                                              â”ƒ                                                                              â”ƒ
                                              â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
</code></pre>
</div>
</div>
<ul>
<li>
<p><a href="https://web.archive.org/web/20220703121446/https://juejin.cn/post/6919738138135003150">Rust æ¨¡å—ç³»ç»Ÿ - æ˜é‡‘</a></p>
<blockquote>
<p>åŒ…ï¼ˆpackageï¼‰åˆ›å»ºè§„åˆ™ï¼š</p>
</blockquote>
<pre><code>- ä¸€ä¸ªåŒ…ä¸­è‡³å¤šåªèƒ½åŒ…å«ä¸€ä¸ªåº“Crateã€‚
- åŒ…ä¸­å¯ä»¥åŒ…å«ä»»æ„å¤šä¸ªäºŒè¿›åˆ¶Crateã€‚
- åŒ…ä¸­è‡³å°‘åŒ…å«ä¸€ä¸ª crateï¼Œæ— è®ºæ˜¯åº“çš„è¿˜æ˜¯äºŒè¿›åˆ¶çš„ã€‚
- åŒ…ä¸­åº”è¯¥åŒ…å«ä¸€ä¸ª Cargo.toml é…ç½®æ–‡ä»¶ï¼Œç”¨æ¥è¯´æ˜å¦‚ä½•å»æ„å»ºè¿™äº› crateã€‚
</code></pre>
<blockquote>
<p>ç¤ºä¾‹ä¸€ï¼šcargo new --bin åˆ›å»ºä¸€ä¸ªåŒ…å« äºŒè¿›åˆ¶Crate çš„åŒ…
ç¤ºä¾‹äºŒï¼šcargo new --lib åˆ›å»ºä¸€ä¸ªåŒ…å«åº“(lib)crateçš„åŒ…
ç¤ºä¾‹ä¸‰ï¼š--libå’Œ--binä¸å¯ä»¥åŒæ—¶ä½¿ç”¨ï¼Œè¿™ç§æƒ…å†µä¸‹å¯ä»¥ç¤ºä¾‹ä¸€çš„åŸºç¡€ä¸Šè‡ªå·±åˆ›å»ºä¸€ä¸ªlib.rsæ–‡ä»¶</p>
</blockquote>
<ul>
<li>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†ä¸ç¨‹åºè¿è¡Œç›¸å…³çš„ä»£ç æ”¾åœ¨ main.rs æ–‡ä»¶ï¼Œå…¶ä»–çœŸæ­£çš„ä»»åŠ¡é€»è¾‘æ”¾åœ¨ lib.rs æ–‡ä»¶ä¸­ã€‚</li>
</ul>
</li>
<li>
<p><a href="https://web.archive.org/web/20220703121604/https://stackoverflow.com/questions/57756927/rust-modules-confusion-when-there-is-main-rs-and-lib-rs">Rust modules confusion when there is main.rs and lib.rs - Stack Overflow</a></p>
</li>
</ul>
<blockquote>
<p>è¿™é‡Œæœ‰äººè¯¦ç»†ä»‹ç»äº†åªæœ‰lib.rs/main.rsçš„æƒ…å†µä¸‹ï¼Œæ‰§è¡Œcargo runçš„æƒ…å†µã€‚æ²¡æœ‰main.rsçš„æ—¶å€™ï¼Œcargo runä¼šå‘Šè¯‰ä½ ï¼šerror: a bin target must be available for <code>cargo run</code></p>
</blockquote>
<ul>
<li><a href="https://www.reddit.com/r/rust/comments/c41iph/mainrs_vs_librs/">main.rs vs lib.rs : rust</a></li>
</ul>
<blockquote>
<p>A common pattern, even for binary-only crates, is to declare a &quot;library&quot; providing the majority of functionality, and then have main.rs just implement argument parsing and use that library.
This allows for integration tests written against the library, which might otherwise be hard to do with only main.rs.</p>
</blockquote>
<ul>
<li>
<p><a href="https://web.archive.org/web/20220703121647/https://users.rust-lang.org/t/main-rs-and-lib-rs-at-same-level/42499">Main.rs and lib.rs at same level - help - The Rust Programming Language Forum</a></p>
<blockquote>
<p>è¿™é‡Œæœ‰äººè·Ÿç€å®˜æ–¹æ–‡æ¡£åˆ¶ä½œå‘½ä»¤è¡Œå·¥å…·æ—¶å‘ç°åŒæ ·çš„ç–‘æƒ‘ç‚¹ï¼Œåº•ä¸‹æœ‰äººå¼•ç”¨äº†è¿™ä¸ªé“¾æ¥</p>
</blockquote>
<ul>
<li><a href="https://web.archive.org/web/20220424212816/https://doc.rust-lang.org/book/ch12-03-improving-error-handling-and-modularity.html#separation-of-concerns-for-binary-projects">Separation of Conerns for Binary Projects - The Rust Programming Language</a></li>
</ul>
</li>
</ul>
<div id="admonition-allocating-responsibilty-for-multiple-tasks" class="admonition quote">
<div class="admonition-title">
<p>Allocating Responsibilty for Multiple Tasks</p>
<p><a class="admonition-anchor-link" href="#admonition-allocating-responsibilty-for-multiple-tasks"></a></p>
</div>
<div>
<p>The organizational problem of allocating responsibility for multiple tasks to the main function is common to many binary projects. As a result, the Rust community has developed a process to use as a guideline for splitting the separate concerns of a binary program when main starts getting large. The process has the following steps:</p>
<ol>
<li>Split your program into a main.rs and a lib.rs and move your programâ€™s logic to lib.rs.</li>
<li>As long as your command line parsing logic is small, it can remain in main.rs.</li>
<li>When the command line parsing logic starts getting complicated, extract it from main.rs and move it to lib.rs.</li>
</ol>
<blockquote>
<p>The responsibilities that remain in the main function after this process should be limited to the following:</p>
</blockquote>
<ul>
<li>Calling the command line parsing logic with the argument values</li>
<li>Setting up any other configuration</li>
<li>Calling a run function in lib.rs</li>
<li>Handling the error if run returns an error</li>
</ul>
<blockquote>
<p>This pattern is about separating concerns:</p>
</blockquote>
<ol>
<li>main.rs handles running the program</li>
<li>and lib.rs handles all the logic of the task at hand. </li>
</ol>
<blockquote>
<p>Because you canâ€™t test the main function directly, this structure lets you test all of your programâ€™s logic by moving it into functions in lib.rs. 
The only code that remains in main.rs will be small enough to verify its correctness by reading it. 
Letâ€™s rework our program by following this process.</p>
</blockquote>
</div>
</div>
<div id="admonition-æ˜ç¡®èŒè´£-ç”¨mvcç±»æ¯”" class="admonition tip">
<div class="admonition-title">
<p>æ˜ç¡®èŒè´£, ç”¨MVCç±»æ¯”</p>
<p><a class="admonition-anchor-link" href="#admonition-æ˜ç¡®èŒè´£-ç”¨mvcç±»æ¯”"></a></p>
</div>
<div>
<blockquote>
<p>ä¹Ÿå°±æ˜¯è¯´</p>
</blockquote>
<ol>
<li>main.rsåªè´Ÿè´£è°ƒç”¨ã€é…ç½®å’Œå¤„ç†å¼‚å¸¸ï¼Œ ç±»ä¼¼View</li>
<li>lib.rsä¸»è¦è´Ÿè´£å…·ä½“çš„ä¸šåŠ¡é€»è¾‘, ç±»ä¼¼Control+Model</li>
</ol>
</div>
</div>
<div id="admonition-ç”¨crateæ¥åŒºåˆ†" class="admonition quote">
<div class="admonition-title">
<p>ç”¨crateæ¥åŒºåˆ†</p>
<p><a class="admonition-anchor-link" href="#admonition-ç”¨crateæ¥åŒºåˆ†"></a></p>
</div>
<div>
<p>Note that the main.rs does not declare any modules with mod, it only imports them with use (the distinction between the two is something a lot of new Rust programmers struggle with!).</p>
<p>The reason for this is that, in projects with both a lib.rs and a main.rs:</p>
<blockquote>
<p>Cargo effectively treats lib.rs as the root of your crate, and main.rs as a seperate binary that depends on your crate.</p>
</blockquote>
</div>
</div>
<div id="admonition-ç”¨binaryå’Œlibraryæ¥åŒºåˆ†" class="admonition quote">
<div class="admonition-title">
<p>ç”¨binaryå’Œlibraryæ¥åŒºåˆ†</p>
<p><a class="admonition-anchor-link" href="#admonition-ç”¨binaryå’Œlibraryæ¥åŒºåˆ†"></a></p>
</div>
<div>
<p><strong>main.rs is always the root of your binary, and lib.rs is always the root of your library.</strong></p>
<blockquote>
<p>The important things to realize are:</p>
</blockquote>
<ul>
<li>These two roots are compiled seperately, and have their own entirely seperate module structure.</li>
<li>When you use the mod keyword, you are creating a module, not importing a module.</li>
<li>You almost never want to have multiple mod statements for a single file, as you'll be duplicating the content.</li>
<li>If you want to use something from an existing module or from a library, that's what the use keyword is for.</li>
</ul>
<blockquote>
<p>Let's walk through your example:</p>
</blockquote>
<ol>
<li>In lib.rs, you use <strong>mod</strong> to declare that your library has two top level modules, cli and internal. There are corresponding files in the right place in your project, so Cargo knows how to link it all up. This part is fine, and what you intended to happen!</li>
<li>However, when you write mod lib in your main.rs, you're not importing your library! You're actually declaring that your binary has it's own top level module, which just happens to be called lib. Cargo then sees that there is a file called lib.rs in the folder, and links that in, even though that's not what you intended. It then sees that the lib.rs file has two mod statements and treats these as submodules of the binary's lib module. The files aren't in the right place for that to work, so compilation fails.</li>
<li>So the root cause of your issue is that you've effectively told the compiler to create your module structure twice, <strong>once in your library and once in your binary</strong>. </li>
<li>You really only meant to define these modules in your library, and then use them into your binary.</li>
</ol>
</div>
</div>
<h3 id="å®é™…åº”ç”¨substrateçš„substrate-node-template"><a class="header" href="#å®é™…åº”ç”¨substrateçš„substrate-node-template">å®é™…åº”ç”¨ï¼šSubstrateçš„substrate-node-template</a></h3>
<blockquote>
<p>æ ¹æ®å®˜æ–¹æ–‡æ¡£çŸ¥é“ï¼Œsubstrateæ˜¯å„ç§libåŒ…ï¼Œé‚£ä¹ˆå¼€å‘æ—¶å¦‚ä½•è¿è¡Œå‘¢ï¼Ÿ</p>
</blockquote>
<h4 id="åŒºåˆ«cargo-runä¸cargo-build"><a class="header" href="#åŒºåˆ«cargo-runä¸cargo-build">åŒºåˆ«cargo runä¸cargo build</a></h4>
<ul>
<li><a href="https://kaisery.github.io/trpl-zh-cn/ch01-03-hello-cargo.html#%E6%9E%84%E5%BB%BA%E5%B9%B6%E8%BF%90%E8%A1%8C-cargo-%E9%A1%B9%E7%9B%AE">æ„å»ºå¹¶è¿è¡ŒCargo - Rust ç¨‹åºè®¾è®¡è¯­è¨€ ç®€ä½“ä¸­æ–‡ç‰ˆ</a></li>
</ul>
<h4 id="åœ¨nodeåŒ…é‡Œé¢å­˜åœ¨mainrs"><a class="header" href="#åœ¨nodeåŒ…é‡Œé¢å­˜åœ¨mainrs">åœ¨nodeåŒ…é‡Œé¢å­˜åœ¨main.rs</a></h4>
<ol>
<li>æ ¹Cargo.tomlé‡Œé¢å‘Šè¯‰cargoï¼Œè¿™ä¸ªé¡¹ç›®æ€»å…±æœ‰ä¸‰ä¸ªåŒ…</li>
</ol>
<div id="admonition-æ ¹cargotoml" class="admonition info">
<div class="admonition-title">
<p>æ ¹Cargo.toml</p>
<p><a class="admonition-anchor-link" href="#admonition-æ ¹cargotoml"></a></p>
</div>
<div>
<pre><code class="language-toml">[workspace]
members = [
    &quot;node&quot;,
    &quot;pallets/template&quot;,
    &quot;runtime&quot;,
]
[profile.release]
panic = &quot;unwind&quot;
</code></pre>
</div>
</div>
<ol start="2">
<li>ç„¶åcargoæ‰¾åˆ°åŒ…å«main.rsçš„nodeåŒ…ä½œä¸ºå…¥å£</li>
</ol>
<div id="admonition-node-tree" class="admonition tip">
<div class="admonition-title">
<p>node tree</p>
<p><a class="admonition-anchor-link" href="#admonition-node-tree"></a></p>
</div>
<div>
<pre><code class="language-shell"> tree -L 2 node                                                                                                                                                                                                                         â”€â•¯
node
â”œâ”€â”€ Cargo.toml
â”œâ”€â”€ build.rs
â””â”€â”€ src
    â”œâ”€â”€ chain_spec.rs
    â”œâ”€â”€ cli.rs
    â”œâ”€â”€ command.rs
    â”œâ”€â”€ command_helper.rs
    â”œâ”€â”€ lib.rs
    â”œâ”€â”€ main.rs
    â”œâ”€â”€ rpc.rs
    â””â”€â”€ service.rs

1 directory, 10 files
</code></pre>
</div>
</div>
<ol start="3">
<li>node/main.rsé‡Œé¢ä½¿ç”¨äº†æ–‡ä»¶åcrate</li>
</ol>
<pre><pre class="playground"><code class="language-rust">//! Substrate Node Template CLI library.
#![warn(missing_docs)]

mod chain_spec;
#[macro_use]
// å¯¹åº”service.rs
mod service;
// å¯¹åº”cli.rs
mod cli;
// å¯¹åº”command.rs
mod command;
// å¯¹åº”command_helper.rs
mod command_helper;
// å¯¹åº”rpc.rs
mod rpc;

fn main() -&gt; sc_cli::Result&lt;()&gt; {
    command::run()

</code></pre></pre>
<h2 id="å‚è€ƒèµ„æº"><a class="header" href="#å‚è€ƒèµ„æº">å‚è€ƒèµ„æº</a></h2>
<h3 id="online-book"><a class="header" href="#online-book">online-book</a></h3>
<ul>
<li><a href="https://doc.rust-lang.org/rustc/what-is-rustc.html">What is rustc? - The rustc book</a></li>
</ul>
<h3 id="fragment"><a class="header" href="#fragment">fragment</a></h3>
<ul>
<li><a href="https://skyao.io/learning-rust/docs/build/rustc.html">Rustc | Rustå­¦ä¹ ç¬”è®°</a></li>
<li><a href="https://web.archive.org/web/20220621034241/https://pp88.org/rust.zui.jia.shi.jian.rust.zui.jia.shi.jian/cargo.xiang.mu.pei.zhi.ji.jie.gou/">Cargoé¡¹ç›®é…ç½®åŠç»“æ„ | çš®çš®çˆ¸(pp8)</a></li>
</ul>
<h3 id="local"><a class="header" href="#local">local</a></h3>

            </main>

            <!--            <script src="https://utteranc.es/client.js"-->
            <!--                    repo="RustMagazine/rust_magazine_2022"-->
            <!--                    issue-term="title"-->
            <!--                    theme="github-light"-->
            <!--                    crossorigin="anonymous"-->
            <!--                    async></script>-->

            <nav class="nav-wrapper" aria-label="Page navigation">
                <!-- Mobile navigation buttons -->
                    <a rel="prev" href="../../layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html" class="mobile-nav-chapters previous"
                       title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../../layer2_design_abstract/6_module_manage/rust_plugins.html" class="mobile-nav-chapters next"
                       title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>

                <div style="clear: both"></div>
            </nav>
        </div>
    </div>

    <nav class="nav-wide-wrapper" aria-label="Page navigation">
            <a rel="prev" href="../../layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html" class="nav-chapters previous" title="Previous chapter"
               aria-label="Previous chapter" aria-keyshortcuts="Left">
                <i class="fa fa-angle-left"></i>
            </a>

            <a rel="next" href="../../layer2_design_abstract/6_module_manage/rust_plugins.html" class="nav-chapters next" title="Next chapter"
               aria-label="Next chapter" aria-keyshortcuts="Right">
                <i class="fa fa-angle-right"></i>
            </a>
    </nav>

</div>




    <script type="text/javascript">
        window.playground_copyable = true;
    </script>

    <script src="../../ace.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../editor.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../mode-rust.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../theme-dawn.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../theme-tomorrow_night.js" type="text/javascript" charset="utf-8"></script>

    <script src="../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../mark.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../searcher.js" type="text/javascript" charset="utf-8"></script>

<script src="../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../../highlight.js" type="text/javascript" charset="utf-8"></script>
<script src="../../book.js" type="text/javascript" charset="utf-8"></script>

<!-- Custom JS scripts -->
    <script type="text/javascript" src="../../assets/mermaid/mermaid.min.js"></script>
    <script type="text/javascript" src="../../assets/mermaid/mermaid-init.js"></script>
    <script type="text/javascript" src="../../assets/smart-anchor.js"></script>
    <script type="text/javascript" src="../../assets/pagetoc/sidebar.js"></script>

</body>
</html>
