<!DOCTYPE HTML>
<html lang="cn" class="sidebar-visible no-js rust">
<head>
    <!-- Book generated using mdBook -->
    <meta charset="UTF-8">
    <title>Programming Anatomy In Rust 🦀</title>
        <meta name="robots" content="noindex"/>


    <!-- Custom HTML head -->
    
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta name="description" content="以rust为例分享学习编程常考虑的方方面面">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#ffffff"/>

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/general.css">
    <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

    <!-- Fonts -->
    <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

    <!-- Highlight.js Stylesheets -->
    <link rel="stylesheet" href="highlight.css">
    <link rel="stylesheet" href="tomorrow-night.css">
    <link rel="stylesheet" href="ayu-highlight.css">

    <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="assets/pagetoc/pagetoc_style.css">
        <link rel="stylesheet" href="assets/css/mdbook-admonish.css">

        <!-- MathJax -->
        <script async type="text/javascript"
                src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>
<body>
<!-- Provide site root to javascript -->
<script type="text/javascript">
    var path_to_root = "";
    var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "rust";
</script>

<!-- Work around some values being stored in localStorage wrapped in quotes -->
<script type="text/javascript">
    try {
        var theme = localStorage.getItem('mdbook-theme');
        var sidebar = localStorage.getItem('mdbook-sidebar');

        if (theme.startsWith('"') && theme.endsWith('"')) {
            localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
        }

        if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
            localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
        }
    } catch (e) {
    }
</script>

<!-- Set the theme before any content is loaded, prevents flash -->
<script type="text/javascript">
    var theme;
    try {
        theme = localStorage.getItem('mdbook-theme');
    } catch (e) {
    }
    if (theme === null || theme === undefined) {
        theme = default_theme;
    }
    var html = document.querySelector('html');
    html.classList.remove('no-js')
    html.classList.remove('rust')
    html.classList.add(theme);
    html.classList.add('js');
</script>

<!-- Hide / unhide sidebar before it is displayed -->
<script type="text/javascript">
    var html = document.querySelector('html');
    var sidebar = 'hidden';
    if (document.body.clientWidth >= 1080) {
        try {
            sidebar = localStorage.getItem('mdbook-sidebar');
        } catch (e) {
        }
        sidebar = sidebar || 'visible';
    }
    html.classList.remove('sidebar-visible');
    html.classList.add("sidebar-" + sidebar);
</script>

<nav id="sidebar" class="sidebar" aria-label="Table of contents">
    <div class="sidebar-scrollbox">
        <ol class="chapter"><li class="chapter-item expanded "><a href="../index.html"><strong aria-hidden="true">1.</strong> 总览</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="checklist.html"><strong aria-hidden="true">1.1.</strong> 待完成</a></li><li class="chapter-item expanded "><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html"><strong aria-hidden="true">1.2.</strong> Substrate介绍与解析</a></li><li class="chapter-item expanded "><a href="layer5_ecosystem/1_learning_resource/talks.html"><strong aria-hidden="true">1.3.</strong> Rust话题</a></li></ol></li><li class="chapter-item expanded "><a href="layer1_underlying_abstract/layer1_underlying_abstract.html"><strong aria-hidden="true">2.</strong> Layer1: 底层抽象</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="layer1_underlying_abstract/1_virtual_memory/virtual_memory.html"><strong aria-hidden="true">2.1.</strong> 虚拟内存管理</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="layer1_underlying_abstract/1_virtual_memory/memory_manage_safety.html"><strong aria-hidden="true">2.1.1.</strong> 内存管理与内存安全</a></li><li class="chapter-item expanded "><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html"><strong aria-hidden="true">2.1.2.</strong> 所有权三件套</a></li></ol></li><li class="chapter-item expanded "><a href="layer1_underlying_abstract/2_type_system/type_system.html"><strong aria-hidden="true">2.2.</strong> 类型系统</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="layer1_underlying_abstract/2_type_system/built_in_types.html"><strong aria-hidden="true">2.2.1.</strong> 基础内置类型</a></li><li class="chapter-item expanded "><a href="layer1_underlying_abstract/2_type_system/collections.html"><strong aria-hidden="true">2.2.2.</strong> 集合类型</a></li><li class="chapter-item expanded "><a href="layer1_underlying_abstract/2_type_system/user_defined_types.html"><strong aria-hidden="true">2.2.3.</strong> 自定义类型</a></li><li class="chapter-item expanded "><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html"><strong aria-hidden="true">2.2.4.</strong> 泛型、特征及特征对象</a></li></ol></li><li class="chapter-item expanded "><a href="layer1_underlying_abstract/3_language_grammar/language_grammar.html"><strong aria-hidden="true">2.3.</strong> 语言语法</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="layer1_underlying_abstract/3_language_grammar/annotation_rustdoc.html"><strong aria-hidden="true">2.3.1.</strong> 注释与文档(rustdoc)</a></li><li class="chapter-item expanded "><a href="layer1_underlying_abstract/3_language_grammar/keywords_glossary.html"><strong aria-hidden="true">2.3.2.</strong> 词法结构扫盲</a></li><li class="chapter-item expanded "><a href="layer1_underlying_abstract/3_language_grammar/binding_match_patterns.html"><strong aria-hidden="true">2.3.3.</strong> 绑定、赋值与匹配</a></li><li class="chapter-item expanded "><a href="layer1_underlying_abstract/3_language_grammar/logical_decision_loops.html"><strong aria-hidden="true">2.3.4.</strong> 逻辑判断与循环♻️</a></li><li class="chapter-item expanded "><a href="layer1_underlying_abstract/3_language_grammar/statements_expressions.html"><strong aria-hidden="true">2.3.5.</strong> 语句与表达式</a></li><li class="chapter-item expanded "><a href="layer1_underlying_abstract/3_language_grammar/code_quality.html"><strong aria-hidden="true">2.3.6.</strong> 代码质量</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="layer2_design_abstract/layer2_design_abstract.html"><strong aria-hidden="true">3.</strong> Layer2: 设计抽象</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="layer2_design_abstract/4_programming_paradigm/4_programming_paradigm.html"><strong aria-hidden="true">3.1.</strong> 编程范式</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="layer2_design_abstract/4_programming_paradigm/fp.html"><strong aria-hidden="true">3.1.1.</strong> 函数式编程</a></li><li class="chapter-item expanded "><a href="layer2_design_abstract/4_programming_paradigm/oop.html"><strong aria-hidden="true">3.1.2.</strong> 面向对象编程</a></li><li class="chapter-item expanded "><a href="layer2_design_abstract/4_programming_paradigm/gp.html"><strong aria-hidden="true">3.1.3.</strong> 泛型编程</a></li></ol></li><li class="chapter-item expanded "><a href="layer2_design_abstract/5_design_pattern/5_design_pattern.html"><strong aria-hidden="true">3.2.</strong> 设计模式</a></li><li class="chapter-item expanded "><a href="layer2_design_abstract/6_module_manage/6_module_manage.html"><strong aria-hidden="true">3.3.</strong> 模块管理</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="layer2_design_abstract/6_module_manage/module_system.html"><strong aria-hidden="true">3.3.1.</strong> 模块系统</a></li><li class="chapter-item expanded "><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html"><strong aria-hidden="true">3.3.2.</strong> Cargo与项目生命周期</a></li><li class="chapter-item expanded "><a href="layer2_design_abstract/6_module_manage/cargo_rustc.html"><strong aria-hidden="true">3.3.3.</strong> Cargo run: rustc</a></li><li class="chapter-item expanded "><a href="layer2_design_abstract/6_module_manage/rust_plugins.html"><strong aria-hidden="true">3.3.4.</strong> Rust扩展工具</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="layer3_task_abstract/layer3_task_abstract.html"><strong aria-hidden="true">4.</strong> Layer3: 任务抽象</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="layer3_task_abstract/7_concurrency/7_concurrency.html"><strong aria-hidden="true">4.1.</strong> 并发编程</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="layer3_task_abstract/7_concurrency/io_models.html"><strong aria-hidden="true">4.1.1.</strong> 系统IO模型</a></li><li class="chapter-item expanded "><a href="layer3_task_abstract/7_concurrency/1_multi_models/multi_models.html"><strong aria-hidden="true">4.1.2.</strong> 多线程模型</a></li><li class="chapter-item expanded "><a href="layer3_task_abstract/7_concurrency/2_async_models/async_models.html"><strong aria-hidden="true">4.1.3.</strong> 异步模型</a></li></ol></li><li class="chapter-item expanded "><a href="layer3_task_abstract/8_meta_programming/8_meta_programming.html"><strong aria-hidden="true">4.2.</strong> 元编程</a></li></ol></li><li class="chapter-item expanded "><a href="layer4_protocol_abstract/layer4_protocol_abstract.html"><strong aria-hidden="true">5.</strong> Layer4: 协议抽象</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="layer4_protocol_abstract/9_multilingual_programming/9_multilingual_programming.html"><strong aria-hidden="true">5.1.</strong> 跨语言编程</a></li><li class="chapter-item expanded "><a href="layer4_protocol_abstract/10_computer_network/10_computer_network.html"><strong aria-hidden="true">5.2.</strong> 计算机网络</a></li></ol></li><li class="chapter-item expanded "><a href="layer5_ecosystem/layer5_ecosystem.html"><strong aria-hidden="true">6.</strong> Layer5: 生态环境</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="layer5_ecosystem/1_learning_resource/learning_resource.html"><strong aria-hidden="true">6.1.</strong> 学习资源</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="layer5_ecosystem/1_learning_resource/1_books/books.html"><strong aria-hidden="true">6.1.1.</strong> 书籍整理</a></li><li class="chapter-item expanded "><a href="layer5_ecosystem/1_learning_resource/2_courses/courses.html"><strong aria-hidden="true">6.1.2.</strong> 线上课程</a></li><li class="chapter-item expanded "><a href="layer5_ecosystem/1_learning_resource/3_blogs/blogs.html"><strong aria-hidden="true">6.1.3.</strong> 博客文章</a></li><li class="chapter-item expanded "><a href="layer5_ecosystem/1_learning_resource/4_videos/videos.html"><strong aria-hidden="true">6.1.4.</strong> 在线视频</a></li><li class="chapter-item expanded "><a href="layer5_ecosystem/1_learning_resource/5_projects/projects.html"><strong aria-hidden="true">6.1.5.</strong> 开源项目</a></li></ol></li><li class="chapter-item expanded "><a href="layer5_ecosystem/2_lang_update/lang_update.html"><strong aria-hidden="true">6.2.</strong> 官方动态</a></li><li class="chapter-item expanded "><a href="layer5_ecosystem/3_community/community.html"><strong aria-hidden="true">6.3.</strong> 社区热点</a></li><li class="chapter-item expanded "><a href="layer5_ecosystem/4_academic/academic.html"><strong aria-hidden="true">6.4.</strong> 学术讨论</a></li><li class="chapter-item expanded "><a href="layer5_ecosystem/5_open_source/open_source.html"><strong aria-hidden="true">6.5.</strong> 开源观察</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="layer5_ecosystem/5_open_source/1_underlying/underlying.html"><strong aria-hidden="true">6.5.1.</strong> 底层开发</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="layer5_ecosystem/5_open_source/1_underlying/command/command.html"><strong aria-hidden="true">6.5.1.1.</strong> 命令行工具</a></li><li class="chapter-item expanded "><a href="layer5_ecosystem/5_open_source/1_underlying/data/data.html"><strong aria-hidden="true">6.5.1.2.</strong> 数据处理</a></li><li class="chapter-item expanded "><a href="layer5_ecosystem/5_open_source/1_underlying/embedded/embedded.html"><strong aria-hidden="true">6.5.1.3.</strong> 嵌入式</a></li><li class="chapter-item expanded "><a href="layer5_ecosystem/5_open_source/1_underlying/os/os.html"><strong aria-hidden="true">6.5.1.4.</strong> 系统开发</a></li><li class="chapter-item expanded "><a href="layer5_ecosystem/5_open_source/1_underlying/performance/performance.html"><strong aria-hidden="true">6.5.1.5.</strong> 性能工具</a></li></ol></li><li class="chapter-item expanded "><a href="layer5_ecosystem/5_open_source/2_network/network.html"><strong aria-hidden="true">6.5.2.</strong> 网络相关</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="layer5_ecosystem/5_open_source/2_network/cloud/cloud.html"><strong aria-hidden="true">6.5.2.1.</strong> 云原生</a></li><li class="chapter-item expanded "><a href="layer5_ecosystem/5_open_source/2_network/frontend/frontend.html"><strong aria-hidden="true">6.5.2.2.</strong> 前端基建</a></li><li class="chapter-item expanded "><a href="layer5_ecosystem/5_open_source/2_network/network/network.html"><strong aria-hidden="true">6.5.2.3.</strong> 网络基建</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs.html"><strong aria-hidden="true">6.5.2.3.1.</strong> IPFS: 星际文件系统(InterPlanetary File System)</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs_website.html"><strong aria-hidden="true">6.5.2.3.1.1.</strong> 利用IPFS构建自己的去中心化分布式网站</a></li><li class="chapter-item expanded "><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs_pubsub.html"><strong aria-hidden="true">6.5.2.3.1.2.</strong> IPFS pubsub功能</a></li><li class="chapter-item expanded "><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs_companion.html"><strong aria-hidden="true">6.5.2.3.1.3.</strong> IPFS伴侣插件</a></li><li class="chapter-item expanded "><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs_ngrok.html"><strong aria-hidden="true">6.5.2.3.1.4.</strong> IPFS+ngrok</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="layer5_ecosystem/5_open_source/2_network/web/web.html"><strong aria-hidden="true">6.5.2.4.</strong> web开发</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="layer5_ecosystem/5_open_source/2_network/web/webassembly_try.html"><strong aria-hidden="true">6.5.2.4.1.</strong> 基于Rust尝试WebAssembly</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="layer5_ecosystem/5_open_source/3_media/media.html"><strong aria-hidden="true">6.5.3.</strong> 多媒体</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="layer5_ecosystem/5_open_source/3_media/av/av.html"><strong aria-hidden="true">6.5.3.1.</strong> 音视频处理</a></li><li class="chapter-item expanded "><a href="layer5_ecosystem/5_open_source/3_media/game/game.html"><strong aria-hidden="true">6.5.3.2.</strong> 游戏开发</a></li></ol></li><li class="chapter-item expanded "><a href="layer5_ecosystem/5_open_source/4_other/other.html"><strong aria-hidden="true">6.5.4.</strong> 其他</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="layer5_ecosystem/5_open_source/4_other/lang-with-rust/lang_with_rust.html"><strong aria-hidden="true">6.5.4.1.</strong> Rust与其他语言</a></li><li class="chapter-item expanded "><a href="layer5_ecosystem/5_open_source/4_other/scientific-research/scientific_research.html"><strong aria-hidden="true">6.5.4.2.</strong> 科学艺术研究</a></li><li class="chapter-item expanded "><a href="layer5_ecosystem/5_open_source/4_other/tools/tools.html"><strong aria-hidden="true">6.5.4.3.</strong> 其他工具</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="layer5_ecosystem/6_security/security.html"><strong aria-hidden="true">6.6.</strong> 安全参考</a></li><li class="chapter-item expanded "><a href="layer5_ecosystem/7_business/business.html"><strong aria-hidden="true">6.7.</strong> 商业观察</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="layer5_ecosystem/7_business/blockchain/blockchain.html"><strong aria-hidden="true">6.7.1.</strong> 区块链</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="layer5_ecosystem/7_business/blockchain/build-a-block-in-rust.html"><strong aria-hidden="true">6.7.1.1.</strong> 使用rust建立一个简单的区块链</a></li><li class="chapter-item expanded "><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html"><strong aria-hidden="true">6.7.1.2.</strong> Substrate介绍与解析</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html"><strong aria-hidden="true">6.7.1.2.1.</strong> Substrate教程梳理</a></li><li class="chapter-item expanded "><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html"><strong aria-hidden="true">6.7.1.2.2.</strong> 深入Substrate Pallet</a></li><li class="chapter-item expanded "><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_runtime.html"><strong aria-hidden="true">6.7.1.2.3.</strong> 深入Substrate Runtime</a></li><li class="chapter-item expanded "><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_ref.html"><strong aria-hidden="true">6.7.1.2.4.</strong> Substrate备忘</a></li><li class="chapter-item expanded "><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html"><strong aria-hidden="true">6.7.1.2.5.</strong> Substrate市场：Rutimes、Pallets和Projects</a></li><li class="chapter-item expanded "><a href="layer5_ecosystem/7_business/blockchain/substrate/awesome_substrate.html"><strong aria-hidden="true">6.7.1.2.6.</strong> Substrate惊奇资源</a></li></ol></li><li class="chapter-item expanded "><a href="layer5_ecosystem/7_business/blockchain/nervos_ckb_anatomy.html"><strong aria-hidden="true">6.7.1.3.</strong> Nervos CKB介绍与解析</a></li><li class="chapter-item expanded "><a href="layer5_ecosystem/7_business/blockchain/solana.html"><strong aria-hidden="true">6.7.1.4.</strong> Solana</a></li></ol></li><li class="chapter-item expanded "><a href="layer5_ecosystem/7_business/practices/practices.html"><strong aria-hidden="true">6.7.2.</strong> 生产实践</a></li><li class="chapter-item expanded "><a href="layer5_ecosystem/7_business/products/products.html"><strong aria-hidden="true">6.7.3.</strong> 优秀产品</a></li></ol></li><li class="chapter-item expanded "><a href="layer5_ecosystem/8_libs/libs.html"><strong aria-hidden="true">6.8.</strong> 基础库</a></li><li class="chapter-item expanded "><a href="layer5_ecosystem/9_frameworks/frameworks.html"><strong aria-hidden="true">6.9.</strong> 框架引擎</a></li></ol></li><li class="chapter-item expanded "><a href="checklist.html">Checklist</a></li></ol>
    </div>
    <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
</nav>

<div id="page-wrapper" class="page-wrapper">

    <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
        <div id="menu-bar" class="menu-bar sticky bordered">
            <div class="left-buttons">
                <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents"
                        aria-label="Toggle Table of Contents" aria-controls="sidebar">
                    <i class="fa fa-bars"></i>
                </button>
                <button id="theme-toggle" class="icon-button" type="button" title="Change theme"
                        aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                    <i class="fa fa-paint-brush"></i>
                </button>
                <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                    <li role="none">
                        <button role="menuitem" class="theme" id="light">Light</button>
                    </li>
                    <li role="none">
                        <button role="menuitem" class="theme" id="rust">Rust (default)</button>
                    </li>
                    <li role="none">
                        <button role="menuitem" class="theme" id="coal">Coal</button>
                    </li>
                    <li role="none">
                        <button role="menuitem" class="theme" id="navy">Navy</button>
                    </li>
                    <li role="none">
                        <button role="menuitem" class="theme" id="ayu">Ayu</button>
                    </li>
                </ul>
                    <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)"
                            aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S"
                            aria-controls="searchbar">
                        <i class="fa fa-search"></i>
                    </button>
            </div>

            <h1 class="menu-title">Programming Anatomy In Rust 🦀</h1>
            <h4 class="menu-bar"><a href="https://kuanhsiaokuo.github.io/think-tool-kit/">保持批判，有所取舍，知行合一, 方见真我</a> -- 练武不练功
                到头一场空 -- 《赛博英雄传》 </h4>
            <div class="right-buttons">
                    <a href="print.html" title="Print this book" aria-label="Print this book">
                        <i id="print-button" class="fa fa-print"></i>
                    </a>
                    <a href="https://github.com/KuanHsiaoKuo/programming_anatomy_in_rust.git" title="Git repository" aria-label="Git repository">
                        <i id="git-repository-button" class="fa fa-rust"></i>
                    </a>
            </div>
        </div>

            <div id="search-wrapper" class="hidden">
                <form id="searchbar-outer" class="searchbar-outer">
                    <input type="search" name="search" id="searchbar" name="searchbar"
                           placeholder="Search this book ..." aria-controls="searchresults-outer"
                           aria-describedby="searchresults-header">
                </form>
                <div id="searchresults-outer" class="searchresults-outer hidden">
                    <div id="searchresults-header" class="searchresults-header"></div>
                    <ul id="searchresults">
                    </ul>
                </div>
            </div>

        <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
        <script type="text/javascript">
            document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
            document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
            Array.from(document.querySelectorAll('#sidebar a')).forEach(function (link) {
                link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
            });
        </script>

        <div id="content" class="content">
            <main>

                <!-- Page table of contents -->
                <div class="sidetoc">
                    <nav class="pagetoc"></nav>
                </div>
                <h1 id="编程解剖-in-rust"><a class="header" href="#编程解剖-in-rust">编程解剖 in rust</a></h1>
<blockquote>
<p>以rust为例分享学习编程常考虑的方方面面</p>
</blockquote>
<!--ts-->
<ul>
<li><a href="../index.html#%E7%BC%96%E7%A8%8B%E8%A7%A3%E5%89%96-in-rust">编程解剖 in rust</a>
<ul>
<li><a href="../index.html#%E6%9C%AC%E5%9C%B0%E8%BF%90%E8%A1%8C">本地运行</a></li>
<li><a href="../index.html#git-lfs%E9%85%8D%E7%BD%AE">git lfs配置</a></li>
<li><a href="../index.html#%E9%A1%B9%E7%9B%AE%E5%9F%BA%E7%A1%80%E7%BB%93%E6%9E%84">项目基础结构</a></li>
<li><a href="../index.html#%E7%94%A8%E5%88%B0%E7%9A%84%E5%B7%A5%E5%85%B7">用到的工具</a>
<ul>
<li><a href="../index.html#mdbook-checklist-%E6%95%B4%E7%90%86%E5%BE%85%E5%8A%9E%E4%BA%8B%E9%A1%B9">mdbook-checklist: 整理待办事项</a></li>
<li><a href="../index.html#mdbook-pagetoc-%E6%B7%BB%E5%8A%A0%E4%B8%9A%E5%86%85%E7%9B%AE%E5%BD%95">mdbook-pagetoc: 添加业内目录</a></li>
<li><a href="../index.html#mdbook-admonish-%E4%BD%BF%E7%94%A8%E6%96%B0%E7%9A%84css%E6%96%87%E4%BB%B6">mdbook-admonish: 使用新的css文件</a>
<ul>
<li><a href="../index.html#%E7%9B%B8%E5%85%B3%E8%B5%84%E6%BA%90">相关资源</a></li>
<li><a href="../index.html#%E7%89%B9%E5%88%AB%E8%AF%AD%E6%B3%95">特别语法</a>
<ul>
<li><a href="../index.html#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%87%E9%A2%98">自定义标题</a></li>
<li><a href="../index.html#%E5%86%85%E5%B5%8C%E4%BB%A3%E7%A0%81">内嵌代码</a></li>
<li><a href="../index.html#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%B7%E5%BC%8F">自定义样式</a></li>
<li><a href="../index.html#%E5%8F%AF%E6%8A%98%E5%8F%A0">可折叠</a></li>
</ul>
</li>
<li><a href="../index.html#%E5%B8%B8%E7%94%A8%E6%A0%BC%E5%BC%8F">常用格式</a>
<ul>
<li><a href="../index.html#note">note</a></li>
<li><a href="../index.html#abstract-summary-tldr">abstract, summary, tldr</a></li>
<li><a href="../index.html#info-todo">info, todo</a></li>
<li><a href="../index.html#tip-hint-important">tip, hint, important</a></li>
<li><a href="../index.html#success-check-done">success, check, done</a></li>
<li><a href="../index.html#question-help-faq">question, help, faq</a></li>
<li><a href="../index.html#warning-caution-attention">warning, caution, attention</a></li>
<li><a href="../index.html#failure-fail-missing">failure, fail, missing</a></li>
<li><a href="../index.html#danger-error">danger, error</a></li>
<li><a href="../index.html#bug">bug</a></li>
<li><a href="../index.html#example">example</a></li>
<li><a href="../index.html#quote-cite">quote, cite</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="../index.html#github-action">github action</a></li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:05 UTC 2022 -->
<!--te-->
<h2 id="本地运行"><a class="header" href="#本地运行">本地运行</a></h2>
<pre><code class="language-shell">cargo install mdbook
mdbook serve
</code></pre>
<h2 id="git-lfs配置"><a class="header" href="#git-lfs配置">git lfs配置</a></h2>
<ul>
<li><a href="https://git-lfs.github.com/">Git Large File Storage | Git Large File Storage (LFS) replaces large files such as audio samples, videos, datasets, and graphics with text pointers inside Git, while storing the file contents on a remote server like GitHub.com or GitHub Enterprise.</a></li>
</ul>
<pre><code>git lfs install 
git lfs track '*.img'
</code></pre>
<h2 id="项目基础结构"><a class="header" href="#项目基础结构">项目基础结构</a></h2>
<p>{{#check <name> | <description>}}</p>
<ol>
<li>每个文件夹下的同名md文件介绍当前文件夹的内容</li>
<li>关于待完成内容：主要基于mdbook-checklist插件</li>
</ol>
<pre><code class="language-shell">    - [待完成](checklist.md) 
</code></pre>
<ol start="3">
<li>添加待完成锚点的格式</li>
</ol>
<blockquote>
<p>check空格之后的内容不能有空格, 且只能为英文
“ | “之后的内容可以有空格，可以为中文</p>
</blockquote>
<pre><code class="language-shell">&lt;a id=&quot;Note-1&quot;&gt;&lt;/a&gt;Note-1
</code></pre>
<ul>
<li>checklist页面渲染效果：</li>
</ul>
<pre><code class="language-none">- &lt;SUMMARY对应标题名&gt;
    - [This is an important note](Note-1)
</code></pre>
<blockquote>
<p>这种写法会自动在本地生成md文件：src/checklist.md, 但是不用管它，最后渲染还是以mdbook-checklist的内容为准</p>
</blockquote>
<h2 id="用到的工具"><a class="header" href="#用到的工具">用到的工具</a></h2>
<blockquote>
<p>来自：<a href="https://kuanhsiaokuo.github.io/apple_power_user/app_deepin/mdbook_deepin.html">Mdbook - Apple Power User</a></p>
</blockquote>
<h3 id="mdbook-checklist-整理待办事项"><a class="header" href="#mdbook-checklist-整理待办事项">mdbook-checklist: 整理待办事项</a></h3>
<p><a href="https://github.com/ANSSI-FR/mdbook-checklist">ANSSI-FR/mdbook-checklist: mdbook preprocessor for generating checklists and indexes</a></p>
<pre><code class="language-shell">cargo install mdbook-checklist
</code></pre>
<p><a href="https://crates.io/crates/mdbook-checklist">mdbook-checklist - crates.io: Rust Package Registry</a></p>
<h3 id="mdbook-pagetoc-添加业内目录"><a class="header" href="#mdbook-pagetoc-添加业内目录">mdbook-pagetoc: 添加业内目录</a></h3>
<p><a href="https://github.com/JorelAli/mdBook-pagetoc">JorelAli/mdBook-pagetoc: A page table of contents for mdBook</a></p>
<h3 id="mdbook-admonish-使用新的css文件"><a class="header" href="#mdbook-admonish-使用新的css文件">mdbook-admonish: 使用新的css文件</a></h3>
<h4 id="相关资源"><a class="header" href="#相关资源">相关资源</a></h4>
<ul>
<li><a href="https://github.com/tommilligan/mdbook-admonish">tommilligan/mdbook-admonish: A preprocessor for mdbook to add Material Design admonishments.</a></li>
<li><a href="https://crates.io/crates/mdbook-admonish">mdbook-admonish - crates.io: Rust Package Registry</a></li>
<li><a href="https://tommilligan.github.io/mdbook-admonish/">Overview - The mdbook-admonish book</a></li>
<li><a href="https://squidfunk.github.io/mkdocs-material/reference/admonitions/#usage">Admonitions - Material for MkDocs</a></li>
</ul>
<blockquote>
<p>All supported directives are listed below.</p>
</blockquote>
<h4 id="特别语法"><a class="header" href="#特别语法">特别语法</a></h4>
<h5 id="自定义标题"><a class="header" href="#自定义标题">自定义标题</a></h5>
<div id="admonition-数据损失" class="admonition warning">
<div class="admonition-title">
<p>数据损失</p>
<p><a class="admonition-anchor-link" href="../index.html#admonition-数据损失"></a></p>
</div>
<div>
<p>The following steps can lead to irrecoverable data corruption.</p>
</div>
</div>
<h5 id="内嵌代码"><a class="header" href="#内嵌代码">内嵌代码</a></h5>
<div id="admonition-内嵌代码" class="admonition bug">
<div class="admonition-title">
<p>内嵌代码</p>
<p><a class="admonition-anchor-link" href="../index.html#admonition-内嵌代码"></a></p>
</div>
<div>
<p>This syntax won’t work in Python 3:</p>
<pre><code class="language-python">print &quot;Hello, world!&quot;
</code></pre>
</div>
</div>
<h5 id="自定义样式"><a class="header" href="#自定义样式">自定义样式</a></h5>
<div id="admonition-note" class="admonition note custom-0 custom-1">
<div class="admonition-title">
<p>Note</p>
<p><a class="admonition-anchor-link" href="../index.html#admonition-note"></a></p>
</div>
<div>
<p>Styled with my custom CSS class.</p>
</div>
</div>
<h5 id="可折叠"><a class="header" href="#可折叠">可折叠</a></h5>
<details id="admonition-note-1" class="admonition note">
<summary class="admonition-title">
<p>Note</p>
<p><a class="admonition-anchor-link" href="../index.html#admonition-note-1"></a></p>
</summary>
<div>
<p>Content will be hidden initially.</p>
</div>
</details>
<h4 id="常用格式"><a class="header" href="#常用格式">常用格式</a></h4>
<h5 id="note"><a class="header" href="#note">note</a></h5>
<div id="admonition-note-2" class="admonition note">
<div class="admonition-title">
<p>Note</p>
<p><a class="admonition-anchor-link" href="../index.html#admonition-note-2"></a></p>
</div>
<div>
<p>Rust is a multi-paradigm, general-purpose programming language designed for performance and safety, especially safe concurrency.</p>
</div>
</div>
<h5 id="abstract-summary-tldr"><a class="header" href="#abstract-summary-tldr"><code>abstract</code>, <code>summary</code>, <code>tldr</code></a></h5>
<div id="admonition-abstract" class="admonition abstract">
<div class="admonition-title">
<p>Abstract</p>
<p><a class="admonition-anchor-link" href="../index.html#admonition-abstract"></a></p>
</div>
<div>
<p>Rust is a multi-paradigm, general-purpose programming language designed for performance and safety, especially safe concurrency.</p>
</div>
</div>
<h5 id="info-todo"><a class="header" href="#info-todo"><code>info</code>, <code>todo</code></a></h5>
<div id="admonition-info" class="admonition info">
<div class="admonition-title">
<p>Info</p>
<p><a class="admonition-anchor-link" href="../index.html#admonition-info"></a></p>
</div>
<div>
<p>Rust is a multi-paradigm, general-purpose programming language designed for performance and safety, especially safe concurrency.</p>
</div>
</div>
<h5 id="tip-hint-important"><a class="header" href="#tip-hint-important"><code>tip</code>, <code>hint</code>, <code>important</code></a></h5>
<div id="admonition-tip" class="admonition tip">
<div class="admonition-title">
<p>Tip</p>
<p><a class="admonition-anchor-link" href="../index.html#admonition-tip"></a></p>
</div>
<div>
<p>Rust is a multi-paradigm, general-purpose programming language designed for performance and safety, especially safe concurrency.</p>
</div>
</div>
<h5 id="success-check-done"><a class="header" href="#success-check-done"><code>success</code>, <code>check</code>, <code>done</code></a></h5>
<div id="admonition-success" class="admonition success">
<div class="admonition-title">
<p>Success</p>
<p><a class="admonition-anchor-link" href="../index.html#admonition-success"></a></p>
</div>
<div>
<p>Rust is a multi-paradigm, general-purpose programming language designed for performance and safety, especially safe concurrency.</p>
</div>
</div>
<h5 id="question-help-faq"><a class="header" href="#question-help-faq"><code>question</code>, <code>help</code>, <code>faq</code></a></h5>
<div id="admonition-question" class="admonition question">
<div class="admonition-title">
<p>Question</p>
<p><a class="admonition-anchor-link" href="../index.html#admonition-question"></a></p>
</div>
<div>
<p>Rust is a multi-paradigm, general-purpose programming language designed for performance and safety, especially safe concurrency.</p>
</div>
</div>
<h5 id="warning-caution-attention"><a class="header" href="#warning-caution-attention"><code>warning</code>, <code>caution</code>, <code>attention</code></a></h5>
<div id="admonition-warning" class="admonition warning">
<div class="admonition-title">
<p>Warning</p>
<p><a class="admonition-anchor-link" href="../index.html#admonition-warning"></a></p>
</div>
<div>
<p>Rust is a multi-paradigm, general-purpose programming language designed for performance and safety, especially safe concurrency.</p>
</div>
</div>
<h5 id="failure-fail-missing"><a class="header" href="#failure-fail-missing"><code>failure</code>, <code>fail</code>, <code>missing</code></a></h5>
<div id="admonition-failure" class="admonition failure">
<div class="admonition-title">
<p>Failure</p>
<p><a class="admonition-anchor-link" href="../index.html#admonition-failure"></a></p>
</div>
<div>
<p>Rust is a multi-paradigm, general-purpose programming language designed for performance and safety, especially safe concurrency.</p>
</div>
</div>
<h5 id="danger-error"><a class="header" href="#danger-error"><code>danger</code>, <code>error</code></a></h5>
<div id="admonition-danger" class="admonition danger">
<div class="admonition-title">
<p>Danger</p>
<p><a class="admonition-anchor-link" href="../index.html#admonition-danger"></a></p>
</div>
<div>
<p>Rust is a multi-paradigm, general-purpose programming language designed for performance and safety, especially safe concurrency.</p>
</div>
</div>
<h5 id="bug"><a class="header" href="#bug"><code>bug</code></a></h5>
<div id="admonition-bug" class="admonition bug">
<div class="admonition-title">
<p>Bug</p>
<p><a class="admonition-anchor-link" href="../index.html#admonition-bug"></a></p>
</div>
<div>
<p>Rust is a multi-paradigm, general-purpose programming language designed for performance and safety, especially safe concurrency.</p>
</div>
</div>
<h5 id="example"><a class="header" href="#example"><code>example</code></a></h5>
<div id="admonition-example" class="admonition example">
<div class="admonition-title">
<p>Example</p>
<p><a class="admonition-anchor-link" href="../index.html#admonition-example"></a></p>
</div>
<div>
<p>Rust is a multi-paradigm, general-purpose programming language designed for performance and safety, especially safe concurrency.</p>
</div>
</div>
<h5 id="quote-cite"><a class="header" href="#quote-cite"><code>quote</code>, <code>cite</code></a></h5>
<div id="admonition-quote" class="admonition quote">
<div class="admonition-title">
<p>Quote</p>
<p><a class="admonition-anchor-link" href="../index.html#admonition-quote"></a></p>
</div>
<div>
<p>Rust is a multi-paradigm, general-purpose programming language designed for performance and safety, especially safe concurrency.</p>
</div>
</div>
<h2 id="github-action"><a class="header" href="#github-action">github action</a></h2>
<ul>
<li><a href="https://github.com/marketplace/actions/rust-cargo-install">rust-cargo-install · Actions · GitHub Marketplace</a></li>
<li><a href="https://github.com/ekalinin/github-markdown-toc">ekalinin/github-markdown-toc: Easy TOC creation for GitHub README.md</a></li>
</ul>
<div id="admonition-基于github-repository设置secrects-token" class="admonition info">
<div class="admonition-title">
<p>基于github repository设置secrects token</p>
<p><a class="admonition-anchor-link" href="../index.html#admonition-基于github-repository设置secrects-token"></a></p>
</div>
<div>
<blockquote>
<p><a href="https://michaelcurrin.github.io/code-cookbook/recipes/ci-cd/github-actions/tokens/access-token.html">Access Token | Code Cookbook</a></p>
</blockquote>
<ol>
<li>设置token：<a href="https://github.com/settings/tokens">Personal access tokens</a></li>
<li>给指定repository设置secret：repository -&gt; settings -&gt; secrets -&gt; Actions</li>
<li>新建一个名为<strong>GH_MD_TOC</strong>的repository secret，将第一步的token设置进去</li>
<li>将这个secret设置为action环境变量</li>
</ol>
</div>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="待完成"><a class="header" href="#待完成">待完成</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="substrate介绍与源码解读"><a class="header" href="#substrate介绍与源码解读">Substrate介绍与源码解读</a></h1>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/what_is_substrate.png" alt="what_is_substrate" /></p>
<!--ts-->
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#substrate%E4%BB%8B%E7%BB%8D%E4%B8%8E%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB">Substrate介绍与源码解读</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#gavin-wookpolkadot-and-substrate">Gavin Wook、Polkadot and Substrate</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#gavin-wook%E4%B8%8E%E6%B3%A2%E5%8D%A1%E8%B7%A8%E9%93%BE">Gavin Wook与波卡跨链</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E4%BB%8E%E6%B3%A2%E5%8D%A1%E5%88%B0substrate">从波卡到Substrate</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E8%B7%A8%E9%93%BE%E7%9A%84%E9%87%8D%E8%A6%81%E6%80%A7">跨链的重要性</a></li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E6%80%BB%E4%BD%93%E8%AE%BE%E8%AE%A1">总体设计</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E5%B8%B8%E8%A7%81%E5%8C%BA%E5%9D%97%E9%93%BE%E8%AE%BE%E8%AE%A1">常见区块链设计</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E5%8C%BA%E5%9D%97%E9%93%BE%E7%B3%BB%E7%BB%9F%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86">区块链系统基础部分</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E9%93%BE%E7%9A%84%E5%8A%9F%E8%83%BD">链的功能</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#substrate%E7%90%86%E5%BF%B5">Substrate理念</a></li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E5%85%88%E8%AE%A4%E8%AF%86%E4%B8%80%E4%B8%8B%E4%BB%80%E4%B9%88%E6%98%AF%E5%8C%BA%E5%9D%97%E9%93%BE%E6%A1%86%E6%9E%B6">先认识一下：什么是区块链框架</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E6%8E%A5%E7%9D%80%E8%AF%B4%E8%AF%B4substrate%E4%B8%8Eweb3">接着说说Substrate与web3</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E7%94%A8web%E6%A1%86%E6%9E%B6%E6%B8%B8%E6%88%8F%E5%BC%95%E6%93%8E%E7%B1%BB%E6%AF%94">用web框架、游戏引擎类比</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#substrate-architecture">Substrate Architecture</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E4%BB%8Erust%E7%9C%8Bsubstrate">从Rust看Substrate</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E5%BC%80%E5%8F%91%E8%80%85%E5%8F%AA%E9%9C%80%E8%A6%81%E5%85%B3%E6%B3%A8runtime%E9%93%BE%E5%8A%9F%E8%83%BD">开发者只需要关注Runtime(链功能)</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E6%98%8E%E6%99%B0runtime">明晰Runtime</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E5%88%A4%E6%96%AD%E6%A0%87%E5%87%86">判断标准</a></li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#substrate%E7%9A%84runtime">Substrate的Runtime</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E4%B8%AD%E5%BF%83%E5%8C%96%E5%8D%87%E7%BA%A7%E6%B5%81%E7%A8%8B">中心化升级流程</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E6%97%A0%E5%A4%AE%E5%8C%96%E5%8D%87%E7%BA%A7%E6%B5%81%E7%A8%8B%E5%8E%9F%E5%85%88">无央化升级流程(原先)</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#substrate%E7%9A%84%E4%B8%8D%E5%90%8C">Substrate的不同</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E4%BB%A5%E5%A4%AA%E5%9D%8A%E5%90%88%E7%BA%A6%E6%9B%B4%E6%96%B0%E7%AD%96%E7%95%A5">以太坊合约更新策略</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#substrate%E5%AF%B9%E5%BA%94%E5%90%88%E7%BA%A6%E6%9B%B4%E6%96%B0%E7%AD%96%E7%95%A5">Substrate对应‘合约更新策略’</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84">项目结构</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%9E%B6%E6%9E%84">客户端架构</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E6%9E%B6%E6%9E%84%E5%9B%BE">架构图</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E6%A8%A1%E5%9D%97%E8%AF%B4%E6%98%8E">模块说明</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E5%AD%98%E5%82%A8">存储</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#runtime">Runtime</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#p2p%E7%BD%91%E7%BB%9C">p2p网络</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E5%85%B1%E8%AF%86">共识</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#rpc">RPC</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#telemetry-%E9%81%A5%E6%B5%8B">telemetry （遥测）</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#tree-level1">Tree Level1</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E7%94%A8cargo%E7%BB%84%E7%BB%87%E4%BB%A3%E7%A0%81">用Cargo组织代码</a></li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E4%B8%BB%E8%A6%81%E9%83%A8%E5%88%86%E4%BB%8B%E7%BB%8Dnodeframecore">主要部分介绍：Node、Frame、Core</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#substrate-node">Substrate Node:</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E9%87%8D%E7%82%B9%E8%AF%B4%E8%AF%B4nodepallets%E5%92%8Cruntime">重点说说node、pallets和runtime</a></li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#substrate-frame">Substrate FRAME</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#substrate-coreclient">Substrate Core(client)</a></li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E5%85%B6%E4%BB%96">其他</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#primitives">primitives</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#scriptsci">scripts/ci</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#utils">utils</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E5%8A%9F%E8%83%BD%E9%80%BB%E8%BE%91">功能逻辑</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E7%89%B9%E8%89%B2%E4%BB%A3%E7%A0%81">特色代码</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#online-book">online-book</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#fragment">fragment</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#runtime-1">Runtime</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#local">local</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:55 UTC 2022 -->
<!--te-->
<h2 id="gavin-wookpolkadot-and-substrate"><a class="header" href="#gavin-wookpolkadot-and-substrate">Gavin Wook、Polkadot and Substrate</a></h2>
<h3 id="gavin-wook与波卡跨链"><a class="header" href="#gavin-wook与波卡跨链">Gavin Wook与波卡跨链</a></h3>
<p>所以对于开发人员来说，比起大家耳熟能详的v神(Vitalik Buterin)，更重要的人是实际上撑起整个以太坊世界的灵魂人物<strong>Gavin Wood</strong>。更何况很多山寨币实际上就是在以太坊的模型上修修改改，所以在我看来Gavin
Wood是撑起了当前半个区块链世界的人。</p>
<p>而Gavin Wood 离开了以太坊之后，开启的一个新项目叫做Polkadot(波卡)，这个项目的<strong>目的就是跨链，为了把各个割裂的区块链孤岛能够联系一起</strong>
。虽然目前有很多的项目都号称自己在做跨链，但是目前在我看来唯一在推进，逻辑上是可推理，之后可能成功的跨链项目就只有波卡能够成功。（后半段可能存在一定误导性，Polkadot的跨链可能在大部分人理解下应该是分片的变种，也就是基于Substrate开发的区块链可以部署到Polkadot上，经过Polkadot平台互相沟通）。</p>
<h3 id="从波卡到substrate"><a class="header" href="#从波卡到substrate">从波卡到Substrate</a></h3>
<p>而Gavin Wood 在开发的波卡的过程中，经过不断地思考，认为其实区块链发展这几年，大家做的很多事情都是相同的。</p>
<div id="admonition-抽离共同点开始造轮子" class="admonition abstract">
<div class="admonition-title">
<p>抽离共同点，开始造“轮子“</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-抽离共同点开始造轮子"></a></p>
</div>
<div>
<p>那么在以往的软件开发中，当大家发现大家都在做相同的事情的时候，就会将这件事情进行抽象，然后造“轮子”，将这些高层次的东西做封装，成为“开发框架”，将背后复杂的基础设施都封装起来，而使用这个“框架”的开发人员，就可以更加专注于自己的业务逻辑，而不必花费大量的精力去造“轮子”去完成那些每个链都要做的事情。</p>
</div>
</div>
<p>Gavin Wood 在开发波卡的中途先暂停了波卡的开发，将波卡及以太坊已有的成果进行抽象，命名为substrate作为区块链开发的基础框架，并把全部精力都转移到了substrate开发中。</p>
<div id="admonition-第一个轮子" class="admonition tip">
<div class="admonition-title">
<p>第一个轮子</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-第一个轮子"></a></p>
</div>
<div>
<p>所以“substrate”就是区块链世界的第一个“轮子”。</p>
</div>
</div>
<h3 id="跨链的重要性"><a class="header" href="#跨链的重要性">跨链的重要性</a></h3>
<p>另一方面，在软件开发领域或者互联网领域，大家其实都发现了占据了框架的地位实际上一定程度上占据了这个领域开发的生态，更何况对于跨链来说，当大家的链都比较同质化后，跨链会更加的方便。现在大家都把跨链当作区块链下一个引爆点，而跨链的属性界定了做“跨链”的人基本上只能一家独大，成为垄断地位。而接入跨链的链越多，这个跨链就越垄断(
因为大家使用跨链就是为了在不同的链之间兑换代币，能换的代币越多，使用这个跨链的人就越多，生态就越集中)，</p>
<p>而Gavin Wood 提供的substrate框架又<strong>能解决大部分链都在重复解决的问题</strong>，所以大家就更倾向于使用substrate开发自己的链。</p>
<div id="admonition-三角关系" class="admonition quote">
<div class="admonition-title">
<p>三角关系</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-三角关系"></a></p>
</div>
<div>
<p>这样就会在“用户-链-跨链”这个三角关系中将三方的利益绑定在一起，互惠互利，共同进步。</p>
</div>
</div>
<h2 id="总体设计"><a class="header" href="#总体设计">总体设计</a></h2>
<h3 id="常见区块链设计"><a class="header" href="#常见区块链设计">常见区块链设计</a></h3>
<p>目前所有的区块链系统几乎都是从比特币/以太坊模型演变而来。一般来说，一个区块链系统应该具有：</p>
<h4 id="区块链系统基础部分"><a class="header" href="#区块链系统基础部分">区块链系统基础部分</a></h4>
<ul>
<li>共识系统 （区块链分布式基石）</li>
<li>p2p连接与广播系统</li>
<li>存储系统</li>
<li>交易池系统</li>
<li>rpc系统（区块链与外界交互主要通道）</li>
</ul>
<div id="admonition-基础通用" class="admonition info">
<div class="admonition-title">
<p>基础通用</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-基础通用"></a></p>
</div>
<div>
<p>基础部分是当前区块链模型下都会具备的组件，其中共识与P2P体现区块链的分布式本质</p>
</div>
</div>
<h4 id="链的功能"><a class="header" href="#链的功能">链的功能</a></h4>
<div id="admonition-竞争关键" class="admonition info">
<div class="admonition-title">
<p>竞争关键</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-竞争关键"></a></p>
</div>
<div>
<p>链功能是区块链间相互竞争的关键部分. 与系统基础部分相比，这部分差异很大，提供的是除去区块链模型外，这条链能够提供的功能。另一方面在区块链升级中，一般来说系统基础部分改动较小，而链的功能部分改动较大，特别是许多链为了追求开发速度，一开始只能提供转账功能，在后续的版本中才慢慢升级其他功能</p>
</div>
</div>
<p>例如：</p>
<ul>
<li>比特币的UTXO结构加上交易脚本</li>
<li>以太坊的虚拟机与智能合约</li>
<li>eos的账户系统及虚拟机</li>
<li>有的山寨币特化部分智能合约或部分native层成为系统级功能：
<ul>
<li>提供随机数</li>
<li>提供质押对赌</li>
<li>oracle数据输入</li>
<li>引入复杂密码学方案</li>
<li>等等。。。</li>
</ul>
</li>
</ul>
<h4 id="substrate理念"><a class="header" href="#substrate理念">Substrate理念</a></h4>
<div id="admonition-分离变与不变" class="admonition tip">
<div class="admonition-title">
<p>分离变与不变</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-分离变与不变"></a></p>
</div>
<div>
<p>Substrate作为一个区块链框架，认为所有的链都应该具备区块链系统基础部分，而由开发者自由定制链的功能部分</p>
</div>
</div>
<h3 id="先认识一下什么是区块链框架"><a class="header" href="#先认识一下什么是区块链框架">先认识一下：什么是区块链框架</a></h3>
<p>简单来说，或者从本质上讲，区块链框架是一个（巨大的）工具和库的集合，用于构建一个完整的、可运行的、安全的、功能完整的（尽管是基本的）区块链。</p>
<p>区块链框架负责处理以下方面的大部分繁重工作：</p>
<ul>
<li>共识P2P网络</li>
<li>帐户管理</li>
<li>基本的区块链逻辑（区块、交易等）</li>
<li>区块链交互的客户端</li>
</ul>
<h3 id="接着说说substrate与web3"><a class="header" href="#接着说说substrate与web3">接着说说Substrate与web3</a></h3>
<p>Substrate 可以被描述为一个区块链框架——具体来说，一个用于构建定制区块链的框架。这些区块链可以完全自主运行，这意味着它们不依赖任何外部技术来运行。</p>
<p>然而，Substrate 背后的公司 Parity（由以太坊联合创始人 Gavin Wood 共同创立）也建立了 Polkadot 网络。 Polkadot 本质上是一个分散的、基于协议的区块链平台，用于实现安全的跨区块链通信。</p>
<div id="admonition-波卡本身就是跨链桥梁" class="admonition tip">
<div class="admonition-title">
<p>波卡本身就是跨链桥梁</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-波卡本身就是跨链桥梁"></a></p>
</div>
<div>
<p>这意味着 Polkadot可以用作区块链之间的一种桥梁，负责链之间的通信层，并使不同区块链（甚至是以太坊和比特币等系统）之间的交互成为可能。</p>
</div>
</div>
<div id="admonition-web3愿景" class="admonition quote">
<div class="admonition-title">
<p>web3愿景</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-web3愿景"></a></p>
</div>
<div>
<p>这代表着在实现 Web3 的愿景（一个分散的、基于区块链的互联网版本）方面取得了重大进展。</p>
</div>
</div>
<p>由于它们是由同一个人开发的，因此 Substrate 对与Polkadot的集成具有一流的支持，因此您使用Substrate创建的任何区块链都可以无缝连接到 Polkadot。</p>
<p>Substrate 还提供无分叉运行时升级——在不触发硬分叉的情况下升级区块链状态转换功能的能力。</p>
<div id="admonition-文档教程" class="admonition info">
<div class="admonition-title">
<p>文档教程</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-文档教程"></a></p>
</div>
<div>
<p>当然，由于提供了大量的代码，Substrate 附带了大量的文档和教程来帮助您入门。</p>
</div>
</div>
<h3 id="用web框架游戏引擎类比"><a class="header" href="#用web框架游戏引擎类比">用web框架、游戏引擎类比</a></h3>
<div id="admonition-sustrate与web框架大有不同" class="admonition warning">
<div class="admonition-title">
<p>Sustrate与web框架大有不同</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-sustrate与web框架大有不同"></a></p>
</div>
<div>
<p>如果你以前使用过一个广泛的 Web 框架，那么区块链框架就是——根本不是这样的。范围、活动部件的数量、相关概念和扩展点只是处于不同的规模。</p>
</div>
</div>
<blockquote>
<p>一个更好的比较可能是一个成熟的游戏引擎（想想 Unity），它为你需要的一切功能提供基本实现，以及可能需要的许多扩展点，供自定义。</p>
</blockquote>
<p>当然，这意味着已经在架构方面做出了一些决定：你将无法轻易更改。</p>
<p>根据你的用例，可能需要更多的可定制性，而框架可能会以某种方式对其进行限制。</p>
<p>这是标准的权衡：区块链框架可以节省你的时间，但代价是你不得不忍受的一些事情。</p>
<p>然而，正如我们将在下面更详细地探讨的那样，Substrate在这方面提供了一些灵活性。</p>
<p>使您能够在多个阶段在更多的技术自由和易于开发之间进行选择。</p>
<p>Substrate的后端是用 Rust 构建的。它（以及 Parity 通常所做的大部分工作）也是完全开源的。</p>
<blockquote>
<p>因此，您不仅可以使用 Substrate，还可以通过回馈和分叉其中的一部分来改进它，以根据您自己的需求进行定制。</p>
</blockquote>
<h3 id="substrate-architecture"><a class="header" href="#substrate-architecture">Substrate Architecture</a></h3>
<p>Gavin Wood 作为以太坊实际核心的开发者，自然早已对这套系统的框架了然于心，所以从Substrate框架提出的开始（2018年9月），就对区块链系统作出了2个关键的区分：</p>
<div id="admonition-coreruntime" class="admonition info">
<div class="admonition-title">
<p>Core&amp;Runtime</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-coreruntime"></a></p>
</div>
<div>
<p>Substrate Core: 系统基础部分
Runtime：链功能</p>
</div>
</div>
<div id="admonition-substrte-architecture" class="admonition tip">
<div class="admonition-title">
<p>Substrte Architecture</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-substrte-architecture"></a></p>
</div>
<div>
<pre><code class="language-text">┌───────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                       │
│                                                                                                       │
│      ┌─────────────────┐     ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐        │
│      │ fund management │     │     Account     │    │    Contract     │    │   Democratic    │        │
│      │    transfer     │     │     system      │    │       VM        │    │   referendum    │        │
│      └─────────────────┘     └─────────────────┘    └─────────────────┘    └─────────────────┘        │
│                                                                                                       │
│                                                  ######  #     # #     # ####### ### #     # #######  │
│      ┌─────────────────┐     ┌─────────────────┐ #     # #     # ##    #    #     #  ##   ## #        │
│      │     Equity      │     │      etc.       │ #     # #     # # #   #    #     #  # # # # #        │
│      │   calculation   │     │                 │ ######  #     # #  #  #    #     #  #  #  # #####    │
│      └─────────────────┘     └─────────────────┘ #   #   #     # #   # #    #     #  #     # #        │
│                                                  #    #  #     # #    ##    #     #  #     # #        │
│                                                  #     #  #####  #     #    #    ### #     # #######  │
├───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                       │
│      ┌─────────────────┐     ┌─────────────────┐     ┌─────────────────┐    ┌─────────────────┐       │
│      │    Consensus    │     │ Network system  │     │     Trading     │    │                 │       │
│      │    mechanism    │     │      (p2p)      │     │      Pool       │    │       RPC       │       │
│      └─────────────────┘     └─────────────────┘     └─────────────────┘    │                 │       │
│                                                                             └─────────────────┘       │
│                                                             #####  ####### ######  #######            │
│      ┌─────────────────┐                                   #     # #     # #     # #                  │
│      │      etc.       │                                   #       #     # #     # #                  │
│      │                 │                                   #       #     # ######  #####              │
│      └─────────────────┘                                   #       #     # #   #   #                  │
│                                                            #     # #     # #    #  #                  │
│                                                             #####  ####### #     # #######            │
│                                                                                                       │
└───────────────────────────────────────────────────────────────────────────────────────────────────────┘
</code></pre>
</div>
</div>
<h3 id="从rust看substrate"><a class="header" href="#从rust看substrate">从Rust看Substrate</a></h3>
<ul>
<li><a href="https://docs.substrate.io/main-docs/fundamentals/rust-basics/">Rust for Substrate | Substrate_ Docs</a></li>
</ul>
<h3 id="开发者只需要关注runtime链功能"><a class="header" href="#开发者只需要关注runtime链功能">开发者只需要关注Runtime(链功能)</a></h3>
<p>根据这样的划分，当开发者使用Substrate框架的时候，无需关心区块链基础功能也就是Core部分的工作，而只需关心自己链能够提供的功能，也就是Runtime部分的工作。</p>
<div id="admonition-vm类似以太坊的智能合约" class="admonition tip">
<div class="admonition-title">
<p>VM类似以太坊的智能合约</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-vm类似以太坊的智能合约"></a></p>
</div>
<div>
<p>注意图中虚拟机EVM也是Runtime的一个组件。与以太坊的结构相比，相当于把以太坊的智能合约功能也能随意作为一个链的功能组件添加进入使用Substrate开发的链中</p>
</div>
</div>
<h3 id="明晰runtime"><a class="header" href="#明晰runtime">明晰Runtime</a></h3>
<p>这里一直强调Runtime是“链的功能”有一些通俗与不严谨，这里使用一个更抽象的描述：</p>
<div id="admonition-runtime明确" class="admonition danger">
<div class="admonition-title">
<p>Runtime明确</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-runtime明确"></a></p>
</div>
<div>
<p>需要对运行结果进行共识的功能部分应该归属于Runtime</p>
</div>
</div>
<p>这个定义比较抽象，且由于需要对“世界状态”或类似概念有比较深入的了解才好解释，故不展开讲解。更严格来说，“需要对运行结果进行共识的功能组件”是“链的功能”的一个子集。</p>
<h4 id="判断标准"><a class="header" href="#判断标准">判断标准</a></h4>
<div id="admonition-判断标准" class="admonition tip">
<div class="admonition-title">
<p>判断标准</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-判断标准"></a></p>
</div>
<div>
<p>这里有一个简单的判定标准判断某个功能是否应该放在Runtime内：</p>
<p>对于某个功能，若只改动一个节点的代码对于所有的逻辑运行的结果与其他不改动的节点运行的结果相同，则认为这个部分应该放在Runtime之外，如果运行结果不同，则认为应该放在Runtime之内。</p>
</div>
</div>
<div id="admonition-举例" class="admonition example">
<div class="admonition-title">
<p>举例</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-举例"></a></p>
</div>
<div>
<p>举个例子：比如我改变了交易池的排序代码，使得对某个账户有利的交易能优先打包。这个改动会令自己这个节点产出的区块不公平的打包交易，但是只要打包出来的区块大家都可以认可，则所有节点共识的“状态的变化”仍然是一致的。很明显，这个功能组件不应该是Runtime的功能，因为它不会改变对于验证一个区块时的“状态变化”的验证。比如我改变了转账功能的代码，能给某个账户凭空增加钱，那么显然，这种改动对于这个改动过的节点执行的结果将会与其他节点不同，则共识不会通过。所以转账这个功能就应该放在Runtime当中，让所有节点执行的都是一致的。</p>
</div>
</div>
<p>这部分结合native与wasm后会容易理解</p>
<p>所以到底什么是Runtime，我认为使用“链上功能”来描述最为恰当，因为其隐含了对于执行结果的共识问题。</p>
<h3 id="substrate的runtime"><a class="header" href="#substrate的runtime">Substrate的Runtime</a></h3>
<p>Substrate的Runtime当然没有止步于仅将区块链系统做了模块化划分，提供框架功能这一步，事实上，由于抽象出了Runtime，Substrate实现了以往所有区块链都无法实现的一个功能：区块链系统升级。</p>
<h4 id="中心化升级流程"><a class="header" href="#中心化升级流程">中心化升级流程</a></h4>
<div id="admonition-centralized-system-upgrading" class="admonition tip">
<div class="admonition-title">
<p>Centralized System Upgrading</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-centralized-system-upgrading"></a></p>
</div>
<div>
<pre><code class="language-text">┌────────────────────────────────Centralized System Upgrading(Internet App)────────────────────────────────┐
│                                                                                                          │
│                                                                                                          │
│                         ┌───────────────────┐      ┌─────────────┐    ┌─────────────┐    ┌─────────────┐ │
│                     ┌──▶│    Update Code    │      │   Deploy    │    │   Upgrade   │    │ Centralized │ │
│     .─────────.     │   │(Backend/Frontend)─┼──────▶   Server    │───▶│  Sucessful  │────▶Upgrade Easy │ │
│    ╱           ╲    │   └───────────────────┘      └─────────────┘    └─────────────┘    └─────────────┘ │
│   ( Bug/Upgrade )───┤                                                 ┌─────────────┐                    │
│    `.         ,'    │                                                 │  Somebody   │                    │
│      `───────'      │                                              ┌─▶│   Upgrade   ├─┐                  │
│                     │   ┌───────────────────┐      ┌─────────────┐ │  └─────────────┘ │  ┌─────────────┐ │
│                     └──▶│    Update Code    │      │   Publish   │ │                  │  │ Fragmented  │ │
│                         │       (App)      ─┼──────▶  App Store  │─┤  ┌─────────────┐ ├─▶│   version   │ │
│                         └───────────────────┘      └─────────────┘ │  │  Somebody   │ │  └─────────────┘ │
│                                                                    └─▶│   Reject    │─┘                  │
│                                                                       └─────────────┘                    │
│                                                                                                          │
│                                                                                                          │
└──────────────────────────────────────────────────────────────────────────────────────────────────────────┘
</code></pre>
</div>
</div>
<p>对于中心化的互联网系统而言，由于代码与数据的控制权在自己手上，所以可以随时进行版本的升级与修改。但是即便如此，也只有网页H5，后台代码可以做到随时升级，在移动互联网中，app还是需要用户自行更新。其中android生态尤为突出，apk版本的碎片化一度是困扰开发者的难题。为了应对app应用的碎片化，推出了许多功能各异的框架能够用户在不更新app的情况下进行“热更新”，一度成为技术的热门追捧。这些热更新的框架本质上都是允许从后台下载一段更新代码，通过各种方式加载运行新的代码来完成。一般情况下通过这种热更新提供的功能都会带来一定的性能损耗以运行最新的热更新代码。但是即便是热更新，更新代码的控制权也同样处于中心化组织的手中。</p>
<h4 id="无央化升级流程原先"><a class="header" href="#无央化升级流程原先">无央化升级流程(原先)</a></h4>
<div id="admonition-decentralized-system-upgradingpre" class="admonition tip">
<div class="admonition-title">
<p>Decentralized System Upgrading(pre)</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-decentralized-system-upgradingpre"></a></p>
</div>
<div>
<pre><code class="language-text">┌───────────────────────────────────Decentralized System Upgrading(Blockchain Dapp)────────────────────────────────────┐
│                                                                                                 ┌─────────────┐      │
│                                                                                                 │   Upgrade   │      │
│                                                                                  ┌───Yes───────▶│  Sucessful  │      │
│                                                                                  │              └─────────────┘      │
│                                                                                  Λ                                   │
│                                                                                 ╱ ╲                                  │
│                                                                                ╱   ╲                                 │
│                                                                               ╱     ╲                                │
│                                                          ┌────────┐          ╱       ╲                               │
│                                                          │ Deploy │      Most deployments                            │
│                                              ┌──Support─▶│  Node  │─────▶(Under Byzantine                            │
│                                              │           └────────┘      Fault Tolerance)                            │
│                                              │                               ╲       ╱                               │
│                                              Λ                                ╲     ╱                                │
│                                             ╱ ╲                                ╲   ╱                                 │
│                                            ╱   ╲                                ╲ ╱                                  │
│                                           ╱     ╲                                V              ┌──────────────────┐ │
│     .─────────.      ┌─────────────┐     ╱       ╲                               │              │   Upgrade Fail   │ │
│    ╱           ╲     │ Update Node │    ╱ Running ╲                              └───No────────▶│(Cause Fragmented)│ │
│   ( Bug/Upgrade ─────▶    Code     ├────▶  Node    ▏                                            └──────────────────┘ │
│    `.         ,'     └─────────────┘    ╲ (Minner ╱                                                       ▲          │
│      `───────'                           ╲       ╱                                                        │          │
│                                           ╲     ╱                                                         │          │
│                                            ╲   ╱                                                          │          │
│     .─────────.                             ╲ ╱                                                           │          │
│  ,─'           '─.                           V                                                            │          │
│ ;    Community    :                          │           ┌────────┐                                       │          │
│ :    proposal     ;                          │           │ Reject │                                       │          │
│  ╲   (BIP/EIP)   ╱                           └───Reject─▶│ Deploy │───────────────────────────────────────┘          │
│   '─.         ,─'                                        └────────┘                                                  │
│      `───────'                                                                                                       │
└──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
</code></pre>
</div>
</div>
<p>区块链领域就大大不同了。 即便代码更新的权力在某个组织的手上，但是运行这些代码的人可不一定会听这个组织的指挥，无法容易的命令分散节点统一的进行新代码的部署更新。</p>
<div id="admonition-分布式自治的优缺点" class="admonition tip">
<div class="admonition-title">
<p>分布式自治的优缺点</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-分布式自治的优缺点"></a></p>
</div>
<div>
<p>这是区块链带来的分布式自治的优点，同时也是一个巨大的缺点。</p>
</div>
</div>
<p>比特币社区就是这个领域下的一个典型，由于比特币社区的分裂，部分人并不认同不更改区块大小而是采用隔离见证的方案，分裂出了BCH，对BTC的生态产生的极大的损害。ETH的升级同样也困难重重，每次升级都需要进行长时间的等待以防有节点未升级而产生的分叉。</p>
<p>EOS由于其中心化的特点使得升级稍微简单一些，但仍然出现了由于升级带来的分叉的恶性事件。我们可以形象把区块链下的系统升级称为“全球升级”，因为其要求分布式环境下的大部分节点都更新了代码才使得升级能够成功。相较于中心化控制的系统，区块链系统的升级困难重重且充满风险。</p>
<div id="admonition-高度判断" class="admonition tip">
<div class="admonition-title">
<p>高度判断</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-高度判断"></a></p>
</div>
<div>
<p>同时区块链的升级还有另一个问题：高度判断</p>
<p>一个区块链系统升级后，不得不在代码中加入许多的“高度判断”，以区分不同高度下运行的代码，保证同步能够正常执行，兼容老数据。这种做法很原始但是又无法绕开，给开发者带来极大的思维负担，且需要大量的测试来保证不出现Bug。</p>
</div>
</div>
<p>比如目前比特币的源码中就有许多的区块高度判定使得在同步老区块的时候执行老代码，新区块的时候执行新代码。而中心化系统的数据控制权在自己手上，并且也不存在需要从某个数据源同步的情况，所以完全不需要担心这个问题。</p>
<h4 id="substrate的不同"><a class="header" href="#substrate的不同">Substrate的不同</a></h4>
<p>Substrate横空而出，推出了目前区块链领域最完美的升级方案。其采用“链上代码”的思想，将整个Runtime都做成了可直接更新的组件，让所有节点能够强制运行最新的Runtime代码。</p>
<div id="admonition-substrate-runtime" class="admonition info">
<div class="admonition-title">
<p>Substrate Runtime</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-substrate-runtime"></a></p>
</div>
<div>
<p>简单来说，Runtime在Substrate框架下，将会用同一份代码编译出两份可执行文件：</p>
<ol>
<li>一份Rust的本地代码，我们一般称为native代码，native与其他代码无异，是这个执行文件中的二进制数据，直接运行。在Substrate的相关代码以native命名</li>
<li>一份wasm的链上代码，我们一般成为wasm代码，wasm被部署到链上，所有人可获取，wasm通过构建一个wasm的运行时环境执行 。在Substrate的相关代码以wasm命名 在节点启动的时候可以选择执行策略，使用native, possible，wasm或者both。不同的执行策略会执行不同的执行文件</li>
</ol>
</div>
</div>
<p>由于这两份代码是由相同的代码编译出来的，所以其执行逻辑完全相同 (有一些很小的暗坑要注意)。其中wasm将会部署到链上，所有人都可以获取到，也就是说即使本地运行的不是最新版本的节点，只要同步了区块，一定可以获取到最新的wasm代码。</p>
<p>换句话说，一个写在Runtime内部的代码，也就是代表这条链功能性的代码，存在两份，分别是native与wasm。wasm代码被部署到链上，是“链上数据”，可以通过同步区块所有人统一获取并执行。这样就可以保证在区块链中所有矿工执行的都是最新的代码。</p>
<div id="admonition-哪种更合理" class="admonition tip">
<div class="admonition-title">
<p>哪种更合理</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-哪种更合理"></a></p>
</div>
<div>
<p>这里需要强调，代码的部署可以通过“民主提议”，“sudo控制权限”，“开发者自定一种部署条件”等方式进行，到底哪种方式“更区块链”，“更合理”，不在本文讨论范围内，这与这条链的设计目的相关。Substrate只是提供了这种“热更新”的强大机制，如何使用这种机制是这条链的问题。</p>
</div>
</div>
<h4 id="以太坊合约更新策略"><a class="header" href="#以太坊合约更新策略">以太坊合约更新策略</a></h4>
<div id="admonition-合约更新策略" class="admonition info">
<div class="admonition-title">
<p>合约更新策略</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-合约更新策略"></a></p>
</div>
<div>
<p>我们使用以太坊中“合约更新策略”来解释Substrate的Runtime机制：</p>
</div>
</div>
<p>由于以太坊部署一个合约后，其地址已经被固定，且数据完全存储在这个合约地址下，若这个合约需要升级功能或出现Bug，将会带来许多的问题（比如许多垃圾山寨币的ERC20合约有溢出漏洞，被攻击后损失惨重，只能通过重新部署合约，**
并将老合约的数据重新导入的方式**进行合约升级，且此时的合约地址只能使用新的了）。</p>
<p>许多开发人员不断探索后发展出了如下的以太坊合约升级方式：</p>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/Substrate_runtime_intro.jpeg" alt="Substrate_runtime_intro" /></p>
<p>熟悉以太坊的开发人员应该很容易理解上图表达的意思。</p>
<p>其核心思想是将一个合约拆分成为“逻辑合约”与“数据合约”，并使用一个“核心合约”将它们串在一起，这个核心合约就是用户的入口。</p>
<p>由于以太坊部署后的地址是固定的，所以将逻辑合约做成一个独立的合约，并将其地址设置在核心合约当中。那么只要更改核心合约中设置的地址，就可以更改核心合约执行的逻辑了。</p>
<p>并且由于以太坊的合约部署后都存在于“世界状态”当中，那么在同步区块时，老数据就会自动使用老的逻辑合约执行，而新的数据使用新的逻辑合约执行。</p>
<div id="admonition-链上代码" class="admonition tip">
<div class="admonition-title">
<p>链上代码</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-链上代码"></a></p>
</div>
<div>
<p>这里的“逻辑合约”就是“链上代码”的概念，它存在于被共识的数据当中，具备历史的意义</p>
</div>
</div>
<h4 id="substrate对应合约更新策略"><a class="header" href="#substrate对应合约更新策略">Substrate对应‘合约更新策略’</a></h4>
<p>那么将Substrate的框架对应过来，其中：</p>
<ul>
<li>“核心合约”的部分就是节点采用wasm执行去从“状态”存储中加载出最新的合约代码</li>
<li>“逻辑合约”的部分就是这条链的Runtime</li>
<li>“数据合约”的部分就是这条链自己的状态数据</li>
</ul>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/v2-b9bb441d00298a06de67ab8fdd368c08_720w.jpg" alt="img" /></p>
<div id="admonition-wasm" class="admonition tip">
<div class="admonition-title">
<p>wasm</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-wasm"></a></p>
</div>
<div>
<p>由此可见，由于wasm代码的存在，可以保证即使节点没有更新到最新版本，仍然能够<strong>以最新的代码运行</strong>，保证不会因为代码的不同而分叉。同时在节点同步老数据的过程中也<strong>不会因为本地代码是最新的而导致同步出错</strong></p>
</div>
</div>
<h2 id="项目结构"><a class="header" href="#项目结构">项目结构</a></h2>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/substrate_github.gif" alt="substrate_github" /></p>
<h3 id="客户端架构"><a class="header" href="#客户端架构">客户端架构</a></h3>
<h4 id="架构图"><a class="header" href="#架构图">架构图</a></h4>
<div id="admonition-substrate-client" class="admonition tip">
<div class="admonition-title">
<p>Substrate Client</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-substrate-client"></a></p>
</div>
<div>
<pre><code class="language-text">┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃         ___ _   _ ___ ___ _____ ___    _ _____ ___    ___ _    ___ ___ _  _ _____        ┃
┃        / __| | | | _ ) __|_   _| _ \  /_\_   _| __|  / __| |  |_ _| __| \| |_   _|       ┃
┃        \__ \ |_| | _ \__ \ | | |   / / _ \| | | _|  | (__| |__ | || _|| .` | | |         ┃
┃        |___/\___/|___/___/ |_| |_|_\/_/ \_\_| |___|  \___|____|___|___|_|\_| |_|         ┃
┃                                                                                          ┃
┃                                                                                          ┃
┃     ┌───────────────┐     ┌──────────────────────────────────────────────────────────┐   ┃
┃     │               │     │                                                          │   ┃
┃     │               │     │                                                          │   ┃
┃     │               │     │                           RPC                            │   ┃
┃     │               │     │                                                          │   ┃
┃     │      P2P      │     │                                                          │   ┃
┃     │    NETWORK    │     └──────────────────────────────────────────────────────────┘   ┃
┃     │               │     ┌────────────────────────────────────────┐ ┌───────────────┐   ┃
┃     │               │     │                                        │ │               │   ┃
┃     │               │     │            ┌───────────────┐           │ │               │   ┃
┃     │               │     │            │               │           │ │   CONSENSUS   │   ┃
┃     └───────────────┘     │            │     Wasm      │           │ │               │   ┃
┃          .───────.        │            │    Runtime    │           │ │               │   ┃
┃       ,─'         '─.     │            │               │           │ └───────────────┘   ┃
┃      ╱               ╲░   │            └───────────────┘           │                     ┃
┃     ;     NATIVE      :░  │                                        │ ┌───────────────┐   ┃
┃     :     RUNTIME     ;░░ │                                        │ │               │   ┃
┃      ╲               ╱░░░ │                STORAGE                 │ │               │   ┃
┃       ╲             ╱░░░  │                                        │ │   TELEMETRY   │   ┃
┃        '─.       ,─'░░░   │                                        │ │               │   ┃
┃          ░`─────'░░░░░    │                                        │ │               │   ┃
┃             ░░░░░░░       └────────────────────────────────────────┘ └───────────────┘   ┃
┃                                                                                          ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
</code></pre>
</div>
</div>
<p>现在我们知道了 Substrate 是什么，让我们对框架、它的移动部分以及我们可以用来创建自定义区块链的扩展点进行高级概述。
由于我们在这里处理的是去中心化的点对点系统，所以我们谈论的基本单元是节点,这是我们的区块链运行的地方。
该节点在客户端内部运行，并提供系统运行所需的所有基本组件，例如p2p网络、区块链的存储、块处理和共识的逻辑，以及从外部与区块链交互的能力。</p>
<h4 id="模块说明"><a class="header" href="#模块说明">模块说明</a></h4>
<blockquote>
<p>substrate客户端是基于substrate实现的区块链的节点客户端（可以理解为全节点），
它主要由以下几个组件组成（以下也就是告诉我们实现一条链由哪几部分组成）：</p>
</blockquote>
<h5 id="存储"><a class="header" href="#存储">存储</a></h5>
<p>用来维持区块链系统所呈现的状态演变。substrate提供了的存储方式是一种简单有效的key-value对存储机制的方式。</p>
<h5 id="runtime"><a class="header" href="#runtime">Runtime</a></h5>
<p>这里就可以回答上面的问题，什么是runtime？runtime定义了区块的处理方式，主要是状态转换的逻辑。在substrate中，runtime code被编译成wasm作为区块链存储状态的一部分。</p>
<h5 id="p2p网络"><a class="header" href="#p2p网络">p2p网络</a></h5>
<p>允许客户端和其它网络参与者进行通信。</p>
<h5 id="共识"><a class="header" href="#共识">共识</a></h5>
<p>提供了一种逻辑，能使网络参与者就区块链的状态达成一致。 substrate 支持提供自定义的共识引擎。</p>
<h5 id="rpc"><a class="header" href="#rpc">RPC</a></h5>
<p>远程过程调用。</p>
<h5 id="telemetry-遥测"><a class="header" href="#telemetry-遥测">telemetry （遥测）</a></h5>
<p>通过嵌入式Prometheus服务器的方式对外展示（我理解应该是类似于区块链浏览器一样的东西，或者是提供信息给区块链浏览器展示）。</p>
<h3 id="tree-level1"><a class="header" href="#tree-level1">Tree Level1</a></h3>
<p>首先来看看项目的整理结构：</p>
<pre><code class="language-shell"> tree -L 1 | pbcopy                                                                                                                                                                                                                        ─╯
.
├── Cargo.lock
├── Cargo.toml
├── HEADER-APACHE2
├── HEADER-GPL3
├── LICENSE-APACHE2
├── LICENSE-GPL3
├── README.md
├── bin
├── client
├── docker
├── docs
├── frame
├── primitives
├── rustfmt.toml
├── scripts
├── shell.nix
├── test-utils
└── utils

9 directories, 9 files
</code></pre>
<h4 id="用cargo组织代码"><a class="header" href="#用cargo组织代码">用Cargo组织代码</a></h4>
<p>Substrate非常明显使用Cargo来组织代码：</p>
<ol>
<li>项目根目录的Cargo.toml会用workspace+members导入各子模块</li>
</ol>
<pre><code class="language-yaml">[ workspace ]
  resolver = &quot;2&quot;

  members = [...]
</code></pre>
<div id="admonition-workspacememgers" class="admonition info">
<div class="admonition-title">
<p>workspace+memgers</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-workspacememgers"></a></p>
</div>
<div>
<p>在[workspace]项下, members 属性表示工作区目录中的程序库列表</p>
</div>
</div>
<ol start="2">
<li>各子模块之间也用Cargo.toml来相互导入使用</li>
</ol>
<pre><code class="language-yaml">[ dependencies ]
  sc-consensus = { version = &quot;0.10.0-dev&quot;, path = &quot;../../client/consensus/common&quot; }
</code></pre>
<div id="admonition-高内聚低耦合" class="admonition tip">
<div class="admonition-title">
<p>高内聚，低耦合</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-高内聚低耦合"></a></p>
</div>
<div>
<p>这里正是通过Cargo.toml的语法，将模块功能内聚之后供调用</p>
</div>
</div>
<h3 id="主要部分介绍nodeframecore"><a class="header" href="#主要部分介绍nodeframecore">主要部分介绍：Node、Frame、Core</a></h3>
<h4 id="substrate-node"><a class="header" href="#substrate-node">Substrate Node:</a></h4>
<p>我们将从 Substrate Node 开始。这是我们可以开始的最高级别；</p>
<p>它提供了最多的预建功能和最少的技术自由度。它是完全可运行的，包括所有基本组件的默认实现，例如:</p>
<ul>
<li>账户管理</li>
<li>特权访问</li>
<li>共识</li>
<li>…</li>
</ul>
<p>我们可以自定义链的创世块（即初始状态）以开始。 在这里，我们可以运行节点并熟悉 Substrate 提供的开箱即用的功能，玩转状态并与正在运行的区块链交互以熟悉。</p>
<p>另一种实现相同目的的方法是使用 <a href="https://substrate.io/developers/playground/">Substrate Playground</a>，您可以在其中查看后端和前端模板以熟悉它们。
然而，一旦我们准备好真正构建自己的区块链，我们最好降低一层并使用 FRAME。</p>
<pre><code class="language-shell">tree bin -L 2 | pbcopy                                                                                                                                                                                                                       ─╯
bin
├── node
│   ├── bench
│   ├── cli
│   ├── executor
│   ├── inspect
│   ├── primitives
│   ├── rpc
│   ├── runtime
│   └── testing
├── node-template: 使用Substrate写项目的基础模版
│   ├── LICENSE
│   ├── README.md
│   ├── docker-compose.yml
│   ├── docs
│   ├── node
│   ├── pallets
│   ├── runtime
│   ├── scripts
│   └── shell.nix
└── utils
    ├── chain-spec-builder
    └── subkey

18 directories, 4 files
</code></pre>
<h5 id="重点说说nodepallets和runtime"><a class="header" href="#重点说说nodepallets和runtime">重点说说node、pallets和runtime</a></h5>
<div id="admonition-nodepalletsruntimes" class="admonition tip">
<div class="admonition-title">
<p>node、pallets、runtimes</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-nodepalletsruntimes"></a></p>
</div>
<div>
<p>│   ├── node: 链的一些基础功能的实现（或者说比较底层的实现，如网络、rpc，搭建链的最基础的code)
│   ├── pallets: 放置的就是各个pallet，也就是业务相关的模块
│   ├── runtime: 可以简单理解为把所有pallet组合到一起，也就是业务相关的逻辑</p>
</div>
</div>
<p>三者的关系大致如下：</p>
<div id="admonition-nodepalletsruntime的关系" class="admonition tip">
<div class="admonition-title">
<p>node、pallets、runtime的关系</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-nodepalletsruntime的关系"></a></p>
</div>
<div>
<pre><code class="language-text">┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃             ___ _   _ ___ ___ _____ ___    _ _____ ___   _  _  ___  ___  ___             ┃
┃            / __| | | | _ ) __|_   _| _ \  /_\_   _| __| | \| |/ _ \|   \| __|            ┃
┃            \__ \ |_| | _ \__ \ | | |   / / _ \| | | _|  | .` | (_) | |) | _|             ┃
┃            |___/\___/|___/___/ |_| |_|_\/_/ \_\_| |___| |_|\_|\___/|___/|___|            ┃
┃                                                                                          ┃
┃                                                                                          ┃
┃                                                                                          ┃
┃  ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓ ┃
┃  ┃                         ___ _   _ _  _ _____ ___ __  __ ___                         ┃ ┃
┃  ┃                        | _ \ | | | \| |_   _|_ _|  \/  | __|                        ┃ ┃
┃  ┃                        |   / |_| | .` | | |  | || |\/| | _|                         ┃ ┃
┃  ┃                        |_|_\\___/|_|\_| |_| |___|_|  |_|___|                        ┃ ┃
┃  ┃                                                                                     ┃ ┃
┃  ┃                                                                                     ┃ ┃
┃  ┃                                                                                     ┃ ┃
┃  ┃                                                                                     ┃ ┃
┃  ┃    ┌───────────────┐    ┌───────────────┐    ┌───────────────┐   ┌───────────────┐  ┃ ┃
┃  ┃    │               │    │               │    │               │   │               │  ┃ ┃
┃  ┃    │   pallet 1    │    │   pallet 2    │    │      ...      │   │   pallet n    │  ┃ ┃
┃  ┃    │               │    │               │    │               │   │               │  ┃ ┃
┃  ┃    └───────────────┘    └───────────────┘    └───────────────┘   └───────────────┘  ┃ ┃
┃  ┃                                                                                     ┃ ┃
┃  ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛ ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
</code></pre>
</div>
</div>
<blockquote>
<p>当然，对于pallets来说，在runtime中使用的pallet，有些是我们自己开发的pallet，有些是substrate中已经开发好的pallet，甚至还有些是pallet是第三方开发的pallet。</p>
</blockquote>
<h4 id="substrate-frame"><a class="header" href="#substrate-frame">Substrate FRAME</a></h4>
<p>FRAME (Framework for Runtime Aggregation of Modularized Entities) 是一个框架，用于从现有库构建 Substrate 运行时(Runtime)
，并具有高度的自由度来确定我们的区块链逻辑。</p>
<p>我们基本上是从 Substrate 的预构建节点模板开始，可以添加所谓的托盘（pallet, Substrate 库模块的名称）来定制和扩展我们的链。</p>
<p>在这个抽象级别，我们还能够完全自定义我们区块链的逻辑、状态和数据类型。这当然是大多数旨在接近 Substrate 的基本定制项目在易于开发和技术自由之间利用两全其美的地方。</p>
<div id="admonition-专注定制" class="admonition tip">
<div class="admonition-title">
<p>专注定制</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-专注定制"></a></p>
</div>
<div>
<p>从这个起点开始，我们必须投入最少的时间来建立我们的区块链，并且可以完全专注于我们自己的定制。</p>
</div>
</div>
<p>我们仍然需要在它们到来时采用一些默认值——或者更确切地说，因为它们可以被配置——但是如果我们从根本上想要做不同的事情，我们可以从 Core 开始再降低一步。</p>
<div id="admonition-frame" class="admonition info">
<div class="admonition-title">
<p>FRAME</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-frame"></a></p>
</div>
<div>
<p>The Framework for Runtime Aggregation of Modularized Entities (FRAME) is a set of modules and support libraries that simplify runtime development. 
In Substrate , these modules are called Pallets, each hosting domain-specific logic to include in a chain’s runtime.</p>
<p>FRAME also provides some helper modules to interact with important Substrate Primitives that provide the interface to the core client.</p>
<p>The following diagram shows the architectural overview of FRAME and its support libraries:</p>
</div>
</div>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/frame-arch.png" alt="frame-arch" /></p>
<p><a href="https://docs.substrate.io/v3/runtime/frame/">FRAME | Substrate_</a></p>
<pre><code class="language-shell">tree frame -L 1 | pbcopy
frame
├── alliance: The Alliance Pallet provides a collective that curates a list of accounts and URLs, deemed by the voting members to be unscrupulous actors.
├── assets: A simple, secure module for dealing with fungible assets. The Assets module provides functionality for asset management of fungible asset classes with a fixed supply
├── atomic-swap: A module for atomically sending funds.
├── aura: The Aura module extends Aura consensus by managing offline reporting.
├── authority-discovery: This module is used by the client/authority-discovery to retrieve the current set of authorities.
├── authorship
├── babe
├── bags-list
├── balances: The Balances module provides functionality for handling accounts and balances.
├── beefy
├── beefy-mmr
├── benchmarking
├── bounties
├── child-bounties
├── collective
├── contracts
├── conviction-voting
├── democracy
├── election-provider-multi-phase
├── election-provider-support
├── elections-phragmen
├── examples
├── executive
├── gilt
├── grandpa
├── identity
├── im-online
├── indices
├── lottery
├── membership
├── merkle-mountain-range
├── multisig
├── nicks
├── node-authorization
├── nomination-pools
├── offences
├── preimage
├── proxy
├── randomness-collective-flip
├── ranked-collective
├── recovery
├── referenda
├── remark
├── scheduler
├── scored-pool
├── session
├── society
├── staking
├── state-trie-migration
├── sudo
├── support
├── system
├── timestamp
├── tips
├── transaction-payment
├── transaction-storage
├── treasury
├── try-runtime
├── uniques
├── utility
├── vesting
└── whitelist

62 directories, 0 files

</code></pre>
<h4 id="substrate-coreclient"><a class="header" href="#substrate-coreclient">Substrate Core(client)</a></h4>
<p>Substrate Core 本质上意味着我们可以以任何我们想要的方式实现我们的运行时，只要它以 WebAssembly 为目标并遵守 Substrate 块创建的基本法则。</p>
<p>然后，我们可以使用这个运行时并在 Substrate 节点中运行它。</p>
<div id="admonition-最高自由度" class="admonition info">
<div class="admonition-title">
<p>最高自由度</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-最高自由度"></a></p>
</div>
<div>
<p>这种方法当然需要最多的工作和最高的难度，但它也具有最高的技术自由度，同时仍然能够在 Substrate 生态系统中无缝工作。</p>
</div>
</div>
<p>说到 Substrate 的生态系统，有一个充满活力（充满活力）的开发者社区，他们在自己的项目中使用 Substrate，其中许多人通过共享自己的托盘(pallet)来回馈生态系统。</p>
<p>您可以通过使用诸如 <a href="https://substratemarketplace.com/">Substrate Market</a>
之类的站点或仅在托管 <a href="https://crates.io/">crates.io: Rust Package Registry</a> 的任何地方找到托盘(pallet)，因为 Substrate 托盘本质上是自包含的 Rust
库，您可以将其集成到您的 Substrate 项目中, 并根据需要进行配置。</p>
<p>与任何其他库一样，建议首先审核代码，并了解依赖外部代码与编写自己的代码之间的权衡。</p>
<p>在玩了一点预建节点之后，我们应该专注于 FRAME，学习如何通过在 Substrate 模板节点之上构建自定义区块链。这也是许多精彩教程的起点。</p>
<pre><code class="language-shell"> tree client -L 1 | pbcopy                                                                                                                                                                                                                    ─╯
client
├── allocator
├── api
├── authority-discovery
├── basic-authorship
├── beefy
├── block-builder
├── chain-spec
├── cli
├── consensus
├── db
├── executor
├── finality-grandpa
├── informant
├── keystore
├── network
├── network-gossip
├── offchain
├── peerset
├── proposer-metrics
├── rpc
├── rpc-api
├── rpc-servers
├── service
├── state-db
├── sync-state-rpc
├── sysinfo
├── telemetry
├── tracing
├── transaction-pool
└── utils

30 directories, 0 files
</code></pre>
<h3 id="其他"><a class="header" href="#其他">其他</a></h3>
<h4 id="primitives"><a class="header" href="#primitives">primitives</a></h4>
<pre><code class="language-shell">tree primitives -L 1 | pbcopy
primitives
├── api
├── application-crypto
├── arithmetic
├── authority-discovery
├── authorship
├── beefy
├── block-builder
├── blockchain
├── consensus
├── core
├── database
├── debug-derive
├── externalities
├── finality-grandpa
├── inherents
├── io
├── keyring
├── keystore
├── maybe-compressed-blob
├── merkle-mountain-range
├── npos-elections
├── offchain
├── panic-handler
├── rpc
├── runtime
├── runtime-interface
├── sandbox
├── serializer
├── session
├── staking
├── state-machine
├── std
├── storage
├── tasks
├── test-primitives
├── timestamp
├── tracing
├── transaction-pool
├── transaction-storage-proof
├── trie
├── version
└── wasm-interface

42 directories, 0 files

</code></pre>
<h4 id="scriptsci"><a class="header" href="#scriptsci">scripts/ci</a></h4>
<pre><code class="language-shell">tree scripts/ci | pbcopy
scripts/ci
├── common
│   └── lib.sh
├── deny.toml
├── docker
│   ├── subkey.Dockerfile
│   └── substrate.Dockerfile
├── github
│   ├── check_labels.sh
│   └── generate_changelog.sh
├── gitlab
│   ├── check_runtime.sh
│   ├── check_signed.sh
│   ├── ensure-deps.sh
│   ├── pipeline
│   │   ├── build.yml
│   │   ├── check.yml
│   │   ├── publish.yml
│   │   └── test.yml
│   ├── publish_draft_release.sh
│   └── skip_if_draft.sh
├── monitoring
│   ├── alerting-rules
│   │   ├── alerting-rule-tests.yaml
│   │   └── alerting-rules.yaml
│   └── grafana-dashboards
│       ├── README_dashboard.md
│       ├── substrate-networking.json
│       └── substrate-service-tasks.json
├── node-template-release
│   ├── Cargo.toml
│   └── src
│       └── main.rs
└── node-template-release.sh

10 directories, 23 files

</code></pre>
<h4 id="utils"><a class="header" href="#utils">utils</a></h4>
<pre><code class="language-shell">tree utils -L 1 | pbcopy
utils
├── build-script-utils
├── fork-tree
├── frame
├── prometheus
└── wasm-builder

5 directories, 0 files

</code></pre>
<h2 id="功能逻辑"><a class="header" href="#功能逻辑">功能逻辑</a></h2>
<div id="admonition-注意" class="admonition tip">
<div class="admonition-title">
<p>注意</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-注意"></a></p>
</div>
<div>
<p>这里将结合前面提到的runtim/core分块方式来进行功能模块说明</p>
</div>
</div>
<h2 id="特色代码"><a class="header" href="#特色代码">特色代码</a></h2>
<h2 id="参考资源"><a class="header" href="#参考资源">参考资源</a></h2>
<h3 id="online-book"><a class="header" href="#online-book">online-book</a></h3>
<ul>
<li><a href="https://github.com/paritytech/substrate">paritytech/substrate: Substrate: The platform for blockchain innovators</a></li>
<li><a href="https://docs.substrate.io/v3/getting-started/architecture/">Architecture | Substrate_</a></li>
<li><a href="https://www.bilibili.com/video/BV1KT4y1Y7Uf">substrate轻松学</a></li>
</ul>
<h3 id="fragment"><a class="header" href="#fragment">fragment</a></h3>
<ul>
<li><a href="https://www.zhihu.com/column/c_74315572">链块与分散的数据 - 知乎</a></li>
<li><a href="https://web.archive.org/web/20220627112702/https://mp.weixin.qq.com/s/MP0LXWVqUn5R4C6fAbe1nQ">区块链与substrate</a></li>
<li><a href="https://web.archive.org/web/20220618042220/https://zhuanlan.zhihu.com/p/47805322">substrate 源码解析与运用 - 介绍 - 知乎</a></li>
<li><a href="https://www.zhihu.com/column/substrate">Substrate区块链开发 - 知乎</a></li>
<li><a href="https://substrate.io/ecosystem/">Substrate Ecosystem | Substrate_</a></li>
<li><a href="https://blog.logrocket.com/substrate-blockchain-framework-core-concepts/"><strong>Substrate blockchain development: Core concepts - LogRocket
Blog</strong></a>：对Substrate的简要介绍</li>
<li><a href="https://substrate.io/developers/playground/">Playground | Substrate_</a></li>
<li><a href="https://substratemarketplace.com/">Substrate Market</a></li>
<li><a href="https://crates.io/">crates.io: Rust Package Registry</a></li>
<li><a href="https://docs.substrate.io/quick-start/">Quick start | Substrate Docs</a></li>
<li><a href="https://docs.substrate.io/tutorials/">Tutorials | Substrate Docs</a></li>
<li><a href="https://substrate.io/ecosystem/projects/">Projects | Substrate_</a>: 一些基于Substrate建立的项目，值得参考</li>
<li><a href="https://docs.substrate.io/tutorials/v3/kitties/pt1/">Build the Substrate Kitties Chain | Substrate_</a>: 教你建立一个nft平台</li>
<li><a href="https://docs.substrate.io/v3/runtime/frame/">FRAME | Substrate_</a></li>
<li><a href="https://medium.com/frctls/the-substrate-guide-i-wish-i-had-6bc76b10ddd2">The Substrate Guide I Wish I Had. Fractal’s blockchain lead Shelby… | by Fractal | Fractal | Medium</a></li>
<li><a href="https://docs.substrate.io/reference/how-to-guides/">How-to quick reference guides | Substrate Docs</a></li>
</ul>
<h3 id="runtime-1"><a class="header" href="#runtime-1">Runtime</a></h3>
<ul>
<li><a href="https://web.archive.org/web/20220627114404/https://zhuanlan.zhihu.com/p/79539782">剖析Substrate Runtime - 知乎</a>
<blockquote>
<p>基于Substrate开发自己的运行时模块，会遇到一个比较大的挑战，就是理解Substrate运行时（Runtime）。
本文首先介绍了Runtime的架构，类型，常用宏，并结合一个实际的演示项目，做了具体代码分析，以帮助大家更好地理解在Substrate中它们是如何一起工作的。</p>
</blockquote>
</li>
</ul>
<h3 id="local"><a class="header" href="#local">local</a></h3>
<div style="break-before: page; page-break-before: always;"></div><h1 id="漫话rust"><a class="header" href="#漫话rust">漫话Rust</a></h1>
<!--ts-->
<ul>
<li><a href="layer5_ecosystem/1_learning_resource/talks.html#%E6%BC%AB%E8%AF%9Drust">漫话Rust</a>
<ul>
<li><a href="layer5_ecosystem/1_learning_resource/talks.html#%E8%AF%9D%E9%A2%98">话题</a>
<ul>
<li><a href="layer5_ecosystem/1_learning_resource/talks.html#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A7%89%E5%BE%97-rust-%E9%9A%BE%E4%B8%8A%E6%89%8B%E5%B0%A4%E5%85%B6%E6%98%AF%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F---%E7%9F%A5%E4%B9%8E">为什么觉得 Rust 难上手，尤其是生命周期？ - 知乎</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:40 UTC 2022 -->
<!--te-->
<h2 id="话题"><a class="header" href="#话题">话题</a></h2>
<h3 id="为什么觉得-rust-难上手尤其是生命周期---知乎"><a class="header" href="#为什么觉得-rust-难上手尤其是生命周期---知乎">为什么觉得 Rust 难上手，尤其是生命周期？ - 知乎</a></h3>
<ul>
<li><a href="https://www.zhihu.com/question/537491826">为什么觉得 Rust 难上手，尤其是生命周期？ - 知乎</a></li>
</ul>
<div id="admonition-把技巧掺杂在上手过程里" class="admonition quote">
<div class="admonition-title">
<p>把技巧掺杂在上手过程里</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/1_learning_resource/talks.html#admonition-把技巧掺杂在上手过程里"></a></p>
</div>
<div>
<p>因为其他语言上手真的就只是上手而已，你还得买《Effective Xxxx》甚至《More Effective Xxxx》，以及《Xxx并发编程》《深入理解Xxx虚拟机》等等各种书籍来学习各种避坑、省力、debug技巧。而Rust的上手是把这些技巧直接掺在上手过程里了，编译器以及配套工具（比如错误提示里的help，fmt、clippy）逼着你把代码写对，上手Rust等于同时被迫学会了这一堆技巧。</p>
</div>
</div>
<div id="admonition-区分编译期抽象和运行期抽象" class="admonition quote">
<div class="admonition-title">
<p>区分编译期抽象和运行期抽象</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/1_learning_resource/talks.html#admonition-区分编译期抽象和运行期抽象"></a></p>
</div>
<div>
<ol>
<li>学习 rust 上手难一般是因为缺乏丰富的 Cpp 经验。因此，大家会对【胖指针】【瘦指针】【虚表 vtable 】等基础概念缺少深刻的理解。而这些概念正是区分 rust 中【编译期间-抽象 — 单态化】与【运行期间-抽象 — <code>trait Object</code> 】的认知“门槛”。</li>
<li>另一方面，学习lifetime 上手难是因为大家已经习惯了“颐指气使”地向计算机“发号施令”和下达指示了。</li>
<li>但是， lifetime  完全是另一码事。就【生命周期】而言， rustc 的角色是【仲裁者】，而不是【执行者】。</li>
</ol>
<blockquote>
<p>【生命周期·标注】被设计用来：由 @程序员 向【仲裁者 rustc 】表述自己的代码设计意图（这些意图通过直接扫描代码不容易被揣测出来）。然后，再由【仲裁者】判断你的代码意图是否可行，因为代码首先得足够安全。</p>
</blockquote>
<p>所以，你不能命令 rustc ：我要求某某变量一定得活多长时间（一切皆可操控，那是 Cpp）；而是，询问 rustc ：我如此设计代码，想让某某变量活这么长时间，你看行得通吗？若 rustc 判定行不通，那么一个编译错误就等着你了。</p>
<p>比如说，函数的【生命周期_泛型参数】是被用来将</p>
<ol>
<li>引用类型的函数入参的生命周期与</li>
<li>引用类型的函数返回值的生命周期关联起来。</li>
</ol>
<p>以便，在对代码做【静态分析】时，编译器能够根据（已知）入参推断出函数返回值的生命周期。</p>
<blockquote>
<p>这是帮助编译器理解咱们代码的“脚注”，而不是给编译器下达的“指示”。得和 <code>rustc</code> “商量”着来。</p>
</blockquote>
</div>
</div>
<div id="admonition-对c不熟悉" class="admonition quote">
<div class="admonition-title">
<p>对C++不熟悉</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/1_learning_resource/talks.html#admonition-对c不熟悉"></a></p>
</div>
<div>
<p>最直接的原因就是对C++不熟悉，如果你明白移动语义，完美转发，智能指针这些东西。Rust也不过是强制我们在正确使用C++里面的某些工具而已。</p>
</div>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="底层抽象"><a class="header" href="#底层抽象">底层抽象</a></h1>
<!--ts-->
<ul>
<li><a href="layer1_underlying_abstract/layer1_underlying_abstract.html#%E5%BA%95%E5%B1%82%E6%8A%BD%E8%B1%A1">底层抽象</a></li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:28 UTC 2022 -->
<!--te--><div style="break-before: page; page-break-before: always;"></div><!--ts-->
<ul>
<li><a href="layer1_underlying_abstract/1_virtual_memory/virtual_memory.html#%E4%BB%8B%E7%BB%8D">介绍</a></li>
<li><a href="layer1_underlying_abstract/1_virtual_memory/virtual_memory.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a>
<ul>
<li><a href="layer1_underlying_abstract/1_virtual_memory/virtual_memory.html#online-book">online-book</a></li>
<li><a href="layer1_underlying_abstract/1_virtual_memory/virtual_memory.html#fragment">fragment</a></li>
<li><a href="layer1_underlying_abstract/1_virtual_memory/virtual_memory.html#local">local</a></li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:21 UTC 2022 -->
<!--te-->
<h2 id="介绍"><a class="header" href="#介绍">介绍</a></h2>
<p>从计算机组成原理了解到操作系统，当一个程序开始运行的时候，不论是可执行程序还是命令行，都会从创建进程，申请进程资源开始，再到堆栈(stack/heap)
的使用，申请与释放资源。这一系列操作对于编程来说重要性不言而喻，只不过根据编程语言的高级程度不同，开发者需要掌握的知识也有不同。</p>
<p>而在rust语言编程中，内存的管理方式及其重要。所以这一层主要先介绍虚拟内存管理以及相关出现的内容安全问题，接着介绍rust是如何通过所有权、作用域和生命周期，引申出借用、移动语义、复制语义等一系列内容来解决内存安全问题。</p>
<h2 id="参考资源-1"><a class="header" href="#参考资源-1">参考资源</a></h2>
<h3 id="online-book-1"><a class="header" href="#online-book-1">online-book</a></h3>
<h3 id="fragment-1"><a class="header" href="#fragment-1">fragment</a></h3>
<h3 id="local-1"><a class="header" href="#local-1">local</a></h3>
<div style="break-before: page; page-break-before: always;"></div><h1 id="内存管理与内存安全"><a class="header" href="#内存管理与内存安全">内存管理与内存安全</a></h1>
<!--ts-->
<ul>
<li><a href="layer1_underlying_abstract/1_virtual_memory/memory_manage_safety.html#%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E4%B8%8E%E5%86%85%E5%AD%98%E5%AE%89%E5%85%A8">内存管理与内存安全</a>
<ul>
<li><a href="layer1_underlying_abstract/1_virtual_memory/memory_manage_safety.html#%E5%8F%82%E8%80%83">参考</a>
<ul>
<li><a href="layer1_underlying_abstract/1_virtual_memory/memory_manage_safety.html#online-book">online-book</a></li>
<li><a href="layer1_underlying_abstract/1_virtual_memory/memory_manage_safety.html#fragment">fragment</a></li>
<li><a href="layer1_underlying_abstract/1_virtual_memory/memory_manage_safety.html#local">local</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:20 UTC 2022 -->
<!--te-->
<h2 id="参考"><a class="header" href="#参考">参考</a></h2>
<h3 id="online-book-2"><a class="header" href="#online-book-2">online-book</a></h3>
<ul>
<li><a href="https://doc.rust-lang.org/stable/reference/memory-model.html">Memory model - The Rust Reference</a></li>
</ul>
<h3 id="fragment-2"><a class="header" href="#fragment-2">fragment</a></h3>
<ul>
<li><a href="https://segmentfault.com/a/1190000020338427">Go内存分配那些事，就这么简单！ - SegmentFault 思否</a></li>
</ul>
<h3 id="local-2"><a class="header" href="#local-2">local</a></h3>
<div style="break-before: page; page-break-before: always;"></div><h1 id="所有权三件套所有权借用与生命周期"><a class="header" href="#所有权三件套所有权借用与生命周期">所有权三件套：所有权、借用与生命周期</a></h1>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/Ownership.jpeg" alt="Ownership" /></p>
<!--ts-->
<ul>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#%E6%89%80%E6%9C%89%E6%9D%83%E4%B8%89%E4%BB%B6%E5%A5%97%E6%89%80%E6%9C%89%E6%9D%83%E5%80%9F%E7%94%A8%E4%B8%8E%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F">所有权三件套：所有权、借用与生命周期</a>
<ul>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#%E7%BB%BC%E8%BF%B0">综述</a></li>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#%E6%89%80%E6%9C%89%E6%9D%83">所有权</a>
<ul>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#%E8%B5%84%E6%BA%90%E6%89%80%E6%9C%89%E8%80%85">资源所有者</a></li>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#%E8%B5%84%E6%BA%90%E6%89%80%E6%9C%89%E8%80%85%E8%B4%9F%E8%B4%A3%E9%87%8A%E6%94%BE">资源所有者负责释放</a>
<ul>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#%E5%8A%A8%E6%80%81%E8%AF%AD%E8%A8%80%E9%9D%A0gc%E5%9C%A8%E8%BF%90%E8%A1%8C%E6%9C%9F%E5%A4%84%E7%90%86">动态语言靠GC在运行期处理</a></li>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#%E9%9D%99%E6%80%81%E8%AF%AD%E8%A8%80%E5%9C%A8%E7%BC%96%E8%AF%91%E6%9C%9F%E8%A7%84%E5%AE%9A">静态语言在编译期规定</a></li>
</ul>
</li>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#rust%E7%9A%84%E6%89%80%E6%9C%89%E6%9D%83%E8%A7%84%E5%88%99">Rust的所有权规则</a></li>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#%E6%8F%A3%E6%91%A9%E6%89%80%E6%9C%89%E6%9D%83%E5%90%AB%E4%B9%89">揣摩所有权含义</a></li>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%89%80%E6%9C%89%E6%9D%83%E8%80%83%E8%99%91%E5%9B%A0%E7%B4%A0">作用域：所有权考虑因素</a>
<ul>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#%E5%A4%9A%E4%BD%9C%E7%94%A8%E5%9F%9F%E7%9A%84%E6%83%85%E5%86%B5%E5%88%86%E6%9E%90">多作用域的情况分析</a></li>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%98%AF%E6%8E%A8%E6%96%AD%E6%89%80%E6%9C%89%E6%9D%83%E6%97%B6%E7%9A%84%E4%B8%80%E4%B8%AA%E9%87%8D%E8%A6%81%E5%B1%9E%E6%80%A7">作用域是推断所有权时的一个重要属性</a></li>
</ul>
</li>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#%E5%BC%95%E5%85%A5%E7%A7%BB%E5%8A%A8%E5%92%8C%E5%A4%8D%E5%88%B6%E8%AF%AD%E4%B9%89">引入移动和复制语义</a>
<ul>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#%E8%AF%AD%E4%B9%89%E6%98%AF%E4%BB%80%E4%B9%88%E6%84%8F%E6%80%9D">语义是什么意思</a></li>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#%E7%A7%BB%E5%8A%A8%E8%AF%AD%E4%B9%89%E5%8F%98%E9%87%8F%E8%AE%BF%E9%97%AE%E6%88%96%E9%87%8D%E6%96%B0%E5%88%86%E9%85%8D%E6%97%B6%E9%BB%98%E8%AE%A4">移动语义：变量访问或重新分配时默认</a></li>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#%E5%A4%8D%E5%88%B6%E8%AF%AD%E4%B9%89">复制语义</a></li>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#%E4%BD%BF%E7%94%A8copy%E7%89%B9%E5%BE%81%E6%9B%B4%E6%94%B9%E8%AF%AD%E4%B9%89">使用Copy特征更改语义</a></li>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#copy-%E7%89%B9%E5%BE%81%E4%BE%9D%E8%B5%96%E4%BA%8Eclone-%E7%89%B9%E5%BE%81">Copy 特征依赖于Clone 特征</a></li>
</ul>
</li>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#%E5%8C%BA%E5%88%AB%E4%B8%80%E4%B8%8Bcopy%E4%B8%8Eclone-trait">区别一下Copy与Clone trait</a>
<ul>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#copy">Copy</a></li>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#clone">Clone</a></li>
</ul>
</li>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#copy%E4%B8%8Eclone%E7%9A%84%E4%BD%BF%E7%94%A8%E5%8E%9F%E5%88%99">Copy与Clone的使用原则</a>
<ul>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#%E4%BD%95%E6%97%B6%E5%9C%A8%E7%B1%BB%E5%9E%8B%E4%B8%8A%E5%AE%9E%E7%8E%B0-copy">何时在类型上实现 Copy</a></li>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#%E4%BD%95%E6%97%B6%E5%9C%A8%E7%B1%BB%E5%9E%8B%E4%B8%8A%E5%AE%9E%E7%8E%B0-clone">何时在类型上实现 Clone。</a></li>
</ul>
</li>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#%E6%89%80%E6%9C%89%E6%9D%83%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF">所有权使用场景</a>
<ul>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#let%E7%BB%91%E5%AE%9A%E7%A4%BA%E4%BE%8B">let绑定示例</a></li>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#%E5%B0%86%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92%E7%BB%99%E5%87%BD%E6%95%B0">将参数传递给函数</a></li>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#match%E8%A1%A8%E8%BE%BE%E5%BC%8F">match表达式</a></li>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#impl%E4%BB%A3%E7%A0%81%E5%9D%97">impl代码块</a></li>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#%E9%97%AD%E5%8C%85">闭包</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#%E5%80%9F%E7%94%A8-%E9%80%9A%E8%BF%87%E5%BC%95%E7%94%A8%E8%A7%84%E9%81%BF%E6%89%80%E6%9C%89%E6%9D%83%E8%A7%84%E5%88%99%E9%99%90%E5%88%B6">借用: 通过引用规避所有权规则限制</a>
<ul>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#%E4%B8%BA%E4%BD%95%E9%9C%80%E8%A6%81%E5%80%9F%E7%94%A8%E5%BC%95%E7%94%A8">为何需要借用/引用</a></li>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#%E5%80%9F%E7%94%A8-or-%E5%BC%95%E7%94%A8">借用 or 引用？</a></li>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#%E4%B8%A4%E7%A7%8D%E5%80%9F%E7%94%A8%E6%96%B9%E5%BC%8F">两种借用方式</a>
<ul>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#%E4%B8%8D%E5%8F%AF%E5%8F%98%E5%80%9F%E7%94%A8">不可变借用：&amp;</a></li>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#%E5%8F%AF%E5%8F%98%E5%80%9F%E7%94%A8mut">可变借用：&amp;mut</a></li>
</ul>
</li>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#%E5%80%9F%E7%94%A8%E8%A7%84%E5%88%99">借用规则</a></li>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#%E5%A6%82%E6%9E%9C%E8%BF%9D%E5%8F%8D%E5%80%9F%E7%94%A8%E8%A7%84%E5%88%99">如果违反借用规则</a>
<ul>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#%E5%87%BD%E6%95%B0%E4%B8%AD%E7%9A%84%E5%80%9F%E7%94%A8">函数中的借用</a></li>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#%E5%8C%B9%E9%85%8D%E4%B8%AD%E7%9A%84%E5%80%9F%E7%94%A8">匹配中的借用</a></li>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#%E4%BB%8E%E5%87%BD%E6%95%B0%E8%BF%94%E5%9B%9E%E5%BC%95%E7%94%A8">从函数返回引用：</a></li>
</ul>
</li>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#%E5%9F%BA%E4%BA%8E%E5%80%9F%E7%94%A8%E8%A7%84%E5%88%99%E7%9A%84%E6%96%B9%E6%B3%95%E7%B1%BB%E5%9E%8B">基于借用规则的方法类型</a></li>
</ul>
</li>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%92%88%E5%AF%B9%E5%BC%95%E7%94%A8%E9%99%84%E5%8A%A0%E7%9A%84%E4%BF%A1%E6%81%AF">生命周期：针对引用附加的信息</a>
<ul>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#%E4%BB%8E%E5%8F%98%E9%87%8F%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%BC%80%E5%A7%8B">从变量生命周期开始</a></li>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%99%90%E5%AE%9A">生命周期限定</a></li>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%B3%A8%E8%A7%A3">生命周期注解</a></li>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E7%9C%81%E7%95%A5lifetime-elision">生命周期省略(Lifetime Elision)</a></li>
</ul>
</li>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#%E9%94%80%E6%AF%81destructors">销毁(Destructors)</a></li>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a>
<ul>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#online-book">online-book</a></li>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#fragment">fragment</a></li>
<li><a href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#local">local</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:21 UTC 2022 -->
<!--te-->
<h2 id="综述"><a class="header" href="#综述">综述</a></h2>
<pre><code class="language-text">┌───────────────────────────────────┐
│                                   │
│                                   │
│         .───────.       ┌──────┐  │
│       ,'         `.     │Borrow│  │
│     ,'             `.   └──────┘  │
│    ;   ┌─────────┐   :            │
│    │   │OwnerShip│   │            │
│    │   └─────────┘   │            │
│    :     ┌─────┐     ; ┌────────┐ │
│     ╲    │Scope│    ╱  │Lifetime│ │
│      `.  └─────┘  ,'   └────────┘ │
│        `.       ,'                │
│          `─────'                  │
│                                   │
│                                   │
└───────────────────────────────────┘
</code></pre>
<p>所有权、作用域、借用与生命周期是 Rust 的内存安全及其零成本抽象原则的核心。 它们让 Rust 能够在编译期检测程序中内存安全违规,在离开作用域时自动释放相关资源等情况。
所有权有点类似核心原则,而借用和生命周期是对语言类型系统的扩展。在代码的不同上下文中加强或有时放松所有权原则,可确保编译期内存管理正常运作。</p>
<h2 id="所有权"><a class="header" href="#所有权">所有权</a></h2>
<h3 id="资源所有者"><a class="header" href="#资源所有者">资源所有者</a></h3>
<p>程序中资源的真正所有者的概念因语言而异。这里的含义是通过资源, 主要包含下列内容：</p>
<ol>
<li>共同引用在堆或堆栈上保存值的任何变量</li>
<li>或者是包含打开文件描述符、数据库连接套接字、网络套接字及类似内容的变量。</li>
</ol>
<p>从它们存在到完成程序调用及其之后的时间,都会占用一些内存。</p>
<h3 id="资源所有者负责释放"><a class="header" href="#资源所有者负责释放">资源所有者负责释放</a></h3>
<blockquote>
<p>资源所有者的一个重要职责就是明智地释放它们使用的内存,因为如果无法在适当的位置和时间执行取消内存分配,就可能导致内存泄漏。</p>
</blockquote>
<h4 id="动态语言靠gc在运行期处理"><a class="header" href="#动态语言靠gc在运行期处理">动态语言靠GC在运行期处理</a></h4>
<p>在使用 Python 等动态语言编程时,可以将多个所有者或别名添加到 list 对象中,从而使用执行该对象的众多变量之一添加或删除 list 中的项目。变量不需要关心如何释放对象使用过的内存,因为 GC
会处理这些事情,并且一旦指向对象的所有引用都消失,GC 就会释放相关的内存。</p>
<h4 id="静态语言在编译期规定"><a class="header" href="#静态语言在编译期规定">静态语言在编译期规定</a></h4>
<p>对于 C/C++/Golang之类的编译语言,在智能指针出现之前,程序库对代码使用完毕的相关资源 API 的调用方或者被调用方是否负责释放内存有明确的规定。存在这些规则是因为编译器不会在这些语言中强制限定所有权。在
C++中不使用智能指针仍然有可能出现问题。在C++中,存在多个变量指向堆上的某个值是完全没问题的(尽管我们不建议这么做) ,这就是所谓的别名。由于具有指向资源的多个指针或别名的灵活性,程序员会遇到各种各样的问题,其中之一就是
C++中的迭代器失效问题。</p>
<blockquote>
<p>具体而言,当给定作用域中资源的其他不可变别名相对存在至少一个可变别名时,就会出现问题</p>
</blockquote>
<h3 id="rust的所有权规则"><a class="header" href="#rust的所有权规则">Rust的所有权规则</a></h3>
<p>Rust 试图为程序中值的所有权设定适当的语义。Rust 的所有权规则遵循以下原则。</p>
<ul>
<li>使用 let 语句创建值或资源,并将其分配给变量时,该变量将成为资源的所有者。</li>
<li>当值从一个变量重新分配给另一个变量时, 值的所有权将转移至另一个变量, 原来的变量将失效以便另作他用。</li>
<li>值和变量在其作用域的末尾会被清理、释放。</li>
</ul>
<h3 id="揣摩所有权含义"><a class="header" href="#揣摩所有权含义">揣摩所有权含义</a></h3>
<p>需要注意的是,Rust 中的值只有一个所有者,即创建它们的变量。其理念很简单,但是它的含义值得揣摩：</p>
<pre><pre class="playground"><code class="language-rust  editable">// ownership_basics.rs

#[derive(Debug)]
struct Foo(u32);

fn main() {
    // 根据所有权规则, foo 是 Foo 实例的所有者
    let foo = Foo(2048);
    /*
        bar 成为Foo 实例的新所有者, 而旧的 foo 是一个废弃变量.
        经过此变动之后不能在其他任何地方使用
    */
    let bar = foo; // value moved here
    /*
        每当我们将变量分配给某个其他变量或从变量读取数据时,Rust 会默认移动变量指向的值。
        所有权规则可以防止你通过多个访问点来修改值,这可能导致访问已被释放的变量.
        即使在单线程上下文中,使用允许多个值的可变别名的语言也是如此
    */
    println!(&quot;Foo is {:?}&quot;, foo);  // value borrowed here after move
    println!(&quot;Bar is {:?}&quot;, bar);
}
</code></pre></pre>
<p>每当我们将变量分配给某个其他变量或从变量读取数据时,Rust 会默认移动变量指向的值。所有权规则可以防止你通过多个访问点来修改值,这可能导致访问已被释放的变量,即使在单线程上下文中,使用允许多个值的可变别名的语言也是如此</p>
<h3 id="作用域所有权考虑因素"><a class="header" href="#作用域所有权考虑因素">作用域：所有权考虑因素</a></h3>
<blockquote>
<p>为了分析某个值何时超出作用域,所有权规则还会考虑变量的作用域</p>
</blockquote>
<ol>
<li>在 Rust 的背景下, 所有权与作用域协同工作。</li>
<li>因此,作用域只不过是变量和值存在的环境。你声明的每个变量都与作用域有关。</li>
<li>代码中的作用域是由一对花括号表示的。无论何时使用块表达式都会创建一个作用域,即任何以花括号开头和结尾的表达式。</li>
<li>此外,作用域支持互相嵌套,并且可以在子作用域中访问父作用域的元素,但反过来不行</li>
</ol>
<h4 id="多作用域的情况分析"><a class="header" href="#多作用域的情况分析">多作用域的情况分析</a></h4>
<pre><pre class="playground"><code class="language-rust  editable">// scopes.rs

/*
由于函数可以创建新的作用域, 因此 main 函数引入了根级别作用域 0,
在代码中定义为 level_0_str
*/
fn main() {
    let level_0_str = String::from(&quot;foo&quot;);
    /*
        在 0 级作用域中, 创建了一个新的作用域,即作用域 1,
        并且带有一个花括号,其中包含变量level_1_number。
    */
    {
        let level_1_number = 9;
        /*
            在 1 级作用域中, 创建了一个块表达式, 它成为 2 级作用域。
            在其中, 声明了另一个变量 level_2_vector,
            以便可以将 level_1_number 添加到其中,
            而level_1_number 来自其父级作用域 1
        */
        {
            let mut level_2_vector = vec![1, 2, 3];
            level_2_vector.push(level_1_number);    // can access
        } // level_2_vector goes out of scope here 

        level_2_vector.push(4);    // no longer exists
    } // level_1_number goes out of scope here
} // level_0_str goes out of scope here
</code></pre></pre>
<h4 id="作用域是推断所有权时的一个重要属性"><a class="header" href="#作用域是推断所有权时的一个重要属性">作用域是推断所有权时的一个重要属性</a></h4>
<blockquote>
<p>作用域还会被用来推断后续介绍的借用和生命周期。</p>
</blockquote>
<ol>
<li>当作用域结束时,拥有值的任何变量都会运行相关代码以取消分配该值,并且其自身在作用域之外是无效的。</li>
<li>特别是对在堆上分配的值,drop 方法会被放在作用域结束标记}之前调用。</li>
<li>这类似于在 C 语言中调用 free 函数,但这里是隐式的, 并且可以避免程序员忘记释放值。</li>
<li>drop 方法来自 Drop 特征,它是为 Rust 中大部分堆分配类型实现的,可以轻松地自动释放资源。</li>
</ol>
<h3 id="引入移动和复制语义"><a class="header" href="#引入移动和复制语义">引入移动和复制语义</a></h3>
<blockquote>
<p>结合作用域判断一下下列代码是否正确</p>
</blockquote>
<pre><pre class="playground"><code class="language-rust  editable">// ownership_primitives.rs

fn main() {
    let foo = 4623;
    /*
        4623 的所有权不会从 foo 转移到 bar,但 bar 会获得4623 的单独副本。
        看起来基元类型在 Rust 中会被特殊对待,它们会被移动而不是复制。
        这意味着根据我们在 Rust 中使用的类型,存在不同的所有权语义,这将引入移动和复制语义的概念
    */
    let bar = foo;
    println!(&quot;{:?} {:?}&quot;, foo, bar); 
}
</code></pre></pre>
<h4 id="语义是什么意思"><a class="header" href="#语义是什么意思">语义是什么意思</a></h4>
<p>以移动语义为例，在 Rust
中,变量绑定默认具有移动语义。但这究竟意味着什么?要理解这一点,我们需要考虑如何在程序中使用变量。我们创建值或资源并将它们分配给变量,以便在程序中可以方便地引用它们。这些变量是指向值所在内存地址的名称。现在,诸如读取、赋值、添加及将它们传递给函数等对变量的操作,在访问变量指向值的方式上可能具有不同的语义或含义。在静态类型语言中,这些语义大致分为移动语义和复制语义。</p>
<h4 id="移动语义变量访问或重新分配时默认"><a class="header" href="#移动语义变量访问或重新分配时默认">移动语义：变量访问或重新分配时默认</a></h4>
<blockquote>
<p>通过变量访问或重新分配给变量时移动到接收项的值表示移动语义。</p>
</blockquote>
<p>由于Rust 的仿射类型系统,它默认会采用移动语义。仿射类型系统的一个突出特点是值或资源只能使用一次,而 Rust 通过所有权规则展示此属性。</p>
<h4 id="复制语义"><a class="header" href="#复制语义">复制语义</a></h4>
<p>默认情况下,通过变量分配或访问,以及从函数返回时复制的值(例如按位复制)具有复制语义。这意味着该值可以使用任意次数,每个值都是全新的。</p>
<h4 id="使用copy特征更改语义"><a class="header" href="#使用copy特征更改语义">使用Copy特征更改语义</a></h4>
<p>Rust 中的移动语义有时会受到限制。幸运的是,通过实现 Copy 特征可以更改类型的行为以遵循复制语义。基元和其他仅适用于堆栈的数据类型在默认情况下实现了上述特征,这也是前面的基元代码能够正常工作的原因</p>
<pre><pre class="playground"><code class="language-rust  editable">// making_copy_types.rs

#[derive(Copy, Debug)]  // the trait `Clone` is not implemented for `Dummy`
struct Dummy;

fn main() {
    let a = Dummy;
    let b = a;
    println!(&quot;{:?}&quot;, a);
    println!(&quot;{:?}&quot;, b);
}
</code></pre></pre>
<h4 id="copy-特征依赖于clone-特征"><a class="header" href="#copy-特征依赖于clone-特征">Copy 特征依赖于Clone 特征</a></h4>
<blockquote>
<p>Clone 是 Copy 的父级特征, 任何实现 Copy 特征的类型必须实现 Clone。</p>
</blockquote>
<pre><pre class="playground"><code class="language-rust  editable">// making_copy_types.rs

// 可以在派生注释中的 Copy 旁边添加 Clone 特征来让该示例通过编译
#[derive(Copy, Clone, Debug)]
struct Dummy;

fn main() {
    let a = Dummy;
    let b = a;
    println!(&quot;{:?}&quot;, a);
    println!(&quot;{:?}&quot;, b);
}
</code></pre></pre>
<h3 id="区别一下copy与clone-trait"><a class="header" href="#区别一下copy与clone-trait">区别一下Copy与Clone trait</a></h3>
<blockquote>
<p>Copy 和 Clone 特征传达了在代码中使用类型时如何进行复制的原理。</p>
</blockquote>
<p>|特征|复制方式|复制内容|使用场景|
|::----|:--:--------|:--:--------|:--:--------|
|Copy|隐式，自动化特征|堆栈|可以在堆栈上单独表示的小型值|
|Clone|显式调用clone|堆+栈|在堆上还包含一个值作为其表示的一部分|</p>
<h4 id="copy"><a class="header" href="#copy">Copy</a></h4>
<ol>
<li>Copy 特征通常用于可以在堆栈上完全表示的类型, 也就是说它们自身没有任何部分位于堆上。</li>
<li>如果出现了这种情况,那么 Copy 将是开销很大的操作,因为它必须从堆中复制值。这直接影响到赋值运算符的工作方式。</li>
<li>如果类型实现了 Copy,则从一个变量到另一个变量的赋值操作将隐式复制数据。</li>
</ol>
<h4 id="clone"><a class="header" href="#clone">Clone</a></h4>
<p>Clone 特征用于显式复制, 并附带 clone 方法, 类型可以实现该方法以获取自身的副本</p>
<p>Clone 有一个名为 clone 的方法,用于获取接收者的不可变引用,即&amp;self,并返回相同类型的新值。用户自定义类型或任何需要提供能够复制自身的包装器类型,应通过实现clone 方法来实现 Clone 特征</p>
<blockquote>
<p>一个通过 Clone 特征复制类型的示例</p>
</blockquote>
<pre><pre class="playground"><code class="language-rust  editable">// explicit_copy.rs

// 在 derive 属性中添加了一个 Clone 特征。
#[derive(Clone, Debug)]
struct Dummy {
    items: u32,
}

fn main() {
    let a = Dummy { items: 54 };
    // 有了Clone, 我们就可以在 a 上调用 clone 方法来获得它的新副本
    let b = a.clone();
    println!(&quot;a: {:?}, b: {:?}&quot;, a, b);
}
</code></pre></pre>
<h3 id="copy与clone的使用原则"><a class="header" href="#copy与clone的使用原则">Copy与Clone的使用原则</a></h3>
<h4 id="何时在类型上实现-copy"><a class="header" href="#何时在类型上实现-copy">何时在类型上实现 Copy</a></h4>
<blockquote>
<p>可以在堆栈上单独表示的小型值如下所示。</p>
</blockquote>
<ul>
<li>如果类型仅依赖于在其上实现了 Copy 特征的其他类型, 则 Copy 特征是为其隐式实现的。</li>
<li>Copy 特征隐式影响赋值运算符的工作方式。 使用 Copy 特征构建自定义外部可见类型需要考虑它是否会对赋值运算符产生影响。 如果在开发的早期阶段,
你的类型是Copy,后续将它移除之后则会影响使用该类型进行赋值的所有环节。你可以通过这种方式轻松地破坏 API。</li>
</ul>
<h4 id="何时在类型上实现-clone"><a class="header" href="#何时在类型上实现-clone">何时在类型上实现 Clone。</a></h4>
<ul>
<li>Clone 特征只是声明一个 clone 方法,需要被显式调用。</li>
<li>如果你的类型在堆上还包含一个值作为其表示的一部分, 那么可选择实现 Clone 特征,这也需要向复制堆数据的用户明确表示。</li>
<li>如果要实现智能指针类型(例如引用计数类型) ,那么应该在类型上实现 Clone 特征,以便仅复制堆栈上的指针。</li>
</ul>
<h3 id="所有权使用场景"><a class="header" href="#所有权使用场景">所有权使用场景</a></h3>
<blockquote>
<p>重要的是我们能够识别它和编译器给出的错误提示信息</p>
</blockquote>
<h4 id="let绑定示例"><a class="header" href="#let绑定示例">let绑定示例</a></h4>
<h4 id="将参数传递给函数"><a class="header" href="#将参数传递给函数">将参数传递给函数</a></h4>
<blockquote>
<p>如果将参数传递给函数,那么相同的所有权规则也同样有效</p>
</blockquote>
<pre><pre class="playground"><code class="language-rust  editable">// ownership_functions.rs

fn take_the_n(n: u8) {}

fn take_the_s(s: String) {}

fn main() {
    let n = 5;
    let s = String::from(&quot;string&quot;);
    // take_the_n 函数能够正常工作,是因为 u8(基元类型)实现了 Copy 特征
    take_the_n(n);
    /*
        String 并没有实现 Copy 特征,因此值的所有权在 take_the_s 函数中会发生移动。
        当函数返回时,相关值的作用域也随之结束,并且会在 s 上调用 drop 方法,
        这会释放 s 所使用的堆内存。
        因此,在函数调用结束后 s 将失效
        使用clone即可通过编译：take_the_s(s.clone())
    */
    take_the_s(s);

    println!(&quot;n is {}&quot;, n);
    println!(&quot;s is {}&quot;, s);
}
</code></pre></pre>
<blockquote>
<p>如果我们只需要变量 s 的读取访问权限,那么可以让该代码正常工作的另一种方法是将字符串 s 传递回 main 函数</p>
</blockquote>
<pre><pre class="playground"><code class="language-rust  editable">// ownership_functions_back.rs

fn take_the_n(n: u8) {}

// 添加了一个返回类型
fn take_the_s(s: String) -&gt; String {
    println!(&quot;inside function: {}&quot;, s);
    // 并将传递的字符串返回给调用者
    s
}

fn main() {
    let n = 5;
    let s = String::from(&quot;string&quot;);

    take_the_n(n);
    let s = take_the_s(s);

    println!(&quot;n is {}&quot;, n);
    println!(&quot;s is {}&quot;, s);
}
</code></pre></pre>
<h4 id="match表达式"><a class="header" href="#match表达式">match表达式</a></h4>
<blockquote>
<p>在 match 表达式中,移动类型默认也会被移动</p>
</blockquote>
<pre><pre class="playground"><code class="language-rust  editable">// ownership_match.rs

#[derive(Debug)]
enum Food {
    Cake,
    Pizza,
    Salad,
}

#[derive(Debug)]
struct Bag {
    food: Food,
}

fn main() {
    let bag = Bag { food: Food::Cake };
    match bag.food {
        Food::Cake =&gt; println!(&quot;I got cake&quot;),
        a =&gt; println!(&quot;I got {:?}&quot;, a) // value partially moved here
    }

    println!(&quot;{:?}&quot;, bag); // value borrowed here after partial move
}
</code></pre></pre>
<h4 id="impl代码块"><a class="header" href="#impl代码块">impl代码块</a></h4>
<blockquote>
<p>impl 代码块中,任何以 self 作为第一个参数的方法都将获取调用该方法的值的所有权。这意味着对值调用方法后,你无法再次使用该值</p>
</blockquote>
<pre><pre class="playground"><code class="language-rust  editable">// ownership_methods.rs

struct Item(u32);

impl Item {
    fn new() -&gt; Self {
        Item(1024)
    }
    /*
        以 self 作为第 1 个参数的实例方法。
        在调用之后, 它将在方法内移动, 并在函数作用域结束时被释放。
        后续我们将不能再使用它
    */
    fn take_item(self) {
        // does nothing
    }
}

fn main() {
    let it = Item::new(); // move occurs because `it` has type `Item`, which does not implement the `Copy` trait
    it.take_item(); // `it` moved due to this method call
    println!(&quot;{}&quot;, it.0); // value borrowed here after move
}
</code></pre></pre>
<h4 id="闭包"><a class="header" href="#闭包">闭包</a></h4>
<blockquote>
<p>闭包接收不同的值取决于在其内部使用变量的方式</p>
</blockquote>
<pre><pre class="playground"><code class="language-rust  editable">// ownership_closures.rs

#[derive(Debug)]
struct Foo;

fn main() {
    let a = Foo;

    /*
        Foo 的所有权在闭包中已经默认移动到了 b,
        用户将无法再次访问 a。
    */
    // let closure = move || {
    let closure = || {
        let b = a;
    };

    println!(&quot;{:?}&quot;, a);
}
</code></pre></pre>
<h2 id="借用-通过引用规避所有权规则限制"><a class="header" href="#借用-通过引用规避所有权规则限制">借用: 通过引用规避所有权规则限制</a></h2>
<h3 id="为何需要借用引用"><a class="header" href="#为何需要借用引用">为何需要借用/引用</a></h3>
<p>Rust的所有权规则非常严格, 因为它只允许我们使用类型一次。 如果函数只需要对值的读取访问权限,那么我们需要再次从函数返回值,或者在它传递给函数之前复制它。如果类型没有实现 Clone 特征,那么后者可能无法实现其目的。
复制类型看起来似乎很容易绕过所有权规则,但是由于 Clone 总是复制类型,可能会调用内存分配器 API,这是一种涉及系统调用,并且开销高昂的操作,因此它无法满足零成本抽象承诺的所有要点。 随着移动语义和所有权规则的实施,在 Rust
中编写程序很快就会变得困难重重。幸运的是,我们引入了借用和引用类型的概念,它们放宽了规则所施加的限制,但仍然能够在编译期确保兼容所有权规则。</p>
<p>借用的概念是规避所有权规则的限制。进行借用时,你不会获取值的所有权,而是根据需要提供数据。这是通过借用值,即获取值的引用来实现的。为了借用值,我们需要将运算符&amp;放在变量之前,&amp;表示指向变量的地址。</p>
<h3 id="借用-or-引用"><a class="header" href="#借用-or-引用">借用 or 引用？</a></h3>
<h3 id="两种借用方式"><a class="header" href="#两种借用方式">两种借用方式</a></h3>
<h4 id="不可变借用"><a class="header" href="#不可变借用">不可变借用：&amp;</a></h4>
<blockquote>
<p>当我们在类型之前使用运算符&amp;时,就会创建一个不可变借用。</p>
</blockquote>
<pre><pre class="playground"><code class="language-rust  editable">// ownership_basics.rs

#[derive(Debug)]
struct Foo;

fn main() {
    let foo = Foo;
    /*
        注意变量 foo 之前的&amp;。我们借用 foo 并将借用结果分配给 bar。
        bar 的类型为&amp;Foo, 这是一种引用类型。
        作为一个不可变借用,我们不能通过 bar 改变 Foo 中的值
     */
    let bar = &amp;foo;
    println!(&quot;Foo is {:?}&quot;, foo);
    println!(&quot;Bar is {:?}&quot;, bar);
}
</code></pre></pre>
<h4 id="可变借用mut"><a class="header" href="#可变借用mut">可变借用：&amp;mut</a></h4>
<blockquote>
<p>可以使用&amp;mut 运算符对某个值进行可变借用。 通过可变借用, 你可以改变该值。</p>
</blockquote>
<pre><pre class="playground"><code class="language-rust  editable">// mutable_borrow.rs

fn main() {
    // 可变借用需要可变变量，所以这里会报错，可以加上mut
    let a = String::from(&quot;Owned string&quot;);
    /*
        用&amp;mut a 创建了一个该值的可变借用。
        这并没有将 a 移动到 b
        只是可变地对它借用。
    */
    let a_ref = &amp;mut a;
    a_ref.push('!');
}
</code></pre></pre>
<blockquote>
<p>可变借用可以改变值,但是不能销毁该值,因为它不是所有者。
如果a 在借用它的代码行之前被销毁,则借用失效</p>
</blockquote>
<p>{{#check 检查是否更新 | 借用失效情况并不存在}}</p>
<pre><pre class="playground"><code class="language-rust  editable">// exclusive_borrow.rs

fn main() {
    let mut a = String::from(&quot;Owned string&quot;);
    let a_ref = &amp;mut a;
    a_ref.push('!');
    println!(&quot;{}&quot;, a);
}
</code></pre></pre>
<div id="admonition-bug" class="admonition bug">
<div class="admonition-title">
<p>Bug</p>
<p><a class="admonition-anchor-link" href="layer1_underlying_abstract/1_virtual_memory/ownership_borrow_lifetime.html#admonition-bug"></a></p>
</div>
<div>
<p>(存疑🤨，待修正🤔️)</p>
</div>
</div>
<h3 id="借用规则"><a class="header" href="#借用规则">借用规则</a></h3>
<blockquote>
<p>通过引用来维护单一的所有权语义。这些规则如下所示</p>
</blockquote>
<ol>
<li>一个引用的生命周期可能不会超过其被引用的时间。 这是显而易见的, 因为如果它的生命周期超过其被借用的时间,那么它将指向一个垃圾值(被销毁的值) 。</li>
<li>如果存在一个值的可变借用,那么不允许其他引用(可变借用或不可变借用)在该作用域下指向相同的值。可变借用是一种独占性借用。</li>
<li>如果不存在指向某些东西的可变借用, 那么在该作用域下允许出现对同一值的任意数量的不可变借用</li>
</ol>
<h3 id="如果违反借用规则"><a class="header" href="#如果违反借用规则">如果违反借用规则</a></h3>
<h4 id="函数中的借用"><a class="header" href="#函数中的借用">函数中的借用</a></h4>
<pre><pre class="playground"><code class="language-rust  editable">// borrowing_functions.rs

// 接收可变借用作为参数
fn take_the_n(n: &amp;mut u8) {
    *n += 2;
}

fn take_the_s(s: &amp;mut String) {
    s.push_str(&quot;ing&quot;);
}

fn main() {
    // 变量绑定必须是可变
    let mut n = 5;
    let mut s = String::from(&quot;Borrow&quot;);
    // 因为函数内做了修改，所以调用时也需要使用可变借用
    take_the_n(&amp;mut n);
    take_the_s(&amp;mut s);

    println!(&quot;n changed to {}&quot;, n);
    println!(&quot;s changed to {}&quot;, s);
}
</code></pre></pre>
<h4 id="匹配中的借用"><a class="header" href="#匹配中的借用">匹配中的借用</a></h4>
<pre><pre class="playground"><code class="language-rust  editable">// ownership_match.rs

#[derive(Debug)]
enum Food {
    Cake,
    Pizza,
    Salad
}

#[derive(Debug)]
struct Bag {
    food: Food
}

fn main() {
    let bag = Bag { food: Food::Cake };
    match bag.food {
        Food::Cake =&gt; println!(&quot;I got cake&quot;),
        // 以 ref 作为前缀。
        // 关键字 ref 可以通过引用来匹配元素,而不是根据值来捕获它们。
        ref a =&gt; println!(&quot;I got {:?}&quot;, a)
    }
    
    println!(&quot;{:?}&quot;, bag);
}
</code></pre></pre>
<h4 id="从函数返回引用"><a class="header" href="#从函数返回引用">从函数返回引用：</a></h4>
<pre><pre class="playground"><code class="language-rust  editable">// return_func_ref.rs

fn get_a_borrowed_value() -&gt; &amp;u8 { // expected named lifetime parameter
    let x = 1;
    &amp;x
}

fn main() {
    let value = get_a_borrowed_value();
}
</code></pre></pre>
<h3 id="基于借用规则的方法类型"><a class="header" href="#基于借用规则的方法类型">基于借用规则的方法类型</a></h3>
<blockquote>
<p>借用规则还规定了如何定义类型的固有方法和特征的实例方法。以下是它们接收实例的方式,并且是根据限制由少到多排列的。</p>
</blockquote>
<ul>
<li>&amp;self 方法:这些方法只对其成员具有不可变的访问权限。</li>
<li>&amp;mut self 方法:这些方法能够可变地借用 self 实例。</li>
<li>self 方法:这些方法拥有调用它的实例的所有权,并且类型在后续调用时将失效。</li>
</ul>
<p>对于自定义类型,相同的借用规则也适用于其作用域成员。</p>
<h2 id="生命周期针对引用附加的信息"><a class="header" href="#生命周期针对引用附加的信息">生命周期：针对引用附加的信息</a></h2>
<h3 id="从变量生命周期开始"><a class="header" href="#从变量生命周期开始">从变量生命周期开始</a></h3>
<h3 id="生命周期限定"><a class="header" href="#生命周期限定">生命周期限定</a></h3>
<h3 id="生命周期注解"><a class="header" href="#生命周期注解">生命周期注解</a></h3>
<h3 id="生命周期省略lifetime-elision"><a class="header" href="#生命周期省略lifetime-elision">生命周期省略(Lifetime Elision)</a></h3>
<h2 id="销毁destructors"><a class="header" href="#销毁destructors">销毁(Destructors)</a></h2>
<h2 id="参考资源-2"><a class="header" href="#参考资源-2">参考资源</a></h2>
<h3 id="online-book-3"><a class="header" href="#online-book-3">online-book</a></h3>
<ul>
<li><a href="https://doc.rust-lang.org/book/ch04-01-what-is-ownership.html">What is Ownership? - The Rust Programming Language</a></li>
<li><a href="https://doc.rust-lang.org/stable/reference/lifetime-elision.html#lifetime-elision-in-functions">生命周期省略规则(Lifetime elision) - The Rust Reference</a></li>
<li><a href="https://doc.rust-lang.org/stable/reference/destructors.html">Destructors - The Rust Reference</a></li>
<li><a href="https://doc.rust-lang.org/stable/reference/lifetime-elision.html">Lifetime elision - The Rust Reference</a></li>
<li><a href="https://doc.rust-lang.org/book/ch04-00-understanding-ownership.html">Understanding Ownership - The Rust Programming Language</a></li>
</ul>
<h3 id="fragment-3"><a class="header" href="#fragment-3">fragment</a></h3>
<ul>
<li><a href="https://www.ditsing.com/object-lifetime-and-ownership/">Object lifetime and ownership</a></li>
<li><a href="https://www.zhihu.com/question/58863427">go没有虚拟机怎么运行gc的？ - 知乎</a></li>
<li><a href="https://hashrust.com/blog/lifetimes-in-rust/">Lifetimes in Rust</a></li>
</ul>
<h3 id="local-3"><a class="header" href="#local-3">local</a></h3>
<ul>
<li><a href="marginnote3app://note/72B2EE33-36EE-4FE6-A088-FEBE54D61E8D">&lt;精通rust(第二版)&gt;-5.7 内存安全三原则</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><!--ts-->
<ul>
<li><a href="layer1_underlying_abstract/2_type_system/type_system.html#%E7%B1%BB%E5%9E%8B%E7%B3%BB%E7%BB%9F%E8%B5%B7%E6%BA%90">类型系统起源</a>
<ul>
<li><a href="layer1_underlying_abstract/2_type_system/type_system.html#%E6%88%91%E4%BB%AC%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E5%9C%A8%E8%AF%AD%E8%A8%80%E4%B8%AD%E4%BD%BF%E7%94%A8%E7%B1%BB%E5%9E%8B">我们为什么需要在语言中使用类型?</a>
<ul>
<li><a href="layer1_underlying_abstract/2_type_system/type_system.html#1-%E4%BB%8E%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F%E5%88%B0%E6%B1%87%E7%BC%96">1. 从二进制数据格式到汇编</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/type_system.html#2-%E4%BB%8E%E6%B1%87%E7%BC%96%E5%88%B0%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E7%B1%BB%E5%9E%8B%E7%B3%BB%E7%BB%9F%E5%BA%94%E8%BF%90%E8%80%8C%E7%94%9F">2. 从汇编到编程语言，类型系统应运而生</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/type_system.html#3-%E5%86%8D%E6%9D%A5%E8%AE%A4%E7%9C%9F%E7%9C%8B%E7%9C%8B%E7%B1%BB%E5%9E%8B%E7%B3%BB%E7%BB%9F">3. 再来认真看看类型系统</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/type_system.html#4-%E7%B1%BB%E5%9E%8B%E7%B3%BB%E7%BB%9F%E5%85%B6%E5%AE%9E%E6%98%AF%E4%B8%80%E7%BB%84%E8%A7%84%E5%88%99">4. 类型系统其实是一组规则</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/type_system.html#5-%E7%B1%BB%E5%9E%8B%E7%B3%BB%E7%BB%9F%E6%98%AF%E5%AF%B9%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E5%AE%89%E5%85%A8%E7%9A%84%E6%8A%BD%E8%B1%A1">5. 类型系统是对内存管理/安全的抽象</a>
<ul>
<li><a href="layer1_underlying_abstract/2_type_system/type_system.html#%E5%8A%A8%E6%80%81%E7%B1%BB%E5%9E%8B%E5%A4%A7%E5%B0%8F">动态类型大小</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/type_system.html#%E7%B1%BB%E5%9E%8B%E5%B8%83%E5%B1%80">类型布局</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/type_system.html#%E5%86%85%E9%83%A8%E5%8F%AF%E5%8F%98%E6%80%A7">内部可变性</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/type_system.html#%E5%AD%90%E7%B1%BB%E5%9E%8B%E4%B8%8E%E5%8D%8F%E5%8F%98">子类型与协变</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/type_system.html#%E5%BC%BA%E5%88%B6%E8%BD%AC%E6%8D%A2type-coercions">强制转换(type coercions)</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="layer1_underlying_abstract/2_type_system/type_system.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">参考资料</a>
<ul>
<li><a href="layer1_underlying_abstract/2_type_system/type_system.html#online-book">online-book</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/type_system.html#fragment">fragment</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/type_system.html#local">local</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:24 UTC 2022 -->
<!--te-->
<h1 id="类型系统起源"><a class="header" href="#类型系统起源">类型系统起源</a></h1>
<h2 id="我们为什么需要在语言中使用类型"><a class="header" href="#我们为什么需要在语言中使用类型">我们为什么需要在语言中使用类型?</a></h2>
<blockquote>
<p>这是一个很好的问题,可以作为理解编程语言类型系统的契机。</p>
</blockquote>
<h3 id="1-从二进制数据格式到汇编"><a class="header" href="#1-从二进制数据格式到汇编">1. 从二进制数据格式到汇编</a></h3>
<p>作为程序员,我们知道为计算机编写的程序在最底层是以 0 和 1
组成的二进制数据格式表示的。实际上,最早的计算机必须使用机器代码手动编程。最终,程序员意识到这样做非常容易出错,并且乏味、耗时。对大部分人来说,在二进制层面操作和推断这些实体是不切实际的。 到了 20 世纪 50 年代,
编程社区提出了机器代码助记符的概念, 这些助记符变成了今天我们熟知的汇编语言。</p>
<h3 id="2-从汇编到编程语言类型系统应运而生"><a class="header" href="#2-从汇编到编程语言类型系统应运而生">2. 从汇编到编程语言，类型系统应运而生</a></h3>
<p>然后,编程语言应运而生,它们被编译成汇编代码,并允许编程人员编写人类可理解的代码,以方便计算机将其编译成机器代码。然而,大家平时所说的语言表达某些语义比较模糊,因此需要制定一套规则和条件,来表述用类似人类语言编写的计算机程序中可能或不可能存在的内容,即程序语义。这使得我们提出了类型和类型系统的理念。</p>
<h3 id="3-再来认真看看类型系统"><a class="header" href="#3-再来认真看看类型系统">3. 再来认真看看类型系统</a></h3>
<p>类型是一组具名的可能值。例如,u8 是一种可能包含 0~255 的正数值类型。类型提供了一种方法来弥合我们创建的这些实体的底层表示与心理模型之间的差距。除此之外, 类型还为我们提供了<strong>表示实体的意图、行为和约束的方法</strong>：</p>
<blockquote>
<p>它们定义了用户通过类型能够(不能够) 做什么。 例如, 它没有定义将字符串类型的值和数值类型的值相加的结果是什么。</p>
</blockquote>
<h3 id="4-类型系统其实是一组规则"><a class="header" href="#4-类型系统其实是一组规则">4. 类型系统其实是一组规则</a></h3>
<p>从类型来看,语言设计者构建了类型系统,这些系统是一组规则,用于管理不同类型在编程语言中的交互。它们可以用作推断程序的工具,并有助于确保程序能够正常运行并符合规范。类型系统根据其表达力进行限定,这仅表示你可以使用类型表达逻辑的程度,以及程序中的不变量。</p>
<blockquote>
<p>例如 Haskell 是一种高级语言,它具有非常丰富的表现力的类型系统,而C 语言是一种低级语言,它只为我们提供了很少的基于类型的抽象。Rust 试图在这两个极端之间找到一种平衡。</p>
</blockquote>
<h3 id="5-类型系统是对内存管理安全的抽象"><a class="header" href="#5-类型系统是对内存管理安全的抽象">5. 类型系统是对内存管理/安全的抽象</a></h3>
<h4 id="动态类型大小"><a class="header" href="#动态类型大小">动态类型大小</a></h4>
<h4 id="类型布局"><a class="header" href="#类型布局">类型布局</a></h4>
<h4 id="内部可变性"><a class="header" href="#内部可变性">内部可变性</a></h4>
<h4 id="子类型与协变"><a class="header" href="#子类型与协变">子类型与协变</a></h4>
<h4 id="强制转换type-coercions"><a class="header" href="#强制转换type-coercions">强制转换(type coercions)</a></h4>
<h2 id="参考资料"><a class="header" href="#参考资料">参考资料</a></h2>
<h3 id="online-book-4"><a class="header" href="#online-book-4">online-book</a></h3>
<ul>
<li><a href="https://doc.rust-lang.org/stable/reference/dynamically-sized-types.html">Dynamically Sized Types - The Rust Reference</a></li>
<li><a href="https://doc.rust-lang.org/stable/reference/type-layout.html">Type layout - The Rust Reference</a></li>
<li><a href="https://doc.rust-lang.org/stable/reference/interior-mutability.html">Interior mutability - The Rust Reference</a></li>
<li><a href="https://doc.rust-lang.org/stable/reference/subtyping.html">Subtyping and Variance - The Rust Reference</a></li>
<li><a href="https://doc.rust-lang.org/stable/reference/type-coercions.html">Type coercions - The Rust Reference</a></li>
</ul>
<h3 id="fragment-4"><a class="header" href="#fragment-4">fragment</a></h3>
<h3 id="local-4"><a class="header" href="#local-4">local</a></h3>
<ul>
<li><a href="marginnote3app://note/7D37028B-C1FB-47BC-AA50-4EBA22EB9CC7">&lt;精通Rust(第二版)&gt;-4.1 类型系统及其重要性</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="基础内置类型"><a class="header" href="#基础内置类型">基础内置类型</a></h1>
<!--ts-->
<ul>
<li><a href="layer1_underlying_abstract/2_type_system/built_in_types.html#%E5%9F%BA%E7%A1%80%E5%86%85%E7%BD%AE%E7%B1%BB%E5%9E%8B">基础内置类型</a>
<ul>
<li><a href="layer1_underlying_abstract/2_type_system/built_in_types.html#%E5%9F%BA%E5%85%83%E7%B1%BB%E5%9E%8B">基元类型</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/built_in_types.html#%E5%BA%8F%E5%88%97%E7%B1%BB%E5%9E%8B">序列类型</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/built_in_types.html#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%9E%8B">自定义类型</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/built_in_types.html#%E5%87%BD%E6%95%B0%E7%B1%BB%E5%9E%8B">函数类型</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/built_in_types.html#%E6%8C%87%E9%92%88%E7%B1%BB%E5%9E%8B">指针类型</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/built_in_types.html#%E7%89%B9%E5%BE%81%E7%B1%BB%E5%9E%8B">特征类型</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/built_in_types.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a>
<ul>
<li><a href="layer1_underlying_abstract/2_type_system/built_in_types.html#online-book">online-book</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/built_in_types.html#fragment">fragment</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/built_in_types.html#local">local</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:22 UTC 2022 -->
<!--te-->
<h2 id="基元类型"><a class="header" href="#基元类型">基元类型</a></h2>
<h2 id="序列类型"><a class="header" href="#序列类型">序列类型</a></h2>
<h2 id="自定义类型"><a class="header" href="#自定义类型">自定义类型</a></h2>
<h2 id="函数类型"><a class="header" href="#函数类型">函数类型</a></h2>
<h2 id="指针类型"><a class="header" href="#指针类型">指针类型</a></h2>
<h2 id="特征类型"><a class="header" href="#特征类型">特征类型</a></h2>
<h2 id="参考资源-3"><a class="header" href="#参考资源-3">参考资源</a></h2>
<h3 id="online-book-5"><a class="header" href="#online-book-5">online-book</a></h3>
<ul>
<li><a href="https://doc.rust-lang.org/stable/reference/types.html">Types - The Rust Reference</a></li>
<li><a href="https://doc.rust-lang.org/book/ch15-00-smart-pointers.html">Smart Pointers - The Rust Programming Language</a></li>
</ul>
<h3 id="fragment-5"><a class="header" href="#fragment-5">fragment</a></h3>
<h3 id="local-5"><a class="header" href="#local-5">local</a></h3>
<div style="break-before: page; page-break-before: always;"></div><h1 id="集合类型"><a class="header" href="#集合类型">集合类型</a></h1>
<!--ts-->
<ul>
<li><a href="layer1_underlying_abstract/2_type_system/collections.html#%E9%9B%86%E5%90%88%E7%B1%BB%E5%9E%8B">集合类型</a>
<ul>
<li><a href="layer1_underlying_abstract/2_type_system/collections.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a>
<ul>
<li><a href="layer1_underlying_abstract/2_type_system/collections.html#online-book">online-book</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/collections.html#fragment">fragment</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/collections.html#local">local</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:22 UTC 2022 -->
<!--te-->
<h2 id="参考资源-4"><a class="header" href="#参考资源-4">参考资源</a></h2>
<h3 id="online-book-6"><a class="header" href="#online-book-6">online-book</a></h3>
<ul>
<li><a href="https://doc.rust-lang.org/book/ch08-00-common-collections.html">Common Collections - The Rust Programming Language</a></li>
</ul>
<h3 id="fragment-6"><a class="header" href="#fragment-6">fragment</a></h3>
<h3 id="local-6"><a class="header" href="#local-6">local</a></h3>
<div style="break-before: page; page-break-before: always;"></div><h1 id="自定义类型-1"><a class="header" href="#自定义类型-1">自定义类型</a></h1>
<!--ts-->
<ul>
<li><a href="layer1_underlying_abstract/2_type_system/user_defined_types.html#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%9E%8B">自定义类型</a>
<ul>
<li><a href="layer1_underlying_abstract/2_type_system/user_defined_types.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a>
<ul>
<li><a href="layer1_underlying_abstract/2_type_system/user_defined_types.html#online-book">online-book</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/user_defined_types.html#fragment">fragment</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/user_defined_types.html#local">local</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:24 UTC 2022 -->
<!--te-->
<h2 id="参考资源-5"><a class="header" href="#参考资源-5">参考资源</a></h2>
<h3 id="online-book-7"><a class="header" href="#online-book-7">online-book</a></h3>
<ul>
<li><a href="https://doc.rust-lang.org/book/ch05-00-structs.html">Using Structs to Structure Related Data - The Rust Programming Language</a></li>
</ul>
<h3 id="fragment-7"><a class="header" href="#fragment-7">fragment</a></h3>
<h3 id="local-7"><a class="header" href="#local-7">local</a></h3>
<div style="break-before: page; page-break-before: always;"></div><h1 id="泛型特征及特征对象"><a class="header" href="#泛型特征及特征对象">泛型、特征及特征对象</a></h1>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/rust-traits-deep-dive.png" alt="rust-traits-deep-dive" /></p>
<!--ts-->
<ul>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E6%B3%9B%E5%9E%8B%E7%89%B9%E5%BE%81%E5%8F%8A%E7%89%B9%E5%BE%81%E5%AF%B9%E8%B1%A1">泛型、特征及特征对象</a>
<ul>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E6%B3%9B%E5%9E%8B">泛型</a>
<ul>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E4%BB%8E%E4%BB%A3%E7%A0%81%E5%A4%8D%E7%94%A8%E5%87%BA%E5%8F%91">从代码复用出发</a>
<ul>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E5%87%BD%E6%95%B0%E4%BD%9C%E7%94%A8%E4%B8%8D%E8%B6%B3">函数作用不足</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E9%9D%99%E6%80%81%E7%B1%BB%E5%9E%8B%E8%AF%AD%E8%A8%80%E8%BF%98%E9%9C%80%E8%A6%81%E6%B3%9B%E5%9E%8B%E6%9D%A5%E5%A4%8D%E7%94%A8%E4%BB%A3%E7%A0%81">静态类型语言还需要泛型来复用代码</a></li>
</ul>
</li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E6%B3%9B%E5%9E%8B%E6%9C%AC%E8%B4%A8%E4%B8%8A%E6%98%AF%E4%B8%80%E7%A7%8D%E5%8D%95%E6%80%81%E5%8C%96">泛型本质上是一种单态化</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E6%B3%9B%E5%9E%8B%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F">泛型使用方式</a>
<ul>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E6%B3%9B%E5%9E%8B%E5%87%BD%E6%95%B0">泛型函数</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E6%B3%9B%E5%9E%8B%E7%BB%93%E6%9E%84%E4%BD%93">泛型结构体</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E6%B3%9B%E5%9E%8B%E6%9E%9A%E4%B8%BE%E4%BD%93">泛型枚举体</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E6%B3%9B%E5%9E%8B%E7%89%B9%E5%BE%81">泛型特征</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E6%B3%9B%E5%9E%8B%E6%96%B9%E6%B3%95">泛型方法</a></li>
</ul>
</li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#impl-%E6%B3%9B%E5%9E%8B%E5%AE%9E%E7%8E%B0%E5%9D%97">impl: 泛型实现块</a>
<ul>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E6%B3%9B%E5%9E%8B%E5%AE%9E%E7%8E%B0">泛型实现</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E4%B8%93%E9%97%A8%E5%8C%96%E6%B3%9B%E5%9E%8B">专门化泛型</a></li>
</ul>
</li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E6%8C%87%E5%AE%9A%E7%B1%BB%E5%9E%8B%E8%BF%9B%E8%A1%8C%E5%AE%9E%E4%BE%8B%E5%8C%96">指定类型进行实例化</a>
<ul>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E5%9F%BA%E4%BA%8E%E7%B1%BB%E5%9E%8B%E5%AE%9E%E4%BE%8B%E5%8C%96%E6%8E%A8%E6%96%AD">基于类型实例化推断</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E6%B3%9B%E5%9E%8B%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E6%9F%90%E4%BA%9B%E6%96%B9%E6%B3%95">泛型函数调用某些方法</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#turbofish-">turbofish: ::&lt;&gt;</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E7%89%B9%E5%BE%81">特征</a>
<ul>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E4%BB%8E%E5%A4%9A%E6%80%81%E5%92%8C%E4%BB%A3%E7%A0%81%E5%A4%8D%E7%94%A8%E7%9A%84%E8%A7%92%E5%BA%A6%E6%9D%A5%E7%9C%8B-%E6%8E%A5%E5%8F%A3%E9%B8%AD%E5%AD%90%E7%B1%BB%E5%9E%8B%E8%BF%98%E6%98%AF%E7%89%B9%E5%BE%81">从多态和代码复用的角度来看: 接口、鸭子类型还是特征？</a>
<ul>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E6%8E%A5%E5%8F%A3">接口</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E9%B8%AD%E5%AD%90%E7%B1%BB%E5%9E%8B">鸭子类型</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E7%89%B9%E5%BE%81-1">特征</a></li>
</ul>
</li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E7%89%B9%E5%BE%81%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88">特征到底是什么？</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E7%89%B9%E5%BE%81%E7%9A%84%E5%A4%9A%E7%A7%8D%E8%A1%A8%E7%8E%B0%E5%BD%A2%E5%BC%8F">特征的多种表现形式</a>
<ul>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E6%A0%87%E8%AE%B0%E7%89%B9%E5%BE%81">标记(特征)</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E7%AE%80%E5%8D%95%E7%89%B9%E5%BE%81">简单(特征)</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E6%B3%9B%E5%9E%8B%E7%89%B9%E5%BE%81-1">泛型(特征)</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E5%85%B3%E8%81%94%E7%B1%BB%E5%9E%8B%E7%89%B9%E5%BE%81">关联类型(特征)</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E7%BB%A7%E6%89%BF%E7%89%B9%E5%BE%81">继承(特征)</a></li>
</ul>
</li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E4%B8%80%E4%BA%9B%E5%B8%B8%E7%94%A8%E5%86%85%E7%BD%AE%E7%89%B9%E5%BE%81">一些常用内置特征</a>
<ul>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E8%87%AA%E5%8A%A8%E7%89%B9%E5%BE%81auto-traits">自动特征(Auto Traits)</a>
<ul>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#send--sync">Send &amp; Sync</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#unpin-unwindsafe--refunwindsafe">Unpin、 UnwindSafe &amp; RefUnwindSafe</a></li>
</ul>
</li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#debug">Debug</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#partialeq-%E5%92%8C-eq">PartialEq 和 Eq</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#copy%E5%92%8Cclone">Copy和Clone</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#display">Display</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#add">Add</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#into-%E5%92%8C-from">Into 和 From</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#drop">Drop</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#deref--derefmut">Deref &amp; DerefMut</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#sizedspecial-types-and-traits---the-rust-reference">Sized<a href="https://doc.rust-lang.org/stable/reference/special-types-and-traits.html" rel="nofollow">Special types and traits - The Rust Reference</a>
</a></li>
</ul>
</li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E4%B8%80%E4%B8%AA%E5%AE%8C%E6%95%B4%E4%BE%8B%E5%AD%90">一个完整例子</a></li>
</ul>
</li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E7%89%B9%E5%BE%81%E5%8C%BA%E9%97%B4%E6%B3%9B%E5%9E%8B%E7%89%B9%E5%BE%81">特征区间：泛型+特征</a>
<ul>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E5%BC%95%E5%87%BA%E7%89%B9%E5%BE%81%E5%8C%BA%E9%97%B4">引出特征区间</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E4%BB%A3%E7%A0%81%E5%8D%95%E4%BD%93%E5%8C%96">代码单体化</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E6%8C%87%E5%AE%9A%E7%89%B9%E5%BE%81%E5%8C%BA%E9%97%B4%E7%9A%84%E5%9B%9B%E4%B8%AA%E6%96%B9%E6%B3%95">指定特征区间的四个方法</a>
<ul>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E5%8C%BA%E9%97%B4%E5%86%85%E6%B3%9B%E5%9E%8B-fn-fn_namet-target_traitval-t">区间内泛型: fn fn_name&lt;T: target_trait&gt;(val: T)</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#where%E8%AF%AD%E5%8F%A5-%E5%BD%93%E7%AC%AC%E4%B8%80%E7%A7%8D%E6%96%B9%E6%B3%95%E7%AD%BE%E5%90%8D%E8%BF%87%E9%95%BF%E6%97%B6%E4%BD%BF%E7%94%A8">where语句: 当第一种方法签名过长时使用</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E4%BD%BF%E7%94%A8%E7%BB%84%E5%90%88%E5%A4%9A%E4%B8%AA%E7%89%B9%E5%BE%81">使用“+“组合多个特征</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E4%BD%BF%E7%94%A8impl%E7%89%B9%E5%BE%81%E8%AF%AD%E6%B3%95-%E9%97%AD%E5%8C%85%E5%B8%B8%E7%94%A8">使用impl特征语法: 闭包常用</a></li>
</ul>
</li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E7%89%B9%E5%BE%81%E5%8C%BA%E9%97%B4%E7%9A%84%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF">特征区间的使用场景</a>
<ul>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E5%9C%A8%E7%B1%BB%E5%9E%8B%E4%B8%8A%E4%BD%BF%E7%94%A8%E4%B8%8D%E5%BB%BA%E8%AE%AE">在类型上使用：不建议</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E6%B3%9B%E5%9E%8B%E5%87%BD%E6%95%B0impl%E4%BB%A3%E7%A0%81%E5%9D%97">泛型函数+impl代码块</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E7%89%B9%E5%BE%81%E5%AF%B9%E8%B1%A1-%E5%A4%9A%E6%80%81%E7%89%B9%E5%BE%81%E7%B1%BB%E5%9E%8B">特征对象: 多态特征类型</a>
<ul>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E5%88%86%E5%8F%91dispatch">分发(dispatch)</a>
<ul>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E5%88%86%E5%8F%91%E6%96%B9%E5%BC%8F%E9%9D%99%E6%80%81-or-%E5%8A%A8%E6%80%81">分发方式：静态 or 动态</a></li>
</ul>
</li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E5%8C%BA%E5%88%AB%E7%89%B9%E5%BE%81%E5%8C%BA%E9%97%B4%E4%B8%8E%E7%89%B9%E5%BE%81%E5%AF%B9%E8%B1%A1">区别特征区间与特征对象</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E7%89%B9%E5%BE%81%E5%AF%B9%E8%B1%A1%E5%85%B7%E4%BD%93%E8%AF%B4%E8%AF%B4">特征对象具体说说</a>
<ul>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E6%8C%87%E5%AE%9A%E4%B8%BA%E5%AE%9E%E7%8E%B0%E6%9F%90%E4%B8%AA%E7%89%B9%E5%BE%81">指定为实现某个特征</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E7%94%A8%E8%83%96%E6%8C%87%E9%92%88%E5%AE%9E%E7%8E%B0">用胖指针实现</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E6%98%AFrust%E6%89%A7%E8%A1%8C%E5%8A%A8%E6%80%81%E5%88%86%E5%8F%91%E7%9A%84%E6%96%B9%E5%BC%8F">是Rust执行动态分发的方式</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E4%B8%8D%E5%AE%9A%E9%95%BF%E7%B1%BB%E5%9E%8B%E5%8F%AA%E8%83%BD%E4%BD%9C%E4%B8%BA%E5%BC%95%E7%94%A8%E5%88%9B%E5%BB%BA">不定长类型只能作为引用创建</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E6%80%BB%E7%BB%93%E7%89%B9%E5%BE%81%E7%89%B9%E5%BE%81%E5%8C%BA%E9%97%B4%E5%92%8C%E7%89%B9%E5%BE%81%E5%AF%B9%E8%B1%A1">总结特征、特征区间和特征对象</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a>
<ul>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#online-book">online-book</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#fragment">fragment</a></li>
<li><a href="layer1_underlying_abstract/2_type_system/generics_traits_objects.html#local">local</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:23 UTC 2022 -->
<!--te-->
<h2 id="泛型"><a class="header" href="#泛型">泛型</a></h2>
<h3 id="从代码复用出发"><a class="header" href="#从代码复用出发">从代码复用出发</a></h3>
<h4 id="函数作用不足"><a class="header" href="#函数作用不足">函数作用不足</a></h4>
<p>一直以来，函数的实现方式就是基于c语言的goto指令：</p>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/image-20220613150721312.png" alt="image-20220613150721312" /></p>
<p>通过进一步强化，就得到函数的实现方式：</p>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/image-20220613150804039.png" alt="image-20220613150804039" /></p>
<blockquote>
<p>但是也就这样了，函数只能实现流程上的复用，不能实现类型上的复用。这一点其实在python、js这些动态类型语言上面就不存在这个问题。对于Rust这种静态类型语言，对函数入参类型要求十分严格，于是泛型就应运而生。</p>
</blockquote>
<h4 id="静态类型语言还需要泛型来复用代码"><a class="header" href="#静态类型语言还需要泛型来复用代码">静态类型语言还需要泛型来复用代码</a></h4>
<blockquote>
<p>泛型编程是一种仅适用于静态类型编程语言的技术。它首次出现在 ML 语言中,是一种静态类型的函数式语言。</p>
</blockquote>
<p>像 Python 这样的动态语言采用的是简单类型 (duck typing) , 其中的 API 是根据它们可以做什么,而不是它们是什么来处理参数的,因此不依赖于泛型。</p>
<p>泛型是语言设计特性的一部分, 可以实现代码复用, 并遵循不重复自己的原则 (Don’t Repeat Yourself,DRY) 。采用这种技术,你可以使用类型占位符来编写算法、函数、方法及类型, 并在这些类型上指定一个类型变量(
使用单个字母,通常是 T、K 或 V) ,告知编译器在任何代码中实例化它们时要填充的实际类型。这些类型被称为泛型或元素。单个字母(例如类型 T)被称为泛型参数。当你使用或实例化任何泛型元素时,它们会被替换成诸如 u32 这样的具体类型。</p>
<h3 id="泛型本质上是一种单态化"><a class="header" href="#泛型本质上是一种单态化">泛型本质上是一种单态化</a></h3>
<p>每次将泛型元素与具体类型一起使用时,都会在编译时用类型变量 T 生成该代码的特定副本,并将其替换为具体类型。<strong>这种在编译时生成包含具体类型的专用函数的过程被称为单态化,这是执行与多态函数相反的过程。</strong></p>
<h3 id="泛型使用方式"><a class="header" href="#泛型使用方式">泛型使用方式</a></h3>
<blockquote>
<p>在使用泛型时，应该多去考虑它与不同元素结合使用的场景背后的思维方式。泛型可以与结构体、枚举、函数、特征、方法及代码实现块。它们的一个共同特征是泛型的参数是由一对尖头括号分隔,并包含于其中。</p>
</blockquote>
<h4 id="泛型函数"><a class="header" href="#泛型函数">泛型函数</a></h4>
<p>为了创建泛型函数,我们需要将泛型参数放在函数名之后和圆括号之前,如下所示:</p>
<pre><pre class="playground"><code class="language-rust  editable">// generic_function.rs

fn give_me&lt;T&gt;(value: T) {
    let _ = value;
}

fn main() {
    let a = &quot;generics&quot;;
    let b = 1024;
    give_me(a);
    give_me(b);
}
</code></pre></pre>
<h4 id="泛型结构体"><a class="header" href="#泛型结构体">泛型结构体</a></h4>
<pre><pre class="playground"><code class="language-rust  editable">// generic_struct.rs

struct Container&lt;T&gt; {
    item: T,
}

impl&lt;T&gt; Container&lt;T&gt; {
    fn new(item: T) -&gt; Self {
        Container { item }
    }
}

impl Container&lt;u32&gt; {
    fn sum(item: u32) -&gt; Self {
        Container { item }
    }
}

fn main() {
    // todo
}
</code></pre></pre>
<h4 id="泛型枚举体"><a class="header" href="#泛型枚举体">泛型枚举体</a></h4>
<pre><pre class="playground"><code class="language-rust  editable">// generic_enum.rs

enum Transmission&lt;T&gt; {
    Signal(T),
    NoSignal,
}

fn main() {
    // stuff
}
</code></pre></pre>
<h4 id="泛型特征"><a class="header" href="#泛型特征">泛型特征</a></h4>
<h4 id="泛型方法"><a class="header" href="#泛型方法">泛型方法</a></h4>
<h3 id="impl-泛型实现块"><a class="header" href="#impl-泛型实现块">impl: 泛型实现块</a></h3>
<h4 id="泛型实现"><a class="header" href="#泛型实现">泛型实现</a></h4>
<blockquote>
<p>当为任何泛型编写 impl 代码块时,都需要在使用它之前声明泛型参数。T 就像一个变量—— 一个类型变量,我们需要先声明它 impl代码块实际上意味着我们正在为所有类型 T 实现这些方法,它们会出现在 Container<T>中。这个 impl 代码块是一个泛型实现。 因此,生成的每个具体 Container 都将有这些方法。</p>
</blockquote>
<pre><pre class="playground"><code class="language-rust  editable">// generic_struct_impl.rs

struct Container&lt;T&gt; {
    item: T,
}

impl&lt;T&gt; Container&lt;T&gt; {
    fn new(item: T) -&gt; Self {
        Container { item }
    }
}

fn main() {
    // stuff
}
</code></pre></pre>
<h4 id="专门化泛型"><a class="header" href="#专门化泛型">专门化泛型</a></h4>
<blockquote>
<p>在这里, 由于 u32 是作为具体类型存在的, 因此我们不需要 impl 之后的<T>, 这是 impl 代码块的另外一个特性,它允许你通过独立实现方法来专门化泛型。 现在,我们也可以通过将 T 替换为任何具体类型来为 Container<T>编写更具体的 impl 代码块。以下就是它的实例:</p>
</blockquote>
<pre><pre class="playground"><code class="language-rust  editable">impl Container&lt;u32&gt; { 
    fn sum(item: u32) -&gt; Self {
        Container { item }
    } 
}
</code></pre></pre>
<h3 id="指定类型进行实例化"><a class="header" href="#指定类型进行实例化">指定类型进行实例化</a></h3>
<blockquote>
<p>每当我们进行实例化时, 编译器需要在其类型签名中知道 T 的具体类型以便替换,这为其提供了将泛型代码单态化的类型信息。 而具体类型的确定主要有三种方式：</p>
</blockquote>
<ol>
<li>大多数情况下,具体类型是基于类型的实例化推断.</li>
<li>对泛型函数调用某些方法来接收具体类型。</li>
<li>在极个别情况下, 我们需要通过使用 <code>turbofish (::&lt;&gt;)</code>运算符输入具体类型来替代泛型以便辅助编译器识别。</li>
</ol>
<h4 id="基于类型实例化推断"><a class="header" href="#基于类型实例化推断">基于类型实例化推断</a></h4>
<p>这是最常见的方式，主要基于类型特征(trait)。</p>
<h4 id="泛型函数调用某些方法"><a class="header" href="#泛型函数调用某些方法">泛型函数调用某些方法</a></h4>
<pre><pre class="playground"><code class="language-rust  editable">// using_generic_func.rs

use std::str;

fn main() {
    let num_from_str = str::parse::&lt;u8&gt;(&quot;34&quot;).unwrap();
    println!(&quot;Parsed number {}&quot;, num_from_str);
}
</code></pre></pre>
<h4 id="turbofish-"><a class="header" href="#turbofish-">turbofish: ::&lt;&gt;</a></h4>
<ol>
<li>如果没有任何类型特征，代码将无法编译：👇</li>
</ol>
<pre><pre class="playground"><code class="language-rust  editable">fn main() {
    let a = Vec::new();
}
</code></pre></pre>
<ol start="2">
<li>这时可以用下列三种方式指定</li>
</ol>
<pre><pre class="playground"><code class="language-rust  editable">// using_generic_vec.rs

fn main() {
    // providing a type
    let v1: Vec&lt;u8&gt; = Vec::new();

    // or calling method
    let mut v2 = Vec::new();
    v2.push(2); // v2 is now Vec&lt;i32&gt;

    // or using turbofish
    let v3 = Vec::&lt;u8&gt;::new(); // not so readable
}
</code></pre></pre>
<h2 id="特征"><a class="header" href="#特征">特征</a></h2>
<h3 id="从多态和代码复用的角度来看-接口鸭子类型还是特征"><a class="header" href="#从多态和代码复用的角度来看-接口鸭子类型还是特征">从多态和代码复用的角度来看: 接口、鸭子类型还是特征？</a></h3>
<p>从多态和代码复用的角度来看, 在代码中将类型的共享行为和公共属性与其自身隔离通常是一个好主意,并且能拥有专属于自己的方法。在这样做时,我们允许不同类型通过通用属性互相关联,使我们能够为 API 编程,使其参数更通用或更具包容性。</p>
<blockquote>
<p>这意味着我们可以接收具有这些通用属性的类型,而不仅限于某种特定类型。</p>
</blockquote>
<h4 id="接口"><a class="header" href="#接口">接口</a></h4>
<p>类似 Java 和 C#的面向对象编程语言中,接口表达了相同的理念,我们可以在其中定义多种类型能够实现的共享行为。例如,我们可以使用单个 sort 函数接收实现 Comparable 或者 Comparator
接口的元素列表,而不是使用多个 sort 函数接收整数值列表,以及用其他函数接收字符串值列表。这使得我们可以将任何可比较(Comparable)的内容传递给 sort 函数。</p>
<h4 id="鸭子类型"><a class="header" href="#鸭子类型">鸭子类型</a></h4>
<p>而Python同样有明确的特性，被称为“鸭子类型“.</p>
<blockquote>
<p>“当看到一只鸟走起来像鸭子、游泳起来像鸭子、叫起来也像鸭子，那么这只鸟就可以被称为鸭子。”</p>
</blockquote>
<p>在鸭子类型中，关注点在于对象的行为，能做什么；而不是关注对象所属的类型。例如，在不使用鸭子类型的语言中，我们可以编写一个函数，它接受一个类型为“鸭子”的对象，并调用它的“走”和“叫”方法。在使用鸭子类型的语言中，这样的一个函数可以接受一个任意类型的对象，并调用它的“走”和“叫”方法。如果这些需要被调用的方法不存在，那么将引发一个运行时错误。任何拥有这样的正确的“走”和“叫”方法的对象都可被函数接受的这种行为引出了以上表述，这种决定类型的方式因此得名。</p>
<p>鸭子类型通常得益于“不”测试方法和函数中参数的类型，而是依赖文档、清晰的代码和测试来确保正确使用。</p>
<p>在常规类型中，我们能否在一个特定场景中使用某个对象取决于这个对象的类型，而在鸭子类型中，则取决于这个对象是否具有某种属性或者方法——即只要具备特定的属性或方法，能通过鸭子测试，就可以使用。</p>
<h4 id="特征-1"><a class="header" href="#特征-1">特征</a></h4>
<p>Rust也有一个类似且功能强大的结构,被称为特征。Rust中的特征以多种形式存在, 我们将介绍一些最常见的形式并了解一些与它们简单交互的方式。此外,当特征与泛型搭配使用时,可以限制传递到 API
的参数范围。我们将会对特征进行比较深入的了解。</p>
<h3 id="特征到底是什么"><a class="header" href="#特征到底是什么">特征到底是什么？</a></h3>
<h3 id="特征的多种表现形式"><a class="header" href="#特征的多种表现形式">特征的多种表现形式</a></h3>
<h4 id="标记特征"><a class="header" href="#标记特征">标记(特征)</a></h4>
<h4 id="简单特征"><a class="header" href="#简单特征">简单(特征)</a></h4>
<h4 id="泛型特征-1"><a class="header" href="#泛型特征-1">泛型(特征)</a></h4>
<h4 id="关联类型特征"><a class="header" href="#关联类型特征">关联类型(特征)</a></h4>
<h4 id="继承特征"><a class="header" href="#继承特征">继承(特征)</a></h4>
<h3 id="一些常用内置特征"><a class="header" href="#一些常用内置特征">一些常用内置特征</a></h3>
<h4 id="自动特征auto-traits"><a class="header" href="#自动特征auto-traits">自动特征(Auto Traits)</a></h4>
<h5 id="send--sync"><a class="header" href="#send--sync">Send &amp; Sync</a></h5>
<h5 id="unpin-unwindsafe--refunwindsafe"><a class="header" href="#unpin-unwindsafe--refunwindsafe">Unpin、 UnwindSafe &amp; RefUnwindSafe</a></h5>
<h4 id="debug"><a class="header" href="#debug">Debug</a></h4>
<p>这个特征有助于在控制台上输出类型以便进行调试。在组合类型的情况下,类型将以类似 JSON 的格式输出,其中带有花括号和其他括号,如果类型是字符串,将会用引号标识。这适用于 Rust 中的大多数内置类型。</p>
<h4 id="partialeq-和-eq"><a class="header" href="#partialeq-和-eq">PartialEq 和 Eq</a></h4>
<p>这些特征允许两个元素相互比较以验证是否相等</p>
<h4 id="copy和clone"><a class="header" href="#copy和clone">Copy和Clone</a></h4>
<p>这些特征定义了类型的复制方式。 简而言之,当在任何自定义类型上自动派生时,这些特征允许用户从实例创建新的副本:</p>
<ol>
<li>可以在实现 Copy 时隐式创建</li>
<li>也可以在实现 Clone 时通过调用 clone() 显式创建。</li>
</ol>
<blockquote>
<p>请注意,Copy 依赖于在类型上实现的 Clone 特征</p>
</blockquote>
<h4 id="display"><a class="header" href="#display">Display</a></h4>
<h4 id="add"><a class="header" href="#add">Add</a></h4>
<h4 id="into-和-from"><a class="header" href="#into-和-from">Into 和 From</a></h4>
<h4 id="drop"><a class="header" href="#drop">Drop</a></h4>
<h4 id="deref--derefmut"><a class="header" href="#deref--derefmut">Deref &amp; DerefMut</a></h4>
<h4 id="sizedspecial-types-and-traits---the-rust-reference"><a class="header" href="#sizedspecial-types-and-traits---the-rust-reference">Sized<a href="https://doc.rust-lang.org/stable/reference/special-types-and-traits.html">Special types and traits - The Rust Reference</a></a></h4>
<h3 id="一个完整例子"><a class="header" href="#一个完整例子">一个完整例子</a></h3>
<pre><pre class="playground"><code class="language-rust  editable">// complex/src/lib.rs

use std::ops::Add;

/*
将#[derive(Default)] 属性实现为一个过程宏,可以自动实现它修饰的类型的特征。
此自动派生要求任何自定义类型的字段(例如结构体或枚举)本身必须实现 Default 特征。
使用它们继承特征仅适用于结构体、枚举及联合。
*/
#[derive(Default, Debug, PartialEq, Copy, Clone)]
struct Complex&lt;T&gt; {
    // Real part
    re: T,
    // Complex part
    im: T,
}

impl&lt;T&gt; Complex&lt;T&gt; {
    // new 函数实际上并不是一个特殊的构造函数(如果你只了解带有构造函数的语言),
    // 而是社区采用的一个常用名称(作为创建新类型实例的方法名) 。
    fn new(re: T, im: T) -&gt; Self {
        Complex { re, im }
    }
}

// 来自 std::ops 模块的 Add 特征允许我们使用“+”运算符将两个复数相加
/*
1. impl&lt;T: Add&lt;T, Output=T&gt;表示我们正在为泛型 T 实现 Add,其中 T 实现 Add&lt;T, Output=T&gt;。
2. &lt;T, Output=T&gt;部分表示 Add 特征的实现必须具有相同的输入和输出类型
3. Add for Complex&lt;T&gt;部分表示为 Complex&lt;T&gt;类型实现 Add 特征
4. T:Add 表示必须实现 Add 特征。如果没有实现,那么我们不能使用“+”运算符
*/
impl&lt;T: Add&lt;T, Output=T&gt;&gt; Add for Complex&lt;T&gt; {
    type Output = Complex&lt;T&gt;;
    // Add 特征提供的核心功能,是我们在两种实现类型之间使用“+”运算符时调用的方法。
    // 它是一个实例方法,通过值获取 self 并接收 rhs 作为参数,即特征定义中的 RHS。
    fn add(self, rhs: Complex&lt;T&gt;) -&gt; Self::Output {
        Complex { re: self.re + rhs.re, im: self.im + rhs.im }
    }
}

// 来自 std::convert 模块的 Into 和 From 特征使用户能够根据其他类型创建复数类型
/*
1. 如果我们可以从内置基元类型 (例如双元素元组) 构造 Complex 类型
   其中第 1 个元素是实部,第 2 个元素是虚部,将会很方便。
   我们可以通过实现 From 特征来达到此目的。
2. 此特征定义了一个 from 方法, 为我们提供了在类型之间进行转换的一般方法
3. 第一个&lt;T&gt;是泛型 T 的声明, 第二个和第三个&lt;T&gt;是泛型类型 T 的用途。 我们会根据(T,T) 类型创建它
*/
impl&lt;T&gt; From&lt;(T, T)&gt; for Complex&lt;T&gt; {
    /*
        当我们实现它时, 只需要用我们希望实现它的类型替换 T 并实现 from 方法,
        然后我们就可以在相关类型上调用该方法。
        这是一个将 Complex 值转换为双元素元组类型的实现, Rust本身就能识别它
    */
    fn from(value: (T, T)) -&gt; Complex&lt;T&gt; {
        Complex { re: value.0, im: value.1 }
    }
}

use std::fmt::{Formatter, Display, Result};

// Display 特征能够输出人类可读版本的复数类型
impl&lt;T: Display&gt; Display for Complex&lt;T&gt; {
    fn fmt(&amp;self, f: &amp;mut Formatter) -&gt; Result {
        // 为了让用户能够以数学符号的形式查看复数类型
        write!(f, &quot;{} + {}i&quot;, self.re, self.im)
    }
}

// 一个简单的初始化测试用例。
#[cfg(test)]
mod tests {
    use crate::Complex;

    #[test]
    fn complex_basics() {
        let first = Complex::new(3, 5);
        let second: Complex&lt;i32&gt; = Complex::default();
        assert_eq!(first.re, 3);
        assert_eq!(first.im, 5);
        assert!(second.re == second.im);
    }

    #[test]
    fn complex_addition() {
        let a = Complex::new(1, -2);
        let b = Complex::default();
        let res = a + b;
        assert_eq!(res, a);
    }

    #[test]
    fn complex_from() {
        let a = (2345, 456);
        let complex = Complex::from(a);
        assert_eq!(complex.re, 2345);
        assert_eq!(complex.im, 456);
    }

    #[test]
    fn complex_display() {
        let my_imaginary = Complex::new(2345, 456);
        println!(&quot;{}&quot;, my_imaginary);
    }
}
// 最后使用cargo test -- --nocapture执行
</code></pre></pre>
<h2 id="特征区间泛型特征"><a class="header" href="#特征区间泛型特征">特征区间：泛型+特征</a></h2>
<h3 id="引出特征区间"><a class="header" href="#引出特征区间">引出特征区间</a></h3>
<p>首先看一下如下代码：</p>
<pre><pre class="playground"><code class="language-rust  editable">// trait_bounds_intro.rs

struct Game;

struct Enemy;

struct Hero;
/*
在 Game 类型上我们有一个泛型函数 load,它可以接收任何游戏实体,
并通过任意 T 调用 init()将其加载到我们的游戏世界中。
但是,这个示例无法通过编译
*/
impl Game {
    fn load&lt;T&gt;(&amp;self, entity: T) {
        entity.init(); // method not found in `T`
    }
}

fn main() {
    let game = Game;
    game.load(Enemy);
    game.load(Hero);
}
</code></pre></pre>
<ol>
<li>因此, 任何类型为 T 的泛型函数都不能知道或默认假定 init()方法存在于 T 之上。</li>
<li>如果确实如此,那么它根本不是泛型,并且它们只能接收具有 init()方法的类型。</li>
<li><strong>因此,有一种方法可以让编译器知道这一点,并约束 load 通过特征能够接收的类型集,这就需要用到特征区间</strong>。</li>
</ol>
<blockquote>
<p>我们可以定义一个名为 Loadable 的特征,并在我们的 Enemy 和 Hero 类型上实现它。</p>
</blockquote>
<pre><pre class="playground"><code class="language-rust  editable">// trait_bounds_intro.rs

struct Game;

struct Enemy;

struct Hero;

trait Loadable {
    fn init(&amp;self);
}
/*
我们分别为 Enemy 和 Hero 实现了 Loadable,还修改了 load 方法
*/
impl Loadable for Enemy {
    fn init(&amp;self) {
        println!(&quot;Enemy loaded&quot;);
    }
}

impl Loadable for Hero {
    fn init(&amp;self) {
        println!(&quot;Hero loaded&quot;);
    }
}

impl Game {
    /*
        我们必须在泛型声明旁边放置几个符号来指定特征,我们称之为特征区间
    */
    fn load&lt;T: Loadable&gt;(&amp;self, entity: T) {
        entity.init();
    }
}

fn main() {
    let game = Game;
    game.load(Enemy);
    game.load(Hero);
}
</code></pre></pre>
<ol>
<li>注意, “:Loadable”部分表明了我们指定特征范围的方式。特征区间允许我们限制泛型 API 可以接收的参数范围。</li>
</ol>
<h3 id="代码单体化"><a class="header" href="#代码单体化">代码单体化</a></h3>
<ol>
<li>指定泛型元素上的绑定的特征类似于我们为变量指定类型的方式</li>
<li>但是此处的变量是泛型 T,类型是某些特征。例如 <strong>T:SomeTrait</strong>。</li>
<li>定义泛型函数时几乎总是会用到特征区间。</li>
<li>如果定义的泛型函数中的 T 不包含任何特征区间,我们就不能通过任何方法调用,因 Rust 不知道给定方法实现的方式。</li>
<li>它需要知道 T 是否具有某个 foo 方法,以便<strong>将代码单体化</strong></li>
</ol>
<pre><pre class="playground"><code class="language-rust  editable">// trait_bounds_basics.rs

// 我们有一个方法 add_thing,它可以添加任何类型 T。
fn add_thing&lt;T&gt;(fst: T, snd: T) {
    // 编译器向用户建议在 T 上添加特征区间 Add
    // help: consider restricting type parameter `T`
    let _ = fst + snd;
}

fn main() {
    add_thing(2, 2);
}
</code></pre></pre>
<blockquote>
<p>修正后</p>
</blockquote>
<pre><pre class="playground"><code class="language-rust  editable">// trait_bound_basics_fixed.rs

use std::ops::Add;

// 代码修改之后,我们将“:Add”添加到了 T 的后面,之后代码通过了编译
fn add_thing&lt;T: Add&gt;(fst: T, snd: T) {
    let _ = fst + snd;
}

fn main() {
    add_thing(2, 2);
}
</code></pre></pre>
<h3 id="指定特征区间的四个方法"><a class="header" href="#指定特征区间的四个方法">指定特征区间的四个方法</a></h3>
<h4 id="区间内泛型-fn-fn_namet-target_traitval-t"><a class="header" href="#区间内泛型-fn-fn_namet-target_traitval-t">区间内泛型: fn fn_name&lt;T: target_trait&gt;(val: T)</a></h4>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// 指定特征区间的一种方法, 它会接收任何实现了 Display 特征的类型
fn show_me&lt;T: Display&gt;(val: T) {
    //可以使用{}格式化字符串，因为有Display特征区间
    printin!(&quot;{}&quot;, val);
}
<span class="boring">}
</span></code></pre></pre>
<ol>
<li>这是在泛型函数的类型签名的长度较短时声明特征区间的常见语法。</li>
<li>在指定类型的特征区间时,此语法也有效</li>
</ol>
<h4 id="where语句-当第一种方法签名过长时使用"><a class="header" href="#where语句-当第一种方法签名过长时使用">where语句: 当第一种方法签名过长时使用</a></h4>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn parse&lt;F&gt;(&amp;self) -&gt; Result&lt;F, &lt;F as FromStr&gt;::Err&gt;
    where F: FromStr { ... }
<span class="boring">}
</span></code></pre></pre>
<blockquote>
<p>注意“where F: FromStr”部分告诉我们 F 类型必须实现 FromStr 特征。where 语句将特征区间和函数签名解耦,并使其可读</p>
</blockquote>
<h4 id="使用组合多个特征"><a class="header" href="#使用组合多个特征">使用“+“组合多个特征</a></h4>
<ul>
<li>先看一下标准库中 HashMap 类型的 impl 代码块:</li>
</ul>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// HashMap 键类型的 K 必须实现 Hash 特征和 Eq 特征
impl&lt;K: Hash + Eq, V&gt; HashMap&lt;K, V, RandomState&gt;
{}
<span class="boring">}
</span></code></pre></pre>
<ul>
<li>一个更加具体的例子</li>
</ul>
<pre><pre class="playground"><code class="language-rust  editable">// traits_composition.rs

trait Eat {
    fn eat(&amp;self) {
        println!(&quot;eat&quot;);
    }
}

trait Code {
    fn code(&amp;self) {
        println!(&quot;code&quot;);
    }
}

trait Sleep {
    fn sleep(&amp;self) {
        println!(&quot;sleep&quot;);
    }
}

// 创建了一个新的特征 Programmer,它由 3 个特征组合而成:Eat、Code、 Sleep。
// 通过这种方式, 我们对类型设置了约束:
// 因此如果类型 T 实现了 Programmer, 那么它必须实现上述所有特征
trait Programmer: Eat + Code + Sleep {
    fn animate(&amp;self) {
        self.eat();
        self.code();
        self.sleep();
        println!(&quot;repeat!&quot;);
    }
}

struct Bob;

impl Programmer for Bob {}

impl Eat for Bob {}

impl Code for Bob {}

impl Sleep for Bob {}

fn main() {
    Bob.animate();
}
</code></pre></pre>
<h4 id="使用impl特征语法-闭包常用"><a class="header" href="#使用impl特征语法-闭包常用">使用impl特征语法: 闭包常用</a></h4>
<pre><pre class="playground"><code class="language-rust  editable">// impl_trait_syntax.rs

use std::fmt::Display;

/*
直接使用了 impl Display,而不是指定 T:Display。这是 impl 特征语法。
这为我们返回复杂或不方便表示的类型(例如函数的闭包)提供了便利
*/
fn show_me(val: impl Display) {
    println!(&quot;{}&quot;, val);
}

fn main() {
    show_me(&quot;Trait bounds are awesome&quot;);
}
</code></pre></pre>
<blockquote>
<p>如果没有这种语法,则必须使用 Box 智能指针类型将其放在指针后面返回,这涉及堆分配。
闭包的底层结构由实现了一系列特征的结构体组成。<strong>Fn(T) -&gt; U</strong> 特征就是其中之一</p>
</blockquote>
<p>闭包使用示例：</p>
<pre><pre class="playground"><code class="language-rust  editable">// impl_trait_closure.rs
// 它接收两个数字,并返回将这两个数字相加的闭包
fn lazy_adder(a: u32, b: u32) -&gt; impl Fn() -&gt; u32 {
    move || a + b
}

fn main() {
    // 调用 lazy_adder,传入两个数字。
    // 这会在 lazy_adder 中创建一个闭包,但不会对其进行求值
    let add_later = lazy_adder(1024, 2048);
    println!(&quot;{:?}&quot;, add_later());
}
</code></pre></pre>
<p>还可以在入参和返回使用：</p>
<pre><pre class="playground"><code class="language-rust  editable">// impl_trait_both.rs

use std::fmt::Display;

/*
1. 会接收任何 Display 特征的参数
2. 返回的类型是 impl Display
*/
fn surround_with_braces(val: impl Display) -&gt; impl Display {
    format!(&quot;{{{}}}&quot;, val)
}

fn main() {
    println!(&quot;{}&quot;, surround_with_braces(&quot;Hello&quot;));
}
</code></pre></pre>
<ol>
<li>通常建议将特征区间的 impl 特征语法用做函数的返回类型。</li>
<li>在参数位置使用它意味着我们不能使用 turbofish 运算符。</li>
<li>如果某些相关代码使用 turbofish 运算符来调用软件包中的某个方法,那么可能导致 API 不兼容。</li>
<li>只有当我们没有可用的具体类型时才应该使用它, 就像闭包那样。</li>
</ol>
<h3 id="特征区间的使用场景"><a class="header" href="#特征区间的使用场景">特征区间的使用场景</a></h3>
<h4 id="在类型上使用不建议"><a class="header" href="#在类型上使用不建议">在类型上使用：不建议</a></h4>
<pre><pre class="playground"><code class="language-rust  editable">// trait_bounds_types.rs

use std::fmt::Display;

// 写法一：区间内泛型
struct Foo&lt;T: Display&gt; {
    bar: T,
}

// 写法二：where语句解耦
struct Bar&lt;F&gt;
    where
        F: Display,
{
    inner: F,
}

fn main() {}
</code></pre></pre>
<blockquote>
<p>不过,我们并不鼓励在类型上使用特征区间,因为它对类型自身施加了限制。
通常, 我们希望类型尽可能是泛型,从而允许我们使用任何类型创建实例,并使用函数或方法中的特征区间对其行为进行限制。</p>
</blockquote>
<h4 id="泛型函数impl代码块"><a class="header" href="#泛型函数impl代码块">泛型函数+impl代码块</a></h4>
<pre><pre class="playground"><code class="language-rust  editable">// trait_bounds_functions.rs

use std::fmt::Debug;

trait Eatable {
    fn eat(&amp;self);
}

// 指定类型必须是 Debug,以便其可以在方法内部输出到控制台
#[derive(Debug)]
struct Food&lt;T&gt;(T);

#[derive(Debug)]
struct Apple;

// 为了让 apple 是“可食用”的,我们实现了 Food 的 Eatable 特征
impl&lt;T&gt; Eatable for Food&lt;T&gt;
    where
        T: Debug,
{
    fn eat(&amp;self) {
        println!(&quot;Eating {:?}&quot;, self);
    }
}

// 注意 eat 的特点,类型 T 必须实现 Eatable 特征。
fn eat&lt;T&gt;(val: T)
    where
        T: Eatable,
{
    val.eat();
}

fn main() {
    let apple = Food(Apple);
    eat(apple);
}
</code></pre></pre>
<h2 id="特征对象-多态特征类型"><a class="header" href="#特征对象-多态特征类型">特征对象: 多态特征类型</a></h2>
<h3 id="分发dispatch"><a class="header" href="#分发dispatch">分发(dispatch)</a></h3>
<blockquote>
<p>分发是一个从面向对象编程范式中借鉴的概念,主要用于描述被称为多态的上下文中的一种特性。 在面向对象程序设计(Object-Oriented Programming,OOP)中,当 API 是泛型或者接收实现为接口的参数时,必须弄清楚参数在传递给 API 的类型实例上调用什么方法实现。多态的上下文中的方法解析过程被称为分发,调用该方法被称为分发化(dispatching) 。</p>
</blockquote>
<h4 id="分发方式静态-or-动态"><a class="header" href="#分发方式静态-or-动态">分发方式：静态 or 动态</a></h4>
<blockquote>
<p>在支持多态的主流语言中,分发可以通过以下任意一种方式进行。</p>
</blockquote>
<ol>
<li>静态分发：编译期决定</li>
</ol>
<p>当在编译期决定要调用的方法时,它被称为静态分发或早期绑定。方法的签名用于决定调用的方法,所有这些都在编译期决定。在 Rust 中,泛型展示了这种形式的分发, 因为即使泛型函数可以接收许多参数, 也会在编译期使用具体类型生成函数的专用副本。</p>
<p>2.动态分发: 运行期决定，资源开销更大</p>
<p>在面向对象的语言中,有时直到运行时才能确定调用的方法。这是因为具体类型被隐藏,并且只有接口方法可用于调用该类型。 在 Java 中,当函数只有参数时就是这种情况,即接口。 这种情况只能通过动态分发来处理。在动态分发过程中,可通过对
vtable 接口的实现列表进行查找,并调用该方法来动态确定相关方法。vtable 是一个函数指针列表,指向每个类型的实现方法。由于方法调用过程中存在额外的间接指针引用,所以这需要更多的资源开销</p>
<h3 id="区别特征区间与特征对象"><a class="header" href="#区别特征区间与特征对象">区别特征区间与特征对象</a></h3>
<p>|特征使用方式|分发方式|实现方式|绑定时期||
|:----:------------|:--:--------|:--:--------|:--:--------|--|
|特征区间|静态分发|限定泛型|编译期(早期绑定)||
|特征对象|动态分发|胖指针|运行期多态(后期绑定)||</p>
<h3 id="特征对象具体说说"><a class="header" href="#特征对象具体说说">特征对象具体说说</a></h3>
<h4 id="指定为实现某个特征"><a class="header" href="#指定为实现某个特征">指定为实现某个特征</a></h4>
<p>特征对象是一种创建多态 API 的方法,可以将参数指定为实现某个特征的东西,而不是泛型或具体类型。这种方法被声明为实现某个特征 API,即特征对象。</p>
<h4 id="用胖指针实现"><a class="header" href="#用胖指针实现">用胖指针实现</a></h4>
<p>特征对象类似 C++中的虚方法。特征对象实现为胖指针,并且是不定长类型,这意味着它们只能在引用符号(&amp;)后面使用。特征对象胖指针具有指向与对象关联的实际数据的第一指针,而第二指针指向虚拟表(vtable)
,它是在固定偏移处为每个对象的方法保留一个函数指针的结构体。</p>
<h4 id="是rust执行动态分发的方式"><a class="header" href="#是rust执行动态分发的方式">是Rust执行动态分发的方式</a></h4>
<p>特征对象是 Rust 执行动态分发的方式,我们没有实际的具体类型信息。通过跳转到vtable 并调用适当的方法完成方法解析。</p>
<p>特征对象的另一个用例是,它们允许用户对可以具有多种类型的集合进行操作,但是在运行时需要额外的间接指针引用开销</p>
<pre><pre class="playground"><code class="language-rust  editable">// trait_objects.rs

use std::fmt::Debug;

#[derive(Debug)]
struct Square(f32);

#[derive(Debug)]
struct Rectangle(f32, f32);

trait Area: Debug {
    fn get_area(&amp;self) -&gt; f32;
}

impl Area for Square {
    fn get_area(&amp;self) -&gt; f32 {
        self.0 * self.0
    }
}

impl Area for Rectangle {
    fn get_area(&amp;self) -&gt; f32 {
        self.0 * self.1
    }
}

fn main() {
    /*
        shapes 的元素类型是&amp;dyn Area,这是一种表示为特征的类型。
        特征对象是由 dyn Area 表示的, 意味着它是指向 Area 特征某些实现的指针。
        特征对象形式的类型允许用户在集合类型(例如 Vec)中存储不同类型

        Square 和 Rectangle 会隐式转换成特征对象,因为我们给它们推送了一个引用。
        我们还可以通过手动转换某个特征对象来构造一个类型,但这是一种比较少见的情况.
        只有在编译器自身无法将类型作为特征对象转换时使用。
    */
    let shapes: Vec&lt;&amp;dyn Area&gt; = vec![&amp;Square(3f32), &amp;Rectangle(4f32, 2f32)];
    for s in shapes {
        println!(&quot;{:?}&quot;, s);
    }
}
</code></pre></pre>
<h4 id="不定长类型只能作为引用创建"><a class="header" href="#不定长类型只能作为引用创建">不定长类型只能作为引用创建</a></h4>
<blockquote>
<p>请注意,我们只能创建在编译时知道类型尺寸的特征对象。</p>
</blockquote>
<p>dyn Trait 是一个不定长类型,只能作为引用创建。我们还可以通过将特征对象置于其他指针类型之后来创建特征对象,例如 Box、Rc、Arc 等</p>
<pre><pre class="playground"><code class="language-rust  editable">// dyn_trait.rs

use std::fmt::Display;

fn show_me(item: &amp;dyn Display) {
    println!(&quot;{}&quot;, item);
}

fn main() {
    show_me(&amp;&quot;Hello trait object&quot;);
}
</code></pre></pre>
<h2 id="总结特征特征区间和特征对象"><a class="header" href="#总结特征特征区间和特征对象">总结特征、特征区间和特征对象</a></h2>
<p>特征和泛型通过单态化(早期绑定)或运行时多态(后期绑定)提供了两种代码复用的方式。 何时使用它们取决于具体情况和相关应用程序的需求：</p>
<ol>
<li>通常,错误类型会被分配到动态分发的序列,因为它们应该是很少被执行的代码路径。</li>
<li>单态化对小型的应用场景来说非常方便,但是缺点是导致了代码的膨胀和重复,这会影响缓存效率,并增加二进制文件的大小。</li>
</ol>
<blockquote>
<p>但是,在这两个选项中,静态分发应该是首选,除非系统对二进制文件大小存在严格的限制。</p>
</blockquote>
<h2 id="参考资源-6"><a class="header" href="#参考资源-6">参考资源</a></h2>
<h3 id="online-book-8"><a class="header" href="#online-book-8">online-book</a></h3>
<ul>
<li><a href="https://doc.rust-lang.org/book/ch19-03-advanced-traits.html">Advanced Traits - The Rust Programming Language</a></li>
<li><a href="https://doc.rust-lang.org/stable/reference/trait-bounds.html">Trait and lifetime bounds - The Rust Reference</a></li>
<li><a href="https://doc.rust-lang.org/stable/reference/special-types-and-traits.html">Special types and traits - The Rust Reference</a></li>
<li><a href="https://doc.rust-lang.org/book/ch10-00-generics.html">Generic Types, Traits, and Lifetimes - The Rust Programming Language</a></li>
<li><a href="https://doc.rust-lang.org/book/ch19-03-advanced-traits.html">Advanced Traits - The Rust Programming Language</a></li>
</ul>
<h3 id="fragment-8"><a class="header" href="#fragment-8">fragment</a></h3>
<ul>
<li><a href="https://blog.logrocket.com/rust-traits-a-deep-dive/">Rust traits: A deep dive - LogRocket Blog</a></li>
<li><a href="https://zh.m.wikipedia.org/zh-hans/%E9%B8%AD%E5%AD%90%E7%B1%BB%E5%9E%8B">鸭子类型 - 维基百科，自由的百科全书</a></li>
</ul>
<h3 id="local-8"><a class="header" href="#local-8">local</a></h3>
<ul>
<li><a href="marginnote3app://note/91DC4A44-A289-4D0F-B1D1-89D75181E736">&lt;精通rust(第二版)&gt;-第四章：类型、泛型和特征</a></li>
<li><a href="marginnote3app://note/6D348DE0-2C5C-42E6-A404-4CF0CA1C5678">《代码之髓》- 第五章：函数</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><!--ts-->
<ul>
<li><a href="layer1_underlying_abstract/3_language_grammar/language_grammar.html#%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E8%AF%AD%E6%B3%95%E6%A6%82%E8%BF%B0">编程语言语法概述</a>
<ul>
<li><a href="layer1_underlying_abstract/3_language_grammar/language_grammar.html#%E5%89%8D%E8%A8%80">前言</a></li>
<li><a href="layer1_underlying_abstract/3_language_grammar/language_grammar.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a>
<ul>
<li><a href="layer1_underlying_abstract/3_language_grammar/language_grammar.html#online-book">online-book</a></li>
<li><a href="layer1_underlying_abstract/3_language_grammar/language_grammar.html#fragment">fragment</a></li>
<li><a href="layer1_underlying_abstract/3_language_grammar/language_grammar.html#local">local</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:26 UTC 2022 -->
<!--te-->
<h1 id="编程语言语法概述"><a class="header" href="#编程语言语法概述">编程语言语法概述</a></h1>
<h2 id="前言"><a class="header" href="#前言">前言</a></h2>
<p>其实编程语言的语法本质上就分成三部分：确定使用什么类型、类型可以用的操作、通用逻辑操作。不过语法又不是这么简单，它担负着两方面的作用：</p>
<ol>
<li>
<p>与编译器交互：因为这些语法在编译器内部都有对应的操作，涉及一系列繁杂的自动化操作。所以当编写语法可以通过编译，至少说明程序可以跑起来。
这一点在rust中尤其明显，毕竟rust是出了名的“面向编译器”开发语言，编译器对语法的要求可以算作“苛刻”。但是这样也有好处，就是潜移默化之中，编程思维也被调整一番。</p>
</li>
<li>
<p>与编程人员交互：这里主要指编程需要可读且易读。这和代码质量息息相关，这里的编程人员不仅包括第一个写出这段代码的人，还包括后续开发以及协作的开发人员。</p>
</li>
</ol>
<h2 id="参考资源-7"><a class="header" href="#参考资源-7">参考资源</a></h2>
<h3 id="online-book-9"><a class="header" href="#online-book-9">online-book</a></h3>
<h3 id="fragment-9"><a class="header" href="#fragment-9">fragment</a></h3>
<h3 id="local-9"><a class="header" href="#local-9">local</a></h3>
<div style="break-before: page; page-break-before: always;"></div><h1 id="注释与文档rustdoc"><a class="header" href="#注释与文档rustdoc">注释与文档(rustdoc)</a></h1>
<!--ts-->
<ul>
<li><a href="layer1_underlying_abstract/3_language_grammar/annotation_rustdoc.html#%E6%B3%A8%E9%87%8A%E4%B8%8E%E6%96%87%E6%A1%A3rustdoc">注释与文档(rustdoc)</a>
<ul>
<li><a href="layer1_underlying_abstract/3_language_grammar/annotation_rustdoc.html#%E6%B3%A8%E9%87%8A%E6%96%B9%E6%B3%95">注释方法</a></li>
<li><a href="layer1_underlying_abstract/3_language_grammar/annotation_rustdoc.html#rustdoc%E4%BD%BF%E7%94%A8">rustdoc使用</a></li>
<li><a href="layer1_underlying_abstract/3_language_grammar/annotation_rustdoc.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a>
<ul>
<li><a href="layer1_underlying_abstract/3_language_grammar/annotation_rustdoc.html#online-book">online-book</a></li>
<li><a href="layer1_underlying_abstract/3_language_grammar/annotation_rustdoc.html#fragment">fragment</a></li>
<li><a href="layer1_underlying_abstract/3_language_grammar/annotation_rustdoc.html#local">local</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:25 UTC 2022 -->
<!--te-->
<h2 id="注释方法"><a class="header" href="#注释方法">注释方法</a></h2>
<h2 id="rustdoc使用"><a class="header" href="#rustdoc使用">rustdoc使用</a></h2>
<h2 id="参考资源-8"><a class="header" href="#参考资源-8">参考资源</a></h2>
<h3 id="online-book-10"><a class="header" href="#online-book-10">online-book</a></h3>
<ul>
<li><a href="https://doc.rust-lang.org/rustdoc/index.html">What is rustdoc? - The rustdoc book</a></li>
</ul>
<h3 id="fragment-10"><a class="header" href="#fragment-10">fragment</a></h3>
<h3 id="local-10"><a class="header" href="#local-10">local</a></h3>
<div style="break-before: page; page-break-before: always;"></div><h1 id="词法关键字扫盲"><a class="header" href="#词法关键字扫盲">词法关键字扫盲</a></h1>
<h2 id="1-关键字"><a class="header" href="#1-关键字">1. 关键字</a></h2>
<h3 id="严格关键字"><a class="header" href="#严格关键字">严格关键字</a></h3>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>as / break / const / continue / crate / if / else / struct / enum / true / false / fn / for / in / let / loop / impl / mod / match / move mut / pub / ref / return / self / Self / static / super /trait / type / unsafe /use / where / while / async /await/dyn/main
<span class="boring">}
</span></code></pre></pre>
<h3 id="弱关键字"><a class="header" href="#弱关键字">弱关键字</a></h3>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>abstract / become / box / do / final / macro / override / priv / typeof / unsized / virtual / yield / try
<span class="boring">}
</span></code></pre></pre>
<h3 id="保留字"><a class="header" href="#保留字">保留字</a></h3>
<ul>
<li>2018 Edition:union,’static</li>
<li>2015 Edition:dyn</li>
</ul>
<blockquote>
<p>被保留的关键字不代表将来一定会使用</p>
</blockquote>
<h2 id="2-标识符"><a class="header" href="#2-标识符">2. 标识符</a></h2>
<h2 id="3-注释"><a class="header" href="#3-注释">3. 注释</a></h2>
<blockquote>
<p>//!, /<em>!, //!!, /</em>!!, /<strong>…<em>/, //, ////, /</em></strong>…*/</p>
</blockquote>
<h2 id="4-空白-nttab"><a class="header" href="#4-空白-nttab">4. 空白: \n、\t、tab</a></h2>
<blockquote>
<p>任何形式的空白字符在RuSt中只用于分隔标记，没有语义意义。</p>
</blockquote>
<h2 id="5-词条"><a class="header" href="#5-词条">5. 词条</a></h2>
<ol>
<li>语言项(item)</li>
<li>块(block)</li>
<li>语句（Stmt)</li>
<li>表达式（Expr)</li>
<li>模式（Pattern)</li>
<li>关键字（Keyword)</li>
<li>标识符（Ident)</li>
<li>字面量(Literal)</li>
<li>生命周期(Lifetime)</li>
<li>可见性(Vis)</li>
<li>标点符号（Punctuation)</li>
<li>分隔符（delimiter)</li>
<li>词条树(Token Tree)</li>
<li>属性（Attribute)</li>
</ol>
<h2 id="路径--"><a class="header" href="#路径--">路径: ::, ::&lt;&gt;</a></h2>
<h2 id="参考资源-9"><a class="header" href="#参考资源-9">参考资源</a></h2>
<h3 id="online-book-11"><a class="header" href="#online-book-11">online-book</a></h3>
<ul>
<li><a href="https://doc.rust-lang.org/stable/reference/lexical-structure.html">Lexical structure - The Rust Reference</a></li>
</ul>
<h3 id="fragment-11"><a class="header" href="#fragment-11">fragment</a></h3>
<ul>
<li><a href="https://time.geekbang.org/course/detail/100060601-286522">词法结构</a></li>
</ul>
<h3 id="local-11"><a class="header" href="#local-11">local</a></h3>
<div style="break-before: page; page-break-before: always;"></div><h1 id="绑定赋值与匹配模式"><a class="header" href="#绑定赋值与匹配模式">绑定、赋值与匹配模式</a></h1>
<!--ts-->
<ul>
<li><a href="layer1_underlying_abstract/3_language_grammar/binding_match_patterns.html#%E7%BB%91%E5%AE%9A%E8%B5%8B%E5%80%BC%E4%B8%8E%E5%8C%B9%E9%85%8D%E6%A8%A1%E5%BC%8F">绑定、赋值与匹配模式</a>
<ul>
<li><a href="layer1_underlying_abstract/3_language_grammar/binding_match_patterns.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a>
<ul>
<li><a href="layer1_underlying_abstract/3_language_grammar/binding_match_patterns.html#online-book">online-book</a></li>
<li><a href="layer1_underlying_abstract/3_language_grammar/binding_match_patterns.html#fragment">fragment</a></li>
<li><a href="layer1_underlying_abstract/3_language_grammar/binding_match_patterns.html#local">local</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:25 UTC 2022 -->
<!--te-->
<h2 id="参考资源-10"><a class="header" href="#参考资源-10">参考资源</a></h2>
<h3 id="online-book-12"><a class="header" href="#online-book-12">online-book</a></h3>
<ul>
<li><a href="https://doc.rust-lang.org/stable/reference/patterns.html">Patterns - The Rust Reference</a></li>
<li><a href="https://doc.rust-lang.org/book/ch06-00-enums.html">Enums and Pattern Matching - The Rust Programming Language</a></li>
<li><a href="https://doc.rust-lang.org/book/ch18-00-patterns.html">Patterns and Matching - The Rust Programming Language</a></li>
</ul>
<h3 id="fragment-12"><a class="header" href="#fragment-12">fragment</a></h3>
<h3 id="local-12"><a class="header" href="#local-12">local</a></h3>
<div style="break-before: page; page-break-before: always;"></div><h1 id="逻辑判断与循环"><a class="header" href="#逻辑判断与循环">逻辑判断与循环</a></h1>
<h2 id="参考资源-11"><a class="header" href="#参考资源-11">参考资源</a></h2>
<h3 id="online-book-13"><a class="header" href="#online-book-13">online-book</a></h3>
<h3 id="fragment-13"><a class="header" href="#fragment-13">fragment</a></h3>
<h3 id="local-13"><a class="header" href="#local-13">local</a></h3>
<div style="break-before: page; page-break-before: always;"></div><h1 id="语句与表达式"><a class="header" href="#语句与表达式">语句与表达式</a></h1>
<!--ts-->
<ul>
<li><a href="layer1_underlying_abstract/3_language_grammar/statements_expressions.html#%E8%AF%AD%E5%8F%A5%E4%B8%8E%E8%A1%A8%E8%BE%BE%E5%BC%8F">语句与表达式</a>
<ul>
<li><a href="layer1_underlying_abstract/3_language_grammar/statements_expressions.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a>
<ul>
<li><a href="layer1_underlying_abstract/3_language_grammar/statements_expressions.html#online-book">online-book</a></li>
<li><a href="layer1_underlying_abstract/3_language_grammar/statements_expressions.html#fragment">fragment</a></li>
<li><a href="layer1_underlying_abstract/3_language_grammar/statements_expressions.html#local">local</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:27 UTC 2022 -->
<!--te-->
<h2 id="参考资源-12"><a class="header" href="#参考资源-12">参考资源</a></h2>
<h3 id="online-book-14"><a class="header" href="#online-book-14">online-book</a></h3>
<ul>
<li><a href="https://doc.rust-lang.org/stable/reference/statements.html">Statements - The Rust Reference</a></li>
<li><a href="https://doc.rust-lang.org/stable/reference/expressions.html">Expressions - The Rust Reference</a></li>
</ul>
<h3 id="fragment-14"><a class="header" href="#fragment-14">fragment</a></h3>
<h3 id="local-14"><a class="header" href="#local-14">local</a></h3>
<div style="break-before: page; page-break-before: always;"></div><h1 id="代码质量异常测试与日志"><a class="header" href="#代码质量异常测试与日志">代码质量：异常、测试与日志</a></h1>
<!--ts-->
<ul>
<li><a href="layer1_underlying_abstract/3_language_grammar/code_quality.html#%E4%BB%A3%E7%A0%81%E8%B4%A8%E9%87%8F%E5%BC%82%E5%B8%B8%E6%B5%8B%E8%AF%95%E4%B8%8E%E6%97%A5%E5%BF%97">代码质量：异常、测试与日志</a>
<ul>
<li><a href="layer1_underlying_abstract/3_language_grammar/code_quality.html#%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86">错误处理</a>
<ul>
<li><a href="layer1_underlying_abstract/3_language_grammar/code_quality.html#rust_backtrace%E7%9A%84%E7%94%A8%E6%B3%95">RUST_BACKTRACE的用法</a>
<ul>
<li><a href="layer1_underlying_abstract/3_language_grammar/code_quality.html#%E8%AE%BE%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">设置环境变量</a></li>
<li><a href="layer1_underlying_abstract/3_language_grammar/code_quality.html#%E4%B8%B4%E6%97%B6%E8%AE%BE%E7%BD%AE%E4%BD%BF%E7%94%A8">临时设置使用</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="layer1_underlying_abstract/3_language_grammar/code_quality.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a>
<ul>
<li><a href="layer1_underlying_abstract/3_language_grammar/code_quality.html#online-book">online-book</a></li>
<li><a href="layer1_underlying_abstract/3_language_grammar/code_quality.html#fragment">fragment</a></li>
<li><a href="layer1_underlying_abstract/3_language_grammar/code_quality.html#local">local</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:25 UTC 2022 -->
<!--te-->
<h2 id="错误处理"><a class="header" href="#错误处理">错误处理</a></h2>
<h3 id="rust_backtrace的用法"><a class="header" href="#rust_backtrace的用法">RUST_BACKTRACE的用法</a></h3>
<ul>
<li>1 : 打印简略错误信息</li>
<li>full: 打印详细错误信息</li>
</ul>
<h4 id="设置环境变量"><a class="header" href="#设置环境变量">设置环境变量</a></h4>
<pre><code class="language-shell">export RUST_BACKTRACE=1
echo $RUST_BACKTRACE
</code></pre>
<h4 id="临时设置使用"><a class="header" href="#临时设置使用">临时设置使用</a></h4>
<pre><code class="language-shell">RUST_BACKTRACE=1 cargo run
RUST_BACKTRACE=full mdbook serve
</code></pre>
<h2 id="参考资源-13"><a class="header" href="#参考资源-13">参考资源</a></h2>
<h3 id="online-book-15"><a class="header" href="#online-book-15">online-book</a></h3>
<ul>
<li><a href="https://doc.rust-lang.org/book/ch11-00-testing.html">Writing Automated Tests - The Rust Programming Language</a></li>
</ul>
<h3 id="fragment-15"><a class="header" href="#fragment-15">fragment</a></h3>
<ul>
<li><a href="https://www.runoob.com/rust/rust-error-handle.html">Rust 错误处理 | 菜鸟教程</a></li>
</ul>
<h3 id="local-15"><a class="header" href="#local-15">local</a></h3>
<div style="break-before: page; page-break-before: always;"></div><h1 id="设计抽象"><a class="header" href="#设计抽象">设计抽象</a></h1>
<!--ts-->
<ul>
<li><a href="layer2_design_abstract/layer2_design_abstract.html#%E8%AE%BE%E8%AE%A1%E6%8A%BD%E8%B1%A1">设计抽象</a>
<ul>
<li><a href="layer2_design_abstract/layer2_design_abstract.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a>
<ul>
<li><a href="layer2_design_abstract/layer2_design_abstract.html#online-book">online-book</a></li>
<li><a href="layer2_design_abstract/layer2_design_abstract.html#fragment">fragment</a></li>
<li><a href="layer2_design_abstract/layer2_design_abstract.html#local">local</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:33 UTC 2022 -->
<!--te-->
<h2 id="参考资源-14"><a class="header" href="#参考资源-14">参考资源</a></h2>
<h3 id="online-book-16"><a class="header" href="#online-book-16">online-book</a></h3>
<h3 id="fragment-16"><a class="header" href="#fragment-16">fragment</a></h3>
<h3 id="local-16"><a class="header" href="#local-16">local</a></h3>
<div style="break-before: page; page-break-before: always;"></div><h1 id="编程范式"><a class="header" href="#编程范式">编程范式</a></h1>
<!--ts-->
<ul>
<li><a href="layer2_design_abstract/4_programming_paradigm/4_programming_paradigm.html#%E7%BC%96%E7%A8%8B%E8%8C%83%E5%BC%8F">编程范式</a>
<ul>
<li><a href="layer2_design_abstract/4_programming_paradigm/4_programming_paradigm.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a>
<ul>
<li><a href="layer2_design_abstract/4_programming_paradigm/4_programming_paradigm.html#online-book">online-book</a></li>
<li><a href="layer2_design_abstract/4_programming_paradigm/4_programming_paradigm.html#fragment">fragment</a></li>
<li><a href="layer2_design_abstract/4_programming_paradigm/4_programming_paradigm.html#local">local</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:28 UTC 2022 -->
<!--te-->
<h2 id="参考资源-15"><a class="header" href="#参考资源-15">参考资源</a></h2>
<h3 id="online-book-17"><a class="header" href="#online-book-17">online-book</a></h3>
<h3 id="fragment-17"><a class="header" href="#fragment-17">fragment</a></h3>
<h3 id="local-17"><a class="header" href="#local-17">local</a></h3>
<div style="break-before: page; page-break-before: always;"></div><h1 id="函数式编程"><a class="header" href="#函数式编程">函数式编程</a></h1>
<!--ts-->
<ul>
<li><a href="layer2_design_abstract/4_programming_paradigm/fp.html#%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B">函数式编程</a>
<ul>
<li><a href="layer2_design_abstract/4_programming_paradigm/fp.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a>
<ul>
<li><a href="layer2_design_abstract/4_programming_paradigm/fp.html#online-book">online-book</a></li>
<li><a href="layer2_design_abstract/4_programming_paradigm/fp.html#fragment">fragment</a></li>
<li><a href="layer2_design_abstract/4_programming_paradigm/fp.html#local">local</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:28 UTC 2022 -->
<!--te-->
<h2 id="参考资源-16"><a class="header" href="#参考资源-16">参考资源</a></h2>
<h3 id="online-book-18"><a class="header" href="#online-book-18">online-book</a></h3>
<ul>
<li><a href="https://doc.rust-lang.org/book/ch13-00-functional-features.html">Functional Language Features: Iterators and Closures - The Rust Programming Language</a></li>
<li><a href="https://doc.rust-lang.org/book/ch19-05-advanced-functions-and-closures.html">Advanced Functions and Closures - The Rust Programming Language</a></li>
</ul>
<h3 id="fragment-18"><a class="header" href="#fragment-18">fragment</a></h3>
<h3 id="local-18"><a class="header" href="#local-18">local</a></h3>
<div style="break-before: page; page-break-before: always;"></div><h1 id="面向对象编程"><a class="header" href="#面向对象编程">面向对象编程</a></h1>
<!--ts-->
<ul>
<li><a href="layer2_design_abstract/4_programming_paradigm/oop.html#%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B">面向对象编程</a>
<ul>
<li><a href="layer2_design_abstract/4_programming_paradigm/oop.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a>
<ul>
<li><a href="layer2_design_abstract/4_programming_paradigm/oop.html#online-book">online-book</a></li>
<li><a href="layer2_design_abstract/4_programming_paradigm/oop.html#fragment">fragment</a></li>
<li><a href="layer2_design_abstract/4_programming_paradigm/oop.html#local">local</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:29 UTC 2022 -->
<!--te-->
<h2 id="参考资源-17"><a class="header" href="#参考资源-17">参考资源</a></h2>
<h3 id="online-book-19"><a class="header" href="#online-book-19">online-book</a></h3>
<ul>
<li><a href="https://doc.rust-lang.org/book/ch17-00-oop.html">Object Oriented Programming Features of Rust - The Rust Programming Language</a></li>
</ul>
<h3 id="fragment-19"><a class="header" href="#fragment-19">fragment</a></h3>
<h3 id="local-19"><a class="header" href="#local-19">local</a></h3>
<div style="break-before: page; page-break-before: always;"></div><h1 id="泛型编程"><a class="header" href="#泛型编程">泛型编程</a></h1>
<!--ts-->
<ul>
<li><a href="layer2_design_abstract/4_programming_paradigm/gp.html#%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B">泛型编程</a>
<ul>
<li><a href="layer2_design_abstract/4_programming_paradigm/gp.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a>
<ul>
<li><a href="layer2_design_abstract/4_programming_paradigm/gp.html#online-book">online-book</a></li>
<li><a href="layer2_design_abstract/4_programming_paradigm/gp.html#fragment">fragment</a></li>
<li><a href="layer2_design_abstract/4_programming_paradigm/gp.html#local">local</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:29 UTC 2022 -->
<!--te-->
<h2 id="参考资源-18"><a class="header" href="#参考资源-18">参考资源</a></h2>
<h3 id="online-book-20"><a class="header" href="#online-book-20">online-book</a></h3>
<h3 id="fragment-20"><a class="header" href="#fragment-20">fragment</a></h3>
<h3 id="local-20"><a class="header" href="#local-20">local</a></h3>
<div style="break-before: page; page-break-before: always;"></div><h1 id="设计模式"><a class="header" href="#设计模式">设计模式</a></h1>
<!--ts-->
<ul>
<li><a href="layer2_design_abstract/5_design_pattern/5_design_pattern.html#%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F">设计模式</a>
<ul>
<li><a href="layer2_design_abstract/5_design_pattern/5_design_pattern.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a>
<ul>
<li><a href="layer2_design_abstract/5_design_pattern/5_design_pattern.html#online-book">online-book</a></li>
<li><a href="layer2_design_abstract/5_design_pattern/5_design_pattern.html#fragment">fragment</a></li>
<li><a href="layer2_design_abstract/5_design_pattern/5_design_pattern.html#local">local</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:30 UTC 2022 -->
<!--te-->
<h2 id="参考资源-19"><a class="header" href="#参考资源-19">参考资源</a></h2>
<h3 id="online-book-21"><a class="header" href="#online-book-21">online-book</a></h3>
<h3 id="fragment-21"><a class="header" href="#fragment-21">fragment</a></h3>
<h3 id="local-21"><a class="header" href="#local-21">local</a></h3>
<div style="break-before: page; page-break-before: always;"></div><h1 id="项目模块管理及扩展"><a class="header" href="#项目模块管理及扩展">项目模块管理及扩展</a></h1>
<!--ts-->
<ul>
<li><a href="layer2_design_abstract/6_module_manage/6_module_manage.html#%E9%A1%B9%E7%9B%AE%E6%A8%A1%E5%9D%97%E7%AE%A1%E7%90%86%E5%8F%8A%E6%89%A9%E5%B1%95">项目模块管理及扩展</a>
<ul>
<li><a href="layer2_design_abstract/6_module_manage/6_module_manage.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a>
<ul>
<li><a href="layer2_design_abstract/6_module_manage/6_module_manage.html#online-book">online-book</a></li>
<li><a href="layer2_design_abstract/6_module_manage/6_module_manage.html#fragment">fragment</a></li>
<li><a href="layer2_design_abstract/6_module_manage/6_module_manage.html#local">local</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:30 UTC 2022 -->
<!--te-->
<p>对于一门编程语言，是否能够成为工程化开发工具的主要标准在于两点：</p>
<ol>
<li>包管理、模块管理</li>
<li>扩展工具是否方便加入</li>
</ol>
<p>这里面包含一些通用的设计抽象，因此专门作为单独的一层。</p>
<h2 id="参考资源-20"><a class="header" href="#参考资源-20">参考资源</a></h2>
<h3 id="online-book-22"><a class="header" href="#online-book-22">online-book</a></h3>
<h3 id="fragment-22"><a class="header" href="#fragment-22">fragment</a></h3>
<h3 id="local-22"><a class="header" href="#local-22">local</a></h3>
<div style="break-before: page; page-break-before: always;"></div><h1 id="模块系统相关workspacepackagecratemodule"><a class="header" href="#模块系统相关workspacepackagecratemodule">模块系统相关：Workspace、Package、Crate、Module</a></h1>
<!--ts-->
<ul>
<li><a href="layer2_design_abstract/6_module_manage/module_system.html#%E6%A8%A1%E5%9D%97%E7%B3%BB%E7%BB%9F%E7%9B%B8%E5%85%B3workspacepackagecratemodule">模块系统相关：Workspace、Package、Crate、Module</a>
<ul>
<li><a href="layer2_design_abstract/6_module_manage/module_system.html#%E5%8E%98%E6%B8%85workspacepackagecrate%E5%92%8Cmodule%E7%9A%84%E5%85%B3%E7%B3%BB">厘清Workspace、Package、crate和module的关系</a>
<ul>
<li><a href="layer2_design_abstract/6_module_manage/module_system.html#package-%E5%8C%85%E5%90%ABcargotoml">Package: 包含Cargo.toml</a></li>
<li><a href="layer2_design_abstract/6_module_manage/module_system.html#workspace%E4%B8%8Epackage">workspace与package</a></li>
<li><a href="layer2_design_abstract/6_module_manage/module_system.html#%E5%85%B7%E4%BD%93%E5%AF%B9%E6%AF%94package%E5%92%8Ccrate">具体对比package和crate</a>
<ul>
<li>[在Cargo.toml的[bin]/[lib]中指明](#在cargotoml的binlib中指明)</li>
</ul>
</li>
<li><a href="layer2_design_abstract/6_module_manage/module_system.html#%E5%86%8D%E6%9D%A5%E5%AF%B9%E6%AF%94workspacepackage%E5%92%8Ccrate">再来对比workspace、package和crate</a></li>
<li><a href="layer2_design_abstract/6_module_manage/module_system.html#module">module</a></li>
<li><a href="layer2_design_abstract/6_module_manage/module_system.html#%E6%95%B4%E7%90%86%E8%AF%B4%E4%B8%80%E4%B8%8Brust%E7%9A%84%E6%A8%A1%E5%9D%97%E7%B3%BB%E7%BB%9F">整理说一下rust的模块系统</a></li>
<li><a href="layer2_design_abstract/6_module_manage/module_system.html#%E8%81%94%E6%83%B3%E5%AF%B9%E6%AF%94">联想对比</a></li>
<li><a href="layer2_design_abstract/6_module_manage/module_system.html#module-tree">module tree</a></li>
</ul>
</li>
<li><a href="layer2_design_abstract/6_module_manage/module_system.html#%E6%A8%A1%E5%9D%97%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F">模块使用方式</a>
<ul>
<li><a href="layer2_design_abstract/6_module_manage/module_system.html#%E7%9B%AE%E5%BD%95%E6%A8%A1%E5%9D%97">目录模块</a></li>
<li><a href="layer2_design_abstract/6_module_manage/module_system.html#%E5%B5%8C%E5%A5%97%E5%AF%BC%E5%85%A5">嵌套导入</a></li>
<li><a href="layer2_design_abstract/6_module_manage/module_system.html#pubcrate%E5%AF%BC%E5%87%BA">pub/crate导出</a></li>
</ul>
</li>
<li><a href="layer2_design_abstract/6_module_manage/module_system.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a>
<ul>
<li><a href="layer2_design_abstract/6_module_manage/module_system.html#online-book">online-book</a></li>
<li><a href="layer2_design_abstract/6_module_manage/module_system.html#fragment">fragment</a></li>
<li><a href="layer2_design_abstract/6_module_manage/module_system.html#local">local</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:32 UTC 2022 -->
<!--te-->
<h2 id="厘清workspacepackagecrate和module的关系"><a class="header" href="#厘清workspacepackagecrate和module的关系">厘清Workspace、Package、crate和module的关系</a></h2>
<h3 id="package-包含cargotoml"><a class="header" href="#package-包含cargotoml">Package: 包含Cargo.toml</a></h3>
<p>package就是cargo new的产物，里面包含一个cargo.toml，包名就写在里面的package里。比如substrate的一个包代码：</p>
<blockquote>
<p><a href="https://github.com/paritytech/substrate/blob/master/client/allocator/Cargo.toml">substrate/Cargo.toml at master · paritytech/substrate</a></p>
</blockquote>
<pre><code class="language-toml">[package]
name = &quot;sc-allocator&quot;
version = &quot;4.1.0-dev&quot;
authors = [&quot;Parity Technologies &lt;admin@parity.io&gt;&quot;]
edition = &quot;2021&quot;
license = &quot;Apache-2.0&quot;
homepage = &quot;https://substrate.io&quot;
repository = &quot;https://github.com/paritytech/substrate/&quot;
description = &quot;Collection of allocator implementations.&quot;
documentation = &quot;https://docs.rs/sc-allocator&quot;
readme = &quot;README.md&quot;

[package.metadata.docs.rs]
targets = [&quot;x86_64-unknown-linux-gnu&quot;]

[dependencies]
log = &quot;0.4.17&quot;
thiserror = &quot;1.0.30&quot;
sp-core = { version = &quot;6.0.0&quot;, path = &quot;../../primitives/core&quot; }
sp-wasm-interface = { version = &quot;6.0.0&quot;, path = &quot;../../primitives/wasm-interface&quot; }
</code></pre>
<ol>
<li>package表明该package的基本信息</li>
<li>dependencies表示该package依赖的其他package</li>
</ol>
<h3 id="workspace与package"><a class="header" href="#workspace与package">workspace与package</a></h3>
<ul>
<li>workspace+members: 并发代表当前package包含的所有subpackage，只是指明一个工作区的所有package</li>
</ul>
<blockquote>
<p>A Cargo.toml file can simultaneously define a package and a workspace to which it belongs, but that package is still a
member of that workspace, not the other way around.</p>
</blockquote>
<h3 id="具体对比package和crate"><a class="header" href="#具体对比package和crate">具体对比package和crate</a></h3>
<div id="admonition-package和crate" class="admonition tip">
<div class="admonition-title">
<p>package和crate</p>
<p><a class="admonition-anchor-link" href="layer2_design_abstract/6_module_manage/module_system.html#admonition-package和crate"></a></p>
</div>
<div>
<p>在rust中，最小编译单元叫crate，package是一个或多个crate的集合。</p>
<blockquote>
<p>也就是说，如果package没有指明crate，本身就是一个crate</p>
</blockquote>
</div>
</div>
<h4 id="在cargotoml的binlib中指明"><a class="header" href="#在cargotoml的binlib中指明">在Cargo.toml的[bin]/[lib]中指明</a></h4>
<h3 id="再来对比workspacepackage和crate"><a class="header" href="#再来对比workspacepackage和crate">再来对比workspace、package和crate</a></h3>
<div id="admonition-hierarchy" class="admonition info">
<div class="admonition-title">
<p>hierarchy</p>
<p><a class="admonition-anchor-link" href="layer2_design_abstract/6_module_manage/module_system.html#admonition-hierarchy"></a></p>
</div>
<div>
<p>Workspace → Package → Crate</p>
</div>
</div>
<p>Generally, a package exposes only one crate. Most library crates don’t even have an associated binary crate(s) in their
package. It’s due to this that package/crate terminology is often used interchangeably; for lib crates it is in the 90%
case. Package is also a generic term that people not familiar with Rust’s ecosystem can understand, where crate is a
Rust-specific piece of jargon.</p>
<p>The two concepts are still meaningfully different – while conventionally package and lib crate have the same name (
modulo hyphens vs underscores), this is not required in any way – but for the most part there isn’t an appreciable
difference unless you’re paying attention to the weeds and edge cases.</p>
<h3 id="module"><a class="header" href="#module">module</a></h3>
<p>在rust中，module(模块)更多还是一种逻辑上的概念，主要使用mod关键字，下面会具体说说</p>
<div id="admonition-模块主要还是为了控制作用域scope和隐私privacy" class="admonition tip">
<div class="admonition-title">
<p>模块主要还是为了控制作用域(scope)和隐私(privacy)</p>
<p><a class="admonition-anchor-link" href="layer2_design_abstract/6_module_manage/module_system.html#admonition-模块主要还是为了控制作用域scope和隐私privacy"></a></p>
</div>
<div>
</div>
</div>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>mod say {
    pub fn hello() {
        println!(&quot;Hello, world!&quot;);
    }
}
<span class="boring">}
</span></code></pre></pre>
<h3 id="整理说一下rust的模块系统"><a class="header" href="#整理说一下rust的模块系统">整理说一下rust的模块系统</a></h3>
<figure><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1172.4426px" preserveAspectRatio="none" style="width:900px;height:1172px;background:#000000;" version="1.1" viewBox="0 0 900 1172" width="900.9395px" zoomAndPan="magnify"><defs/><g><rect fill="#333333" height="34.0994" rx="11.7432" ry="11.7432" style="stroke:#E7E7E7;stroke-width:1.4091858037578289;" width="101.4614" x="9.3946" y="568.5551"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13.1524" lengthAdjust="spacing" textLength="82.6722" x="18.7891" y="590.158">Rust模块系统</text><rect fill="#2E2E2E" height="34.0994" rx="11.7432" ry="11.7432" style="stroke:#E7E7E7;stroke-width:1.4091858037578289;" width="71.3987" x="157.8288" y="136.3974"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13.1524" lengthAdjust="spacing" textLength="52.6096" x="167.2234" y="158.0004">两种视角</text><rect fill="#0E0E0E" height="34.0994" rx="11.7432" ry="11.7432" style="stroke:#E7E7E7;stroke-width:1.4091858037578289;" width="58.2463" x="276.2004" y="18.7891"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13.1524" lengthAdjust="spacing" textLength="39.4572" x="285.595" y="40.3921">程序猿</text><rect fill="#0E0E0E" height="34.0994" rx="11.7432" ry="11.7432" style="stroke:#E7E7E7;stroke-width:1.4091858037578289;" width="71.3987" x="381.4196" y="18.7891"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13.1524" lengthAdjust="spacing" textLength="52.6096" x="390.8142" y="40.3921">文件结构</text><path d="M334.4468,35.8388 L343.8413,35.8388 C357.9332,35.8388 357.9332,35.8388 372.0251,35.8388 L381.4196,35.8388 " fill="none" style="stroke:#E7E7E7;stroke-width:0.9394572025052192;"/><path d="M229.2276,153.4471 L238.6221,153.4471 C252.714,153.4471 252.714,35.8388 266.8058,35.8388 L276.2004,35.8388 " fill="none" style="stroke:#E7E7E7;stroke-width:0.9394572025052192;"/><rect fill="#0E0E0E" height="34.0994" rx="11.7432" ry="11.7432" style="stroke:#E7E7E7;stroke-width:1.4091858037578289;" width="143.737" x="276.2004" y="162.8417"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13.1524" lengthAdjust="spacing" textLength="124.9478" x="285.595" y="184.4446">rustc：module tree</text><rect fill="#0E0E0E" height="64.7198" rx="11.7432" ry="11.7432" style="stroke:#E7E7E7;stroke-width:1.4091858037578289;" width="407.7244" x="466.9102" y="71.6776"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13.1524" lengthAdjust="spacing" textLength="65.762" x="476.3048" y="93.2806">可执行root</text><text fill="#FFFFFF" font-family="monospace" font-size="13.1524" lengthAdjust="spacing" textLength="82.6722" x="476.3048" y="108.5908">src/main.rs</text><text fill="#FFFFFF" font-family="monospace" font-size="13.1524" lengthAdjust="spacing" textLength="388.9353" x="476.3048" y="123.901">-&gt; binary crate(默认与cargo.toml-&gt;[package].name同名)</text><path d="M419.9374,179.8914 L429.3319,179.8914 C443.4238,179.8914 443.4238,104.0375 457.5157,104.0375 L466.9102,104.0375 " fill="none" style="stroke:#E7E7E7;stroke-width:0.9394572025052192;"/><rect fill="#0E0E0E" height="64.7198" rx="11.7432" ry="11.7432" style="stroke:#E7E7E7;stroke-width:1.4091858037578289;" width="385.1775" x="466.9102" y="155.1866"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13.1524" lengthAdjust="spacing" textLength="39.4572" x="476.3048" y="176.7895">库root</text><text fill="#FFFFFF" font-family="monospace" font-size="13.1524" lengthAdjust="spacing" textLength="75.1566" x="476.3048" y="192.0997">src/lib.rs</text><text fill="#FFFFFF" font-family="monospace" font-size="13.1524" lengthAdjust="spacing" textLength="366.3883" x="476.3048" y="207.4099">-&gt; lib crate(默认与cargo.toml-&gt;[package].name同名)</text><path d="M419.9374,179.8914 L429.3319,179.8914 C443.4238,179.8914 443.4238,187.5465 457.5157,187.5465 L466.9102,187.5465 " fill="none" style="stroke:#E7E7E7;stroke-width:0.9394572025052192;"/><rect fill="#0E0E0E" height="49.4096" rx="11.7432" ry="11.7432" style="stroke:#E7E7E7;stroke-width:1.4091858037578289;" width="252.714" x="466.9102" y="238.6955"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13.1524" lengthAdjust="spacing" textLength="32.881" x="476.3048" y="260.2985">crate</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13.1524" lengthAdjust="spacing" textLength="233.9248" x="476.3048" y="275.6087">&lt;code&gt;编译的最小基本单位&lt;/code&gt;</text><path d="M419.9374,179.8914 L429.3319,179.8914 C443.4238,179.8914 443.4238,263.4003 457.5157,263.4003 L466.9102,263.4003 " fill="none" style="stroke:#E7E7E7;stroke-width:0.9394572025052192;"/><path d="M229.2276,153.4471 L238.6221,153.4471 C252.714,153.4471 252.714,179.8914 266.8058,179.8914 L276.2004,179.8914 " fill="none" style="stroke:#E7E7E7;stroke-width:0.9394572025052192;"/><path d="M110.8559,585.6048 L120.2505,585.6048 C134.3424,585.6048 134.3424,153.4471 148.4342,153.4471 L157.8288,153.4471 " fill="none" style="stroke:#E7E7E7;stroke-width:0.9394572025052192;"/><rect fill="#2E2E2E" height="34.0994" rx="11.7432" ry="11.7432" style="stroke:#E7E7E7;stroke-width:1.4091858037578289;" width="129.6451" x="157.8288" y="412.6713"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13.1524" lengthAdjust="spacing" textLength="110.8559" x="167.2234" y="434.2742">project的五个层级</text><rect fill="#0E0E0E" height="34.0994" rx="11.7432" ry="11.7432" style="stroke:#E7E7E7;stroke-width:1.4091858037578289;" width="89.2484" x="334.4468" y="306.8942"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13.1524" lengthAdjust="spacing" textLength="70.4593" x="343.8413" y="328.4972">workspace</text><path d="M287.4739,429.7209 L296.8685,429.7209 C310.9603,429.7209 310.9603,323.9439 325.0522,323.9439 L334.4468,323.9439 " fill="none" style="stroke:#E7E7E7;stroke-width:0.9394572025052192;"/><rect fill="#0E0E0E" height="34.0994" rx="11.7432" ry="11.7432" style="stroke:#E7E7E7;stroke-width:1.4091858037578289;" width="74.2171" x="334.4468" y="359.7828"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13.1524" lengthAdjust="spacing" textLength="55.428" x="343.8413" y="381.3857">package</text><path d="M287.4739,429.7209 L296.8685,429.7209 C310.9603,429.7209 310.9603,376.8324 325.0522,376.8324 L334.4468,376.8324 " fill="none" style="stroke:#E7E7E7;stroke-width:0.9394572025052192;"/><rect fill="#0E0E0E" height="34.0994" rx="11.7432" ry="11.7432" style="stroke:#E7E7E7;stroke-width:1.4091858037578289;" width="59.1858" x="334.4468" y="412.6713"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13.1524" lengthAdjust="spacing" textLength="40.3967" x="343.8413" y="434.2742">crates</text><path d="M287.4739,429.7209 L296.8685,429.7209 C310.9603,429.7209 310.9603,429.7209 325.0522,429.7209 L334.4468,429.7209 " fill="none" style="stroke:#E7E7E7;stroke-width:0.9394572025052192;"/><rect fill="#0E0E0E" height="34.0994" rx="11.7432" ry="11.7432" style="stroke:#E7E7E7;stroke-width:1.4091858037578289;" width="75.1566" x="334.4468" y="465.5598"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13.1524" lengthAdjust="spacing" textLength="56.3674" x="343.8413" y="487.1627">modules</text><path d="M287.4739,429.7209 L296.8685,429.7209 C310.9603,429.7209 310.9603,482.6094 325.0522,482.6094 L334.4468,482.6094 " fill="none" style="stroke:#E7E7E7;stroke-width:0.9394572025052192;"/><rect fill="#0E0E0E" height="34.0994" rx="11.7432" ry="11.7432" style="stroke:#E7E7E7;stroke-width:1.4091858037578289;" width="55.428" x="334.4468" y="518.4483"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13.1524" lengthAdjust="spacing" textLength="36.6388" x="343.8413" y="540.0512">paths</text><path d="M287.4739,429.7209 L296.8685,429.7209 C310.9603,429.7209 310.9603,535.4979 325.0522,535.4979 L334.4468,535.4979 " fill="none" style="stroke:#E7E7E7;stroke-width:0.9394572025052192;"/><path d="M110.8559,585.6048 L120.2505,585.6048 C134.3424,585.6048 134.3424,429.7209 148.4342,429.7209 L157.8288,429.7209 " fill="none" style="stroke:#E7E7E7;stroke-width:0.9394572025052192;"/><rect fill="#2E2E2E" height="34.0994" rx="11.7432" ry="11.7432" style="stroke:#E7E7E7;stroke-width:1.4091858037578289;" width="224.5303" x="157.8288" y="571.3368"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13.1524" lengthAdjust="spacing" textLength="205.7411" x="167.2234" y="592.9397">bin文件夹：可以直接使用src/lib.rs</text><path d="M110.8559,585.6048 L120.2505,585.6048 C134.3424,585.6048 134.3424,588.3864 148.4342,588.3864 L157.8288,588.3864 " fill="none" style="stroke:#E7E7E7;stroke-width:0.9394572025052192;"/><rect fill="#383838" height="34.0994" rx="11.7432" ry="11.7432" style="stroke:#E7E7E7;stroke-width:1.4091858037578289;" width="153.1315" x="157.8288" y="871.2732"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13.1524" lengthAdjust="spacing" textLength="134.3424" x="167.2234" y="892.8761">crates.io保存的什么？</text><rect fill="#0E0E0E" height="34.0994" rx="11.7432" ry="11.7432" style="stroke:#E7E7E7;stroke-width:1.4091858037578289;" width="71.3987" x="357.9332" y="829.5187"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13.1524" lengthAdjust="spacing" textLength="52.6096" x="367.3278" y="851.1216">发布流程</text><rect fill="#0E0E0E" height="34.0994" rx="11.7432" ry="11.7432" style="stroke:#E7E7E7;stroke-width:1.4091858037578289;" width="90.1879" x="476.3048" y="624.2253"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13.1524" lengthAdjust="spacing" textLength="71.3987" x="485.6994" y="645.8282">cargo login</text><path d="M429.3319,846.5684 L438.7265,846.5684 C452.8184,846.5684 452.8184,641.275 466.9102,641.275 L476.3048,641.275 " fill="none" style="stroke:#E7E7E7;stroke-width:0.9394572025052192;"/><rect fill="#383838" height="233.1322" rx="11.7432" ry="11.7432" style="stroke:#E7E7E7;stroke-width:1.4091858037578289;" width="413.3612" x="476.3048" y="677.1138"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13.1524" lengthAdjust="spacing" textLength="95.8246" x="485.6994" y="698.7167">cargo package</text><text fill="#FFFFFF" font-family="monospace" font-size="13.1524" lengthAdjust="spacing" textLength="150.3132" x="485.6994" y="714.0269">$ cargo help package</text><text fill="#FFFFFF" font-family="monospace" font-size="13.1524" lengthAdjust="spacing" textLength="251.7745" x="485.6994" y="729.3371">从帮助信息结合substrate源码实验&#129514;可知：</text><text fill="#FFFFFF" font-family="monospace" font-size="13.1524" lengthAdjust="spacing" textLength="394.572" x="485.6994" y="744.6474">1. 从当前目录开始执行路径开始，首先去父文件夹找Cargo.toml,</text><text fill="#FFFFFF" font-family="monospace" font-size="13.1524" lengthAdjust="spacing" textLength="272.4426" x="485.6994" y="759.9576">然后找当前目录的Cargo.toml，找不到就报错</text><text fill="#FFFFFF" font-family="monospace" font-size="13.1524" lengthAdjust="spacing" textLength="283.7161" x="485.6994" y="775.2678">2. 找到的Cargo.toml如果有workspace配置，</text><text fill="#FFFFFF" font-family="monospace" font-size="13.1524" lengthAdjust="spacing" textLength="313.7787" x="485.6994" y="790.578">就按照workspace里面的subpackage顺序来依次打包</text><text fill="#FFFFFF" font-family="monospace" font-size="13.1524" lengthAdjust="spacing" textLength="319.4154" x="485.6994" y="805.8882">3. 每次打包的标志为src/main.rs或者src/lib.rs,</text><text fill="#FFFFFF" font-family="monospace" font-size="13.1524" lengthAdjust="spacing" textLength="353.2359" x="485.6994" y="821.1984">且src同级存在Cargo.toml,Cargo.toml里面有[package]</text><text fill="#FFFFFF" font-family="monospace" font-size="13.1524" lengthAdjust="spacing" textLength="227.3486" x="485.6994" y="836.5087">4. 开始打包为上传到crate.io的格式</text><text fill="#FFFFFF" font-family="monospace" font-size="13.1524" lengthAdjust="spacing" textLength="75.1566" x="485.6994" y="851.8189">5. 依次打包</text><text fill="#FFFFFF" font-family="monospace" font-size="13.1524" lengthAdjust="spacing" textLength="345.7203" x="485.6994" y="867.1291">6. 所有依赖必须是在crate.io可以找到的，找不到就报错</text><text fill="#FFFFFF" font-family="monospace" font-size="13.1524" lengthAdjust="spacing" textLength="281.8372" x="485.6994" y="882.4393">7. 以包含Cargo.toml父文件夹为项目根目录，</text><text fill="#FFFFFF" font-family="monospace" font-size="13.1524" lengthAdjust="spacing" textLength="157.8288" x="485.6994" y="897.7495">放在target/package里面</text><path d="M429.3319,846.5684 L438.7265,846.5684 C452.8184,846.5684 452.8184,793.6799 466.9102,793.6799 L476.3048,793.6799 " fill="none" style="stroke:#E7E7E7;stroke-width:0.9394572025052192;"/><rect fill="#0E0E0E" height="34.0994" rx="11.7432" ry="11.7432" style="stroke:#E7E7E7;stroke-width:1.4091858037578289;" width="106.1587" x="476.3048" y="929.0351"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13.1524" lengthAdjust="spacing" textLength="87.3695" x="485.6994" y="950.638">cargo publish</text><path d="M429.3319,846.5684 L438.7265,846.5684 C452.8184,846.5684 452.8184,946.0848 466.9102,946.0848 L476.3048,946.0848 " fill="none" style="stroke:#E7E7E7;stroke-width:0.9394572025052192;"/><rect fill="#0E0E0E" height="34.0994" rx="11.7432" ry="11.7432" style="stroke:#E7E7E7;stroke-width:1.4091858037578289;" width="89.2484" x="476.3048" y="981.9236"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13.1524" lengthAdjust="spacing" textLength="70.4593" x="485.6994" y="1003.5265">cargo yank</text><path d="M429.3319,846.5684 L438.7265,846.5684 C452.8184,846.5684 452.8184,998.9733 466.9102,998.9733 L476.3048,998.9733 " fill="none" style="stroke:#E7E7E7;stroke-width:0.9394572025052192;"/><rect fill="#0E0E0E" height="34.0994" rx="11.7432" ry="11.7432" style="stroke:#E7E7E7;stroke-width:1.4091858037578289;" width="99.5825" x="476.3048" y="1034.8121"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13.1524" lengthAdjust="spacing" textLength="80.7933" x="485.6994" y="1056.415">cargo owner</text><path d="M429.3319,846.5684 L438.7265,846.5684 C452.8184,846.5684 452.8184,1051.8618 466.9102,1051.8618 L476.3048,1051.8618 " fill="none" style="stroke:#E7E7E7;stroke-width:0.9394572025052192;"/><path d="M310.9603,888.3228 L320.3549,888.3228 C334.4468,888.3228 334.4468,846.5684 348.5386,846.5684 L357.9332,846.5684 " fill="none" style="stroke:#E7E7E7;stroke-width:0.9394572025052192;"/><rect fill="#383838" height="64.7198" rx="11.7432" ry="11.7432" style="stroke:#E7E7E7;stroke-width:1.4091858037578289;" width="505.428" x="357.9332" y="1087.7006"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13.1524" lengthAdjust="spacing" textLength="126.8267" x="367.3278" y="1109.3035">crate.io包含代码总结</text><text fill="#FFFFFF" font-family="monospace" font-size="13.1524" lengthAdjust="spacing" textLength="486.6388" x="367.3278" y="1124.6138">1. 只包含最小crate内容，也就是src/main.rs或者src/lib.rs + Cargo.toml</text><text fill="#FFFFFF" font-family="monospace" font-size="13.1524" lengthAdjust="spacing" textLength="366.3883" x="367.3278" y="1139.924">2. rust只能允许一级嵌套，使用workspace分出subpackage</text><path d="M310.9603,888.3228 L320.3549,888.3228 C334.4468,888.3228 334.4468,1120.0605 348.5386,1120.0605 L357.9332,1120.0605 " fill="none" style="stroke:#E7E7E7;stroke-width:0.9394572025052192;"/><path d="M110.8559,585.6048 L120.2505,585.6048 C134.3424,585.6048 134.3424,888.3228 148.4342,888.3228 L157.8288,888.3228 " fill="none" style="stroke:#E7E7E7;stroke-width:0.9394572025052192;"/></g></svg></figure>
<h3 id="联想对比"><a class="header" href="#联想对比">联想对比</a></h3>
<ol>
<li>golang的模块系统</li>
<li>python/js的模块系统</li>
<li>mdbook的所有文章只能挂到SUMMARY才能生成链接。</li>
</ol>
<h3 id="module-tree"><a class="header" href="#module-tree">module tree</a></h3>
<ul>
<li>module Tree只有一个入口（根），src/main.rs或src/lib.rs</li>
<li>默认情况下，lib.rs和main.rs的crate都和cargo.toml里面的[package].name同名</li>
<li>但是cargo.toml里面可以给crate重命名：[lib]重命名lib.rs, [binary]重命名main.rs</li>
</ul>
<h2 id="模块使用方式"><a class="header" href="#模块使用方式">模块使用方式</a></h2>
<figure><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="669px" preserveAspectRatio="none" style="width:719px;height:669px;background:#FFFFFF;" version="1.1" viewBox="0 0 719 669" width="719px" zoomAndPan="magnify"><defs/><g><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="104" x="10" y="315.5586"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="20" y="338.5537">模块使用方式</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="76" x="164" y="132.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="174" y="155.5889">存在形式</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="312" x="290" y="20"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="292" x="300" y="42.9951">嵌套模块: mod可以在一个文件中定义多个模块</text><path d="M240,150.7422 L250,150.7422 C265,150.7422 265,38.1484 280,38.1484 L290,38.1484 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="317" x="290" y="76.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="297" x="300" y="99.292">文件模块：不带mod的文件，以文件名为模块名</text><path d="M240,150.7422 L250,150.7422 C265,150.7422 265,94.4453 280,94.4453 L290,94.4453 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="76" x="290" y="188.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="300" y="211.8857">目录模块</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="146" x="416" y="132.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126" x="426" y="155.5889">目录同级有同名文件</text><path d="M366,207.0391 L376,207.0391 C391,207.0391 391,150.7422 406,150.7422 L416,150.7422 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="291" x="416" y="188.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="271" x="426" y="211.8857">同名文件中导入目录中的文件模块/嵌套模块</text><path d="M366,207.0391 L376,207.0391 C391,207.0391 391,207.0391 406,207.0391 L416,207.0391 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="160" x="416" y="245.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="426" y="268.1826">在同名文件中开始使用</text><path d="M366,207.0391 L376,207.0391 C391,207.0391 391,263.3359 406,263.3359 L416,263.3359 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M240,150.7422 L250,150.7422 C265,150.7422 265,207.0391 280,207.0391 L290,207.0391 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M114,333.707 L124,333.707 C139,333.707 139,150.7422 154,150.7422 L164,150.7422 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="146" x="164" y="385.9297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126" x="174" y="408.9248">隐私管理与导出导入</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="145" x="360" y="301.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="370" y="324.4795">pub: 导出-变为公有</text><path d="M310,404.0781 L320,404.0781 C335,404.0781 335,319.6328 350,319.6328 L360,319.6328 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="81" x="360" y="414.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="370" y="437.0732">导入方式:</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="186" x="491" y="357.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="166" x="501" y="380.7764">use: 导入-进入当前作用域</text><path d="M441,432.2266 L451,432.2266 C466,432.2266 466,375.9297 481,375.9297 L491,375.9297 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="142" x="491" y="414.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="501" y="437.0732">再次导入: pub use</text><path d="M441,432.2266 L451,432.2266 C466,432.2266 466,432.2266 481,432.2266 L491,432.2266 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="192" x="491" y="470.375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="172" x="501" y="493.3701">嵌套导入：使用{}作为嵌套</text><path d="M441,432.2266 L451,432.2266 C466,432.2266 466,488.5234 481,488.5234 L491,488.5234 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M310,404.0781 L320,404.0781 C335,404.0781 335,432.2266 350,432.2266 L360,432.2266 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M114,333.707 L124,333.707 C139,333.707 139,404.0781 154,404.0781 L164,404.0781 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="104" x="164" y="568.8945"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="174" y="591.8896">两类导入路径</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="120" x="318" y="526.6719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="328" y="549.667">crate: 绝对导入</text><path d="M268,587.043 L278,587.043 C293,587.043 293,544.8203 308,544.8203 L318,544.8203 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="141" x="318" y="582.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121" x="328" y="605.9639">相对导入: 提高内聚</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="151" x="509" y="554.8203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="131" x="519" y="577.8154">self: 与当前模块相关</text><path d="M459,601.1172 L469,601.1172 C484,601.1172 484,572.9688 499,572.9688 L509,572.9688 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="153" x="509" y="611.1172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133" x="519" y="634.1123">super: 从父模块导入</text><path d="M459,601.1172 L469,601.1172 C484,601.1172 484,629.2656 499,629.2656 L509,629.2656 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M268,587.043 L278,587.043 C293,587.043 293,601.1172 308,601.1172 L318,601.1172 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M114,333.707 L124,333.707 C139,333.707 139,587.043 154,587.043 L164,587.043 " fill="none" style="stroke:#181818;stroke-width:1.0;"/></g></svg></figure>
<div id="admonition-关于细节说明" class="admonition info">
<div class="admonition-title">
<p>关于细节说明</p>
<p><a class="admonition-anchor-link" href="layer2_design_abstract/6_module_manage/module_system.html#admonition-关于细节说明"></a></p>
</div>
<div>
<p>下方对应小标题会对思维导图中的重点内容进行详叙和代码展示</p>
</div>
</div>
<h3 id="目录模块"><a class="header" href="#目录模块">目录模块</a></h3>
<pre><code class="language-shell">tree -L 2                                                                                                      ─╯
.
├── foo
│   └── bar.rs
├── foo.rs
└── main.rs

1 directory, 3 files
</code></pre>
<ul>
<li>foo/bar.rs</li>
</ul>
<pre><pre class="playground"><code class="language-rust editable">
pub struct Bar; // 导出给foo.rs使用

impl Bar {
    pub fn hello() {
        println!(&quot;Hello from Bar !&quot;);
    }
}
</code></pre></pre>
<ul>
<li>foo.rs</li>
</ul>
<pre><pre class="playground"><code class="language-rust editable">
mod bar; // 使用同名目录foo下的文件模块foo/bar.rs

pub use self::bar::Bar; // 再次指定导入bar::Bar

pub fn do_foo() {
    println!(&quot;Hi from foo!&quot;);
}
</code></pre></pre>
<h3 id="嵌套导入"><a class="header" href="#嵌套导入">嵌套导入</a></h3>
<pre><pre class="playground"><code class="language-rust editable">// nested_imports.rs
// 使用{}嵌套导入
use std::sync::{Arc, Mutex, mpsc::{channel, Sender, Receiver}};

fn consume(_tx: Sender&lt;()&gt;, _rx: Receiver&lt;()&gt;) { } 

fn main() {
    let _ = Arc::new(Mutex::new(40));
    let (tx, rx) = channel();
    consume(tx, rx);
}
</code></pre></pre>
<h3 id="pubcrate导出"><a class="header" href="#pubcrate导出">pub/crate导出</a></h3>
<div id="admonition-pubcrate-fn-fn_name-" class="admonition info">
<div class="admonition-title">
<p>pub(crate) fn fn_name() {}</p>
<p><a class="admonition-anchor-link" href="layer2_design_abstract/6_module_manage/module_system.html#admonition-pubcrate-fn-fn_name-"></a></p>
</div>
<div>
<p>Rust 中元素的隐私性是从模块层面开始的。作为程序库的作者,要从模块向用户公开一些内容可以使用关键字 pub。</p>
<blockquote>
<p>但是对于有一些元素,我们只想暴露给软件包中的其他模块,而不是用户。</p>
</blockquote>
<p>在这种情况下,我们可以对元素使用 pub(crate)修饰符,这允许元素仅在软件包内部暴露</p>
</div>
</div>
<h2 id="参考资源-21"><a class="header" href="#参考资源-21">参考资源</a></h2>
<div id="admonition-不要把其他人的话直接照抄" class="admonition note">
<div class="admonition-title">
<p>不要把其他人的话直接照抄！</p>
<p><a class="admonition-anchor-link" href="layer2_design_abstract/6_module_manage/module_system.html#admonition-不要把其他人的话直接照抄"></a></p>
</div>
<div>
<p>保持批判，有所取舍，知行合一, 方见真我</p>
</div>
</div>
<h3 id="online-book-23"><a class="header" href="#online-book-23">online-book</a></h3>
<ul>
<li><a href="https://doc.rust-lang.org/stable/reference/visibility-and-privacy.html">Visibility and privacy - The Rust Reference</a></li>
<li><a href="https://doc.rust-lang.org/stable/reference/visibility-and-privacy.html#pubin-path-pubcrate-pubsuper-and-pubself">pub(in path), pub(crate), pub(super), and pub(self) - The Rust Reference</a></li>
<li><a href="https://doc.rust-lang.org/book/ch07-00-managing-growing-projects-with-packages-crates-and-modules.html">Managing Growing Projects with Packages, Crates, and Modules - The Rust Programming Language</a></li>
<li><a href="https://doc.rust-lang.org/stable/rust-by-example/mod.html">Modules - Rust By Example</a></li>
<li><a href="https://doc.rust-lang.org/stable/rust-by-example/crates.html">Crates - Rust By Example</a></li>
</ul>
<h3 id="fragment-23"><a class="header" href="#fragment-23">fragment</a></h3>
<ul>
<li>
<p><a href="https://web.archive.org/web/20220620093333/https://mp.weixin.qq.com/s/mQ0zh_tcLEZZNpGIbz6BVA">了解下Rust 模块使用方式</a></p>
</li>
<li>
<p><a href="https://www.reddit.com/r/rust/comments/lvtzri/confused_about_package_vs_crate_terminology/">Confused about Package vs. Crate terminology. : rust</a></p>
</li>
<li>
<p><a href="https://course.rs/basic/crate-module/intro.html">包和模块 - Rust语言圣经(Rust Course)</a></p>
<ul>
<li>项目(Packages)：一个 Cargo 提供的 feature，可以用来构建、测试和分享包</li>
<li>包(Crate)：一个由多个模块组成的树形结构，可以作为三方库进行分发，也可以生成可执行文件进行运行</li>
<li>模块(Module)：可以一个文件多个模块，也可以一个文件一个模块，模块可以被认为是真实项目中的代码组织单元</li>
</ul>
</li>
<li>
<p><a href="https://doc.rust-lang.org/cargo/reference/workspaces.html">Workspaces - The Cargo Book</a>
默认情况下，一个Cargo.toml只能指明一个package，但是在workspace里面就可以指明多个(此时可以理解为这个package包含多个subpackage)，比如substrate的根cargo：</p>
</li>
<li>
<p><a href="https://github.com/paritytech/substrate/blob/master/Cargo.toml">substrate/Cargo.toml at master · paritytech/substrate</a></p>
</li>
</ul>
<pre><code class="language-toml">[workspace]
resolver = &quot;2&quot;

members = [
    &quot;bin/node-template/node&quot;,
]
[profile.dev.package]
blake2 = { opt-level = 3 }
</code></pre>
<ul>
<li><a href="https://doc.rust-lang.org/cargo/reference/cargo-targets.html?highlight=bin#library">Cargo Targets - The Cargo Book</a></li>
</ul>
<div id="admonition-crate" class="admonition tip">
<div class="admonition-title">
<p>crate</p>
<p><a class="admonition-anchor-link" href="layer2_design_abstract/6_module_manage/module_system.html#admonition-crate"></a></p>
</div>
<div>
<p>A crate is the [lib] or [[bin]] tables in the Cargo.toml. 
At most one lib crate may be present, but an arbitrary number of bin crates may be present. </p>
<p>You won’t see these tables added explicitly too often, 
because they’re implicitly present if you have src/lib.rs (lib crate) and/or src/main.rs (bin crate).</p>
</div>
</div>
<pre><code class="language-toml"># Example of customizing the library in Cargo.toml.
[lib]
crate-type = [&quot;cdylib&quot;]
bench = false
</code></pre>
<pre><code class="language-toml"># Example of customizing binaries in Cargo.toml.
[[bin]]
name = &quot;cool-tool&quot;
test = false
bench = false

[[bin]]
name = &quot;frobnicator&quot;
required-features = [&quot;frobnicate&quot;]

</code></pre>
<ul>
<li><a href="https://doc.rust-lang.org/book/ch07-01-packages-and-crates.html">Packages and Crates - The Rust Programming Language</a></li>
</ul>
<div id="admonition-the-rust-programming-language相关整理" class="admonition quote">
<div class="admonition-title">
<p>《The Rust Programming Language》相关整理</p>
<p><a class="admonition-anchor-link" href="layer2_design_abstract/6_module_manage/module_system.html#admonition-the-rust-programming-language相关整理"></a></p>
</div>
<div>
<ol>
<li>一个包是一个或多个提供一组功能的 crates。一个package包含一个 Cargo.toml 文件，该文件描述了如何构建这些crate。</li>
<li>crate 可以是二进制 crate 或库 crate。</li>
</ol>
<ul>
<li>二进制 crate 是可以编译成可执行文件的程序，可以运行，例如命令行程序或服务器。</li>
</ul>
<blockquote>
<p>它们必须有一个名为 main 的函数，该函数定义了可执行文件运行时会发生什么。到目前为止，我们创建的所有 crate 都是二进制 crate。</p>
</blockquote>
<ol start="3">
<li>库 crates 没有 main 函数，它们不会编译为可执行文件。它们定义了旨在与多个项目共享的功能。</li>
</ol>
<blockquote>
<p>例如，我们在第 2 章中使用的 rand crate 提供了生成随机数的功能。</p>
</blockquote>
<ol start="4">
<li>下面是一些规则：</li>
</ol>
<ul>
<li>一个包最多可以包含一个库 crate。它可以包含任意数量的二进制 crate，但它必须至少包含一个 crate（库或二进制）。</li>
<li>当我们输入<strong>cargo new</strong>时，Cargo 创建了一个 Cargo.toml 文件，cargo将会给我们一个package。</li>
<li>查看 Cargo.toml 的内容，没有提到 src/main.rs，因为 Cargo 遵循一个约定，即 src/main.rs 是与包同名的二进制 crate 的 crate 根。</li>
<li>同样，Cargo 知道如果包目录包含 src/lib.rs，则该包包含一个与包同名的库 crate，并且 src/lib.rs 是它的 crate 根。 </li>
</ul>
<blockquote>
<p>Cargo 将 crate 根文件传递给 rustc 以构建库或二进制文件。</p>
</blockquote>
<ul>
<li>在这里，我们有一个只包含 src/main.rs 的包，这意味着它只包含一个名为 my-project 的二进制 crate。</li>
<li>如果一个包包含 src/main.rs 和 src/lib.rs，它有两个 crate：一个二进制文件和一个库，两者都与包同名。</li>
</ul>
<blockquote>
<p>通过将文件放在 src/bin 目录中，一个包可以有多个二进制 crate：每个文件都是一个单独的二进制crate</p>
</blockquote>
</div>
</div>
<ul>
<li>
<p><a href="https://web.archive.org/web/20220704161217/https://zhuanlan.zhihu.com/p/106251259">Rust的模块化系统: 包Packages, 箱Crates, 和模块Modules - 知乎</a>
包 Packages: Cargo提供的让我们创建, 测试和分享Crates的工具. 箱 Crates: 提供类库或可执行文件的模块树 模块 Modules and use: 管理和组织路径, 及其作用域和访问权限 路径 Paths:
如结构体(structs), 函数(function), 或模块(module)等事物的命名方式</p>
</li>
<li>
<p><a href="https://web.archive.org/web/20220704161255/https://zhuanlan.zhihu.com/p/365735504">三言两语理解Rust module System - 知乎</a></p>
</li>
</ul>
<p>Module System</p>
<p>一个问题几乎总会由许多小问题组成。module system是为了定义清楚各个小问题的边界。这样更容易和更方便的管理问题。而大问题的解法，就是把小问题的解法组合起来。</p>
<p>project，package， crate， module这些概念感觉相似。实际上，一个package/project可以包含多个 binary crates和一个或者零个library
binary。一个crate可以包含多个module。可以认为package就是一个project，一个crate就是一个暴露给外界的逻辑单元，一个module就是一个小问题的解法。</p>
<p>当project里面有lib.rs说明这个project是一个library crate，这个library的名字是project的名字。main.rs/main2.rs都可以直接使用这个library
crate。我们可以认为bin文件夹里面是单独的crate，它们默认导入了这个library crate。</p>
<p>一个crate就是一个暴露给外界的逻辑单元，一个module就是一个小问题的解法</p>
<p>关于找不到模块： 这就是module tree的体现，<strong>be explicit</strong>。所有模块都需要添加到crate root(src/main.rs或者src/lib.rs)里面。也就是要显示地指明module
tree的结构。这也就是我们经常在main.rs/lib.rs里面看到许多mod xxx的原因。比如<a href="https://github.com/Celthi/rsnova/blob/master/src/lib.rs#L20">这里的代码</a></p>
<p>它们的存在就是为了将project里面的modules 加到这个crate里面。比如在main.rs 里面看到mod channel，就是将module channel加进crate的module tree来。</p>
<p>相关引用：
<a href="https://web.archive.org/web/20220419042941/https://manishearth.github.io/blog/2017/05/14/mentally-modelling-modules/">Mentally Modelling Modules - In Pursuit of Laziness</a></p>
<ul>
<li>
<p><a href="https://web.archive.org/web/20220614192155/https://www.sheshbabu.com/posts/rust-module-system/">Clear explanation of Rust’s module system</a>
作者通过举例，详细介绍了rust编译器与程序猿看到的不同项目结构。</p>
</li>
<li>
<p><a href="https://web.archive.org/web/20220704161820/https://zhuanlan.zhihu.com/p/360342782">Rust那些难理解的点(大量更新于6月16日） - 知乎</a></p>
</li>
<li>
<p><a href="https://web.archive.org/web/20220704162217/https://news.ycombinator.com/item?id=23894172">The confusion around Rust’s modules reminds me of the different ways that people… | Hacker News</a>
The confusion around Rust’s modules reminds me of the different ways that people learn how to use car indicators. Some
people learn that you push the stalk up to indicate your intent to turn left, or down to turn right. And then they
might eventually learn that in a European car, you push the stalk down to turn left, and up to turn right. And then of
course some of these people get confused when switching between different cars. Yes, I’ve seen plenty of people on the
road who indicate one direction and then turn another. It’s… kind of frightening .</p>
</li>
</ul>
<p>The other way of learning to use car indicators is much simpler: push the stalk in the direction that you would turn the
wheel. Of course this still leaves the possibility that some people will push the wrong stalk, and briefly activate
their windshield wipers . But it’s a much easier mistake to <em>notice</em>, and the consequences are minor.</p>
<p>Back to Rust’s modules. I keep seeing articles trying to offer a simple or clear explanation of how they work, that end
up unnecessarily complicated in a way that feels a lot like the “up/down” model of car indicators. The explanation that
makes the basics of Rust modules clear to me is this:</p>
<ul>
<li>
<p>Child modules must always be <em>declared</em> in the parent module, or they don’t exist.</p>
</li>
<li>
<p>The content of child modules may be <em>defined</em> either inline in the parent as <code>mod child { ... }</code>, or in a file with a
relative path of ‘./child.rs’ or ‘./child/mod.rs’.</p>
</li>
</ul>
<p>Did I miss anything important?</p>
<p>Without this basic explanation up-front, I have no idea what to do with the stream of information I’m reading in a
lengthy article on the topic – I’ve been given no scaffolding onto which to bolt all the details and examples. So this
is the “bottom line” that I would like to see “up front” in descriptions of Rust’s modules.</p>
<p>Other misunderstandings, e.g., around item visibility, are explained really well by the compiler if you get them mixed
up, so I’m not sure how much value there is in mixing them in to articles about how modules are <em>structured</em> before
those two basic facts are presented.</p>
<ul>
<li><a href="https://web.archive.org/web/20220705022801/https://stackoverflow.com/questions/63515853/how-to-better-understand-crate-in-rust">How to better understand Crate in Rust? - Stack Overflow</a></li>
</ul>
<blockquote>
<p>The processing of that source file may result in other source files being loaded as modules.
It is not that one source file makes up a crate: it’s that starting from that one source file, you can find all the
files making up the crate, as opposed to other compilation models where the compiler might be given many file names to
start from.</p>
</blockquote>
<p>其实从代码完整性考虑，crate确实就是编译的最小基本单位。因为它不仅指一个源码文件(xx.rs)，而是包含这个源码文件里面引入的所有其他module。这个时候，rustc才会开始编译这个crate</p>
<ul>
<li><a href="https://web.archive.org/web/20220609151503/https://stackoverflow.com/questions/52024304/what-exactly-is-a-crate-in-the-cargo-ecosystem-and-what-is-the-mapping-to-what?rq=1">rust - What exactly is a ‘crate’ in the Cargo ecosystem and what is the mapping to what is on crates.io? - Stack Overflow</a></li>
</ul>
<blockquote>
<p>The exact things hosted on crates.io are crates inside packages. A crate is the output artifact of the compiler.
The compilation model centers on artifacts called crates. Each compilation processes a single crate in source form,
and if successful, produces a single crate in binary form: either an executable or some sort of library.
A package is an artifact managed by Cargo, the Rust package manager.</p>
</blockquote>
<h3 id="local-23"><a class="header" href="#local-23">local</a></h3>
<ul>
<li><a href="marginnote3app://note/CF61A2D3-C05C-49B2-943A-777D4A4A6434">&lt;精通Rust(第二版)&gt;-2.2模块</a></li>
<li><a href="marginnote3app://note/72AB7939-56B0-4797-8307-09E7F9905417">&lt;精通Rust(第二版)&gt;-7.9 模块、路径和导入</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="cargo与crate生命周期"><a class="header" href="#cargo与crate生命周期">Cargo与crate生命周期</a></h1>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/cargo_ship.jpeg" alt="cargo_ship" /></p>
<!--ts-->
<ul>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#cargo%E4%B8%8Ecrate%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F">Cargo与crate生命周期</a>
<ul>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#cargo--%E7%94%A8%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E7%90%86%E8%A7%A3cargo%E6%8C%87%E4%BB%A4%E7%B3%BB%E5%88%97">cargo : 用生命周期理解Cargo指令系列</a></li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#%E6%96%B0%E5%BB%BA">新建</a>
<ul>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#cargo-new">cargo new</a></li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#cargo-init">cargo init</a></li>
</ul>
</li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#%E5%BC%80%E5%8F%91">开发</a>
<ul>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#cargo-clean">cargo clean</a></li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#cargo-doc">cargo doc</a></li>
</ul>
</li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86">依赖管理</a>
<ul>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#cargo-check">cargo check</a></li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#cargo-fix">cargo fix</a></li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#cargo-fetch">cargo fetch</a></li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#cargo-searchinstalluninstall">cargo search/install/uninstall</a>
<ul>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#%E4%BB%8Ecratesio%E6%8B%89%E5%8F%96%E5%AE%89%E8%A3%85">从crates.io拉取安装</a></li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#%E4%BB%8E%E6%BA%90%E7%A0%81%E8%BF%9B%E8%A1%8C%E5%AE%89%E8%A3%85">从源码进行安装</a></li>
</ul>
</li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#cargo-report">cargo report</a></li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#cargo-generate-lockfile">cargo generate-lockfile</a></li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#cargo-locate-project">cargo locate-project</a></li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#cargo-metadata">cargo metadata</a></li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#cargo-pkgid">cargo pkgid</a></li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#cargo-tree">cargo tree</a></li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#cargo-update">cargo update</a></li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#cargo-vendor">cargo vendor</a></li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#cargo-verify-project">cargo verify-project</a></li>
</ul>
</li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#%E6%B5%8B%E8%AF%95">测试</a>
<ul>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#cargo-test">cargo test</a></li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#cargo-bench">cargo bench</a></li>
</ul>
</li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#%E8%BF%90%E8%A1%8C">运行</a>
<ul>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#cargo-run">cargo run</a></li>
</ul>
</li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#%E6%9E%84%E5%BB%BA">构建</a>
<ul>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#cargo-rustc">cargo rustc</a></li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#cargo-build">cargo build</a></li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#cargo-rustdoc">cargo rustdoc</a></li>
</ul>
</li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#%E5%8F%91%E5%B8%83">发布</a>
<ul>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#cargo-login">cargo login</a></li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#cargo-owner">cargo owner</a></li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#cargo-package">cargo package</a></li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#cargo-publish">cargo publish</a></li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#cargo-yank">cargo yank</a></li>
</ul>
</li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#%E7%BB%B4%E6%8A%A4">维护</a></li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#%E5%88%86%E5%8C%BA">分区</a></li>
</ul>
</li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#cargotoml%E7%BB%86%E8%AF%B4">Cargo.toml细说</a></li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#rust%E7%A8%8B%E5%BA%8F%E8%BF%90%E8%A1%8C%E6%96%B9%E5%BC%8F%E6%80%BB%E7%BB%93">Rust程序运行方式总结</a>
<ul>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#%E8%84%9A%E6%9C%AC">脚本</a></li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#%E9%A1%B9%E7%9B%AE">项目</a></li>
</ul>
</li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a>
<ul>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#online-book">online-book</a></li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#fragment">fragment</a></li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#local">local</a></li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:31 UTC 2022 -->
<!--te-->
<h2 id="cargo--用生命周期理解cargo指令系列"><a class="header" href="#cargo--用生命周期理解cargo指令系列">cargo <cmd>: 用生命周期理解Cargo指令系列</a></h2>
<h2 id="新建"><a class="header" href="#新建">新建</a></h2>
<h3 id="cargo-new"><a class="header" href="#cargo-new">cargo new</a></h3>
<h3 id="cargo-init"><a class="header" href="#cargo-init">cargo init</a></h3>
<h2 id="开发"><a class="header" href="#开发">开发</a></h2>
<h3 id="cargo-clean"><a class="header" href="#cargo-clean">cargo clean</a></h3>
<h3 id="cargo-doc"><a class="header" href="#cargo-doc">cargo doc</a></h3>
<h2 id="依赖管理"><a class="header" href="#依赖管理">依赖管理</a></h2>
<h3 id="cargo-check"><a class="header" href="#cargo-check">cargo check</a></h3>
<p>该命令用来快速检查当前代码是否可以通过编译，但是不去生成真正可执行的程序。这样可以加快我们的检查速度。</p>
<h3 id="cargo-fix"><a class="header" href="#cargo-fix">cargo fix</a></h3>
<h3 id="cargo-fetch"><a class="header" href="#cargo-fetch">cargo fetch</a></h3>
<h3 id="cargo-searchinstalluninstall"><a class="header" href="#cargo-searchinstalluninstall">cargo search/install/uninstall</a></h3>
<h4 id="从cratesio拉取安装"><a class="header" href="#从cratesio拉取安装">从crates.io拉取安装</a></h4>
<p>cargo install <crate></p>
<h4 id="从源码进行安装"><a class="header" href="#从源码进行安装">从源码进行安装</a></h4>
<p>cargo install &lt;Cargo.toml path&gt; –debug –locked</p>
<div id="admonition-具体应用" class="admonition tip">
<div class="admonition-title">
<p>具体应用</p>
<p><a class="admonition-anchor-link" href="layer2_design_abstract/6_module_manage/cargo_crate_lifetime.html#admonition-具体应用"></a></p>
</div>
<div>
<p>当crates.io上面的某个crate需要定制化的时候，就可以直接拉取源码之后本地修改安装</p>
</div>
</div>
<h3 id="cargo-report"><a class="header" href="#cargo-report">cargo report</a></h3>
<h3 id="cargo-generate-lockfile"><a class="header" href="#cargo-generate-lockfile">cargo generate-lockfile</a></h3>
<h3 id="cargo-locate-project"><a class="header" href="#cargo-locate-project">cargo locate-project</a></h3>
<h3 id="cargo-metadata"><a class="header" href="#cargo-metadata">cargo metadata</a></h3>
<h3 id="cargo-pkgid"><a class="header" href="#cargo-pkgid">cargo pkgid</a></h3>
<h3 id="cargo-tree"><a class="header" href="#cargo-tree">cargo tree</a></h3>
<h3 id="cargo-update"><a class="header" href="#cargo-update">cargo update</a></h3>
<h3 id="cargo-vendor"><a class="header" href="#cargo-vendor">cargo vendor</a></h3>
<h3 id="cargo-verify-project"><a class="header" href="#cargo-verify-project">cargo verify-project</a></h3>
<h2 id="测试"><a class="header" href="#测试">测试</a></h2>
<h3 id="cargo-test"><a class="header" href="#cargo-test">cargo test</a></h3>
<h3 id="cargo-bench"><a class="header" href="#cargo-bench">cargo bench</a></h3>
<h2 id="运行"><a class="header" href="#运行">运行</a></h2>
<h3 id="cargo-run"><a class="header" href="#cargo-run">cargo run</a></h3>
<h2 id="构建"><a class="header" href="#构建">构建</a></h2>
<h3 id="cargo-rustc"><a class="header" href="#cargo-rustc">cargo rustc</a></h3>
<h3 id="cargo-build"><a class="header" href="#cargo-build">cargo build</a></h3>
<pre><code class="language-shell">cargo build --release
</code></pre>
<blockquote>
<p>该命令将会在 target/release/目录下生成优化过的可执行程序。这样生成的可执行程序拥有更好的性能。</p>
</blockquote>
<h3 id="cargo-rustdoc"><a class="header" href="#cargo-rustdoc">cargo rustdoc</a></h3>
<h2 id="发布"><a class="header" href="#发布">发布</a></h2>
<h3 id="cargo-login"><a class="header" href="#cargo-login">cargo login</a></h3>
<h3 id="cargo-owner"><a class="header" href="#cargo-owner">cargo owner</a></h3>
<h3 id="cargo-package"><a class="header" href="#cargo-package">cargo package</a></h3>
<h3 id="cargo-publish"><a class="header" href="#cargo-publish">cargo publish</a></h3>
<h3 id="cargo-yank"><a class="header" href="#cargo-yank">cargo yank</a></h3>
<h2 id="维护"><a class="header" href="#维护">维护</a></h2>
<h2 id="分区"><a class="header" href="#分区">分区</a></h2>
<h1 id="cargotoml细说"><a class="header" href="#cargotoml细说">Cargo.toml细说</a></h1>
<h1 id="rust程序运行方式总结"><a class="header" href="#rust程序运行方式总结">Rust程序运行方式总结</a></h1>
<h2 id="脚本"><a class="header" href="#脚本">脚本</a></h2>
<h2 id="项目"><a class="header" href="#项目">项目</a></h2>
<h1 id="参考资源-22"><a class="header" href="#参考资源-22">参考资源</a></h1>
<h2 id="online-book-24"><a class="header" href="#online-book-24">online-book</a></h2>
<ul>
<li><a href="https://doc.rust-lang.org/cargo/commands/index.html">Cargo Commands - The Cargo Book</a></li>
<li><a href="https://doc.rust-lang.org/stable/rust-by-example/cargo.html">Cargo - Rust By Example</a></li>
</ul>
<h2 id="fragment-24"><a class="header" href="#fragment-24">fragment</a></h2>
<h2 id="local-24"><a class="header" href="#local-24">local</a></h2>
<ul>
<li><a href="marginnote3app://note/607C0511-4592-4F59-A8C0-AD8017A503FE">&lt;精通Rust(第二版)&gt;-2.3 Cargo和程序库</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="cargo与rustc"><a class="header" href="#cargo与rustc">cargo与rustc</a></h1>
<!--ts-->
<ul>
<li><a href="layer2_design_abstract/6_module_manage/cargo_rustc.html#cargo%E4%B8%8Erustc">cargo与rustc</a>
<ul>
<li><a href="layer2_design_abstract/6_module_manage/cargo_rustc.html#rustc">rustc</a>
<ul>
<li><a href="layer2_design_abstract/6_module_manage/cargo_rustc.html#rustc%E6%98%AF%E4%BB%80%E4%B9%88">rustc是什么</a></li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_rustc.html#%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8">基础使用</a></li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_rustc.html#rustc%E4%B8%8Ecargo%E7%9A%84%E5%85%B3%E7%B3%BB">rustc与cargo的关系</a></li>
</ul>
</li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_rustc.html#cargo-style">cargo style</a></li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_rustc.html#cargo-essential-structure">cargo essential structure</a></li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_rustc.html#cargo-%E6%89%A9%E5%B1%95">.cargo 扩展</a>
<ul>
<li><a href="layer2_design_abstract/6_module_manage/cargo_rustc.html#tree-overview">tree overview</a></li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_rustc.html#bin">bin</a></li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_rustc.html#env">env</a></li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_rustc.html#git">git</a></li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_rustc.html#registry">registry</a></li>
</ul>
</li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_rustc.html#cargo-%E4%B8%8E-git-%E7%9A%84%E5%85%B3%E8%81%94">Cargo 与 git 的关联！</a>
<ul>
<li><a href="layer2_design_abstract/6_module_manage/cargo_rustc.html#cargo-tree">cargo tree</a></li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_rustc.html#git-1">git</a></li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_rustc.html#%E5%85%B3%E4%BA%8E%E4%BE%9D%E8%B5%96%E5%86%B2%E7%AA%81%E9%97%AE%E9%A2%98">关于依赖冲突问题</a></li>
</ul>
</li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_rustc.html#cargo%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3">Cargo相关问题解决</a>
<ul>
<li><a href="layer2_design_abstract/6_module_manage/cargo_rustc.html#%E7%89%88%E6%9C%AC%E5%86%B2%E7%AA%81failed-to-select-a-version-for-the-requirement">版本冲突：failed to select a version for the requirement</a></li>
</ul>
</li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_rustc.html#cargo%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84">Cargo项目结构</a>
<ul>
<li><a href="layer2_design_abstract/6_module_manage/cargo_rustc.html#%E5%9F%BA%E7%A1%80%E8%AF%B4%E6%98%8E">基础说明</a></li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_rustc.html#cargotoml%E5%92%8Ccargolock">cargo.toml和cargo.lock</a></li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_rustc.html#%E6%9E%84%E5%BB%BA%E6%B8%85%E7%90%86%E6%9B%B4%E6%96%B0%E4%BB%A5%E5%8F%8A%E5%AE%89%E8%A3%85">构建、清理、更新以及安装</a></li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_rustc.html#mainrs-%E5%92%8C-librs">main.rs 和 lib.rs</a></li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_rustc.html#%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8substrate%E7%9A%84substrate-node-template">实际应用：Substrate的substrate-node-template</a>
<ul>
<li><a href="layer2_design_abstract/6_module_manage/cargo_rustc.html#%E5%8C%BA%E5%88%ABcargo-run%E4%B8%8Ecargo-build">区别cargo run与cargo build</a></li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_rustc.html#%E5%9C%A8node%E5%8C%85%E9%87%8C%E9%9D%A2%E5%AD%98%E5%9C%A8mainrs">在node包里面存在main.rs</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_rustc.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a>
<ul>
<li><a href="layer2_design_abstract/6_module_manage/cargo_rustc.html#online-book">online-book</a></li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_rustc.html#fragment">fragment</a></li>
<li><a href="layer2_design_abstract/6_module_manage/cargo_rustc.html#local">local</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:31 UTC 2022 -->
<!--te-->
<h2 id="rustc"><a class="header" href="#rustc">rustc</a></h2>
<h3 id="rustc是什么"><a class="header" href="#rustc是什么">rustc是什么</a></h3>
<p>全称应该是“rust complier“, 是 Rust 编程语言的编译器，由项目本身提供。编译器获取源代码并生成二进制代码，作为库或可执行文件。</p>
<h3 id="基础使用"><a class="header" href="#基础使用">基础使用</a></h3>
<pre><code class="language-shell">rustc target_file.rs
</code></pre>
<h3 id="rustc与cargo的关系"><a class="header" href="#rustc与cargo的关系">rustc与cargo的关系</a></h3>
<p>这其实就类似前端webpack.config和package.json的关系, cargo在运行时会默认调用rustc指令。</p>
<div id="admonition-查看cargo如何调用rustc" class="admonition tip">
<div class="admonition-title">
<p>查看cargo如何调用rustc</p>
<p><a class="admonition-anchor-link" href="layer2_design_abstract/6_module_manage/cargo_rustc.html#admonition-查看cargo如何调用rustc"></a></p>
</div>
<div>
<pre><code class="language-shell">$ cargo build --verbose
</code></pre>
<blockquote>
<p>verbose：就是详细信息的意思，运行后将会打印出每次调用rustc的过程。</p>
</blockquote>
</div>
</div>
<h2 id="cargo-style"><a class="header" href="#cargo-style">cargo style</a></h2>
<p>cargo可以看作是基于rustc的“管理框架“，主要还是对于项目用到的包的管理。</p>
<div id="admonition-查看cargo" class="admonition tip">
<div class="admonition-title">
<p>查看cargo</p>
<p><a class="admonition-anchor-link" href="layer2_design_abstract/6_module_manage/cargo_rustc.html#admonition-查看cargo"></a></p>
</div>
<div>
<p><a href="layer2_design_abstract/6_module_manage//layer2_design_abstract/6_module_manage/cargo_crate_lifetime">这里</a>可以看到具体有哪些功能</p>
</div>
</div>
<h2 id="cargo-essential-structure"><a class="header" href="#cargo-essential-structure">cargo essential structure</a></h2>
<p>但是对于大多数场景下，一般采用如下的项目结构</p>
<div id="admonition-rust-package-structure" class="admonition tip">
<div class="admonition-title">
<p>rust package structure</p>
<p><a class="admonition-anchor-link" href="layer2_design_abstract/6_module_manage/cargo_rustc.html#admonition-rust-package-structure"></a></p>
</div>
<div>
<pre><code class="language-shell">$ tree use-benchmarking -L 2                                                                                                                                                                                                             ─╯
use-benchmarking
├── Cargo.toml
├── README.md
└── src
    ├── benchmarking.rs
    ├── lib.rs
    ├── mock.rs
    ├── tests.rs
    └── weights.rs

1 directory, 7 files
</code></pre>
</div>
</div>
<h2 id="cargo-扩展"><a class="header" href="#cargo-扩展">.cargo 扩展</a></h2>
<p>除了cargo, 它的全局相关配置文件都会放在$HOME/.cargo目录下，这里值得看看</p>
<h3 id="tree-overview"><a class="header" href="#tree-overview">tree overview</a></h3>
<pre><code class="language-shell">tree -L 1 $HOME/.cargo                                                                                                                                                                                                                 ─╯
├── bin # 安装的二进制相关可执行文件
├── env # rustup的环境变量设置脚本
├── git
└── registry
</code></pre>
<h3 id="bin"><a class="header" href="#bin">bin</a></h3>
<pre><code class="language-shell">tree -L 1 $HOME/.cargo/bin                                                                                                                                                                                                             ─╯
├── cargo -&gt; /usr/local/bin/rustup-init
├── cargo-clippy -&gt; /usr/local/bin/rustup-init
├── cargo-fmt -&gt; /usr/local/bin/rustup-init
├── cargo-miri -&gt; /usr/local/bin/rustup-init
├── clippy-driver -&gt; /usr/local/bin/rustup-init
├── mdbook
├── mdbook-admonish
├── mdbook-checklist
├── mdbook-mermaid
├── mdbook-pdf
├── mdbook-rss
├── mdbook-template
├── rls -&gt; /usr/local/bin/rustup-init
├── rust-gdb -&gt; /usr/local/bin/rustup-init
├── rust-lldb -&gt; /usr/local/bin/rustup-init
├── rustc -&gt; /usr/local/bin/rustup-init
├── rustdoc -&gt; /usr/local/bin/rustup-init
├── rustfmt -&gt; /usr/local/bin/rustup-init
└── rustup -&gt; /usr/local/bin/rustup-init

0 directories, 19 files
</code></pre>
<h3 id="env"><a class="header" href="#env">env</a></h3>
<pre><code class="language-shell">#!/bin/sh
# rustup shell setup
# affix colons on either side of $PATH to simplify matching
case &quot;:${PATH}:&quot; in
    *:&quot;$HOME/.cargo/bin&quot;:*)
        ;;
    *)
        # Prepending path in case a system-installed rustc needs to be overridden
        export PATH=&quot;$HOME/.cargo/bin:$PATH&quot;
        ;;
esac
</code></pre>
<h3 id="git"><a class="header" href="#git">git</a></h3>
<pre><code class="language-shell">tree -L 3 $HOME/.cargo/git                                                                                                                                                                                                             ─╯
/Users/kuanhsiaokuo/.cargo/git
├── checkouts
│   ├── substrate-7e08433d4c370a21
│   │   ├── 174735e
│   │   ├── 257cdb5
│   │   ├── 279593d
│   │   ├── 3348e14
│   │   ├── 346471d
│   │   ├── 4d28ebe
│   │   ├── 7ba4e4c
│   │   ├── 7eb671f
│   │   ├── 814752f
│   │   ├── 852bab0
│   │   ├── b6c1c1b
│   │   └── bf9683e
│   └── unveil-rs-403565214a7cc66c
│       └── 3d8e9ad
└── db
    ├── substrate-7e08433d4c370a21
    │   ├── FETCH_HEAD
    │   ├── HEAD
    │   ├── config
    │   ├── description
    │   ├── hooks
    │   ├── info
    │   ├── objects
    │   └── refs
    └── unveil-rs-403565214a7cc66c
        ├── FETCH_HEAD
        ├── HEAD
        ├── config
        ├── description
        ├── hooks
        ├── info
        ├── objects
        └── refs

27 directories, 8 files
</code></pre>
<h3 id="registry"><a class="header" href="#registry">registry</a></h3>
<pre><code class="language-shell">tree -L 2 $HOME/.cargo/registry                                                                                                                                                                                                        ─╯
/Users/kuanhsiaokuo/.cargo/registry
├── cache
│   └── github.com-1ecc6299db9ec823
├── index
│   └── github.com-1ecc6299db9ec823
└── src
    └── github.com-1ecc6299db9ec823

6 directories, 0 files
</code></pre>
<h2 id="cargo-与-git-的关联"><a class="header" href="#cargo-与-git-的关联">Cargo 与 git 的关联！</a></h2>
<h3 id="cargo-tree-1"><a class="header" href="#cargo-tree-1">cargo tree</a></h3>
<ol>
<li>Cargo.toml是分等级的，最外层的Cargo.toml里面可以只用一个members，然后里面列出内部包含的其他packages</li>
</ol>
<div id="admonition-substrate-node-template为例" class="admonition info">
<div class="admonition-title">
<p>substrate-node-template为例</p>
<p><a class="admonition-anchor-link" href="layer2_design_abstract/6_module_manage/cargo_rustc.html#admonition-substrate-node-template为例"></a></p>
</div>
<div>
<blockquote>
<p>最外层的Cargo.toml</p>
</blockquote>
<pre><code class="language-toml">[workspace]
members = [
    &quot;node&quot;,
    &quot;pallets/template&quot;,
    &quot;runtime&quot;,
]
[profile.release]
panic = &quot;unwind&quot;
</code></pre>
</div>
</div>
<ol start="2">
<li>然后内部的其他packages就需要列出用到的[dependencies]</li>
<li>dependencies的完整使用参数如下：</li>
</ol>
<div id="admonition-dependencies写法一" class="admonition info">
<div class="admonition-title">
<p>dependencies写法一</p>
<p><a class="admonition-anchor-link" href="layer2_design_abstract/6_module_manage/cargo_rustc.html#admonition-dependencies写法一"></a></p>
</div>
<div>
<pre><code class="language-toml">[dependencies]
pallet-aura = { version = &quot;4.0.0-dev&quot;, default-features = false, git = &quot;https://github.com/paritytech/substrate.git&quot;, branch = &quot;polkadot-v0.9.24&quot; }
</code></pre>
</div>
</div>
<div id="admonition-dependencies写法二" class="admonition info">
<div class="admonition-title">
<p>dependencies写法二</p>
<p><a class="admonition-anchor-link" href="layer2_design_abstract/6_module_manage/cargo_rustc.html#admonition-dependencies写法二"></a></p>
</div>
<div>
<pre><code class="language-toml">[dependencies.pallet-aura]
version = &quot;4.0.0-dev&quot;
default-features = false
git = &quot;https://github.com/paritytech/substrate.git&quot;
branch = &quot;polkadot-v0.9.24&quot;
</code></pre>
<blockquote>
<p>这里的branch也可以用tag(git tag)</p>
</blockquote>
</div>
</div>
<h3 id="git-1"><a class="header" href="#git-1">git</a></h3>
<blockquote>
<p>上面dependencie里面的git+branch/tag唯一确定了一份代码，cargo下载对应的git代码之后，会从最外层Cargo.toml顺着members一层层找到[package]如下所示的Cargo.toml来确定对应的依赖包</p>
</blockquote>
<div id="admonition-substrateframeauracargotoml" class="admonition tip">
<div class="admonition-title">
<p>substrate/frame/aura/Cargo.toml</p>
<p><a class="admonition-anchor-link" href="layer2_design_abstract/6_module_manage/cargo_rustc.html#admonition-substrateframeauracargotoml"></a></p>
</div>
<div>
<pre><code class="language-toml">[package]
name = &quot;pallet-aura&quot;
version = &quot;4.0.0-dev&quot;
authors = [&quot;Parity Technologies &lt;admin@parity.io&gt;&quot;]
edition = &quot;2021&quot;
license = &quot;Apache-2.0&quot;
homepage = &quot;https://substrate.io&quot;
repository = &quot;https://github.com/paritytech/substrate/&quot;
description = &quot;FRAME AURA consensus pallet&quot;
readme = &quot;README.md&quot;
</code></pre>
</div>
</div>
<h3 id="关于依赖冲突问题"><a class="header" href="#关于依赖冲突问题">关于依赖冲突问题</a></h3>
<p>目前Cargo无法解决依赖冲突问题，一般都会是因为dependencies里面的git+branch/tag对应的依赖更新导致。</p>
<div id="admonition-顺藤摸瓜一一排查" class="admonition tip">
<div class="admonition-title">
<p>顺藤摸瓜，一一排查</p>
<p><a class="admonition-anchor-link" href="layer2_design_abstract/6_module_manage/cargo_rustc.html#admonition-顺藤摸瓜一一排查"></a></p>
</div>
<div>
<p>这时需要根据冲突的包，切换分支/tag, 找到对应的branch/tag来更新</p>
</div>
</div>
<blockquote>
<p>应用场景: <a href="layer2_design_abstract/6_module_manage//layer5_ecosystem/7_business/blockchain/substrate/substrate_deep_try.html#%E6%B7%BB%E5%8A%A0%E4%BE%9D%E8%B5%96-cargotomldependincies">substrate添加pallet</a></p>
</blockquote>
<h2 id="cargo相关问题解决"><a class="header" href="#cargo相关问题解决">Cargo相关问题解决</a></h2>
<h3 id="版本冲突failed-to-select-a-version-for-the-requirement"><a class="header" href="#版本冲突failed-to-select-a-version-for-the-requirement">版本冲突：failed to select a version for the requirement</a></h3>
<ul>
<li>删除registry
<a href="https://web.archive.org/web/20220702104818/https://blog.illixion.com/2021/10/fix-failed-to-select-a-version-cargo/">How to fix “failed to select a version for the requirement” in Rust’s Cargo - Manual</a></li>
</ul>
<pre><code class="language-admonist info title='解决方案'">Apparently, Cargo can sometimes get into a state where its local registry cache will corrupt itself, and Cargo won’t be able to discover new versions of the dependencies. To resolve this, delete the ~/.cargo/registry folder and run the build command again.
</code></pre>
<ul>
<li>修改dependencies
<a href="https://web.archive.org/web/20220702110637/https://qiita.com/bc_yuuuuuki/items/6f566ddef60a201af1bc">cargo install 出现需求版本选择失败怎么办–Qiita</a></li>
</ul>
<h2 id="cargo项目结构"><a class="header" href="#cargo项目结构">Cargo项目结构</a></h2>
<h3 id="基础说明"><a class="header" href="#基础说明">基础说明</a></h3>
<p><img src="https://web.archive.org/web/20220621034241im_/https://pp88.org/rust.zui.jia.shi.jian.rust.zui.jia.shi.jian/cargo.xiang.mu.pei.zhi.ji.jie.gou/project-structure.png" alt="hello_world_project_sturcture" /></p>
<ul>
<li>cargo.toml和cargo.lock文件总是位于项目根目录下。</li>
<li>源代码位于src目录下。</li>
<li>默认的库入口文件是src/lib.rs。</li>
<li>默认的可执行程序入口文件是src/main.rs。</li>
<li>其他可选的可执行文件位于src/bin/*.rs(这里每一个rs文件均对应一个可执行文件)。</li>
<li>外部测试源代码文件位于tests目录下。</li>
<li>示例程序源代码文件位于examples。</li>
<li>基准测试源代码文件位于benches目录下。</li>
</ul>
<h3 id="cargotoml和cargolock"><a class="header" href="#cargotoml和cargolock">cargo.toml和cargo.lock</a></h3>
<p>cargo.toml和cargo.lock是cargo项目代码管理的核心两个文件，cargo工具的所有活动均基于这两个文件。</p>
<p>cargo.toml是cargo特有的项目数据描述文件，对于猿们而言，cargo.toml文件存储了项目的所有信息，它直接面向rust猿，猿们如果想让自己的rust项目能够按照期望的方式进行构建、测试和运行，那么，必须按照合理的方式构建’cargo.toml’。</p>
<p>而cargo.lock文件则不直接面向猿，猿们也不需要直接去修改这个文件。lock文件是cargo工具根据同一项目的toml文件生成的项目依赖详细清单文件，所以我们一般不用不管他，只需要对着cargo.toml文件撸就行了。</p>
<h3 id="构建清理更新以及安装"><a class="header" href="#构建清理更新以及安装">构建、清理、更新以及安装</a></h3>
<blockquote>
<p>领会了toml描述文件的写法，是一个重要的方面。另一个重要的方面，就是cargo工具本身为我们程序猿提供的各种好用的工具。如果大家感兴趣，自己在终端中输入’cargo –help’查看即可。</p>
</blockquote>
<ol>
<li>其中开发时最常用的命令就是’cargo build’，用于构建项目。</li>
<li>此外，’cargo clean’命令可以清理target文件夹中的所有内容；</li>
<li>’cargo update’根据toml描述文件重新检索并更新各种依赖项的信息，并写入lock文件，例如依赖项版本的更新变化等等；</li>
<li>’cargo install’可用于实际的生产部署。这些命令在实际的开发部署中均是非常有用的。</li>
</ol>
<h3 id="mainrs-和-librs"><a class="header" href="#mainrs-和-librs">main.rs 和 lib.rs</a></h3>
<div id="admonition-mainrs-vs-librs" class="admonition info">
<div class="admonition-title">
<p>main.rs vs lib.rs</p>
<p><a class="admonition-anchor-link" href="layer2_design_abstract/6_module_manage/cargo_rustc.html#admonition-mainrs-vs-librs"></a></p>
</div>
<div>
<pre><code class="language-text">┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓                                              
┃                                     _                                        ┃                                              
┃                          _ __  __ _(_)_ _    _ _ ___                         ┃                                              
┃                         | '  \/ _` | | ' \ _| '_(_-&lt;                         ┃                                              
┃                         |_|_|_\__,_|_|_||_(_)_| /__/                         ┃                                              
┃                                                                              ┃                                              
┃ _                 _ _                             _             _   _        ┃                                              
┃| |_  __ _ _ _  __| | |___ ___  _ _ _  _ _ _  _ _ (_)_ _  __ _  | |_| |_  ___ ┃                                              
┃| ' \/ _` | ' \/ _` | / -_|_-&lt; | '_| || | ' \| ' \| | ' \/ _` | |  _| ' \/ -_)┃                                              
┃|_||_\__,_|_||_\__,_|_\___/__/ |_|  \_,_|_||_|_||_|_|_||_\__, |  \__|_||_\___|┃                                              
┃                                                         |___/                ┃                                              
┃                                                                              ┃                                              
┃                       _ __ _ _ ___  __ _ _ _ __ _ _ __                       ┃                                              
┃                      | '_ \ '_/ _ \/ _` | '_/ _` | '  \                      ┃                                              
┃                      | .__/_| \___/\__, |_| \__,_|_|_|_|                     ┃                                              
┃                      |_|           |___/                                     ┃                                              
┃                                                                              ┃                                              
┃1. cargo new --bin                                                            ┃                                              
┃- Calling the command line parsing logic with the argument values             ┃                                              
┃- Setting up any other configuration                                          ┃                                              
┃- Calling a run function in lib.rs           ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┻━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃- Handling the error if run returns an error ┃All are rust basic entry:       ╳    _ _ _                                    ┃
┃                                             ┃1. main.rs is the running entry ╳   | (_) |__   _ _ ___                       ┃
┃                                             ┃2. lib.rs is the library entry  ╳   | | | '_ \_| '_(_-&lt;                       ┃
┃                                             ┃╳╳╳╳╳╳╳╳╳╳╳╳╳╳╳╳╳╳╳╳╳╳╳╳╳╳╳╳╳╳╳╳    |_|_|_.__(_)_| /__/                       ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┫                                                                              ┃
                                              ┃   _                 _ _               _ _   _   _          _           _     ┃
                                              ┃  | |_  __ _ _ _  __| | |___ ___  __ _| | | | |_| |_  ___  | |___  __ _(_)__  ┃
                                              ┃  | ' \/ _` | ' \/ _` | / -_|_-&lt; / _` | | | |  _| ' \/ -_) | / _ \/ _` | / _| ┃
                                              ┃  |_||_\__,_|_||_\__,_|_\___/__/ \__,_|_|_|  \__|_||_\___| |_\___/\__, |_\__| ┃
                                              ┃                                                                  |___/       ┃
                                              ┃        __   _   _          _           _          _     _                 _  ┃
                                              ┃   ___ / _| | |_| |_  ___  | |_ __ _ __| |__  __ _| |_  | |_  __ _ _ _  __| | ┃
                                              ┃  / _ \  _| |  _| ' \/ -_) |  _/ _` (_-&lt; / / / _` |  _| | ' \/ _` | ' \/ _` | ┃
                                              ┃  \___/_|    \__|_||_\___|  \__\__,_/__/_\_\ \__,_|\__| |_||_\__,_|_||_\__,_| ┃
                                              ┃                                                                              ┃
                                              ┃                                                                              ┃
                                              ┃                                                                              ┃
                                              ┃                                                                              ┃
                                              ┃                                                                              ┃
                                              ┃                                                                              ┃
                                              ┃                                                                              ┃
                                              ┃                                                                              ┃
                                              ┃                                                                              ┃
                                              ┃                                                                              ┃
                                              ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
</code></pre>
</div>
</div>
<ul>
<li>
<p><a href="https://web.archive.org/web/20220703121446/https://juejin.cn/post/6919738138135003150">Rust 模块系统 - 掘金</a></p>
<blockquote>
<p>包（package）创建规则：</p>
</blockquote>
<pre><code>- 一个包中至多只能包含一个库Crate。
- 包中可以包含任意多个二进制Crate。
- 包中至少包含一个 crate，无论是库的还是二进制的。
- 包中应该包含一个 Cargo.toml 配置文件，用来说明如何去构建这些 crate。
</code></pre>
<blockquote>
<p>示例一：cargo new –bin 创建一个包含 二进制Crate 的包
示例二：cargo new –lib 创建一个包含库(lib)crate的包
示例三：–lib和–bin不可以同时使用，这种情况下可以示例一的基础上自己创建一个lib.rs文件</p>
</blockquote>
<ul>
<li>一般情况下，我们将与程序运行相关的代码放在 main.rs 文件，其他真正的任务逻辑放在 lib.rs 文件中。</li>
</ul>
</li>
<li>
<p><a href="https://web.archive.org/web/20220703121604/https://stackoverflow.com/questions/57756927/rust-modules-confusion-when-there-is-main-rs-and-lib-rs">Rust modules confusion when there is main.rs and lib.rs - Stack Overflow</a></p>
</li>
</ul>
<blockquote>
<p>这里有人详细介绍了只有lib.rs/main.rs的情况下，执行cargo run的情况。没有main.rs的时候，cargo run会告诉你：error: a bin target must be available for <code>cargo run</code></p>
</blockquote>
<ul>
<li><a href="https://www.reddit.com/r/rust/comments/c41iph/mainrs_vs_librs/">main.rs vs lib.rs : rust</a></li>
</ul>
<blockquote>
<p>A common pattern, even for binary-only crates, is to declare a “library” providing the majority of functionality, and then have main.rs just implement argument parsing and use that library.
This allows for integration tests written against the library, which might otherwise be hard to do with only main.rs.</p>
</blockquote>
<ul>
<li>
<p><a href="https://web.archive.org/web/20220703121647/https://users.rust-lang.org/t/main-rs-and-lib-rs-at-same-level/42499">Main.rs and lib.rs at same level - help - The Rust Programming Language Forum</a></p>
<blockquote>
<p>这里有人跟着官方文档制作命令行工具时发现同样的疑惑点，底下有人引用了这个链接</p>
</blockquote>
<ul>
<li><a href="https://web.archive.org/web/20220424212816/https://doc.rust-lang.org/book/ch12-03-improving-error-handling-and-modularity.html#separation-of-concerns-for-binary-projects">Separation of Conerns for Binary Projects - The Rust Programming Language</a></li>
</ul>
</li>
</ul>
<div id="admonition-allocating-responsibilty-for-multiple-tasks" class="admonition quote">
<div class="admonition-title">
<p>Allocating Responsibilty for Multiple Tasks</p>
<p><a class="admonition-anchor-link" href="layer2_design_abstract/6_module_manage/cargo_rustc.html#admonition-allocating-responsibilty-for-multiple-tasks"></a></p>
</div>
<div>
<p>The organizational problem of allocating responsibility for multiple tasks to the main function is common to many binary projects. As a result, the Rust community has developed a process to use as a guideline for splitting the separate concerns of a binary program when main starts getting large. The process has the following steps:</p>
<ol>
<li>Split your program into a main.rs and a lib.rs and move your program’s logic to lib.rs.</li>
<li>As long as your command line parsing logic is small, it can remain in main.rs.</li>
<li>When the command line parsing logic starts getting complicated, extract it from main.rs and move it to lib.rs.</li>
</ol>
<blockquote>
<p>The responsibilities that remain in the main function after this process should be limited to the following:</p>
</blockquote>
<ul>
<li>Calling the command line parsing logic with the argument values</li>
<li>Setting up any other configuration</li>
<li>Calling a run function in lib.rs</li>
<li>Handling the error if run returns an error</li>
</ul>
<blockquote>
<p>This pattern is about separating concerns:</p>
</blockquote>
<ol>
<li>main.rs handles running the program</li>
<li>and lib.rs handles all the logic of the task at hand. </li>
</ol>
<blockquote>
<p>Because you can’t test the main function directly, this structure lets you test all of your program’s logic by moving it into functions in lib.rs. 
The only code that remains in main.rs will be small enough to verify its correctness by reading it. 
Let’s rework our program by following this process.</p>
</blockquote>
</div>
</div>
<div id="admonition-明确职责-用mvc类比" class="admonition tip">
<div class="admonition-title">
<p>明确职责, 用MVC类比</p>
<p><a class="admonition-anchor-link" href="layer2_design_abstract/6_module_manage/cargo_rustc.html#admonition-明确职责-用mvc类比"></a></p>
</div>
<div>
<blockquote>
<p>也就是说</p>
</blockquote>
<ol>
<li>main.rs只负责调用、配置和处理异常， 类似View</li>
<li>lib.rs主要负责具体的业务逻辑, 类似Control+Model</li>
</ol>
</div>
</div>
<div id="admonition-用crate来区分" class="admonition quote">
<div class="admonition-title">
<p>用crate来区分</p>
<p><a class="admonition-anchor-link" href="layer2_design_abstract/6_module_manage/cargo_rustc.html#admonition-用crate来区分"></a></p>
</div>
<div>
<p>Note that the main.rs does not declare any modules with mod, it only imports them with use (the distinction between the two is something a lot of new Rust programmers struggle with!).</p>
<p>The reason for this is that, in projects with both a lib.rs and a main.rs:</p>
<blockquote>
<p>Cargo effectively treats lib.rs as the root of your crate, and main.rs as a seperate binary that depends on your crate.</p>
</blockquote>
</div>
</div>
<div id="admonition-用binary和library来区分" class="admonition quote">
<div class="admonition-title">
<p>用binary和library来区分</p>
<p><a class="admonition-anchor-link" href="layer2_design_abstract/6_module_manage/cargo_rustc.html#admonition-用binary和library来区分"></a></p>
</div>
<div>
<p><strong>main.rs is always the root of your binary, and lib.rs is always the root of your library.</strong></p>
<blockquote>
<p>The important things to realize are:</p>
</blockquote>
<ul>
<li>These two roots are compiled seperately, and have their own entirely seperate module structure.</li>
<li>When you use the mod keyword, you are creating a module, not importing a module.</li>
<li>You almost never want to have multiple mod statements for a single file, as you’ll be duplicating the content.</li>
<li>If you want to use something from an existing module or from a library, that’s what the use keyword is for.</li>
</ul>
<blockquote>
<p>Let’s walk through your example:</p>
</blockquote>
<ol>
<li>In lib.rs, you use <strong>mod</strong> to declare that your library has two top level modules, cli and internal. There are corresponding files in the right place in your project, so Cargo knows how to link it all up. This part is fine, and what you intended to happen!</li>
<li>However, when you write mod lib in your main.rs, you’re not importing your library! You’re actually declaring that your binary has it’s own top level module, which just happens to be called lib. Cargo then sees that there is a file called lib.rs in the folder, and links that in, even though that’s not what you intended. It then sees that the lib.rs file has two mod statements and treats these as submodules of the binary’s lib module. The files aren’t in the right place for that to work, so compilation fails.</li>
<li>So the root cause of your issue is that you’ve effectively told the compiler to create your module structure twice, <strong>once in your library and once in your binary</strong>. </li>
<li>You really only meant to define these modules in your library, and then use them into your binary.</li>
</ol>
</div>
</div>
<h3 id="实际应用substrate的substrate-node-template"><a class="header" href="#实际应用substrate的substrate-node-template">实际应用：Substrate的substrate-node-template</a></h3>
<blockquote>
<p>根据官方文档知道，substrate是各种lib包，那么开发时如何运行呢？</p>
</blockquote>
<h4 id="区别cargo-run与cargo-build"><a class="header" href="#区别cargo-run与cargo-build">区别cargo run与cargo build</a></h4>
<ul>
<li><a href="https://kaisery.github.io/trpl-zh-cn/ch01-03-hello-cargo.html#%E6%9E%84%E5%BB%BA%E5%B9%B6%E8%BF%90%E8%A1%8C-cargo-%E9%A1%B9%E7%9B%AE">构建并运行Cargo - Rust 程序设计语言 简体中文版</a></li>
</ul>
<h4 id="在node包里面存在mainrs"><a class="header" href="#在node包里面存在mainrs">在node包里面存在main.rs</a></h4>
<ol>
<li>根Cargo.toml里面告诉cargo，这个项目总共有三个包</li>
</ol>
<div id="admonition-根cargotoml" class="admonition info">
<div class="admonition-title">
<p>根Cargo.toml</p>
<p><a class="admonition-anchor-link" href="layer2_design_abstract/6_module_manage/cargo_rustc.html#admonition-根cargotoml"></a></p>
</div>
<div>
<pre><code class="language-toml">[workspace]
members = [
    &quot;node&quot;,
    &quot;pallets/template&quot;,
    &quot;runtime&quot;,
]
[profile.release]
panic = &quot;unwind&quot;
</code></pre>
</div>
</div>
<ol start="2">
<li>然后cargo找到包含main.rs的node包作为入口</li>
</ol>
<div id="admonition-node-tree" class="admonition tip">
<div class="admonition-title">
<p>node tree</p>
<p><a class="admonition-anchor-link" href="layer2_design_abstract/6_module_manage/cargo_rustc.html#admonition-node-tree"></a></p>
</div>
<div>
<pre><code class="language-shell"> tree -L 2 node                                                                                                                                                                                                                         ─╯
node
├── Cargo.toml
├── build.rs
└── src
    ├── chain_spec.rs
    ├── cli.rs
    ├── command.rs
    ├── command_helper.rs
    ├── lib.rs
    ├── main.rs
    ├── rpc.rs
    └── service.rs

1 directory, 10 files
</code></pre>
</div>
</div>
<ol start="3">
<li>node/main.rs里面使用了文件名crate</li>
</ol>
<pre><pre class="playground"><code class="language-rust">//! Substrate Node Template CLI library.
#![warn(missing_docs)]

mod chain_spec;
#[macro_use]
// 对应service.rs
mod service;
// 对应cli.rs
mod cli;
// 对应command.rs
mod command;
// 对应command_helper.rs
mod command_helper;
// 对应rpc.rs
mod rpc;

fn main() -&gt; sc_cli::Result&lt;()&gt; {
    command::run()

</code></pre></pre>
<h2 id="参考资源-23"><a class="header" href="#参考资源-23">参考资源</a></h2>
<h3 id="online-book-25"><a class="header" href="#online-book-25">online-book</a></h3>
<ul>
<li><a href="https://doc.rust-lang.org/rustc/what-is-rustc.html">What is rustc? - The rustc book</a></li>
</ul>
<h3 id="fragment-25"><a class="header" href="#fragment-25">fragment</a></h3>
<ul>
<li><a href="https://skyao.io/learning-rust/docs/build/rustc.html">Rustc | Rust学习笔记</a></li>
<li><a href="https://web.archive.org/web/20220621034241/https://pp88.org/rust.zui.jia.shi.jian.rust.zui.jia.shi.jian/cargo.xiang.mu.pei.zhi.ji.jie.gou/">Cargo项目配置及结构 | 皮皮爸(pp8)</a></li>
</ul>
<h3 id="local-25"><a class="header" href="#local-25">local</a></h3>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rust扩展工具介绍"><a class="header" href="#rust扩展工具介绍">Rust扩展工具介绍</a></h1>
<!--ts-->
<ul>
<li><a href="layer2_design_abstract/6_module_manage/rust_plugins.html#rust%E6%89%A9%E5%B1%95%E5%B7%A5%E5%85%B7%E4%BB%8B%E7%BB%8D">Rust扩展工具介绍</a>
<ul>
<li><a href="layer2_design_abstract/6_module_manage/rust_plugins.html#cargo%E5%AD%90%E5%91%BD%E4%BB%A4%E7%B3%BB%E5%88%97-cargo-install-">Cargo子命令系列: cargo install </a>
<ul>
<li><a href="layer2_design_abstract/6_module_manage/rust_plugins.html#cargo-watch">cargo-watch</a></li>
<li><a href="layer2_design_abstract/6_module_manage/rust_plugins.html#cargo-edit">cargo-edit</a></li>
<li><a href="layer2_design_abstract/6_module_manage/rust_plugins.html#cargo-deb">cargo-deb</a></li>
<li><a href="layer2_design_abstract/6_module_manage/rust_plugins.html#cargo-outdated">cargo-outdated</a></li>
</ul>
</li>
<li><a href="layer2_design_abstract/6_module_manage/rust_plugins.html#rustup%E7%B3%BB%E5%88%97-rust-component-add-tool_name">rustup系列: rust component add &lt;tool_name&gt;</a>
<ul>
<li><a href="layer2_design_abstract/6_module_manage/rust_plugins.html#clippy">clippy</a></li>
<li><a href="layer2_design_abstract/6_module_manage/rust_plugins.html#rustc">rustc</a></li>
<li><a href="layer2_design_abstract/6_module_manage/rust_plugins.html#rustfmt">rustfmt</a></li>
</ul>
</li>
<li><a href="layer2_design_abstract/6_module_manage/rust_plugins.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a>
<ul>
<li><a href="layer2_design_abstract/6_module_manage/rust_plugins.html#online-book">online-book</a></li>
<li><a href="layer2_design_abstract/6_module_manage/rust_plugins.html#fragment">fragment</a></li>
<li><a href="layer2_design_abstract/6_module_manage/rust_plugins.html#local">local</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:32 UTC 2022 -->
<!--te-->
<h2 id="cargo子命令系列-cargo-install"><a class="header" href="#cargo子命令系列-cargo-install">Cargo子命令系列: cargo install <binary crate name></a></h2>
<h3 id="cargo-watch"><a class="header" href="#cargo-watch">cargo-watch</a></h3>
<h3 id="cargo-edit"><a class="header" href="#cargo-edit">cargo-edit</a></h3>
<h3 id="cargo-deb"><a class="header" href="#cargo-deb">cargo-deb</a></h3>
<h3 id="cargo-outdated"><a class="header" href="#cargo-outdated">cargo-outdated</a></h3>
<h2 id="rustup系列-rust-component-add-tool_name"><a class="header" href="#rustup系列-rust-component-add-tool_name">rustup系列: rust component add &lt;tool_name&gt;</a></h2>
<h3 id="clippy"><a class="header" href="#clippy">clippy</a></h3>
<h3 id="rustc-1"><a class="header" href="#rustc-1">rustc</a></h3>
<h3 id="rustfmt"><a class="header" href="#rustfmt">rustfmt</a></h3>
<h2 id="参考资源-24"><a class="header" href="#参考资源-24">参考资源</a></h2>
<h3 id="online-book-26"><a class="header" href="#online-book-26">online-book</a></h3>
<ul>
<li><a href="https://rust-lang.github.io/rustup/concepts/components.html">Components - The rustup book</a></li>
<li><a href="https://rust-lang.github.io/rustup/concepts/channels.html#nightly-availability">Channels - The rustup book</a></li>
</ul>
<h3 id="fragment-26"><a class="header" href="#fragment-26">fragment</a></h3>
<ul>
<li><a href="https://rust-lang.github.io/rustup-components-history/">Rustup packages availability on x86_64-unknown-linux-gnu</a></li>
</ul>
<h3 id="local-26"><a class="header" href="#local-26">local</a></h3>
<ul>
<li><a href="marginnote3app://note/5D418160-6AC9-4FEF-843F-DA262F6A7DEB">&lt;精通Rust(第二版)&gt;-2.4 Cargo工具扩展</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="任务抽象"><a class="header" href="#任务抽象">任务抽象</a></h1>
<!--ts-->
<ul>
<li><a href="layer3_task_abstract/layer3_task_abstract.html#%E4%BB%BB%E5%8A%A1%E6%8A%BD%E8%B1%A1">任务抽象</a>
<ul>
<li><a href="layer3_task_abstract/layer3_task_abstract.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a>
<ul>
<li><a href="layer3_task_abstract/layer3_task_abstract.html#online-book">online-book</a></li>
<li><a href="layer3_task_abstract/layer3_task_abstract.html#fragment">fragment</a></li>
<li><a href="layer3_task_abstract/layer3_task_abstract.html#local">local</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:36 UTC 2022 -->
<!--te-->
<h2 id="参考资源-25"><a class="header" href="#参考资源-25">参考资源</a></h2>
<h3 id="online-book-27"><a class="header" href="#online-book-27">online-book</a></h3>
<h3 id="fragment-27"><a class="header" href="#fragment-27">fragment</a></h3>
<h3 id="local-27"><a class="header" href="#local-27">local</a></h3>
<div style="break-before: page; page-break-before: always;"></div><h1 id="并发"><a class="header" href="#并发">并发</a></h1>
<!--ts-->
<ul>
<li><a href="layer3_task_abstract/7_concurrency/7_concurrency.html#%E5%B9%B6%E5%8F%91">并发</a>
<ul>
<li><a href="layer3_task_abstract/7_concurrency/7_concurrency.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a>
<ul>
<li><a href="layer3_task_abstract/7_concurrency/7_concurrency.html#online-book">online-book</a></li>
<li><a href="layer3_task_abstract/7_concurrency/7_concurrency.html#fragment">fragment</a></li>
<li><a href="layer3_task_abstract/7_concurrency/7_concurrency.html#local">local</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:34 UTC 2022 -->
<!--te-->
<h2 id="参考资源-26"><a class="header" href="#参考资源-26">参考资源</a></h2>
<h3 id="online-book-28"><a class="header" href="#online-book-28">online-book</a></h3>
<h3 id="fragment-28"><a class="header" href="#fragment-28">fragment</a></h3>
<h3 id="local-28"><a class="header" href="#local-28">local</a></h3>
<div style="break-before: page; page-break-before: always;"></div><h1 id="从io模型开始"><a class="header" href="#从io模型开始">从IO模型开始</a></h1>
<!--ts-->
<ul>
<li><a href="layer3_task_abstract/7_concurrency/io_models.html#%E4%BB%8Eio%E6%A8%A1%E5%9E%8B%E5%BC%80%E5%A7%8B">从IO模型开始</a>
<ul>
<li><a href="layer3_task_abstract/7_concurrency/io_models.html#1-%E5%90%8C%E6%AD%A5%E5%BC%82%E6%AD%A5%E9%98%BB%E5%A1%9E%E9%9D%9E%E9%98%BB%E5%A1%9E%E6%A6%82%E5%BF%B5%E5%8C%BA%E5%88%AB">1. 同步/异步、阻塞/非阻塞概念区别</a>
<ul>
<li><a href="layer3_task_abstract/7_concurrency/io_models.html#%E5%90%8C%E6%AD%A5%E5%92%8C%E5%BC%82%E6%AD%A5%E5%85%B3%E6%B3%A8%E7%9A%84%E6%98%AF%E6%B6%88%E6%81%AF%E9%80%9A%E4%BF%A1%E6%9C%BA%E5%88%B6%E8%B0%83%E7%94%A8%E8%80%85%E8%A7%86%E8%A7%92">同步和异步，关注的是消息通信机制。（调用者视角）</a></li>
<li><a href="layer3_task_abstract/7_concurrency/io_models.html#%E9%98%BB%E5%A1%9E%E5%92%8C%E9%9D%9E%E9%98%BB%E5%A1%9E%E5%85%B3%E6%B3%A8%E7%9A%84%E6%98%AF%E7%A8%8B%E5%BA%8F%E7%AD%89%E5%BE%85%E8%B0%83%E7%94%A8%E7%BB%93%E6%9E%9C%E7%9A%84%E7%8A%B6%E6%80%81%E8%A2%AB%E8%B0%83%E7%94%A8%E8%80%85%E8%A7%86%E8%A7%92">阻塞和非阻塞，关注的是程序等待调用结果的状态。（被调用者视角）</a></li>
<li><a href="layer3_task_abstract/7_concurrency/io_models.html#%E9%98%BB%E5%A1%9E%E4%B8%8E%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8%E6%9C%89%E5%85%B3">阻塞，与系统调用有关。</a></li>
</ul>
</li>
<li><a href="layer3_task_abstract/7_concurrency/io_models.html#2-%E5%90%8C%E6%AD%A5%E5%BC%82%E6%AD%A5io-%E6%A8%A1%E5%9E%8B%E5%88%86%E7%B1%BB">2. 同步/异步IO 模型分类</a></li>
<li><a href="layer3_task_abstract/7_concurrency/io_models.html#3-%E5%90%8C%E6%AD%A5%E9%98%BB%E5%A1%9Eio-blocking-io">3. 同步阻塞I/O (blocking I/O)</a></li>
<li><a href="layer3_task_abstract/7_concurrency/io_models.html#4-io-%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8io-multiplexing-">4. I/O 多路复用（I/O Multiplexing )</a></li>
<li><a href="layer3_task_abstract/7_concurrency/io_models.html#5-epoll-%E5%90%8C%E6%AD%A5%E9%98%BB%E5%A1%9E%E9%9D%9E%E9%98%BB%E5%A1%9E%E6%A8%A1%E5%9E%8B">5. epoll: 同步阻塞/非阻塞模型</a>
<ul>
<li><a href="layer3_task_abstract/7_concurrency/io_models.html#epoll%E4%B8%89%E4%B8%AA%E5%87%BD%E6%95%B0">epoll三个函数</a></li>
<li><a href="layer3_task_abstract/7_concurrency/io_models.html#epoll-%E4%B8%A4%E7%A7%8D%E8%A7%A6%E5%8F%91%E6%9C%BA%E5%88%B6">epoll 两种触发机制：</a></li>
<li><a href="layer3_task_abstract/7_concurrency/io_models.html#%E6%83%8A%E7%BE%A4%E9%97%AE%E9%A2%98">惊群问题：</a></li>
</ul>
</li>
<li><a href="layer3_task_abstract/7_concurrency/io_models.html#6-%E5%BC%82%E6%AD%A5-io-%E6%A8%A1%E5%9E%8B-io_uring">6. 异步 I/O 模型: io_uring</a>
<ul>
<li><a href="layer3_task_abstract/7_concurrency/io_models.html#1-reactor%E5%8F%8D%E5%BA%94%E5%99%A8-%E6%A8%A1%E5%BC%8F">1. Reactor（反应器） 模式</a></li>
<li><a href="layer3_task_abstract/7_concurrency/io_models.html#2-preactor%E4%B8%BB%E5%8A%A8%E5%99%A8-%E6%A8%A1%E5%BC%8F">2. Preactor（主动器） 模式</a></li>
<li><a href="layer3_task_abstract/7_concurrency/io_models.html#reactor-model">Reactor Model:</a>
<ul>
<li><a href="layer3_task_abstract/7_concurrency/io_models.html#%E4%B8%89%E7%A7%8D%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F">三种实现方式：</a></li>
<li><a href="layer3_task_abstract/7_concurrency/io_models.html#%E8%AF%BB%E5%86%99%E6%93%8D%E4%BD%9C%E6%B5%81%E7%A8%8B">读写操作流程：</a></li>
<li><a href="layer3_task_abstract/7_concurrency/io_models.html#%E5%8F%82%E4%B8%8E%E8%80%85">参与者：</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="layer3_task_abstract/7_concurrency/io_models.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a>
<ul>
<li><a href="layer3_task_abstract/7_concurrency/io_models.html#online-book">online-book</a></li>
<li><a href="layer3_task_abstract/7_concurrency/io_models.html#fragment">fragment</a></li>
<li><a href="layer3_task_abstract/7_concurrency/io_models.html#local">local</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:35 UTC 2022 -->
<!--te-->
<h2 id="1-同步异步阻塞非阻塞概念区别"><a class="header" href="#1-同步异步阻塞非阻塞概念区别">1. 同步/异步、阻塞/非阻塞概念区别</a></h2>
<h3 id="同步和异步关注的是消息通信机制调用者视角"><a class="header" href="#同步和异步关注的是消息通信机制调用者视角">同步和异步，关注的是消息通信机制。（调用者视角）</a></h3>
<ul>
<li>同步，发出一个调用，在没有得到结果之前不返回。</li>
<li>异步，发出一个调用，在没有得到结果之前返回。</li>
</ul>
<h3 id="阻塞和非阻塞关注的是程序等待调用结果的状态被调用者视角"><a class="header" href="#阻塞和非阻塞关注的是程序等待调用结果的状态被调用者视角">阻塞和非阻塞，关注的是程序等待调用结果的状态。（被调用者视角）</a></h3>
<ul>
<li>阻塞，在调用结果返回之前，线程被挂起。</li>
<li>非阻塞，在调用结果返回之前，线程不会被挂起。</li>
</ul>
<h3 id="阻塞与系统调用有关"><a class="header" href="#阻塞与系统调用有关">阻塞，与系统调用有关。</a></h3>
<h2 id="2-同步异步io-模型分类"><a class="header" href="#2-同步异步io-模型分类">2. 同步/异步IO 模型分类</a></h2>
<pre><svg xmlns="http://www.w3.org/2000/svg" width="456" height="288">
    <style>
        line, path, circle,rect,polygon{stroke:black;stroke-width:2;stroke-opacity:1;fill-opacity:1;stroke-linecap:round;stroke-linejoin:miter;}text{font-family:monospace;font-size:14px;}rect.backdrop{stroke:none;fill:white;}.broken{stroke-dasharray:8;}.filled{fill:black;}.bg_filled{fill:white;}.nofill{fill:white;}.end_marked_arrow{marker-end:url(#arrow);}.start_marked_arrow{marker-start:url(#arrow);}.end_marked_diamond{marker-end:url(#diamond);}.start_marked_diamond{marker-start:url(#diamond);}.end_marked_circle{marker-end:url(#circle);}.start_marked_circle{marker-start:url(#circle);}.end_marked_open_circle{marker-end:url(#open_circle);}.start_marked_open_circle{marker-start:url(#open_circle);}.end_marked_big_open_circle{marker-end:url(#big_open_circle);}.start_marked_big_open_circle{marker-start:url(#big_open_circle);}
        
    </style>
    <defs>
        <marker id="arrow" viewBox="-2 -2 8 8" refX="4" refY="2" markerWidth="7" markerHeight="7" orient="auto-start-reverse">
            <polygon points="0,0 0,4 4,2 0,0"></polygon>
        </marker>
        <marker id="diamond" viewBox="-2 -2 8 8" refX="4" refY="2" markerWidth="7" markerHeight="7" orient="auto-start-reverse">
            <polygon points="0,2 2,0 4,2 2,4 0,2"></polygon>
        </marker>
        <marker id="circle" viewBox="0 0 8 8" refX="4" refY="4" markerWidth="7" markerHeight="7" orient="auto-start-reverse">
            <circle cx="4" cy="4" r="2" class="filled"></circle>
        </marker>
        <marker id="open_circle" viewBox="0 0 8 8" refX="4" refY="4" markerWidth="7" markerHeight="7" orient="auto-start-reverse">
            <circle cx="4" cy="4" r="2" class="bg_filled"></circle>
        </marker>
        <marker id="big_open_circle" viewBox="0 0 8 8" refX="4" refY="4" markerWidth="7" markerHeight="7" orient="auto-start-reverse">
            <circle cx="4" cy="4" r="3" class="bg_filled"></circle>
        </marker>
    </defs>
    <rect class="backdrop" x="0" y="0" width="456" height="288"></rect>
    <line x1="260" y1="72" x2="284" y2="72" class="solid"></line>
    <text x="298" y="12" >阻</text>
    <text x="322" y="12" >塞</text>
    <text x="346" y="12" >I</text>
    <line x1="368" y1="0" x2="360" y2="16" class="solid"></line>
    <text x="370" y="12" >O</text>
    <path d="M 392,0 A 16,16 0,0,0 392,16" class="nofill"></path>
    <text x="394" y="12" >BIO</text>
    <path d="M 424,0 A 16,16 0,0,1 424,16" class="nofill"></path>
    <text x="298" y="44" >非</text>
    <text x="322" y="44" >阻</text>
    <text x="346" y="44" >塞</text>
    <text x="370" y="44" >I</text>
    <line x1="384" y1="32" x2="376" y2="48" class="solid"></line>
    <text x="386" y="44" >O</text>
    <path d="M 408,32 A 16,16 0,0,0 408,48" class="nofill"></path>
    <text x="410" y="44" >NIO</text>
    <path d="M 440,32 A 16,16 0,0,1 440,48" class="nofill"></path>
    <line x1="100" y1="152" x2="132" y2="152" class="solid"></line>
    <text x="170" y="76" >同</text>
    <text x="194" y="76" >步</text>
    <text x="218" y="76" >I</text>
    <line x1="240" y1="64" x2="232" y2="80" class="solid"></line>
    <text x="242" y="76" >O</text>
    <text x="298" y="108" >I</text>
    <line x1="320" y1="96" x2="312" y2="112" class="solid"></line>
    <text x="322" y="108" >O</text>
    <text x="338" y="108" >多</text>
    <text x="362" y="108" >路</text>
    <text x="386" y="108" >复</text>
    <text x="410" y="108" >用</text>
    <text x="298" y="140" >信</text>
    <text x="322" y="140" >号</text>
    <text x="346" y="140" >驱</text>
    <text x="370" y="140" >动</text>
    <text x="394" y="140" >I</text>
    <line x1="416" y1="128" x2="408" y2="144" class="solid"></line>
    <text x="418" y="140" >O</text>
    <text x="2" y="156" >I</text>
    <line x1="24" y1="144" x2="16" y2="160" class="solid"></line>
    <text x="26" y="156" >O</text>
    <text x="42" y="156" >模</text>
    <text x="66" y="156" >型</text>
    <line x1="260" y1="232" x2="284" y2="232" class="solid"></line>
    <text x="298" y="204" >Linux</text>
    <text x="354" y="204" >AIO</text>
    <path d="M 384,192 A 16,16 0,0,1 384,208" class="nofill"></path>
    <text x="354" y="220" >io</text>
    <line x1="368" y1="224" x2="376" y2="224" class="solid"></line>
    <text x="378" y="220" >uring</text>
    <path d="M 424,208 A 16,16 0,0,1 424,224" class="nofill"></path>
    <text x="170" y="236" >异</text>
    <text x="194" y="236" >步</text>
    <text x="218" y="236" >I</text>
    <line x1="240" y1="224" x2="232" y2="240" class="solid"></line>
    <text x="242" y="236" >O</text>
    <text x="298" y="268" >windows</text>
    <path d="M 368,256 A 16,16 0,0,0 368,272" class="nofill"></path>
    <text x="370" y="268" >IOCP</text>
    <path d="M 408,256 A 16,16 0,0,1 408,272" class="nofill"></path>
    <g>
        <line x1="268" y1="8" x2="284" y2="8" class="solid"></line>
        <line x1="268" y1="8" x2="268" y2="64" class="solid"></line>
        <line x1="268" y1="40" x2="284" y2="40" class="solid"></line>
    </g>
    <g>
        <line x1="268" y1="80" x2="268" y2="136" class="solid"></line>
        <line x1="268" y1="104" x2="284" y2="104" class="solid"></line>
        <line x1="268" y1="136" x2="284" y2="136" class="solid"></line>
    </g>
    <g>
        <line x1="116" y1="72" x2="156" y2="72" class="solid"></line>
        <line x1="116" y1="72" x2="116" y2="144" class="solid"></line>
    </g>
    <g>
        <line x1="116" y1="160" x2="116" y2="232" class="solid"></line>
        <line x1="116" y1="232" x2="156" y2="232" class="solid"></line>
    </g>
    <g>
        <line x1="268" y1="200" x2="284" y2="200" class="solid"></line>
        <line x1="268" y1="200" x2="268" y2="224" class="solid"></line>
    </g>
    <g>
        <line x1="268" y1="240" x2="268" y2="264" class="solid"></line>
        <line x1="268" y1="264" x2="284" y2="264" class="solid"></line>
    </g>
    <g>
        <path d="M 352,192 A 16,16 0,0,0 352,208" class="nofill"></path>
        <path d="M 352,208 A 16,16 0,0,0 352,224" class="nofill"></path>
    </g>
</svg>
</pre>
<h2 id="3-同步阻塞io-blocking-io"><a class="header" href="#3-同步阻塞io-blocking-io">3. 同步阻塞I/O (blocking I/O)</a></h2>
<pre><svg xmlns="http://www.w3.org/2000/svg" width="528" height="320">
    <style>
        line, path, circle,rect,polygon{stroke:black;stroke-width:2;stroke-opacity:1;fill-opacity:1;stroke-linecap:round;stroke-linejoin:miter;}text{font-family:monospace;font-size:14px;}rect.backdrop{stroke:none;fill:white;}.broken{stroke-dasharray:8;}.filled{fill:black;}.bg_filled{fill:white;}.nofill{fill:white;}.end_marked_arrow{marker-end:url(#arrow);}.start_marked_arrow{marker-start:url(#arrow);}.end_marked_diamond{marker-end:url(#diamond);}.start_marked_diamond{marker-start:url(#diamond);}.end_marked_circle{marker-end:url(#circle);}.start_marked_circle{marker-start:url(#circle);}.end_marked_open_circle{marker-end:url(#open_circle);}.start_marked_open_circle{marker-start:url(#open_circle);}.end_marked_big_open_circle{marker-end:url(#big_open_circle);}.start_marked_big_open_circle{marker-start:url(#big_open_circle);}
        
    </style>
    <defs>
        <marker id="arrow" viewBox="-2 -2 8 8" refX="4" refY="2" markerWidth="7" markerHeight="7" orient="auto-start-reverse">
            <polygon points="0,0 0,4 4,2 0,0"></polygon>
        </marker>
        <marker id="diamond" viewBox="-2 -2 8 8" refX="4" refY="2" markerWidth="7" markerHeight="7" orient="auto-start-reverse">
            <polygon points="0,2 2,0 4,2 2,4 0,2"></polygon>
        </marker>
        <marker id="circle" viewBox="0 0 8 8" refX="4" refY="4" markerWidth="7" markerHeight="7" orient="auto-start-reverse">
            <circle cx="4" cy="4" r="2" class="filled"></circle>
        </marker>
        <marker id="open_circle" viewBox="0 0 8 8" refX="4" refY="4" markerWidth="7" markerHeight="7" orient="auto-start-reverse">
            <circle cx="4" cy="4" r="2" class="bg_filled"></circle>
        </marker>
        <marker id="big_open_circle" viewBox="0 0 8 8" refX="4" refY="4" markerWidth="7" markerHeight="7" orient="auto-start-reverse">
            <circle cx="4" cy="4" r="3" class="bg_filled"></circle>
        </marker>
    </defs>
    <rect class="backdrop" x="0" y="0" width="528" height="320"></rect>
    <rect x="4" y="24" width="80" height="272" class="solid nofill" rx="0"></rect>
    <text x="34" y="60" >Read</text>
    <text x="18" y="76" >recvfrom</text>
    <text x="10" y="220" >process</text>
    <text x="10" y="236" >datagram</text>
    <rect x="188" y="24" width="96" height="272" class="solid nofill" rx="0"></rect>
    <text x="202" y="44" >no</text>
    <text x="202" y="60" >datagram</text>
    <text x="202" y="76" >ready</text>
    <text x="202" y="140" >datagram</text>
    <text x="202" y="156" >ready</text>
    <text x="202" y="188" >copy</text>
    <text x="202" y="204" >datagram</text>
    <text x="210" y="268" >copy</text>
    <text x="210" y="284" >complete</text>
    <text x="2" y="12" >Application</text>
    <text x="210" y="12" >kernel</text>
    <text x="114" y="44" >syscall</text>
    <text x="370" y="92" >wait</text>
    <text x="370" y="108" >data</text>
    <text x="410" y="92" >for</text>
    <text x="370" y="220" >copy</text>
    <text x="370" y="236" >from</text>
    <text x="410" y="220" >data</text>
    <text x="410" y="236" >kernel</text>
    <text x="114" y="236" >return</text>
    <text x="466" y="236" >to</text>
    <text x="490" y="236" >user</text>
    <g>
        <line x1="228" y1="88" x2="228" y2="116" class="solid"></line>
        <polygon points="224,116 232,116 228,128" class="filled"></polygon>
    </g>
    <g>
        <line x1="228" y1="216" x2="228" y2="244" class="solid"></line>
        <polygon points="224,244 232,244 228,256" class="filled"></polygon>
    </g>
    <g>
        <line x1="308" y1="24" x2="340" y2="24" class="solid"></line>
        <line x1="340" y1="24" x2="340" y2="152" class="solid"></line>
        <line x1="340" y1="88" x2="356" y2="88" class="solid"></line>
        <line x1="356" y1="88" x2="356" y2="104" class="solid"></line>
        <line x1="340" y1="104" x2="356" y2="104" class="solid"></line>
        <line x1="308" y1="152" x2="340" y2="152" class="solid"></line>
    </g>
    <g>
        <line x1="100" y1="56" x2="168" y2="56" class="solid"></line>
        <polygon points="168,52 176,56 168,60" class="filled"></polygon>
    </g>
    <g>
        <line x1="308" y1="184" x2="340" y2="184" class="solid"></line>
        <line x1="340" y1="184" x2="340" y2="264" class="solid"></line>
        <line x1="340" y1="216" x2="356" y2="216" class="solid"></line>
        <line x1="356" y1="216" x2="356" y2="232" class="solid"></line>
        <line x1="340" y1="232" x2="356" y2="232" class="solid"></line>
        <line x1="308" y1="264" x2="340" y2="264" class="solid"></line>
    </g>
    <g>
        <polygon points="104,244 96,248 104,252" class="filled"></polygon>
        <line x1="104" y1="248" x2="172" y2="248" class="solid"></line>
    </g>
</svg>
</pre>
<blockquote>
<p>输入操作两个阶段：</p>
</blockquote>
<ol>
<li>进程等待内核把数据准备好；这个阶段可以阻塞也可非阻塞，设置socket属性。
<ul>
<li>阻塞： recvfrom 阻塞线程直到返回数据就绪的结果。</li>
<li>非阻塞：立即返回一个错误，轮询直到数据就绪。</li>
</ul>
</li>
<li>从内核缓冲区向进程缓冲区复制数据。（一直阻塞）</li>
</ol>
<p>异步I/O，recvfrom总是立即返回，两个阶段都由内核完成。</p>
<h2 id="4-io-多路复用io-multiplexing-"><a class="header" href="#4-io-多路复用io-multiplexing-">4. I/O 多路复用（I/O Multiplexing )</a></h2>
<p>IO多路复用是一种同步IO模型，实现一个线程可以监视多个文件句柄。</p>
<p>支持I/O多路复用的系统调用有 select/pselect/poll/epoll，本质都是同步I/O，因为数据拷贝都是阻塞的。 通过 select/epoll 来判断数据报是否准备好，即判断可读可写状态。</p>
<h2 id="5-epoll-同步阻塞非阻塞模型"><a class="header" href="#5-epoll-同步阻塞非阻塞模型">5. epoll: 同步阻塞/非阻塞模型</a></h2>
<pre><svg xmlns="http://www.w3.org/2000/svg" width="744" height="352">
    <style>
        line, path, circle,rect,polygon{stroke:black;stroke-width:2;stroke-opacity:1;fill-opacity:1;stroke-linecap:round;stroke-linejoin:miter;}text{font-family:monospace;font-size:14px;}rect.backdrop{stroke:none;fill:white;}.broken{stroke-dasharray:8;}.filled{fill:black;}.bg_filled{fill:white;}.nofill{fill:white;}.end_marked_arrow{marker-end:url(#arrow);}.start_marked_arrow{marker-start:url(#arrow);}.end_marked_diamond{marker-end:url(#diamond);}.start_marked_diamond{marker-start:url(#diamond);}.end_marked_circle{marker-end:url(#circle);}.start_marked_circle{marker-start:url(#circle);}.end_marked_open_circle{marker-end:url(#open_circle);}.start_marked_open_circle{marker-start:url(#open_circle);}.end_marked_big_open_circle{marker-end:url(#big_open_circle);}.start_marked_big_open_circle{marker-start:url(#big_open_circle);}
        
    </style>
    <defs>
        <marker id="arrow" viewBox="-2 -2 8 8" refX="4" refY="2" markerWidth="7" markerHeight="7" orient="auto-start-reverse">
            <polygon points="0,0 0,4 4,2 0,0"></polygon>
        </marker>
        <marker id="diamond" viewBox="-2 -2 8 8" refX="4" refY="2" markerWidth="7" markerHeight="7" orient="auto-start-reverse">
            <polygon points="0,2 2,0 4,2 2,4 0,2"></polygon>
        </marker>
        <marker id="circle" viewBox="0 0 8 8" refX="4" refY="4" markerWidth="7" markerHeight="7" orient="auto-start-reverse">
            <circle cx="4" cy="4" r="2" class="filled"></circle>
        </marker>
        <marker id="open_circle" viewBox="0 0 8 8" refX="4" refY="4" markerWidth="7" markerHeight="7" orient="auto-start-reverse">
            <circle cx="4" cy="4" r="2" class="bg_filled"></circle>
        </marker>
        <marker id="big_open_circle" viewBox="0 0 8 8" refX="4" refY="4" markerWidth="7" markerHeight="7" orient="auto-start-reverse">
            <circle cx="4" cy="4" r="3" class="bg_filled"></circle>
        </marker>
    </defs>
    <rect class="backdrop" x="0" y="0" width="744" height="352"></rect>
    <rect x="268" y="248" width="24" height="32" class="solid nofill" rx="0"></rect>
    <text x="210" y="28" >epoll</text>
    <line x1="248" y1="32" x2="256" y2="32" class="solid"></line>
    <text x="258" y="28" >ctl</text>
    <text x="522" y="28" >epoll</text>
    <line x1="560" y1="32" x2="568" y2="32" class="solid"></line>
    <text x="570" y="28" >wait</text>
    <text x="466" y="188" >event</text>
    <text x="362" y="316" >红黑树</text>
    <line x1="468" y1="304" x2="468" y2="320" class="solid"></line>
    <line x1="516" y1="304" x2="516" y2="320" class="solid"></line>
    <text x="658" y="316" >链表</text>
    <line x1="508" y1="328" x2="716" y2="328" class="solid"></line>
    <text x="2" y="156" >epoll</text>
    <line x1="40" y1="160" x2="48" y2="160" class="solid"></line>
    <text x="50" y="156" >create</text>
    <line x1="732" y1="304" x2="732" y2="320" class="solid"></line>
    <g>
        <line x1="196" y1="8" x2="460" y2="8" class="solid"></line>
        <line x1="196" y1="8" x2="196" y2="328" class="solid"></line>
        <line x1="460" y1="8" x2="460" y2="304" class="solid"></line>
        <line x1="460" y1="168" x2="496" y2="168" class="solid"></line>
        <polygon points="496,164 504,168 496,172" class="filled"></polygon>
        <line x1="196" y1="328" x2="460" y2="328" class="solid"></line>
    </g>
    <g>
        <line x1="508" y1="8" x2="716" y2="8" class="solid"></line>
        <line x1="508" y1="8" x2="508" y2="304" class="solid"></line>
        <line x1="716" y1="8" x2="716" y2="304" class="solid"></line>
    </g>
    <g>
        <line x1="588" y1="56" x2="628" y2="56" class="solid"></line>
        <line x1="588" y1="56" x2="588" y2="104" class="solid"></line>
        <line x1="628" y1="56" x2="628" y2="104" class="solid"></line>
        <line x1="588" y1="104" x2="628" y2="104" class="solid"></line>
        <line x1="612" y1="104" x2="612" y2="152" class="solid"></line>
        <line x1="588" y1="152" x2="628" y2="152" class="solid"></line>
        <line x1="588" y1="152" x2="588" y2="200" class="solid"></line>
        <line x1="628" y1="152" x2="628" y2="200" class="solid"></line>
        <line x1="588" y1="200" x2="628" y2="200" class="solid"></line>
        <line x1="612" y1="200" x2="612" y2="248" class="solid"></line>
        <line x1="588" y1="248" x2="628" y2="248" class="solid"></line>
        <line x1="588" y1="248" x2="588" y2="296" class="solid"></line>
        <line x1="628" y1="248" x2="628" y2="296" class="solid"></line>
        <line x1="588" y1="296" x2="628" y2="296" class="solid"></line>
    </g>
    <g>
        <line x1="340" y1="72" x2="372" y2="72" class="solid"></line>
        <line x1="340" y1="72" x2="340" y2="104" class="solid"></line>
        <line x1="372" y1="72" x2="372" y2="104" class="solid"></line>
        <line x1="324" y1="104" x2="396" y2="104" class="solid"></line>
        <line x1="324" y1="104" x2="324" y2="136" class="solid"></line>
        <line x1="396" y1="104" x2="396" y2="136" class="solid"></line>
        <line x1="300" y1="136" x2="332" y2="136" class="solid"></line>
        <line x1="300" y1="136" x2="300" y2="168" class="solid"></line>
        <line x1="332" y1="136" x2="332" y2="168" class="solid"></line>
        <line x1="380" y1="136" x2="404" y2="136" class="solid"></line>
        <line x1="380" y1="136" x2="380" y2="168" class="solid"></line>
        <line x1="404" y1="136" x2="404" y2="168" class="solid"></line>
        <line x1="300" y1="168" x2="332" y2="168" class="solid"></line>
        <line x1="316" y1="168" x2="316" y2="200" class="solid"></line>
        <line x1="380" y1="168" x2="404" y2="168" class="solid"></line>
        <line x1="276" y1="200" x2="340" y2="200" class="solid"></line>
        <line x1="276" y1="200" x2="276" y2="232" class="solid"></line>
        <line x1="340" y1="200" x2="340" y2="248" class="solid"></line>
        <line x1="276" y1="232" x2="284" y2="232" class="solid"></line>
        <line x1="324" y1="248" x2="356" y2="248" class="solid"></line>
        <line x1="324" y1="248" x2="324" y2="280" class="solid"></line>
        <line x1="356" y1="248" x2="356" y2="280" class="solid"></line>
        <line x1="324" y1="280" x2="356" y2="280" class="solid"></line>
    </g>
    <g>
        <line x1="116" y1="152" x2="152" y2="152" class="solid"></line>
        <polygon points="152,148 160,152 152,156" class="filled"></polygon>
    </g>
</svg>
</pre>
<h3 id="epoll三个函数"><a class="header" href="#epoll三个函数">epoll三个函数</a></h3>
<ul>
<li>epoll_create(int size) : 内核产生一个epoll实例数据结构，并返回一个epfd</li>
<li>epoll_ctl(int epfd, int op, int fd, struct epoll_event *event)：将被监听的描述符添加到红黑树或从红黑树中删除或者对监听事件进行修改。</li>
<li>epoll_wait(int epfd, struct epoll_event *events, int maxevents, int timeout): 阻塞等待注册的事件发生，返回事件的数目，并将触发的事件写入events数组中</li>
</ul>
<h3 id="epoll-两种触发机制"><a class="header" href="#epoll-两种触发机制">epoll 两种触发机制：</a></h3>
<ul>
<li>水平触发机制（LT)。缓冲区只要有数据就触发读写。epoll 默认工作方式。select/poll只支持该方式。</li>
<li>边缘触发机制（ET)。缓冲区空或满的状态才触发读写。nginx 使用该方式，避免频繁读写。</li>
</ul>
<h3 id="惊群问题"><a class="header" href="#惊群问题">惊群问题：</a></h3>
<p>当多个进程/线程调用epoll_wait时会阻塞等待，当内核触发可读写事件，所有进程/线程都会进行响应，但是实际上只有一个进程/线程真实处理这些事件。 Liux 4.5 通过引入 EPOLLEXCLUSIVE
标识来保证一个事件发生时候只有一个线程会被唤醒，以避免多侦听下的惊群问题。</p>
<h2 id="6-异步-io-模型-io_uring"><a class="header" href="#6-异步-io-模型-io_uring">6. 异步 I/O 模型: io_uring</a></h2>
<p>Linux AIO 实现的并不理想，所以引入了新的异步I/O接口 io_uring。</p>
<pre><svg xmlns="http://www.w3.org/2000/svg" width="496" height="368">
    <style>
        line, path, circle,rect,polygon{stroke:black;stroke-width:2;stroke-opacity:1;fill-opacity:1;stroke-linecap:round;stroke-linejoin:miter;}text{font-family:monospace;font-size:14px;}rect.backdrop{stroke:none;fill:white;}.broken{stroke-dasharray:8;}.filled{fill:black;}.bg_filled{fill:white;}.nofill{fill:white;}.end_marked_arrow{marker-end:url(#arrow);}.start_marked_arrow{marker-start:url(#arrow);}.end_marked_diamond{marker-end:url(#diamond);}.start_marked_diamond{marker-start:url(#diamond);}.end_marked_circle{marker-end:url(#circle);}.start_marked_circle{marker-start:url(#circle);}.end_marked_open_circle{marker-end:url(#open_circle);}.start_marked_open_circle{marker-start:url(#open_circle);}.end_marked_big_open_circle{marker-end:url(#big_open_circle);}.start_marked_big_open_circle{marker-start:url(#big_open_circle);}
        
    </style>
    <defs>
        <marker id="arrow" viewBox="-2 -2 8 8" refX="4" refY="2" markerWidth="7" markerHeight="7" orient="auto-start-reverse">
            <polygon points="0,0 0,4 4,2 0,0"></polygon>
        </marker>
        <marker id="diamond" viewBox="-2 -2 8 8" refX="4" refY="2" markerWidth="7" markerHeight="7" orient="auto-start-reverse">
            <polygon points="0,2 2,0 4,2 2,4 0,2"></polygon>
        </marker>
        <marker id="circle" viewBox="0 0 8 8" refX="4" refY="4" markerWidth="7" markerHeight="7" orient="auto-start-reverse">
            <circle cx="4" cy="4" r="2" class="filled"></circle>
        </marker>
        <marker id="open_circle" viewBox="0 0 8 8" refX="4" refY="4" markerWidth="7" markerHeight="7" orient="auto-start-reverse">
            <circle cx="4" cy="4" r="2" class="bg_filled"></circle>
        </marker>
        <marker id="big_open_circle" viewBox="0 0 8 8" refX="4" refY="4" markerWidth="7" markerHeight="7" orient="auto-start-reverse">
            <circle cx="4" cy="4" r="3" class="bg_filled"></circle>
        </marker>
    </defs>
    <rect class="backdrop" x="0" y="0" width="496" height="368"></rect>
    <rect x="148" y="248" width="64" height="64" class="solid nofill" rx="0"></rect>
    <text x="162" y="284" >SQ</text>
    <rect x="332" y="248" width="64" height="64" class="solid nofill" rx="0"></rect>
    <text x="354" y="284" >CQ</text>
    <text x="58" y="188" >Tail</text>
    <text x="418" y="188" >Tail</text>
    <text x="90" y="220" >Kernel</text>
    <text x="58" y="12" >Head</text>
    <text x="418" y="12" >Head</text>
    <g>
        <line x1="4" y1="8" x2="44" y2="8" class="solid"></line>
        <line x1="4" y1="8" x2="4" y2="280" class="solid"></line>
        <line x1="4" y1="280" x2="128" y2="280" class="solid"></line>
        <polygon points="128,276 136,280 128,284" class="filled"></polygon>
    </g>
    <g>
        <line x1="108" y1="8" x2="188" y2="8" class="solid"></line>
        <line x1="108" y1="8" x2="108" y2="184" class="solid"></line>
        <line x1="188" y1="8" x2="188" y2="184" class="solid"></line>
        <line x1="108" y1="56" x2="188" y2="56" class="solid"></line>
        <line x1="108" y1="104" x2="188" y2="104" class="solid"></line>
        <line x1="108" y1="152" x2="188" y2="152" class="solid"></line>
        <line x1="108" y1="184" x2="188" y2="184" class="solid"></line>
    </g>
    <g>
        <line x1="316" y1="8" x2="404" y2="8" class="solid"></line>
        <line x1="316" y1="8" x2="316" y2="184" class="solid"></line>
        <line x1="404" y1="8" x2="404" y2="184" class="solid"></line>
        <line x1="316" y1="56" x2="404" y2="56" class="solid"></line>
        <line x1="316" y1="104" x2="404" y2="104" class="solid"></line>
        <line x1="316" y1="152" x2="404" y2="152" class="solid"></line>
        <line x1="316" y1="184" x2="404" y2="184" class="solid"></line>
    </g>
    <g>
        <polygon points="464,180 456,184 464,188" class="filled"></polygon>
        <line x1="464" y1="184" x2="484" y2="184" class="solid"></line>
        <line x1="484" y1="184" x2="484" y2="280" class="solid"></line>
        <line x1="412" y1="280" x2="484" y2="280" class="solid"></line>
    </g>
    <g>
        <line x1="76" y1="200" x2="436" y2="200" class="solid"></line>
        <line x1="76" y1="200" x2="76" y2="272" class="solid"></line>
        <line x1="436" y1="200" x2="436" y2="272" class="solid"></line>
    </g>
    <g>
        <line x1="76" y1="288" x2="76" y2="344" class="solid"></line>
        <line x1="436" y1="288" x2="436" y2="344" class="solid"></line>
        <line x1="76" y1="344" x2="436" y2="344" class="solid"></line>
    </g>
</svg>
</pre>
<p>io_uring接口通过两个主要数据结构工作：</p>
<ul>
<li>提交队列条目（sqe）</li>
<li>完成队列条目（cqe）</li>
</ul>
<p>这些结构的实例位于内核和应用程序之间的<strong>共享内存</strong>单生产者单消费者环形缓冲区中。</p>
<p>参考：</p>
<p><a href="https://thenewstack.io/how-io_uring-and-ebpf-will-revolutionize-programming-in-linux/">https://thenewstack.io/how-io_uring-and-ebpf-will-revolutionize-programming-in-linux/</a></p>
<p><a href="https://cor3ntin.github.io/posts/iouring/#io_uring">https://cor3ntin.github.io/posts/iouring/#io_uring</a></p>
<blockquote>
<p>因为处理 I/O 复用的编程模型相当复杂，为了简化编程，引入了下面两种模型:</p>
</blockquote>
<h3 id="1-reactor反应器-模式"><a class="header" href="#1-reactor反应器-模式">1. Reactor（反应器） 模式</a></h3>
<p>对应同步I/O，被动的事件分离和分发模型。服务等待请求事件的到来，再通过不受间断的同步处理事件，从而做出反应。</p>
<h3 id="2-preactor主动器-模式"><a class="header" href="#2-preactor主动器-模式">2. Preactor（主动器） 模式</a></h3>
<p>对应异步I/O，主动的事件分离和分发模型。这种设计允许多个任务并发的执行，从而提高吞吐量；并可执行耗时长的任务（各个任务间互不影响）。</p>
<h3 id="reactor-model"><a class="header" href="#reactor-model">Reactor Model:</a></h3>
<pre><svg xmlns="http://www.w3.org/2000/svg" width="576" height="288">
    <style>
        line, path, circle,rect,polygon{stroke:black;stroke-width:2;stroke-opacity:1;fill-opacity:1;stroke-linecap:round;stroke-linejoin:miter;}text{font-family:monospace;font-size:14px;}rect.backdrop{stroke:none;fill:white;}.broken{stroke-dasharray:8;}.filled{fill:black;}.bg_filled{fill:white;}.nofill{fill:white;}.end_marked_arrow{marker-end:url(#arrow);}.start_marked_arrow{marker-start:url(#arrow);}.end_marked_diamond{marker-end:url(#diamond);}.start_marked_diamond{marker-start:url(#diamond);}.end_marked_circle{marker-end:url(#circle);}.start_marked_circle{marker-start:url(#circle);}.end_marked_open_circle{marker-end:url(#open_circle);}.start_marked_open_circle{marker-start:url(#open_circle);}.end_marked_big_open_circle{marker-end:url(#big_open_circle);}.start_marked_big_open_circle{marker-start:url(#big_open_circle);}
        
    </style>
    <defs>
        <marker id="arrow" viewBox="-2 -2 8 8" refX="4" refY="2" markerWidth="7" markerHeight="7" orient="auto-start-reverse">
            <polygon points="0,0 0,4 4,2 0,0"></polygon>
        </marker>
        <marker id="diamond" viewBox="-2 -2 8 8" refX="4" refY="2" markerWidth="7" markerHeight="7" orient="auto-start-reverse">
            <polygon points="0,2 2,0 4,2 2,4 0,2"></polygon>
        </marker>
        <marker id="circle" viewBox="0 0 8 8" refX="4" refY="4" markerWidth="7" markerHeight="7" orient="auto-start-reverse">
            <circle cx="4" cy="4" r="2" class="filled"></circle>
        </marker>
        <marker id="open_circle" viewBox="0 0 8 8" refX="4" refY="4" markerWidth="7" markerHeight="7" orient="auto-start-reverse">
            <circle cx="4" cy="4" r="2" class="bg_filled"></circle>
        </marker>
        <marker id="big_open_circle" viewBox="0 0 8 8" refX="4" refY="4" markerWidth="7" markerHeight="7" orient="auto-start-reverse">
            <circle cx="4" cy="4" r="3" class="bg_filled"></circle>
        </marker>
    </defs>
    <rect class="backdrop" x="0" y="0" width="576" height="288"></rect>
    <rect x="428" y="8" width="136" height="48" class="solid nofill" rx="0"></rect>
    <text x="442" y="44" >req</text>
    <text x="474" y="44" >handler</text>
    <rect x="4" y="40" width="56" height="48" class="solid nofill" rx="0"></rect>
    <rect x="428" y="216" width="136" height="48" class="solid nofill" rx="0"></rect>
    <text x="442" y="252" >req</text>
    <text x="474" y="252" >handler</text>
    <rect x="428" y="120" width="136" height="48" class="solid nofill" rx="0"></rect>
    <text x="442" y="156" >req</text>
    <text x="474" y="156" >handler</text>
    <text x="2" y="28" >req</text>
    <text x="346" y="28" >Dispatch</text>
    <text x="346" y="124" >Dispatch</text>
    <text x="354" y="220" >Dispatch</text>
    <text x="130" y="92" >event</text>
    <text x="226" y="124" >Service</text>
    <text x="226" y="140" >Handler</text>
    <text x="2" y="156" >req</text>
    <text x="122" y="188" >event</text>
    <g>
        <line x1="340" y1="40" x2="408" y2="40" class="solid"></line>
        <line x1="340" y1="40" x2="340" y2="128" class="solid"></line>
        <polygon points="408,36 416,40 408,44" class="filled"></polygon>
    </g>
    <g>
        <line x1="204" y1="88" x2="308" y2="88" class="solid"></line>
        <line x1="204" y1="88" x2="204" y2="168" class="solid"></line>
        <line x1="308" y1="88" x2="308" y2="168" class="solid"></line>
        <line x1="308" y1="136" x2="408" y2="136" class="solid"></line>
        <polygon points="408,132 416,136 408,140" class="filled"></polygon>
        <line x1="204" y1="168" x2="308" y2="168" class="solid"></line>
    </g>
    <g>
        <line x1="340" y1="144" x2="340" y2="232" class="solid"></line>
        <line x1="340" y1="232" x2="416" y2="232" class="solid"></line>
        <polygon points="416,228 424,232 416,236" class="filled"></polygon>
    </g>
    <g>
        <line x1="76" y1="72" x2="116" y2="72" class="solid"></line>
        <line x1="116" y1="72" x2="116" y2="120" class="solid"></line>
        <line x1="116" y1="120" x2="184" y2="120" class="solid"></line>
        <polygon points="184,116 192,120 184,124" class="filled"></polygon>
    </g>
    <g>
        <line x1="108" y1="152" x2="184" y2="152" class="solid"></line>
        <line x1="108" y1="152" x2="108" y2="192" class="solid"></line>
        <polygon points="184,148 192,152 184,156" class="filled"></polygon>
    </g>
    <g>
        <line x1="4" y1="168" x2="60" y2="168" class="solid"></line>
        <line x1="4" y1="168" x2="4" y2="216" class="solid"></line>
        <line x1="60" y1="168" x2="60" y2="216" class="solid"></line>
        <line x1="60" y1="200" x2="100" y2="200" class="solid"></line>
        <line x1="4" y1="216" x2="60" y2="216" class="solid"></line>
    </g>
</svg>
</pre>
<h4 id="三种实现方式"><a class="header" href="#三种实现方式">三种实现方式：</a></h4>
<ul>
<li>单线程模式。 accept()、read()、write()以及connect()操作 都在同一线程。</li>
<li>工作者线程池模式。非 I/O 操作交给线程池处理</li>
<li>多线程模式。主Reactor (master) ，负责网络监听 ， 子Reactor(worker) 读写网络数据。</li>
</ul>
<h4 id="读写操作流程"><a class="header" href="#读写操作流程">读写操作流程：</a></h4>
<ol>
<li>应用注册读写就绪事件和相关联的事件处理器</li>
<li>事件分离器等待事件发生</li>
<li>当发生读写就绪事件，事件分离器调用已注册的事件处理器</li>
<li>事件处理器执行读写操作</li>
</ol>
<h4 id="参与者"><a class="header" href="#参与者">参与者：</a></h4>
<ol>
<li>描述符（handle）：操作系统提供的资源，识别 socket等。</li>
<li>同步事件多路分离器。开启事件循环，等待事件的发生。封装了 多路复用函数 select/poll/epoll等。</li>
<li>事件处理器。提供回调函数，用于描述与应用程序相关的某个事件的操作。</li>
<li>具体的事件处理器。事件处理器接口的具体实现。使用描述符来识别事件和程序提供的服务。</li>
<li>Reactor 管理器。事件处理器的调度核心。分离每个事件，调度事件管理器，调用具体的函数处理某个事件。</li>
</ol>
<h2 id="参考资源-27"><a class="header" href="#参考资源-27">参考资源</a></h2>
<h3 id="online-book-29"><a class="header" href="#online-book-29">online-book</a></h3>
<ul>
<li><a href="https://time.geekbang.org/course/detail/100060601-365835">88. IO模型</a></li>
<li><a href="https://time.geekbang.org/course/detail/100060601-365838">89. epoll和io_uring</a></li>
<li><a href="https://time.geekbang.org/course/detail/100060601-367808">90. 事件驱动编程模型</a></li>
</ul>
<h3 id="fragment-29"><a class="header" href="#fragment-29">fragment</a></h3>
<h3 id="local-29"><a class="header" href="#local-29">local</a></h3>
<div style="break-before: page; page-break-before: always;"></div><h1 id="多线程并发模型"><a class="header" href="#多线程并发模型">多线程并发模型</a></h1>
<!--ts-->
<ul>
<li><a href="layer3_task_abstract/7_concurrency/1_multi_models/multi_models.html#%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%B9%B6%E5%8F%91%E6%A8%A1%E5%9E%8B">多线程并发模型</a>
<ul>
<li><a href="layer3_task_abstract/7_concurrency/1_multi_models/multi_models.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a>
<ul>
<li><a href="layer3_task_abstract/7_concurrency/1_multi_models/multi_models.html#online-book">online-book</a></li>
<li><a href="layer3_task_abstract/7_concurrency/1_multi_models/multi_models.html#fragment">fragment</a></li>
<li><a href="layer3_task_abstract/7_concurrency/1_multi_models/multi_models.html#local">local</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:33 UTC 2022 -->
<!--te-->
<h2 id="参考资源-28"><a class="header" href="#参考资源-28">参考资源</a></h2>
<h3 id="online-book-30"><a class="header" href="#online-book-30">online-book</a></h3>
<ul>
<li><a href="https://doc.rust-lang.org/book/ch16-00-concurrency.html">Fearless Concurrency - The Rust Programming Language</a></li>
<li><a href="https://doc.rust-lang.org/book/ch20-00-final-project-a-web-server.html">Final Project: Building a Multithreaded Web Server - The Rust Programming Language</a></li>
</ul>
<h3 id="fragment-30"><a class="header" href="#fragment-30">fragment</a></h3>
<h3 id="local-30"><a class="header" href="#local-30">local</a></h3>
<div style="break-before: page; page-break-before: always;"></div><h1 id="异步模型"><a class="header" href="#异步模型">异步模型</a></h1>
<!--ts-->
<ul>
<li><a href="layer3_task_abstract/7_concurrency/2_async_models/async_models.html#%E5%BC%82%E6%AD%A5%E6%A8%A1%E5%9E%8B">异步模型</a>
<ul>
<li><a href="layer3_task_abstract/7_concurrency/2_async_models/async_models.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a>
<ul>
<li><a href="layer3_task_abstract/7_concurrency/2_async_models/async_models.html#online-book">online-book</a></li>
<li><a href="layer3_task_abstract/7_concurrency/2_async_models/async_models.html#fragment">fragment</a></li>
<li><a href="layer3_task_abstract/7_concurrency/2_async_models/async_models.html#local">local</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:34 UTC 2022 -->
<!--te-->
<h2 id="参考资源-29"><a class="header" href="#参考资源-29">参考资源</a></h2>
<h3 id="online-book-31"><a class="header" href="#online-book-31">online-book</a></h3>
<h3 id="fragment-31"><a class="header" href="#fragment-31">fragment</a></h3>
<h3 id="local-31"><a class="header" href="#local-31">local</a></h3>
<div style="break-before: page; page-break-before: always;"></div><h1 id="元编程"><a class="header" href="#元编程">元编程</a></h1>
<!--ts-->
<ul>
<li><a href="layer3_task_abstract/8_meta_programming/8_meta_programming.html#%E5%85%83%E7%BC%96%E7%A8%8B">元编程</a>
<ul>
<li><a href="layer3_task_abstract/8_meta_programming/8_meta_programming.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a>
<ul>
<li><a href="layer3_task_abstract/8_meta_programming/8_meta_programming.html#online-book">online-book</a></li>
<li><a href="layer3_task_abstract/8_meta_programming/8_meta_programming.html#fragment">fragment</a></li>
<li><a href="layer3_task_abstract/8_meta_programming/8_meta_programming.html#local">local</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:35 UTC 2022 -->
<!--te-->
<h2 id="参考资源-30"><a class="header" href="#参考资源-30">参考资源</a></h2>
<h3 id="online-book-32"><a class="header" href="#online-book-32">online-book</a></h3>
<h3 id="fragment-32"><a class="header" href="#fragment-32">fragment</a></h3>
<h3 id="local-32"><a class="header" href="#local-32">local</a></h3>
<div style="break-before: page; page-break-before: always;"></div><h1 id="协议抽象"><a class="header" href="#协议抽象">协议抽象</a></h1>
<!--ts-->
<ul>
<li><a href="layer4_protocol_abstract/layer4_protocol_abstract.html#%E5%8D%8F%E8%AE%AE%E6%8A%BD%E8%B1%A1">协议抽象</a>
<ul>
<li><a href="layer4_protocol_abstract/layer4_protocol_abstract.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a>
<ul>
<li><a href="layer4_protocol_abstract/layer4_protocol_abstract.html#online-book">online-book</a></li>
<li><a href="layer4_protocol_abstract/layer4_protocol_abstract.html#fragment">fragment</a></li>
<li><a href="layer4_protocol_abstract/layer4_protocol_abstract.html#local">local</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:37 UTC 2022 -->
<!--te-->
<h2 id="参考资源-31"><a class="header" href="#参考资源-31">参考资源</a></h2>
<h3 id="online-book-33"><a class="header" href="#online-book-33">online-book</a></h3>
<h3 id="fragment-33"><a class="header" href="#fragment-33">fragment</a></h3>
<h3 id="local-33"><a class="header" href="#local-33">local</a></h3>
<div style="break-before: page; page-break-before: always;"></div><h1 id="多语言编程"><a class="header" href="#多语言编程">多语言编程</a></h1>
<!--ts-->
<ul>
<li><a href="layer4_protocol_abstract/9_multilingual_programming/9_multilingual_programming.html#%E5%A4%9A%E8%AF%AD%E8%A8%80%E7%BC%96%E7%A8%8B">多语言编程</a>
<ul>
<li><a href="layer4_protocol_abstract/9_multilingual_programming/9_multilingual_programming.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a>
<ul>
<li><a href="layer4_protocol_abstract/9_multilingual_programming/9_multilingual_programming.html#online-book">online-book</a></li>
<li><a href="layer4_protocol_abstract/9_multilingual_programming/9_multilingual_programming.html#fragment">fragment</a></li>
<li><a href="layer4_protocol_abstract/9_multilingual_programming/9_multilingual_programming.html#local">local</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:37 UTC 2022 -->
<!--te-->
<h2 id="参考资源-32"><a class="header" href="#参考资源-32">参考资源</a></h2>
<h3 id="online-book-34"><a class="header" href="#online-book-34">online-book</a></h3>
<h3 id="fragment-34"><a class="header" href="#fragment-34">fragment</a></h3>
<h3 id="local-34"><a class="header" href="#local-34">local</a></h3>
<div style="break-before: page; page-break-before: always;"></div><h1 id="计算机网络"><a class="header" href="#计算机网络">计算机网络</a></h1>
<!--ts-->
<ul>
<li><a href="layer4_protocol_abstract/10_computer_network/10_computer_network.html#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C">计算机网络</a>
<ul>
<li><a href="layer4_protocol_abstract/10_computer_network/10_computer_network.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a>
<ul>
<li><a href="layer4_protocol_abstract/10_computer_network/10_computer_network.html#online-book">online-book</a></li>
<li><a href="layer4_protocol_abstract/10_computer_network/10_computer_network.html#fragment">fragment</a></li>
<li><a href="layer4_protocol_abstract/10_computer_network/10_computer_network.html#local">local</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:36 UTC 2022 -->
<!--te-->
<h2 id="参考资源-33"><a class="header" href="#参考资源-33">参考资源</a></h2>
<h3 id="online-book-35"><a class="header" href="#online-book-35">online-book</a></h3>
<h3 id="fragment-35"><a class="header" href="#fragment-35">fragment</a></h3>
<h3 id="local-35"><a class="header" href="#local-35">local</a></h3>
<div style="break-before: page; page-break-before: always;"></div><h1 id="生态系统"><a class="header" href="#生态系统">生态系统</a></h1>
<!--ts-->
<ul>
<li><a href="layer5_ecosystem/layer5_ecosystem.html#%E7%94%9F%E6%80%81%E7%B3%BB%E7%BB%9F">生态系统</a>
<ul>
<li><a href="layer5_ecosystem/layer5_ecosystem.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a>
<ul>
<li><a href="layer5_ecosystem/layer5_ecosystem.html#online-book">online-book</a></li>
<li><a href="layer5_ecosystem/layer5_ecosystem.html#fragment">fragment</a></li>
<li><a href="layer5_ecosystem/layer5_ecosystem.html#local">local</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:44:01 UTC 2022 -->
<!--te-->
<h2 id="参考资源-34"><a class="header" href="#参考资源-34">参考资源</a></h2>
<h3 id="online-book-36"><a class="header" href="#online-book-36">online-book</a></h3>
<h3 id="fragment-36"><a class="header" href="#fragment-36">fragment</a></h3>
<h3 id="local-36"><a class="header" href="#local-36">local</a></h3>
<div style="break-before: page; page-break-before: always;"></div><h1 id="学习资源"><a class="header" href="#学习资源">学习资源</a></h1>
<!--ts-->
<ul>
<li><a href="layer5_ecosystem/1_learning_resource/learning_resource.html#%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%BA%90">学习资源</a></li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:40 UTC 2022 -->
<!--te--><div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><h1 id="官方动态"><a class="header" href="#官方动态">官方动态</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="社区特点"><a class="header" href="#社区特点">社区特点</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="学术动态"><a class="header" href="#学术动态">学术动态</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="开源观察"><a class="header" href="#开源观察">开源观察</a></h1>
<div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><h1 id="命令行工具"><a class="header" href="#命令行工具">命令行工具</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="数据处理"><a class="header" href="#数据处理">数据处理</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="嵌入式"><a class="header" href="#嵌入式">嵌入式</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="操作系统"><a class="header" href="#操作系统">操作系统</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="性能工具"><a class="header" href="#性能工具">性能工具</a></h1>
<div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><h1 id="云原生"><a class="header" href="#云原生">云原生</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="前端开发"><a class="header" href="#前端开发">前端开发</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="网络基建"><a class="header" href="#网络基建">网络基建</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ipfs-星际文件系统interplanetary-file-system"><a class="header" href="#ipfs-星际文件系统interplanetary-file-system">IPFS: 星际文件系统(InterPlanetary File System)</a></h1>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/ipfs.jpeg" alt="ipfs" /></p>
<!--ts-->
<ul>
<li><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs.html#ipfs-%E6%98%9F%E9%99%85%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9Finterplanetary-file-system">IPFS: 星际文件系统(InterPlanetary File System)</a>
<ul>
<li><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs.html#ipfs%E4%BB%8B%E7%BB%8D">IPFS介绍</a>
<ul>
<li><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs.html#1-%E4%BB%80%E4%B9%88%E6%98%AFipfs">1 什么是IPFS</a></li>
<li><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs.html#2-%E4%B8%BA%E4%BB%80%E4%B9%88%E6%9C%89ipfs">2 为什么有IPFS</a>
<ul>
<li><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs.html#http%E7%9A%84%E4%B8%AD%E5%BF%83%E5%8C%96%E6%98%AF%E4%BD%8E%E6%95%88%E7%9A%84-%E5%B9%B6%E4%B8%94%E6%88%90%E6%9C%AC%E5%BE%88%E9%AB%98">HTTP的中心化是低效的, 并且成本很高</a></li>
<li><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs.html#web%E6%96%87%E4%BB%B6%E7%BB%8F%E5%B8%B8%E8%A2%AB%E5%88%A0%E9%99%A4">Web文件经常被删除</a></li>
<li><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs.html#%E4%B8%AD%E5%BF%83%E5%8C%96%E9%99%90%E5%88%B6%E4%BA%86web%E7%9A%84%E6%88%90%E9%95%BF">中心化限制了web的成长</a></li>
<li><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs.html#%E4%BA%92%E8%81%94%E7%BD%91%E5%BA%94%E7%94%A8%E9%AB%98%E5%BA%A6%E4%BE%9D%E8%B5%96%E4%B8%BB%E5%B9%B2%E7%BD%91">互联网应用高度依赖主干网</a></li>
</ul>
</li>
<li><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs.html#3-ipfs%E7%9A%84%E7%9B%AE%E6%A0%87">3 IPFS的目标</a></li>
<li><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs.html#4-ipfs%E5%8C%85%E5%90%AB%E5%93%AA%E4%BA%9B%E5%86%85%E5%AE%B9">4 IPFS包含哪些内容</a>
<ul>
<li><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs.html#ipfs%E6%98%AF%E4%B8%80%E4%B8%AA%E5%8D%8F%E8%AE%AE%E7%B1%BB%E4%BC%BChttp%E5%8D%8F%E8%AE%AE">IPFS是一个协议，类似http协议</a></li>
<li><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs.html#ipfs%E6%98%AF%E4%B8%80%E4%B8%AAweb%E5%8D%8F%E8%AE%AE">IPFS是一个web协议</a></li>
<li><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs.html#ipfs%E6%98%AF%E6%A8%A1%E5%9D%97%E5%8C%96%E7%9A%84%E5%8D%8F%E8%AE%AE">IPFS是模块化的协议</a></li>
<li><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs.html#ipfs%E6%98%AF%E4%B8%80%E4%B8%AAp2p%E7%B3%BB%E7%BB%9F">IPFS是一个p2p系统</a></li>
<li><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs.html#ipfs%E5%A4%A9%E7%94%9F%E6%98%AF%E4%B8%80%E4%B8%AAcdn">IPFS天生是一个CDN</a></li>
<li><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs.html#ipfs%E6%8B%A5%E6%9C%89%E5%91%BD%E5%90%8D%E6%9C%8D%E5%8A%A1">IPFS拥有命名服务</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs.html#ipfs%E5%A6%82%E4%BD%95%E5%B7%A5%E4%BD%9C">IPFS如何工作</a></li>
<li><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs.html#ipfs%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E4%B8%AD%E5%BF%83%E5%8C%96%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BC%BA%E7%82%B9">IPFS如何解决中心化服务器缺点</a>
<ul>
<li><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs.html#1-%E4%B8%8B%E8%BD%BD%E9%80%9F%E5%BA%A6%E5%BF%AB-%E4%B8%8D%E5%86%8D%E4%BE%9D%E8%B5%96%E4%B8%BB%E5%B9%B2%E7%BD%91-%E4%B8%AD%E5%BF%83%E5%8C%96%E6%9C%8D%E5%8A%A1%E5%99%A8">1 下载速度快, 不再依赖主干网, 中心化服务器</a></li>
<li><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs.html#2-%E5%AD%98%E5%82%A8%E7%A9%BA%E9%97%B4%E5%8F%98%E5%BE%97%E9%9D%9E%E5%B8%B8%E4%BE%BF%E5%AE%9C">2 存储空间变得非常便宜</a></li>
<li><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs.html#3-%E5%AE%89%E5%85%A8">3 安全</a></li>
<li><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs.html#4-%E5%BC%80%E6%94%BE">4 开放</a></li>
</ul>
</li>
<li><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs.html#ipfs%E7%9A%84%E7%94%A8%E9%80%94">IPFS的用途</a></li>
<li><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs.html#ipfs%E7%9A%84pow%E6%9C%BA%E5%88%B6">IPFS的POW机制</a></li>
<li><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs.html#ipfs%E5%AE%B6%E6%97%8F">IPFS家族</a>
<ul>
<li><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs.html#main-projects">Main Projects</a></li>
<li><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs.html#contributions">Contributions</a></li>
<li><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs.html#movements">Movements</a></li>
<li><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs.html#ipfs-%E4%B8%8E-filecoin">IPFS 与 Filecoin</a>
<ul>
<li><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs.html#ipfs%E6%95%B0%E6%8D%AE%E7%9A%84%E5%88%86%E5%8F%91%E5%92%8C%E5%AE%9A%E4%BD%8D%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE%E7%B1%BB%E4%BC%BChttp%E5%8D%8F%E8%AE%AE">IPFS：数据的分发和定位（数据传输协议，类似HTTP协议）</a></li>
<li><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs.html#filecoin-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E7%B1%BB%E4%BC%BC%E4%B8%80%E4%B8%AA%E4%BA%91%E5%AD%98%E5%82%A8">Filecoin: 数据存储（类似一个云存储）</a></li>
<li><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs.html#ipfs%E5%92%8Cfilecoin%E5%85%B1%E5%90%8C%E4%BE%9D%E8%B5%96libp2p%E9%A1%B9%E7%9B%AE">IPFS和Filecoin共同依赖libp2p项目。</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs.html#%E4%BD%BF%E7%94%A8ipfs%E7%9A%84%E5%BA%94%E7%94%A8">使用IPFS的应用</a></li>
<li><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs.html#ipfs%E7%BD%91%E7%BB%9C%E5%A6%82%E4%BD%95%E8%BF%90%E8%A1%8C">IPFS网络如何运行</a></li>
<li><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs.html#ipfs-nat-traversal">IPFS: NAT traversal</a></li>
<li><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs.html#bitswap">BitSwap</a></li>
<li><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs.html#ipfs%E9%9D%9Erust%E5%AE%9E%E7%8E%B0%E7%89%88%E6%9C%AC">IPFS非rust实现版本</a></li>
<li><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a></li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:45 UTC 2022 -->
<!--te-->
<h2 id="ipfs介绍"><a class="header" href="#ipfs介绍">IPFS介绍</a></h2>
<h3 id="1-什么是ipfs"><a class="header" href="#1-什么是ipfs">1 什么是IPFS</a></h3>
<p>星际文件系统(InterPlanetary File System). IPFS 是一个分布式的web, 点到点超媒体协议. 可以让我们的互联网速度更快, 更加安全, 并且更加开放. IPFS协议的目标是取代传统的互联网协议HTTP。</p>
<h3 id="2-为什么有ipfs"><a class="header" href="#2-为什么有ipfs">2 为什么有IPFS</a></h3>
<p>众所周知, 互联网是建立在HTTP协议上的. HTTP协议是个伟大的发明, 让我们的互联网得以快速发展.但是互联网发展到了今天HTTP逐渐出来了不足.</p>
<h4 id="http的中心化是低效的-并且成本很高"><a class="header" href="#http的中心化是低效的-并且成本很高">HTTP的中心化是低效的, 并且成本很高</a></h4>
<p>使用HTTP协议每次需要从中心化的服务器下载完整的文件(网页, 视频, 图片等), 速度慢, 效率低. 如果改用P2P的方式下载, 可以节省近60%的带宽. P2P将文件分割为小的块, 从多个服务器同时下载, 速度非常快.</p>
<h4 id="web文件经常被删除"><a class="header" href="#web文件经常被删除">Web文件经常被删除</a></h4>
<p>回想一下是不是经常你收藏的某个页面, 在使用的时候浏览器返回404(无法找到页面), http的页面平均生存周期大约只有100天. Web文件经常被删除(由于存储成本太高), 无法永久保存. IPFS提供了文件的历史版本回溯功能(就像git版本控制工具一样), 可以很容易的查看文件的历史版本, 数据可以得到永久保存</p>
<h4 id="中心化限制了web的成长"><a class="header" href="#中心化限制了web的成长">中心化限制了web的成长</a></h4>
<p>我们的现有互联网是一个高度中心化的网络. 互联网是人类的伟大发明, 也是科技创新的加速器. 各种管制将对这互联网的功能造成威胁, 例如: 互联网封锁, 管制, 监控等等.这些都源于互联网的中心化.而分布式的IPFS可以克服这些web的缺点.</p>
<h4 id="互联网应用高度依赖主干网"><a class="header" href="#互联网应用高度依赖主干网">互联网应用高度依赖主干网</a></h4>
<p>主干网受制于诸多因素的影响, 战争, 自然灾害, 互联网管制, 中心化服务器宕机等等, 都可能是我们的互联网应用中断服务. IPFS可以是互联网应用极大的降低互联网应用对主干网的依赖.</p>
<h3 id="3-ipfs的目标"><a class="header" href="#3-ipfs的目标">3 IPFS的目标</a></h3>
<p>IPFS不仅仅是为了加速web. 而是为了最终取代HTTP协议, 使互联网更加美好</p>
<h3 id="4-ipfs包含哪些内容"><a class="header" href="#4-ipfs包含哪些内容">4 IPFS包含哪些内容</a></h3>
<h4 id="ipfs是一个协议类似http协议"><a class="header" href="#ipfs是一个协议类似http协议">IPFS是一个协议，类似http协议</a></h4>
<ul>
<li>定义了基于内容的寻址文件系统</li>
<li>内容分发</li>
<li>使用的技术分布式哈希、p2p传输、版本管理系统</li>
<li>IPFS是一个文件系统</li>
</ul>
<p>有文件夹和文件 可挂载文件系统</p>
<h4 id="ipfs是一个web协议"><a class="header" href="#ipfs是一个web协议">IPFS是一个web协议</a></h4>
<ul>
<li>可以像http那样查看互联网页面</li>
<li>未来浏览器可以直接支持 ipfs:/ 或者 fs:/ 协议</li>
</ul>
<h4 id="ipfs是模块化的协议"><a class="header" href="#ipfs是模块化的协议">IPFS是模块化的协议</a></h4>
<ul>
<li>连接层：通过其他任何网络协议连接</li>
<li>路由层：寻找定位文件所在位置</li>
<li>数据块交换：采用BitTorrent技术</li>
</ul>
<h4 id="ipfs是一个p2p系统"><a class="header" href="#ipfs是一个p2p系统">IPFS是一个p2p系统</a></h4>
<ul>
<li>世界范围内的p2p文件传输网络</li>
<li>分布式网络结构</li>
<li>没有单点失效问题</li>
</ul>
<h4 id="ipfs天生是一个cdn"><a class="header" href="#ipfs天生是一个cdn">IPFS天生是一个CDN</a></h4>
<ul>
<li>文件添加到IPFS网络，将会在全世界进行CDN加速</li>
<li>bittorrent的带宽管理</li>
</ul>
<h4 id="ipfs拥有命名服务"><a class="header" href="#ipfs拥有命名服务">IPFS拥有命名服务</a></h4>
<ul>
<li>IPNS：基于SFS（自认证系统）命名体系</li>
<li>可以和现有域名系统绑定</li>
</ul>
<h2 id="ipfs如何工作"><a class="header" href="#ipfs如何工作">IPFS如何工作</a></h2>
<ol>
<li>IPFS为每一个文件分配一个独一无二的哈希值(文件指纹: 根据文件的内容进行创建), 即使是两个文件内容只有1个比特的不相同, 其哈希值也是不相同的.所以IPFS是基于文件内容进行寻址, 而不像传统的HTTP协议一样基于域名寻址.</li>
<li>IPFS在整个网络范围内去掉重复的文件, 并且为文件建立版本管理, 也就是说每一个文件的变更历史都将被记录(这一点类似版本控制工具git, svn等), 可以很容易个回到文件的历史版本查看数据.</li>
<li>当查询文件的时候, IPFS网络根据文件的哈希值(全网唯一)进行查找. 由于每个文件的哈希值全网唯一, 查询将很容易进行.</li>
<li>如果仅仅使用哈希值来区分文件的话, 会给传播造成困难, 因为哈希值不容易记忆, 就像ip地址一样不容易记忆, 于是人类发明的域名. IPFS利用IPNS将哈希值映射为容易记的名字</li>
<li>每个节点除了存储自己需要的数据, 还存储了一张哈希表, 用来记录文件存储所在的位置. 用来进行文件的查询下载.</li>
</ol>
<h2 id="ipfs如何解决中心化服务器缺点"><a class="header" href="#ipfs如何解决中心化服务器缺点">IPFS如何解决中心化服务器缺点</a></h2>
<h3 id="1-下载速度快-不再依赖主干网-中心化服务器"><a class="header" href="#1-下载速度快-不再依赖主干网-中心化服务器">1 下载速度快, 不再依赖主干网, 中心化服务器</a></h3>
<p>整个IPFS系统是一个分布式的文件存储系统, 那么在下载相关数据的时候, 将从多个节点同时下载, 相比于HTTP从中心服务器的下载速度要快很多, 大家都用过P2P下载(比如: 迅雷, BitTorrent), IPFS下载过程跟这个类似.</p>
<h3 id="2-存储空间变得非常便宜"><a class="header" href="#2-存储空间变得非常便宜">2 存储空间变得非常便宜</a></h3>
<p>由于IPFS使用的是区块链技术, 利用 Filecoin(也就是挖矿)来激励矿工分享自己的硬盘, 并且IFPS从全网去掉了冗余存储(从整个网络空间考虑, 这将大大节省网络存储空间), 将来的IPFS存储将会变得非常便宜(与我们现在的云盘, 各种中心化的CND相比较).</p>
<h3 id="3-安全"><a class="header" href="#3-安全">3 安全</a></h3>
<p>中心化服务器目前很难抵挡DDoS攻击, 当大量的访问请求从四面八方涌来, 中心化的服务器几乎会在一瞬间瘫痪, 巨大的访问量随时可能造成服务器宕机. IPFS天生就拥有抵挡这种攻击的能力. 因为所有的访问将会被分散到不同的节点. 甚至攻击者自己也是节点之一. 某种程度上讲, IPFS甚至能抵挡量子计算的攻击.</p>
<h3 id="4-开放"><a class="header" href="#4-开放">4 开放</a></h3>
<p>众所周知, 比特币是一种去中心化, 匿名的数据货币, 这些特性使得比特币无法被管制, 交易无法篡改. IPFS同样, 由于是建立在去中心化的分布式网络上的, 所以IFPS很难被中心化管理, 限制. 互联网将更加开放.</p>
<h2 id="ipfs的用途"><a class="header" href="#ipfs的用途">IPFS的用途</a></h2>
<blockquote>
<p>IPFS主要解决现有中心化服务器中的数据存储问题。它能够极大的降低数据存储的成本,提升数据下载速度。</p>
</blockquote>
<blockquote>
<p>那么凡是需要优化数据存储的地方几乎都可以使用IPFS来提升效率</p>
</blockquote>
<blockquote>
<p>下面是一张保存在ipfs网络的图片：</p>
</blockquote>
<p><img src="https://ipfs.io/ipfs/QmdDTor6dWzknFJPJuhJgrUYqd56WkFXYAxyxpEY7kUrEb" alt="" /></p>
<ul>
<li>在 /ipfs 和 /ipns 下面挂载全球文件系统：就是说我们所有的文件都可以存到上面.</li>
<li>挂载个人同步的文件夹, 可以自动进行版本管理, 自动备份. 也就意味着未来我们将拥有无限空间的网盘, 不用担心数据丢失, 不用担心隐私泄露(非对称加密). 国外的dropbox, 跟IPFS云盘相比, 都将变得微不足道 。</li>
<li>作为加密文件和数据共享系统。IPFS天生视乎就具备这样的能力, 文件加密, 数据共享, 都是小菜一碟.</li>
<li>作为带版本控制的软件包管理系统.</li>
<li>作为虚拟机的根文件系统</li>
<li>作为利用管理程序, 把IPFS作为虚拟机的引导文件系统：在线操作系统</li>
<li>作为数据库：应用可以直接操作IPFS的Merkle DAG数据结构, 并且可以使用IPFS的版本控制, 缓存. 试想一下我们的数据库直接存在IPFS的文件系统是什么体验? 自动备份, 永不丢失, 安全加密, 无限空间, 高速连接。</li>
<li>作为加密通讯平台，谁都别想窃听消息通信</li>
<li>作为加密CDN, 作为web的CDN, CDN功能全包.</li>
<li>永久web, 不存在不能访问的链接, 跟 404 说 byebye.</li>
</ul>
<h2 id="ipfs的pow机制"><a class="header" href="#ipfs的pow机制">IPFS的POW机制</a></h2>
<h2 id="ipfs家族"><a class="header" href="#ipfs家族">IPFS家族</a></h2>
<blockquote>
<p><a href="https://protocol.ai/work/">Work | Protocol Labs</a></p>
</blockquote>
<h3 id="main-projects"><a class="header" href="#main-projects">Main Projects</a></h3>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/image-20220618215731222.png" alt="image-20220618215731222" /></p>
<h3 id="contributions"><a class="header" href="#contributions">Contributions</a></h3>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/image-20220618220109640.png" alt="image-20220618220109640" /></p>
<h3 id="movements"><a class="header" href="#movements">Movements</a></h3>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/image-20220618220532130.png" alt="image-20220618220532130" /></p>
<h3 id="ipfs-与-filecoin"><a class="header" href="#ipfs-与-filecoin">IPFS 与 Filecoin</a></h3>
<h4 id="ipfs数据的分发和定位数据传输协议类似http协议"><a class="header" href="#ipfs数据的分发和定位数据传输协议类似http协议">IPFS：数据的分发和定位（数据传输协议，类似HTTP协议）</a></h4>
<ul>
<li>传输：数据在节点之间进行传输</li>
<li>定位：寻址，发现数据的存储位置</li>
<li>存储：自己提供存储（可以保证存储的安全性），其它节点不保证数据存储的安全性</li>
<li>用户：下载数据免费，自己提供服务器，自己搭建节点</li>
<li>存储内容：只存储节点自己感兴趣的内容</li>
</ul>
<h4 id="filecoin-数据存储类似一个云存储"><a class="header" href="#filecoin-数据存储类似一个云存储">Filecoin: 数据存储（类似一个云存储）</a></h4>
<ul>
<li>存储：付费存储，用户付费，矿工和Filecoin网络保证存储的安全性</li>
<li>下载：付费下载，用户付费，矿工负责发送数据</li>
<li>用户：不需要自己提供存储，也不需要自己提供节点</li>
<li>存储内容：收费存储一切</li>
</ul>
<h4 id="ipfs和filecoin共同依赖libp2p项目"><a class="header" href="#ipfs和filecoin共同依赖libp2p项目">IPFS和Filecoin共同依赖libp2p项目。</a></h4>
<blockquote>
<p>Filecoin是IPFS的激励层，二者互补形式一对协议。为我们的互联网提供了很好的基础设施。</p>
</blockquote>
<p>了解上述的基本内容后：</p>
<ul>
<li>如果开发者仅仅想要的是一个安全、快速的云存储，那么选择Filecoin即可。</li>
<li>如果开发者除了数据存储需求，还需要分发数据，那么选择IPFS即可。</li>
<li>如果开发者既有数据存储需求，又有数据的分发需求，那么可以单独选择IPFS，也可以IPFS+Filecoin一起。</li>
</ul>
<blockquote>
<p>注意：IPFS可以做Filecoin的事情，存储，而filecoin并不能做IPFS的事情，数据传输</p>
</blockquote>
<h2 id="使用ipfs的应用"><a class="header" href="#使用ipfs的应用">使用IPFS的应用</a></h2>
<ul>
<li><del><a href="https://github.com/AKASHAorg/Community/releases">akasha</a>： 基于以太坊和IPFS的社交网络</del></li>
<li><del>Alexandria：去中心化的内容发布平台</del></li>
<li><a href="https://github.com/MichaelMure/Arbore">Arbore</a>：朋友之间的文件共享系统–相信很快就可以抛弃某度的云盘了</li>
<li><a href="https://github.com/dtube/dtube">dtube</a>：利用IPFS作为存储的视频分享网站</li>
<li><a href="https://github.com/whyrusleeping/git-ipfs-rehost">git-ipfs-rehost</a>：可以把github上的项目存储到IPFS上</li>
<li><a href="https://github.com/ipfs-search/ipfs-search">ipfs-search</a>：基于IFPS的搜索引擎</li>
<li><a href="https://github.com/ipfs-shipyard/ipfs-share-files">ipfs-share</a>：基于IFPS的文件分享</li>
<li><a href="http://ipfs.pics/">ipfs.pics</a>：基于IFPS的图片分享网站</li>
<li><a href="https://github.com/orbitdb/orbit">Orbit</a>：基于IFPS的分布式聊天工具</li>
<li><a href="https://github.com/BusterLabs/Partyshare">Partyshare</a>：一个简单的文件共享系统</li>
<li>http://computes.io：基于IPFS的分布式计算机（这个牛，把世界上的计算资源收集起来，构建一个巨大的分布式计算机）</li>
<li><a href="https://github.com/OpenBazaar?type=source">OpenBazaar</a>：openbazaar是一个去中心化的淘宝，口号是“买卖自由/Buy and Sell
Freely”，问题是一旦用户停止运行软件，商店就下线了，借助于IPFS，openbazaar2.0 打造一个离线商店。</li>
<li>Ubuntu：著名的linux发行版本Ubuntu正在计算把发行版本转移到IPFS上来，目前正在讨论方案。</li>
</ul>
<blockquote>
<p>更多可在这里查看：
<a href="https://ipfs.io/ipfs/QmUQs8yuYbQ7VbMpRoL6RFz4dMuK4RqCCmPmJc5fK7P4Yc/">Awesome IPFS</a></p>
</blockquote>
<blockquote>
<p>一些过期项目：
<a href="https://github.com/ipfs-inactive?type=source">IPFS Inactive repositories</a></p>
</blockquote>
<h2 id="ipfs网络如何运行"><a class="header" href="#ipfs网络如何运行">IPFS网络如何运行</a></h2>
<h2 id="ipfs-nat-traversal"><a class="header" href="#ipfs-nat-traversal">IPFS: NAT traversal</a></h2>
<h2 id="bitswap"><a class="header" href="#bitswap">BitSwap</a></h2>
<h2 id="ipfs非rust实现版本"><a class="header" href="#ipfs非rust实现版本">IPFS非rust实现版本</a></h2>
<h2 id="参考资源-35"><a class="header" href="#参考资源-35">参考资源</a></h2>
<ul>
<li><a href="https://www.zhihu.com/column/ipfsguide">IPFS指南 - 知乎</a></li>
<li><a href="https://github.com/rs-ipfs/rust-ipfs">rs-ipfs/rust-ipfs: The InterPlanetary File System (IPFS), implemented in Rust.</a></li>
<li><a href="https://opencollective.com/rs-ipfs">Rust IPFS - Open Collective</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/33170031">IPFS网络是如何运行的(p2p网络) - 知乎</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/33057094">IPFS: NAT traversal(NAT穿越) - 知乎</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/33148036">IPFS: BitSwap协议(数据块交换) - 知乎</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/34158682">IPFS非rust实现版本</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="利用ipfs构建自己的去中心化分布式网站"><a class="header" href="#利用ipfs构建自己的去中心化分布式网站">利用IPFS构建自己的去中心化分布式网站</a></h1>
<!--ts-->
<ul>
<li><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs_website.html#%E5%88%A9%E7%94%A8ipfs%E6%9E%84%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E5%8E%BB%E4%B8%AD%E5%BF%83%E5%8C%96%E5%88%86%E5%B8%83%E5%BC%8F%E7%BD%91%E7%AB%99">利用IPFS构建自己的去中心化分布式网站</a>
<ul>
<li><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs_website.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a></li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:47 UTC 2022 -->
<!--te-->
<h2 id="参考资源-36"><a class="header" href="#参考资源-36">参考资源</a></h2>
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/32869413">如何基于IPFS建一个静态网站 - 知乎</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/32682117">如何在IPFS里面上传一张图片 - 知乎</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ipfspubsub功能使用"><a class="header" href="#ipfspubsub功能使用">IPFS：pubsub功能使用</a></h1>
<!--ts-->
<ul>
<li><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs_pubsub.html#ipfspubsub%E5%8A%9F%E8%83%BD%E4%BD%BF%E7%94%A8">IPFS：pubsub功能使用</a>
<ul>
<li><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs_pubsub.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a></li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:46 UTC 2022 -->
<!--te-->
<h2 id="参考资源-37"><a class="header" href="#参考资源-37">参考资源</a></h2>
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/36502849">IPFS: pubsub功能的使用 - 知乎</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ipfs伴侣插件使用"><a class="header" href="#ipfs伴侣插件使用">IPFS伴侣插件使用</a></h1>
<!--ts-->
<ul>
<li><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs_companion.html#ipfs%E4%BC%B4%E4%BE%A3%E6%8F%92%E4%BB%B6%E4%BD%BF%E7%94%A8">IPFS伴侣插件使用</a>
<ul>
<li><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs_companion.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a></li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:46 UTC 2022 -->
<!--te-->
<h2 id="参考资源-38"><a class="header" href="#参考资源-38">参考资源</a></h2>
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/35566466">【应用】IPFS伴侣浏览器插件V2.2.0版本升级的重大意义 - 知乎</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="基于ipfs与ngrok构建网关"><a class="header" href="#基于ipfs与ngrok构建网关">基于IPFS与Ngrok构建网关</a></h1>
<!--ts-->
<ul>
<li><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs_ngrok.html#%E5%9F%BA%E4%BA%8Eipfs%E4%B8%8Engrok%E6%9E%84%E5%BB%BA%E7%BD%91%E5%85%B3">基于IPFS与Ngrok构建网关</a>
<ul>
<li><a href="layer5_ecosystem/5_open_source/2_network/network/ipfs/ipfs_ngrok.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a></li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:46 UTC 2022 -->
<!--te-->
<h2 id="参考资源-39"><a class="header" href="#参考资源-39">参考资源</a></h2>
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/35151037">【应用】（入门）基于IPFS和Ngrok构建自维护资源网关 - 知乎</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/35951053">【应用】（进阶）基于IPFS和Ngrok构建自维护资源网关 - 知乎</a> </li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="网络开发"><a class="header" href="#网络开发">网络开发</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="基于rust尝试webassembly"><a class="header" href="#基于rust尝试webassembly">基于Rust尝试WebAssembly</a></h1>
<!--ts-->
<ul>
<li><a href="layer5_ecosystem/5_open_source/2_network/web/webassembly_try.html#%E5%9F%BA%E4%BA%8Erust%E5%B0%9D%E8%AF%95webassembly">基于Rust尝试WebAssembly</a>
<ul>
<li><a href="layer5_ecosystem/5_open_source/2_network/web/webassembly_try.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a>
<ul>
<li><a href="layer5_ecosystem/5_open_source/2_network/web/webassembly_try.html#%E5%85%B3%E4%BA%8E%E5%BA%B7%E5%A8%81%E6%B8%B8%E6%88%8Fconways-game">关于康威游戏(Conway’s Game)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:48 UTC 2022 -->
<!--te-->
<h2 id="参考资源-40"><a class="header" href="#参考资源-40">参考资源</a></h2>
<ul>
<li><a href="https://rustwasm.github.io/docs/book/introduction.html">Introduction - Rust and WebAssembly</a></li>
<li><a href="https://web.archive.org/web/20220628021752/https://mp.weixin.qq.com/s/pEvCIZUmQkxBpgfG1IjWeQ">Rust和WebAssembly初体验</a></li>
<li><a href="https://web.archive.org/web/20220628021759/https://mp.weixin.qq.com/s/yZ-oeM8gvqaDLxbyHMq3cQ">安装Rust和WebAssembly工具链和helloworld</a></li>
<li><a href="https://web.archive.org/web/20220628021820/https://mp.weixin.qq.com/s/H-hXqMJ34rWgSGZU_WBBTA">Rust Assembly之实现康威生命游戏</a></li>
<li><a href="https://web.archive.org/web/20220628021845/https://mp.weixin.qq.com/s/RINEWLkLOXEAbzw_ZuZiyA">康威游戏之优化</a></li>
<li><a href="https://web.archive.org/web/20220628021902/https://mp.weixin.qq.com/s/Y_PL_rhLzdv4yXFNjrRNgw">Web Assembly之测试康威游戏代码</a></li>
<li><a href="https://web.archive.org/web/20220628021918/https://mp.weixin.qq.com/s/8GcasoM-K-T9EXY7LMuKnQ">Web Assembly之调试方法</a></li>
<li><a href="https://web.archive.org/web/20220628063042/https://mp.weixin.qq.com/s/3nn8on2ubRccgZxM8h2TJQ">Web Assembly康威游戏添加交互</a></li>
<li><a href="https://web.archive.org/web/20220628021938/https://mp.weixin.qq.com/s/t00GVCtN6iDKqlCi7zcA1A">Web Assembly之性能分析</a></li>
</ul>
<h3 id="关于康威游戏conways-game"><a class="header" href="#关于康威游戏conways-game">关于康威游戏(Conway’s Game)</a></h3>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life">Conway’s Game of Life - Wikipedia</a></li>
<li><a href="https://playgameoflife.com/">Play John Conway’s Game of Life</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/261431820">学术干货 | Conway’s Game of Life 生命游戏的建筑设计应用 - 知乎</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><h1 id="音视频处理"><a class="header" href="#音视频处理">音视频处理</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="游戏与图像处理"><a class="header" href="#游戏与图像处理">游戏与图像处理</a></h1>
<div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><h1 id="rust与其他编程语言"><a class="header" href="#rust与其他编程语言">Rust与其他编程语言</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="科学艺术研究"><a class="header" href="#科学艺术研究">科学艺术研究</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="其他工具"><a class="header" href="#其他工具">其他工具</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="安全参考"><a class="header" href="#安全参考">安全参考</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="商业观察"><a class="header" href="#商业观察">商业观察</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="区块链"><a class="header" href="#区块链">区块链</a></h1>
<!--ts-->
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/blockchain.html#%E5%8C%BA%E5%9D%97%E9%93%BE">区块链</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/blockchain.html#layers">Layers</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/blockchain.html#osi%E7%BD%91%E7%BB%9C%E4%B8%83%E5%B1%82%E6%A8%A1%E5%9E%8B">OSI网络七层模型</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/blockchain.html#%E6%95%B0%E6%8D%AE%E5%B1%82">数据层</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/blockchain.html#%E7%BD%91%E7%BB%9C%E5%B1%82">网络层</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/blockchain.html#%E5%85%B1%E8%AF%86%E5%B1%82">共识层</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/blockchain.html#%E5%B7%A5%E4%BD%9C%E9%87%8F%E8%AF%81%E6%98%8E%E5%85%B1%E8%AF%86%E6%9C%BA%E5%88%B6-pow-">工作量证明共识机制（ PoW ）</a></li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/blockchain.html#%E6%BF%80%E5%8A%B1%E5%B1%82">激励层</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/blockchain.html#%E5%90%88%E7%BA%A6%E5%B1%82">合约层</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/blockchain.html#%E5%BA%94%E7%94%A8%E5%B1%82">应用层</a></li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/blockchain.html#blockchains">Blockchains</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/blockchain.html#blockchain-frameworks">Blockchain Frameworks</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/blockchain.html#cross-chain">Cross-Chain</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/blockchain.html#virtual-machines">Virtual Machines</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/blockchain.html#general-purpose-consensus">General-Purpose Consensus</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/blockchain.html#p2p-network-libraries">P2P Network Libraries</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/blockchain.html#cryptography">Cryptography</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/blockchain.html#layer2">Layer2</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/blockchain.html#dapps">Dapps</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/blockchain.html#other">Other</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/blockchain.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/blockchain.html#online-book">online-book</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/blockchain.html#fragment">fragment</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/blockchain.html#local">local</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:52 UTC 2022 -->
<!--te-->
<h2 id="layers"><a class="header" href="#layers">Layers</a></h2>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/df67d027097043d3d1c8b180558bb3cc.png" alt="img" /></p>
<h3 id="osi网络七层模型"><a class="header" href="#osi网络七层模型">OSI网络七层模型</a></h3>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/640.png" alt="图片" /></p>
<blockquote>
<p>下图详细说明了各层作用</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/640-20220621104210621.png" alt="图片" /></p>
<p>实际应用过程中，五层协议结构里面是没有表示层和会话层的。应该说它们和应用层合并了。</p>
<h3 id="数据层"><a class="header" href="#数据层">数据层</a></h3>
<p>区块链是通过区块（block）存储数据，每个数据节点之间都包含所有数据，即分布式账本。每个区块都包括了区块的大小、区块头、区块所包含的交易数量及部分或所有的近期新交易。</p>
<p>数据层主要是解决这些数据以什么样的形式组合在一起，形成一个有意义的区块。</p>
<p>区块链的数据结构中包括两种哈希指针，它们均是不可篡改特性的数据结构基础。</p>
<ol>
<li>
<p>一个是形成“区块+链”（block+chain）的链状数据结构</p>
</li>
<li>
<p>另一个是哈希指针形成的梅克尔树（如下图所示）。</p>
</li>
</ol>
<div id="admonition-用处" class="admonition tip">
<div class="admonition-title">
<p>用处</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/blockchain.html#admonition-用处"></a></p>
</div>
<div>
<p>链状数据结构使得对某一区块内的数据的修改很容易被发现；
梅克尔树的结构起类似作用，使得对其中的任何交易数据的修改很容易被发现。</p>
</div>
</div>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/9b432d8f0369921e21ac33f14c2bdeda.png" alt="img" /></p>
<h3 id="网络层"><a class="header" href="#网络层">网络层</a></h3>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/b93a9b3345d59f5e13c0ec662a46f05a.png" alt="img" /></p>
<p>区块链使用的是去中心化的网络架构，没有中心化服务器，依靠用户点对点交换信息，主要包括 P2P 组网机制、数据传播和验证机制。</p>
<div id="admonition-p2p特性" class="admonition tip">
<div class="admonition-title">
<p>P2P特性</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/blockchain.html#admonition-p2p特性"></a></p>
</div>
<div>
<p>正是由于节点的 P2P 特性，数据传输是分散在各个节点之间进行的，部分节点或网络遭到破坏对其他部分影响很小。</p>
</div>
</div>
<p>节点指的是区块链客户端软件（比如比特币客户端、以太坊客户端），一般分为全节点和轻节点，全节点包含了所有区块链的区块数据，轻节点仅包括与自己相关的数据。</p>
<h3 id="共识层"><a class="header" href="#共识层">共识层</a></h3>
<p>共识层的功能是让高度分散的节点在 P2P 网络中，针对区块数据的有效性达成共识，决定了谁可以将新的区块添加到主链中（挖矿机制）。</p>
<h4 id="工作量证明共识机制-pow-"><a class="header" href="#工作量证明共识机制-pow-">工作量证明共识机制（ PoW ）</a></h4>
<div id="admonition-pow" class="admonition info">
<div class="admonition-title">
<p>PoW</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/blockchain.html#admonition-pow"></a></p>
</div>
<div>
<p>矿工需要将网络中未确认的交易按梅克尔树组装成候选区块，在候选区块的头部有一个 32位的随机数区域，矿工需要反复调整随机数并计算，目标是让整个区块的哈希值小于一个“目标值”，谁先完成这个目标谁就有权力将交易记录到区块链分布式账本中并获得一定的奖励。</p>
</div>
</div>
<p>挖矿的过程比拼的就是各个矿工节点的算力，可以变相认为谁的算力高谁的工作量就高，就有权力记账和获得奖励。</p>
<ul>
<li>比特币使用的是 PoW 机制；</li>
<li>以太坊开始使用的是 PoW 机制，后来改成了 PoS 机制，原因是该机制交易速度更快、资源消耗更低。</li>
</ul>
<p>这种挖矿计算是非对称的，挖矿可能需要经过许多次哈希计算，而要验证的确找到有效的随机数，只需要一次计算就可以，因此其他节点能够很快验证交易是否已经被记入账本。</p>
<h3 id="激励层"><a class="header" href="#激励层">激励层</a></h3>
<p>激励层的功能主要是提供一些激励措施，鼓励节点参与记账，保证整个网络的安全运行。通过共识机制胜出取得记账权的节点能获得一定的奖励。</p>
<p>目前比特币的激励措施是新区块产生时系统会奖励矿工一定的比特币（系统产生的新比特币，也会记录在分布式账本，来源地址是 0，因此整个过程叫挖矿），奖励最初是 50 个比特币，每四年减半一次，分别为 25 个、12.5
个，以此类推。当比特币数量达到 2100 万枚的上限后（2140 年），激励就全靠交易的手续费了。以太坊交易是靠 gas 手续费来激励矿工。</p>
<h3 id="合约层"><a class="header" href="#合约层">合约层</a></h3>
<p>合约层封装了各类脚本、算法和智能合约，使得区块链具有可编程能力。例如，<strong>比特币的脚本</strong>中就规定了比特币的交易方式和过程中的种种细节，不过这种脚本使用不够便捷且不是图灵完备的。</p>
<p>以太坊提出了智能合约的解决方案，提供了一种图灵完备的高级编程语言来编写智能合约，并使智能合约能够运行在分布式的以太坊虚拟机 EVM 上。</p>
<div id="admonition-智能合约" class="admonition tip">
<div class="admonition-title">
<p>智能合约</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/blockchain.html#admonition-智能合约"></a></p>
</div>
<div>
<p>智能合约就是存储在区块链上的一段代码，它们可以被区块链上的交易所触发，触发后，这段代码可以从区块链上读取数据或者向区块链上写入数据。</p>
</div>
</div>
<p>区块链系统（比特币、以太坊）可以认为是一个分布式状态机，通过交易触发合约（脚本、智能合约）运行来改变状态机的状态。</p>
<h3 id="应用层"><a class="header" href="#应用层">应用层</a></h3>
<p>应用层封装了区块链的各种应用场景，具体应用可参见<strong>90+ #Ethereum Apps You Can Use Right Now</strong>。</p>
<p>以下为一笔比特币转账交易的过程</p>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/e6b83641ed6467b392d04a3e6fe69492.png" alt="img" /></p>
<h2 id="blockchains"><a class="header" href="#blockchains">Blockchains</a></h2>
<ul>
<li><a href="https://developer.aleo.org/aleo/getting_started/overview">Aleo</a>. Leo is a rust flavoured zk language.</li>
<li><a href="https://alephzero.org/">Aleph Zero</a>. DAG, PoS, snark smart contracts (substrate based).</li>
<li><a href="https://anoma.network/">Anoma.network</a>. PoS blockchain with privacy.</li>
<li><a href="https://github.com/be-cash/bitcoin-cash">Bitcoin Cash</a>. A library for creating and parsing Bitcoin Cash trasactions.</li>
<li><a href="https://github.com/cryptape/cita">CITA</a>. A high performance blockchain kernel for enterprise users.</li>
<li><a href="https://github.com/CodeChain-io/codechain">CodeChain</a>. Programmable multi-asset chain.</li>
<li><a href="https://concordium.com/">Concordium</a>. Privacy centric (zk) PoS chain, yet with built in identities and rust smart
contracts.</li>
<li><a href="https://github.com/Conflux-Chain/conflux-rust">Conflux</a>. The Rust implementation of Conflux protocol.</li>
<li><a href="https://github.com/darwinia-network/darwinia">Darwinia</a>. Relay chain of Darwinia Network, can connect to Polkadot as
parachain in Polkadot Model.</li>
<li><a href="https://dusk.network/">Dusk.network</a>. Privacy PoS using zk (plonk).</li>
<li><a href="https://github.com/enigmampc/enigma-core">Enigma</a> secures the decentralized web.</li>
<li><a href="https://elrond.com/">Elrond</a>. Elrond (EGOLD( - scalable and usable blockchain, written is Rust and has smart
contracts in Rust.</li>
<li><a href="https://github.com/exonum/exonum">Exonum</a>. An extensible open-source framework for creating private/permissioned
blockchain applications.</li>
<li><a href="https://github.com/ChainSafe/forest">Forest</a>. An implementation of Filecoin written in Rust.</li>
<li><a href="https://github.com/FuelLabs/fuel-core">Fuel</a>. Rust full node implementation of the Fuel v2 protocol.</li>
<li><a href="https://github.com/gear-tech/gear">Gear</a>. Computational component of Polkadot network.</li>
<li><a href="https://github.com/mimblewimble/grin">Grin</a>. Minimal implementation of the MimbleWimble protocol.</li>
<li><a href="https://github.com/holochain/holochain">Holochain</a>. The core Holochain framework written in rust, a container, and
hdk-rust library for writing Zomes.</li>
<li><a href="https://github.com/HuobiGroup/huobi-chain">Huobi Chain</a>. The next generation high performance public chain for
financial infrastructure.</li>
<li><a href="https://github.com/interledger-rs/interledger-rs">Interledger</a>. An easy-to-use, high-performance Interledger
implementation written in Rust.</li>
<li><a href="https://github.com/Internet-of-People/iop-rs">Internet of People</a>. Decentralized software stack that provides the
building blocks and tools to support a decentralized society.</li>
<li><a href="https://github.com/libra/libra">Libra</a>. Global currency and financial infrastructure that empowers billions of
people.</li>
<li><a href="https://github.com/sigp/lighthouse">Lighthouse</a>. Fast and secure Ethereum 2.0 client.</li>
<li><a href="https://github.com/nearprotocol/nearcore">NEAR</a>. NEAR Protocol - scalable and usable blockchain.</li>
<li><a href="https://github.com/nervosnetwork/ckb">Nervos CKB</a>. Nervos CKB is a public permissionless blockchain, the common
knowledge layer of Nervos network.</li>
<li><a href="https://github.com/nymtech/nym">NYM</a>. Selective privacy via a mixnet preventing metadata analysis.</li>
<li><a href="https://github.com/nomic-io/nomic">Nomic</a>. Nomic is a high-performance Bitcoin sidechain which is part of the Cosmos
network.</li>
<li><a href="https://github.com/ChainSafe/mina-rs">Mina Protocol</a>. A rust implementation of the mina succinct blockchain.</li>
<li><a href="https://mirprotocol.org/">Mir Protocol</a>. A succinct blockchain powered by zero-knowledge proofs. (plonk based)</li>
<li><a href="https://github.com/openethereum/openethereum">OpenEthereum</a>. The Ethereum Rust client</li>
<li><a href="https://github.com/paritytech/parity-bitcoin">Parity Bitcoin</a>. The Parity Bitcoin client.</li>
<li><a href="https://github.com/paritytech/parity-ethereum">Parity Ethereum</a>. The fast, light, and robust EVM and WASM client.</li>
<li><a href="https://github.com/paritytech/parity-zcash">Parity Zcash</a>. Rust implementation of Zcash protocol.</li>
<li><a href="https://github.com/paritytech/polkadot">Polkadot</a>. Polkadot Node Implementation.</li>
<li><a href="https://github.com/PolymathNetwork/Polymesh">Polymesh</a>. The Polymesh blockchain (built on Substrate) is an identity
orientated chain for the issuance, lifecycle management and settlement of regulated securities.</li>
<li><a href="https://github.com/QANplatform/its_alive">QAN</a>. Post-quantum blockchain.</li>
<li><a href="https://github.com/radixdlt/radixdlt-scrypto">Radix</a>. Sharded smart contract DeFi platform.</li>
<li><a href="https://github.com/Setheum-Labs/Setheum">Setheum</a>. SETHEUM : “Secure Evergreen Truthful Heterogeneous Economically
Unbiased Market” is an Ethical DeFi-friendly Blockchain (built on Substrate) working on achieving mass adoption,
security, scalability, affordability, inclusivity and ethical DeFi Governance.</li>
<li><a href="https://github.com/paritytech/shasper">Shasper</a>. Parity Shasper beacon chain implementation using the Substrate
framework.</li>
<li><a href="https://github.com/solana-labs/solana">Solana</a>. Blockchain Rebuilt for Scale.</li>
<li><a href="https://github.com/blockstack/stacks-blockchain">Stacks 2.0</a>. Proof of Transfer blockchain from Blockstack.</li>
<li><a href="https://github.com/tari-project">Tari</a>. The Tari Digital Assets Protocol.</li>
<li><a href="https://github.com/informalsystems/tendermint-rs">Tendermint</a>. Tendermint is a high-performance blockchain consensus
engine for Byzantine fault tolerant applications.</li>
<li><a href="https://github.com/witnet/witnet-rust">Witnet</a>. Open source implementation of Witnet decentralized oracle network
protocol in Rust.</li>
<li><a href="https://github.com/xx-labs/xxchain">xx-network</a>. Post-quantum blockchain, mixnet privacy preventing metadata
analysis. (Substrate rust+go)</li>
<li><a href="https://github.com/ZcashFoundation/zebra">Zebra</a>. An ongoing Rust implementation of a Zcash node.</li>
<li><a href="https://github.com/LayerXcom/zero-chain">Zero-chain</a>. A privacy-preserving blockchain on Substrate.</li>
</ul>
<h2 id="blockchain-frameworks"><a class="header" href="#blockchain-frameworks">Blockchain Frameworks</a></h2>
<ul>
<li><a href="https://github.com/paritytech/substrate">Substrate</a>. The platform for blockchain innovators.</li>
<li><a href="https://github.com/stellar/slingshot">slingshot</a>. A new blockchain architecture under active development, with a
strong focus on scalability, privacy and safety.</li>
<li><a href="https://github.com/tendermint/rust-abci">Tendermint ABCI</a>. Tendermint ABCI server, written in the Rust programming
language.</li>
<li><a href="https://github.com/nomic-io/orga">Orga</a>. A high-performance state machine engine designed for Tendermint-based
blockchain applications.</li>
</ul>
<h2 id="cross-chain"><a class="header" href="#cross-chain">Cross-Chain</a></h2>
<ul>
<li><a href="https://comit.network/">Comit</a> is an open protocol facilitating trustless cross-blockchain applications.</li>
<li><a href="https://github.com/informalsystems/ibc-rs">IBC</a>. Rust implementation of Cosmos’ Interblockchain Communication
Protocol
(IBC).</li>
</ul>
<h2 id="virtual-machines"><a class="header" href="#virtual-machines">Virtual Machines</a></h2>
<ul>
<li><a href="https://github.com/nervosnetwork/ckb-vm">CKB-VM</a>. RISC-V virtual machine.</li>
<li><a href="https://www.cosmwasm.com">CosmWasm</a>. Multi-chain smart contract platform built for the Cosmos ecosystem.</li>
<li><a href="https://github.com/paritytech/parity-ethereum/tree/master/evmbin">EVM Parity</a>. Parity implementation of EVM.</li>
<li><a href="https://github.com/FuelLabs/fuel-vm">FuelVM</a>
FuelVM interpreter in Rust.</li>
<li><a href="https://github.com/lunatic-solutions/lunatic">Lunatic</a>. Erlang-inspired runtime for WebAssembly.</li>
<li><a href="https://github.com/maticnetwork/miden">Polygon Miden</a>. SNARK based VM.</li>
<li><a href="https://github.com/spacemeshos/svm">SVM</a>
Spacemesh Virtual Machine.</li>
<li><a href="https://github.com/paritytech/wasmi">Wasmi</a>. WebAssembly interpreter.</li>
<li><a href="https://wasmer.io/">Wasmer</a>. A convenient Rust wrapper over WebAssembly backends.</li>
<li><a href="https://github.com/CraneStation/wasmtime">Wasmtime</a>. Standalone JIT-style runtime for WebAssembly, using Cranelift.</li>
<li><a href="https://github.com/matter-labs/zinc">Zinc</a>. Zinc zk smart contract language.</li>
</ul>
<h2 id="general-purpose-consensus"><a class="header" href="#general-purpose-consensus">General-Purpose Consensus</a></h2>
<ul>
<li><a href="https://github.com/pingcap/raft-rs">Raft</a>. Raft distributed consensus algorithm implemented in Rust.</li>
<li><a href="https://github.com/poanetwork/hbbft">Honey Badger</a>. An implementation of the paper “Honey Badger of BFT Protocols” in
Rust.</li>
<li><a href="https://github.com/MystenLabs/narwhal">Narwhal</a>. The consensus layer used by Sui.</li>
</ul>
<h2 id="p2p-network-libraries"><a class="header" href="#p2p-network-libraries">P2P Network Libraries</a></h2>
<ul>
<li><a href="https://github.com/placefortea/chamomile">chamomile</a>. P2P library. Support build robust stable connection on
p2p/distributed network.</li>
<li><a href="https://github.com/maidsafe/crust">crust</a>. Reliable P2P network connections in Rust with NAT traversal. One of the
most needed libraries for any server-less / decentralised projects.</li>
<li><a href="https://github.com/libp2p/rust-libp2p">rust-libp2p</a>. The Rust Implementation of the libp2p networking stack.</li>
<li><a href="https://github.com/driftluo/tentacle">Tentacle</a>. A multiplexed p2p network framework that supports custom protocols</li>
<li><a href="https://github.com/ustulation/p2p">P2P NAT-Traversal</a>. NAT Traversal techniques for p2p communication.</li>
<li><a href="https://github.com/maidsafe/qp2p">qp2p</a>. Peer-to-peer communications library for Rust based on QUIC protocol.</li>
<li><a href="https://github.com/maidsafe/sn_routing">sn_routing</a>. Routing - specialised storage DHT.</li>
</ul>
<h2 id="cryptography"><a class="header" href="#cryptography">Cryptography</a></h2>
<ul>
<li><a href="https://github.com/rust-cc/awesome-cryptography-rust">Awesome Cryptography Rust</a>.</li>
<li><a href="https://github.com/dalek-cryptography">Dalek Cryptography</a>.</li>
<li><a href="https://github.com/adria0/za">Za!</a>. An experimental rust zksnarks compiler with embeeded bellman-bn128 prover.</li>
<li><a href="https://github.com/0xProject/OpenZKP">OpenZKP</a>. Pure Rust implementations of Zero-Knowledge Proof systems.</li>
<li><a href="https://github.com/microsoft/Nova">Microsoft Nova</a>. Rust recursive snark without trusted setup.</li>
<li><a href="https://github.com/arkworks-rs">Arkworks</a>. An ecosystem for developing and programming with zkSNARKs</li>
</ul>
<h2 id="layer2"><a class="header" href="#layer2">Layer2</a></h2>
<ul>
<li><a href="https://github.com/OffchainLabs/arb-os">Arbitrum’s arb-os</a>
ArbOS is the “operating system” that runs an eth Layer 2 on an Arbitrum chain,</li>
<li><a href="https://github.com/noir-lang/noir">Noir language</a>. Noir is a Domain Specific Language for SNARK proving systems. (
Aztec eth L2)</li>
<li><a href="https://penumbra.zone/">Penumbra</a>. PoS network providing privacy to the Cosmos ecosystem.</li>
<li><a href="https://github.com/rust-bitcoin/rust-lightning">Rust-Lightning</a>
is a Bitcoin Lightning library written in Rust. The main crate, lightning, does not handle networking, persistence, or
any other I/O. Thus, it is runtime-agnostic, but users must implement basic networking logic, chain interactions, and
disk storage.</li>
<li><a href="https://github.com/matter-labs/zksync">zkSync</a>. Matter Labs’ scaling eth L2 engine secured by zero-knowledge proofs.</li>
</ul>
<h2 id="dapps"><a class="header" href="#dapps">Dapps</a></h2>
<ul>
<li><a href="https://github.com/project-serum/serum-dex">Serum-dex</a>. A decentralized exchange built on Solana.</li>
<li><a href="https://github.com/second-state/SewUp">SewUp</a>. A library to help you build your Ethereum webassembly contract with
Rust and just like develop in a common backend.</li>
</ul>
<h2 id="other"><a class="header" href="#other">Other</a></h2>
<ul>
<li><a href="https://github.com/iqlusioninc/abscissa">abscissa</a>. Micro-framework for CLI tools with strong focus on security.</li>
<li><a href="https://github.com/adria0/tesseracts">tesseracts</a>. A small block explorer for geth PoAs written in rust.</li>
<li><a href="https://github.com/nomic-io/merk">merk</a>. High performance Merkle key/value store written in Rust, based on RocksDB.</li>
</ul>
<h2 id="参考资源-41"><a class="header" href="#参考资源-41">参考资源</a></h2>
<h3 id="online-book-37"><a class="header" href="#online-book-37">online-book</a></h3>
<h3 id="fragment-37"><a class="header" href="#fragment-37">fragment</a></h3>
<ul>
<li><a href="https://web.archive.org/web/20220620094224/https://jishuin.proginn.com/p/763bfbd79e0a">Web3.0开发入门-技术圈</a></li>
<li><a href="https://github.com/rust-in-blockchain/awesome-blockchain-rust">rust-in-blockchain/awesome-blockchain-rust: Collect libraries and packages about blockchain/cryptography in Rust</a></li>
<li><a href="https://mp.weixin.qq.com/s/jeoJeL7P7Q4J2vrIKVB5ZA">有了HTTP，为什么还要RPC？</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain//layer5_ecosystem/7_business/blockchain/build-a-block-in-rust.html">使用rust建立一个简单的区块链</a></li>
</ul>
<h3 id="local-37"><a class="header" href="#local-37">local</a></h3>
<div style="break-before: page; page-break-before: always;"></div><h1 id="使用rust建立一个简单的区块链"><a class="header" href="#使用rust建立一个简单的区块链">使用rust建立一个简单的区块链</a></h1>
<h2 id="参考资源-42"><a class="header" href="#参考资源-42">参考资源</a></h2>
<h3 id="online-book-38"><a class="header" href="#online-book-38">online-book</a></h3>
<h3 id="fragment-38"><a class="header" href="#fragment-38">fragment</a></h3>
<ul>
<li><a href="https://blog.logrocket.com/how-to-build-a-blockchain-in-rust/">How to build a blockchain in Rust - LogRocket Blog</a></li>
</ul>
<h3 id="local-38"><a class="header" href="#local-38">local</a></h3>
<div style="break-before: page; page-break-before: always;"></div><h1 id="substrate介绍与源码解读-1"><a class="header" href="#substrate介绍与源码解读-1">Substrate介绍与源码解读</a></h1>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/what_is_substrate.png" alt="what_is_substrate" /></p>
<!--ts-->
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#substrate%E4%BB%8B%E7%BB%8D%E4%B8%8E%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB">Substrate介绍与源码解读</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#gavin-wookpolkadot-and-substrate">Gavin Wook、Polkadot and Substrate</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#gavin-wook%E4%B8%8E%E6%B3%A2%E5%8D%A1%E8%B7%A8%E9%93%BE">Gavin Wook与波卡跨链</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E4%BB%8E%E6%B3%A2%E5%8D%A1%E5%88%B0substrate">从波卡到Substrate</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E8%B7%A8%E9%93%BE%E7%9A%84%E9%87%8D%E8%A6%81%E6%80%A7">跨链的重要性</a></li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E6%80%BB%E4%BD%93%E8%AE%BE%E8%AE%A1">总体设计</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E5%B8%B8%E8%A7%81%E5%8C%BA%E5%9D%97%E9%93%BE%E8%AE%BE%E8%AE%A1">常见区块链设计</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E5%8C%BA%E5%9D%97%E9%93%BE%E7%B3%BB%E7%BB%9F%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86">区块链系统基础部分</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E9%93%BE%E7%9A%84%E5%8A%9F%E8%83%BD">链的功能</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#substrate%E7%90%86%E5%BF%B5">Substrate理念</a></li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E5%85%88%E8%AE%A4%E8%AF%86%E4%B8%80%E4%B8%8B%E4%BB%80%E4%B9%88%E6%98%AF%E5%8C%BA%E5%9D%97%E9%93%BE%E6%A1%86%E6%9E%B6">先认识一下：什么是区块链框架</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E6%8E%A5%E7%9D%80%E8%AF%B4%E8%AF%B4substrate%E4%B8%8Eweb3">接着说说Substrate与web3</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E7%94%A8web%E6%A1%86%E6%9E%B6%E6%B8%B8%E6%88%8F%E5%BC%95%E6%93%8E%E7%B1%BB%E6%AF%94">用web框架、游戏引擎类比</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#substrate-architecture">Substrate Architecture</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E4%BB%8Erust%E7%9C%8Bsubstrate">从Rust看Substrate</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E5%BC%80%E5%8F%91%E8%80%85%E5%8F%AA%E9%9C%80%E8%A6%81%E5%85%B3%E6%B3%A8runtime%E9%93%BE%E5%8A%9F%E8%83%BD">开发者只需要关注Runtime(链功能)</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E6%98%8E%E6%99%B0runtime">明晰Runtime</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E5%88%A4%E6%96%AD%E6%A0%87%E5%87%86">判断标准</a></li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#substrate%E7%9A%84runtime">Substrate的Runtime</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E4%B8%AD%E5%BF%83%E5%8C%96%E5%8D%87%E7%BA%A7%E6%B5%81%E7%A8%8B">中心化升级流程</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E6%97%A0%E5%A4%AE%E5%8C%96%E5%8D%87%E7%BA%A7%E6%B5%81%E7%A8%8B%E5%8E%9F%E5%85%88">无央化升级流程(原先)</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#substrate%E7%9A%84%E4%B8%8D%E5%90%8C">Substrate的不同</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E4%BB%A5%E5%A4%AA%E5%9D%8A%E5%90%88%E7%BA%A6%E6%9B%B4%E6%96%B0%E7%AD%96%E7%95%A5">以太坊合约更新策略</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#substrate%E5%AF%B9%E5%BA%94%E5%90%88%E7%BA%A6%E6%9B%B4%E6%96%B0%E7%AD%96%E7%95%A5">Substrate对应‘合约更新策略’</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84">项目结构</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%9E%B6%E6%9E%84">客户端架构</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E6%9E%B6%E6%9E%84%E5%9B%BE">架构图</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E6%A8%A1%E5%9D%97%E8%AF%B4%E6%98%8E">模块说明</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E5%AD%98%E5%82%A8">存储</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#runtime">Runtime</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#p2p%E7%BD%91%E7%BB%9C">p2p网络</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E5%85%B1%E8%AF%86">共识</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#rpc">RPC</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#telemetry-%E9%81%A5%E6%B5%8B">telemetry （遥测）</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#tree-level1">Tree Level1</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E7%94%A8cargo%E7%BB%84%E7%BB%87%E4%BB%A3%E7%A0%81">用Cargo组织代码</a></li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E4%B8%BB%E8%A6%81%E9%83%A8%E5%88%86%E4%BB%8B%E7%BB%8Dnodeframecore">主要部分介绍：Node、Frame、Core</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#substrate-node">Substrate Node:</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E9%87%8D%E7%82%B9%E8%AF%B4%E8%AF%B4nodepallets%E5%92%8Cruntime">重点说说node、pallets和runtime</a></li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#substrate-frame">Substrate FRAME</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#substrate-coreclient">Substrate Core(client)</a></li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E5%85%B6%E4%BB%96">其他</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#primitives">primitives</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#scriptsci">scripts/ci</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#utils">utils</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E5%8A%9F%E8%83%BD%E9%80%BB%E8%BE%91">功能逻辑</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E7%89%B9%E8%89%B2%E4%BB%A3%E7%A0%81">特色代码</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#online-book">online-book</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#fragment">fragment</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#runtime-1">Runtime</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#local">local</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:55 UTC 2022 -->
<!--te-->
<h2 id="gavin-wookpolkadot-and-substrate-1"><a class="header" href="#gavin-wookpolkadot-and-substrate-1">Gavin Wook、Polkadot and Substrate</a></h2>
<h3 id="gavin-wook与波卡跨链-1"><a class="header" href="#gavin-wook与波卡跨链-1">Gavin Wook与波卡跨链</a></h3>
<p>所以对于开发人员来说，比起大家耳熟能详的v神(Vitalik Buterin)，更重要的人是实际上撑起整个以太坊世界的灵魂人物<strong>Gavin Wood</strong>。更何况很多山寨币实际上就是在以太坊的模型上修修改改，所以在我看来Gavin
Wood是撑起了当前半个区块链世界的人。</p>
<p>而Gavin Wood 离开了以太坊之后，开启的一个新项目叫做Polkadot(波卡)，这个项目的<strong>目的就是跨链，为了把各个割裂的区块链孤岛能够联系一起</strong>
。虽然目前有很多的项目都号称自己在做跨链，但是目前在我看来唯一在推进，逻辑上是可推理，之后可能成功的跨链项目就只有波卡能够成功。（后半段可能存在一定误导性，Polkadot的跨链可能在大部分人理解下应该是分片的变种，也就是基于Substrate开发的区块链可以部署到Polkadot上，经过Polkadot平台互相沟通）。</p>
<h3 id="从波卡到substrate-1"><a class="header" href="#从波卡到substrate-1">从波卡到Substrate</a></h3>
<p>而Gavin Wood 在开发的波卡的过程中，经过不断地思考，认为其实区块链发展这几年，大家做的很多事情都是相同的。</p>
<div id="admonition-抽离共同点开始造轮子" class="admonition abstract">
<div class="admonition-title">
<p>抽离共同点，开始造“轮子“</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-抽离共同点开始造轮子"></a></p>
</div>
<div>
<p>那么在以往的软件开发中，当大家发现大家都在做相同的事情的时候，就会将这件事情进行抽象，然后造“轮子”，将这些高层次的东西做封装，成为“开发框架”，将背后复杂的基础设施都封装起来，而使用这个“框架”的开发人员，就可以更加专注于自己的业务逻辑，而不必花费大量的精力去造“轮子”去完成那些每个链都要做的事情。</p>
</div>
</div>
<p>Gavin Wood 在开发波卡的中途先暂停了波卡的开发，将波卡及以太坊已有的成果进行抽象，命名为substrate作为区块链开发的基础框架，并把全部精力都转移到了substrate开发中。</p>
<div id="admonition-第一个轮子" class="admonition tip">
<div class="admonition-title">
<p>第一个轮子</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-第一个轮子"></a></p>
</div>
<div>
<p>所以“substrate”就是区块链世界的第一个“轮子”。</p>
</div>
</div>
<h3 id="跨链的重要性-1"><a class="header" href="#跨链的重要性-1">跨链的重要性</a></h3>
<p>另一方面，在软件开发领域或者互联网领域，大家其实都发现了占据了框架的地位实际上一定程度上占据了这个领域开发的生态，更何况对于跨链来说，当大家的链都比较同质化后，跨链会更加的方便。现在大家都把跨链当作区块链下一个引爆点，而跨链的属性界定了做“跨链”的人基本上只能一家独大，成为垄断地位。而接入跨链的链越多，这个跨链就越垄断(
因为大家使用跨链就是为了在不同的链之间兑换代币，能换的代币越多，使用这个跨链的人就越多，生态就越集中)，</p>
<p>而Gavin Wood 提供的substrate框架又<strong>能解决大部分链都在重复解决的问题</strong>，所以大家就更倾向于使用substrate开发自己的链。</p>
<div id="admonition-三角关系" class="admonition quote">
<div class="admonition-title">
<p>三角关系</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-三角关系"></a></p>
</div>
<div>
<p>这样就会在“用户-链-跨链”这个三角关系中将三方的利益绑定在一起，互惠互利，共同进步。</p>
</div>
</div>
<h2 id="总体设计-1"><a class="header" href="#总体设计-1">总体设计</a></h2>
<h3 id="常见区块链设计-1"><a class="header" href="#常见区块链设计-1">常见区块链设计</a></h3>
<p>目前所有的区块链系统几乎都是从比特币/以太坊模型演变而来。一般来说，一个区块链系统应该具有：</p>
<h4 id="区块链系统基础部分-1"><a class="header" href="#区块链系统基础部分-1">区块链系统基础部分</a></h4>
<ul>
<li>共识系统 （区块链分布式基石）</li>
<li>p2p连接与广播系统</li>
<li>存储系统</li>
<li>交易池系统</li>
<li>rpc系统（区块链与外界交互主要通道）</li>
</ul>
<div id="admonition-基础通用" class="admonition info">
<div class="admonition-title">
<p>基础通用</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-基础通用"></a></p>
</div>
<div>
<p>基础部分是当前区块链模型下都会具备的组件，其中共识与P2P体现区块链的分布式本质</p>
</div>
</div>
<h4 id="链的功能-1"><a class="header" href="#链的功能-1">链的功能</a></h4>
<div id="admonition-竞争关键" class="admonition info">
<div class="admonition-title">
<p>竞争关键</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-竞争关键"></a></p>
</div>
<div>
<p>链功能是区块链间相互竞争的关键部分. 与系统基础部分相比，这部分差异很大，提供的是除去区块链模型外，这条链能够提供的功能。另一方面在区块链升级中，一般来说系统基础部分改动较小，而链的功能部分改动较大，特别是许多链为了追求开发速度，一开始只能提供转账功能，在后续的版本中才慢慢升级其他功能</p>
</div>
</div>
<p>例如：</p>
<ul>
<li>比特币的UTXO结构加上交易脚本</li>
<li>以太坊的虚拟机与智能合约</li>
<li>eos的账户系统及虚拟机</li>
<li>有的山寨币特化部分智能合约或部分native层成为系统级功能：
<ul>
<li>提供随机数</li>
<li>提供质押对赌</li>
<li>oracle数据输入</li>
<li>引入复杂密码学方案</li>
<li>等等。。。</li>
</ul>
</li>
</ul>
<h4 id="substrate理念-1"><a class="header" href="#substrate理念-1">Substrate理念</a></h4>
<div id="admonition-分离变与不变" class="admonition tip">
<div class="admonition-title">
<p>分离变与不变</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-分离变与不变"></a></p>
</div>
<div>
<p>Substrate作为一个区块链框架，认为所有的链都应该具备区块链系统基础部分，而由开发者自由定制链的功能部分</p>
</div>
</div>
<h3 id="先认识一下什么是区块链框架-1"><a class="header" href="#先认识一下什么是区块链框架-1">先认识一下：什么是区块链框架</a></h3>
<p>简单来说，或者从本质上讲，区块链框架是一个（巨大的）工具和库的集合，用于构建一个完整的、可运行的、安全的、功能完整的（尽管是基本的）区块链。</p>
<p>区块链框架负责处理以下方面的大部分繁重工作：</p>
<ul>
<li>共识P2P网络</li>
<li>帐户管理</li>
<li>基本的区块链逻辑（区块、交易等）</li>
<li>区块链交互的客户端</li>
</ul>
<h3 id="接着说说substrate与web3-1"><a class="header" href="#接着说说substrate与web3-1">接着说说Substrate与web3</a></h3>
<p>Substrate 可以被描述为一个区块链框架——具体来说，一个用于构建定制区块链的框架。这些区块链可以完全自主运行，这意味着它们不依赖任何外部技术来运行。</p>
<p>然而，Substrate 背后的公司 Parity（由以太坊联合创始人 Gavin Wood 共同创立）也建立了 Polkadot 网络。 Polkadot 本质上是一个分散的、基于协议的区块链平台，用于实现安全的跨区块链通信。</p>
<div id="admonition-波卡本身就是跨链桥梁" class="admonition tip">
<div class="admonition-title">
<p>波卡本身就是跨链桥梁</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-波卡本身就是跨链桥梁"></a></p>
</div>
<div>
<p>这意味着 Polkadot可以用作区块链之间的一种桥梁，负责链之间的通信层，并使不同区块链（甚至是以太坊和比特币等系统）之间的交互成为可能。</p>
</div>
</div>
<div id="admonition-web3愿景" class="admonition quote">
<div class="admonition-title">
<p>web3愿景</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-web3愿景"></a></p>
</div>
<div>
<p>这代表着在实现 Web3 的愿景（一个分散的、基于区块链的互联网版本）方面取得了重大进展。</p>
</div>
</div>
<p>由于它们是由同一个人开发的，因此 Substrate 对与Polkadot的集成具有一流的支持，因此您使用Substrate创建的任何区块链都可以无缝连接到 Polkadot。</p>
<p>Substrate 还提供无分叉运行时升级——在不触发硬分叉的情况下升级区块链状态转换功能的能力。</p>
<div id="admonition-文档教程" class="admonition info">
<div class="admonition-title">
<p>文档教程</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-文档教程"></a></p>
</div>
<div>
<p>当然，由于提供了大量的代码，Substrate 附带了大量的文档和教程来帮助您入门。</p>
</div>
</div>
<h3 id="用web框架游戏引擎类比-1"><a class="header" href="#用web框架游戏引擎类比-1">用web框架、游戏引擎类比</a></h3>
<div id="admonition-sustrate与web框架大有不同" class="admonition warning">
<div class="admonition-title">
<p>Sustrate与web框架大有不同</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-sustrate与web框架大有不同"></a></p>
</div>
<div>
<p>如果你以前使用过一个广泛的 Web 框架，那么区块链框架就是——根本不是这样的。范围、活动部件的数量、相关概念和扩展点只是处于不同的规模。</p>
</div>
</div>
<blockquote>
<p>一个更好的比较可能是一个成熟的游戏引擎（想想 Unity），它为你需要的一切功能提供基本实现，以及可能需要的许多扩展点，供自定义。</p>
</blockquote>
<p>当然，这意味着已经在架构方面做出了一些决定：你将无法轻易更改。</p>
<p>根据你的用例，可能需要更多的可定制性，而框架可能会以某种方式对其进行限制。</p>
<p>这是标准的权衡：区块链框架可以节省你的时间，但代价是你不得不忍受的一些事情。</p>
<p>然而，正如我们将在下面更详细地探讨的那样，Substrate在这方面提供了一些灵活性。</p>
<p>使您能够在多个阶段在更多的技术自由和易于开发之间进行选择。</p>
<p>Substrate的后端是用 Rust 构建的。它（以及 Parity 通常所做的大部分工作）也是完全开源的。</p>
<blockquote>
<p>因此，您不仅可以使用 Substrate，还可以通过回馈和分叉其中的一部分来改进它，以根据您自己的需求进行定制。</p>
</blockquote>
<h3 id="substrate-architecture-1"><a class="header" href="#substrate-architecture-1">Substrate Architecture</a></h3>
<p>Gavin Wood 作为以太坊实际核心的开发者，自然早已对这套系统的框架了然于心，所以从Substrate框架提出的开始（2018年9月），就对区块链系统作出了2个关键的区分：</p>
<div id="admonition-coreruntime" class="admonition info">
<div class="admonition-title">
<p>Core&amp;Runtime</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-coreruntime"></a></p>
</div>
<div>
<p>Substrate Core: 系统基础部分
Runtime：链功能</p>
</div>
</div>
<div id="admonition-substrte-architecture" class="admonition tip">
<div class="admonition-title">
<p>Substrte Architecture</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-substrte-architecture"></a></p>
</div>
<div>
<pre><code class="language-text">┌───────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                       │
│                                                                                                       │
│      ┌─────────────────┐     ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐        │
│      │ fund management │     │     Account     │    │    Contract     │    │   Democratic    │        │
│      │    transfer     │     │     system      │    │       VM        │    │   referendum    │        │
│      └─────────────────┘     └─────────────────┘    └─────────────────┘    └─────────────────┘        │
│                                                                                                       │
│                                                  ######  #     # #     # ####### ### #     # #######  │
│      ┌─────────────────┐     ┌─────────────────┐ #     # #     # ##    #    #     #  ##   ## #        │
│      │     Equity      │     │      etc.       │ #     # #     # # #   #    #     #  # # # # #        │
│      │   calculation   │     │                 │ ######  #     # #  #  #    #     #  #  #  # #####    │
│      └─────────────────┘     └─────────────────┘ #   #   #     # #   # #    #     #  #     # #        │
│                                                  #    #  #     # #    ##    #     #  #     # #        │
│                                                  #     #  #####  #     #    #    ### #     # #######  │
├───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                       │
│      ┌─────────────────┐     ┌─────────────────┐     ┌─────────────────┐    ┌─────────────────┐       │
│      │    Consensus    │     │ Network system  │     │     Trading     │    │                 │       │
│      │    mechanism    │     │      (p2p)      │     │      Pool       │    │       RPC       │       │
│      └─────────────────┘     └─────────────────┘     └─────────────────┘    │                 │       │
│                                                                             └─────────────────┘       │
│                                                             #####  ####### ######  #######            │
│      ┌─────────────────┐                                   #     # #     # #     # #                  │
│      │      etc.       │                                   #       #     # #     # #                  │
│      │                 │                                   #       #     # ######  #####              │
│      └─────────────────┘                                   #       #     # #   #   #                  │
│                                                            #     # #     # #    #  #                  │
│                                                             #####  ####### #     # #######            │
│                                                                                                       │
└───────────────────────────────────────────────────────────────────────────────────────────────────────┘
</code></pre>
</div>
</div>
<h3 id="从rust看substrate-1"><a class="header" href="#从rust看substrate-1">从Rust看Substrate</a></h3>
<ul>
<li><a href="https://docs.substrate.io/main-docs/fundamentals/rust-basics/">Rust for Substrate | Substrate_ Docs</a></li>
</ul>
<h3 id="开发者只需要关注runtime链功能-1"><a class="header" href="#开发者只需要关注runtime链功能-1">开发者只需要关注Runtime(链功能)</a></h3>
<p>根据这样的划分，当开发者使用Substrate框架的时候，无需关心区块链基础功能也就是Core部分的工作，而只需关心自己链能够提供的功能，也就是Runtime部分的工作。</p>
<div id="admonition-vm类似以太坊的智能合约" class="admonition tip">
<div class="admonition-title">
<p>VM类似以太坊的智能合约</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-vm类似以太坊的智能合约"></a></p>
</div>
<div>
<p>注意图中虚拟机EVM也是Runtime的一个组件。与以太坊的结构相比，相当于把以太坊的智能合约功能也能随意作为一个链的功能组件添加进入使用Substrate开发的链中</p>
</div>
</div>
<h3 id="明晰runtime-1"><a class="header" href="#明晰runtime-1">明晰Runtime</a></h3>
<p>这里一直强调Runtime是“链的功能”有一些通俗与不严谨，这里使用一个更抽象的描述：</p>
<div id="admonition-runtime明确" class="admonition danger">
<div class="admonition-title">
<p>Runtime明确</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-runtime明确"></a></p>
</div>
<div>
<p>需要对运行结果进行共识的功能部分应该归属于Runtime</p>
</div>
</div>
<p>这个定义比较抽象，且由于需要对“世界状态”或类似概念有比较深入的了解才好解释，故不展开讲解。更严格来说，“需要对运行结果进行共识的功能组件”是“链的功能”的一个子集。</p>
<h4 id="判断标准-1"><a class="header" href="#判断标准-1">判断标准</a></h4>
<div id="admonition-判断标准" class="admonition tip">
<div class="admonition-title">
<p>判断标准</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-判断标准"></a></p>
</div>
<div>
<p>这里有一个简单的判定标准判断某个功能是否应该放在Runtime内：</p>
<p>对于某个功能，若只改动一个节点的代码对于所有的逻辑运行的结果与其他不改动的节点运行的结果相同，则认为这个部分应该放在Runtime之外，如果运行结果不同，则认为应该放在Runtime之内。</p>
</div>
</div>
<div id="admonition-举例" class="admonition example">
<div class="admonition-title">
<p>举例</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-举例"></a></p>
</div>
<div>
<p>举个例子：比如我改变了交易池的排序代码，使得对某个账户有利的交易能优先打包。这个改动会令自己这个节点产出的区块不公平的打包交易，但是只要打包出来的区块大家都可以认可，则所有节点共识的“状态的变化”仍然是一致的。很明显，这个功能组件不应该是Runtime的功能，因为它不会改变对于验证一个区块时的“状态变化”的验证。比如我改变了转账功能的代码，能给某个账户凭空增加钱，那么显然，这种改动对于这个改动过的节点执行的结果将会与其他节点不同，则共识不会通过。所以转账这个功能就应该放在Runtime当中，让所有节点执行的都是一致的。</p>
</div>
</div>
<p>这部分结合native与wasm后会容易理解</p>
<p>所以到底什么是Runtime，我认为使用“链上功能”来描述最为恰当，因为其隐含了对于执行结果的共识问题。</p>
<h3 id="substrate的runtime-1"><a class="header" href="#substrate的runtime-1">Substrate的Runtime</a></h3>
<p>Substrate的Runtime当然没有止步于仅将区块链系统做了模块化划分，提供框架功能这一步，事实上，由于抽象出了Runtime，Substrate实现了以往所有区块链都无法实现的一个功能：区块链系统升级。</p>
<h4 id="中心化升级流程-1"><a class="header" href="#中心化升级流程-1">中心化升级流程</a></h4>
<div id="admonition-centralized-system-upgrading" class="admonition tip">
<div class="admonition-title">
<p>Centralized System Upgrading</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-centralized-system-upgrading"></a></p>
</div>
<div>
<pre><code class="language-text">┌────────────────────────────────Centralized System Upgrading(Internet App)────────────────────────────────┐
│                                                                                                          │
│                                                                                                          │
│                         ┌───────────────────┐      ┌─────────────┐    ┌─────────────┐    ┌─────────────┐ │
│                     ┌──▶│    Update Code    │      │   Deploy    │    │   Upgrade   │    │ Centralized │ │
│     .─────────.     │   │(Backend/Frontend)─┼──────▶   Server    │───▶│  Sucessful  │────▶Upgrade Easy │ │
│    ╱           ╲    │   └───────────────────┘      └─────────────┘    └─────────────┘    └─────────────┘ │
│   ( Bug/Upgrade )───┤                                                 ┌─────────────┐                    │
│    `.         ,'    │                                                 │  Somebody   │                    │
│      `───────'      │                                              ┌─▶│   Upgrade   ├─┐                  │
│                     │   ┌───────────────────┐      ┌─────────────┐ │  └─────────────┘ │  ┌─────────────┐ │
│                     └──▶│    Update Code    │      │   Publish   │ │                  │  │ Fragmented  │ │
│                         │       (App)      ─┼──────▶  App Store  │─┤  ┌─────────────┐ ├─▶│   version   │ │
│                         └───────────────────┘      └─────────────┘ │  │  Somebody   │ │  └─────────────┘ │
│                                                                    └─▶│   Reject    │─┘                  │
│                                                                       └─────────────┘                    │
│                                                                                                          │
│                                                                                                          │
└──────────────────────────────────────────────────────────────────────────────────────────────────────────┘
</code></pre>
</div>
</div>
<p>对于中心化的互联网系统而言，由于代码与数据的控制权在自己手上，所以可以随时进行版本的升级与修改。但是即便如此，也只有网页H5，后台代码可以做到随时升级，在移动互联网中，app还是需要用户自行更新。其中android生态尤为突出，apk版本的碎片化一度是困扰开发者的难题。为了应对app应用的碎片化，推出了许多功能各异的框架能够用户在不更新app的情况下进行“热更新”，一度成为技术的热门追捧。这些热更新的框架本质上都是允许从后台下载一段更新代码，通过各种方式加载运行新的代码来完成。一般情况下通过这种热更新提供的功能都会带来一定的性能损耗以运行最新的热更新代码。但是即便是热更新，更新代码的控制权也同样处于中心化组织的手中。</p>
<h4 id="无央化升级流程原先-1"><a class="header" href="#无央化升级流程原先-1">无央化升级流程(原先)</a></h4>
<div id="admonition-decentralized-system-upgradingpre" class="admonition tip">
<div class="admonition-title">
<p>Decentralized System Upgrading(pre)</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-decentralized-system-upgradingpre"></a></p>
</div>
<div>
<pre><code class="language-text">┌───────────────────────────────────Decentralized System Upgrading(Blockchain Dapp)────────────────────────────────────┐
│                                                                                                 ┌─────────────┐      │
│                                                                                                 │   Upgrade   │      │
│                                                                                  ┌───Yes───────▶│  Sucessful  │      │
│                                                                                  │              └─────────────┘      │
│                                                                                  Λ                                   │
│                                                                                 ╱ ╲                                  │
│                                                                                ╱   ╲                                 │
│                                                                               ╱     ╲                                │
│                                                          ┌────────┐          ╱       ╲                               │
│                                                          │ Deploy │      Most deployments                            │
│                                              ┌──Support─▶│  Node  │─────▶(Under Byzantine                            │
│                                              │           └────────┘      Fault Tolerance)                            │
│                                              │                               ╲       ╱                               │
│                                              Λ                                ╲     ╱                                │
│                                             ╱ ╲                                ╲   ╱                                 │
│                                            ╱   ╲                                ╲ ╱                                  │
│                                           ╱     ╲                                V              ┌──────────────────┐ │
│     .─────────.      ┌─────────────┐     ╱       ╲                               │              │   Upgrade Fail   │ │
│    ╱           ╲     │ Update Node │    ╱ Running ╲                              └───No────────▶│(Cause Fragmented)│ │
│   ( Bug/Upgrade ─────▶    Code     ├────▶  Node    ▏                                            └──────────────────┘ │
│    `.         ,'     └─────────────┘    ╲ (Minner ╱                                                       ▲          │
│      `───────'                           ╲       ╱                                                        │          │
│                                           ╲     ╱                                                         │          │
│                                            ╲   ╱                                                          │          │
│     .─────────.                             ╲ ╱                                                           │          │
│  ,─'           '─.                           V                                                            │          │
│ ;    Community    :                          │           ┌────────┐                                       │          │
│ :    proposal     ;                          │           │ Reject │                                       │          │
│  ╲   (BIP/EIP)   ╱                           └───Reject─▶│ Deploy │───────────────────────────────────────┘          │
│   '─.         ,─'                                        └────────┘                                                  │
│      `───────'                                                                                                       │
└──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
</code></pre>
</div>
</div>
<p>区块链领域就大大不同了。 即便代码更新的权力在某个组织的手上，但是运行这些代码的人可不一定会听这个组织的指挥，无法容易的命令分散节点统一的进行新代码的部署更新。</p>
<div id="admonition-分布式自治的优缺点" class="admonition tip">
<div class="admonition-title">
<p>分布式自治的优缺点</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-分布式自治的优缺点"></a></p>
</div>
<div>
<p>这是区块链带来的分布式自治的优点，同时也是一个巨大的缺点。</p>
</div>
</div>
<p>比特币社区就是这个领域下的一个典型，由于比特币社区的分裂，部分人并不认同不更改区块大小而是采用隔离见证的方案，分裂出了BCH，对BTC的生态产生的极大的损害。ETH的升级同样也困难重重，每次升级都需要进行长时间的等待以防有节点未升级而产生的分叉。</p>
<p>EOS由于其中心化的特点使得升级稍微简单一些，但仍然出现了由于升级带来的分叉的恶性事件。我们可以形象把区块链下的系统升级称为“全球升级”，因为其要求分布式环境下的大部分节点都更新了代码才使得升级能够成功。相较于中心化控制的系统，区块链系统的升级困难重重且充满风险。</p>
<div id="admonition-高度判断" class="admonition tip">
<div class="admonition-title">
<p>高度判断</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-高度判断"></a></p>
</div>
<div>
<p>同时区块链的升级还有另一个问题：高度判断</p>
<p>一个区块链系统升级后，不得不在代码中加入许多的“高度判断”，以区分不同高度下运行的代码，保证同步能够正常执行，兼容老数据。这种做法很原始但是又无法绕开，给开发者带来极大的思维负担，且需要大量的测试来保证不出现Bug。</p>
</div>
</div>
<p>比如目前比特币的源码中就有许多的区块高度判定使得在同步老区块的时候执行老代码，新区块的时候执行新代码。而中心化系统的数据控制权在自己手上，并且也不存在需要从某个数据源同步的情况，所以完全不需要担心这个问题。</p>
<h4 id="substrate的不同-1"><a class="header" href="#substrate的不同-1">Substrate的不同</a></h4>
<p>Substrate横空而出，推出了目前区块链领域最完美的升级方案。其采用“链上代码”的思想，将整个Runtime都做成了可直接更新的组件，让所有节点能够强制运行最新的Runtime代码。</p>
<div id="admonition-substrate-runtime" class="admonition info">
<div class="admonition-title">
<p>Substrate Runtime</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-substrate-runtime"></a></p>
</div>
<div>
<p>简单来说，Runtime在Substrate框架下，将会用同一份代码编译出两份可执行文件：</p>
<ol>
<li>一份Rust的本地代码，我们一般称为native代码，native与其他代码无异，是这个执行文件中的二进制数据，直接运行。在Substrate的相关代码以native命名</li>
<li>一份wasm的链上代码，我们一般成为wasm代码，wasm被部署到链上，所有人可获取，wasm通过构建一个wasm的运行时环境执行 。在Substrate的相关代码以wasm命名 在节点启动的时候可以选择执行策略，使用native, possible，wasm或者both。不同的执行策略会执行不同的执行文件</li>
</ol>
</div>
</div>
<p>由于这两份代码是由相同的代码编译出来的，所以其执行逻辑完全相同 (有一些很小的暗坑要注意)。其中wasm将会部署到链上，所有人都可以获取到，也就是说即使本地运行的不是最新版本的节点，只要同步了区块，一定可以获取到最新的wasm代码。</p>
<p>换句话说，一个写在Runtime内部的代码，也就是代表这条链功能性的代码，存在两份，分别是native与wasm。wasm代码被部署到链上，是“链上数据”，可以通过同步区块所有人统一获取并执行。这样就可以保证在区块链中所有矿工执行的都是最新的代码。</p>
<div id="admonition-哪种更合理" class="admonition tip">
<div class="admonition-title">
<p>哪种更合理</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-哪种更合理"></a></p>
</div>
<div>
<p>这里需要强调，代码的部署可以通过“民主提议”，“sudo控制权限”，“开发者自定一种部署条件”等方式进行，到底哪种方式“更区块链”，“更合理”，不在本文讨论范围内，这与这条链的设计目的相关。Substrate只是提供了这种“热更新”的强大机制，如何使用这种机制是这条链的问题。</p>
</div>
</div>
<h4 id="以太坊合约更新策略-1"><a class="header" href="#以太坊合约更新策略-1">以太坊合约更新策略</a></h4>
<div id="admonition-合约更新策略" class="admonition info">
<div class="admonition-title">
<p>合约更新策略</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-合约更新策略"></a></p>
</div>
<div>
<p>我们使用以太坊中“合约更新策略”来解释Substrate的Runtime机制：</p>
</div>
</div>
<p>由于以太坊部署一个合约后，其地址已经被固定，且数据完全存储在这个合约地址下，若这个合约需要升级功能或出现Bug，将会带来许多的问题（比如许多垃圾山寨币的ERC20合约有溢出漏洞，被攻击后损失惨重，只能通过重新部署合约，**
并将老合约的数据重新导入的方式**进行合约升级，且此时的合约地址只能使用新的了）。</p>
<p>许多开发人员不断探索后发展出了如下的以太坊合约升级方式：</p>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/Substrate_runtime_intro.jpeg" alt="Substrate_runtime_intro" /></p>
<p>熟悉以太坊的开发人员应该很容易理解上图表达的意思。</p>
<p>其核心思想是将一个合约拆分成为“逻辑合约”与“数据合约”，并使用一个“核心合约”将它们串在一起，这个核心合约就是用户的入口。</p>
<p>由于以太坊部署后的地址是固定的，所以将逻辑合约做成一个独立的合约，并将其地址设置在核心合约当中。那么只要更改核心合约中设置的地址，就可以更改核心合约执行的逻辑了。</p>
<p>并且由于以太坊的合约部署后都存在于“世界状态”当中，那么在同步区块时，老数据就会自动使用老的逻辑合约执行，而新的数据使用新的逻辑合约执行。</p>
<div id="admonition-链上代码" class="admonition tip">
<div class="admonition-title">
<p>链上代码</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-链上代码"></a></p>
</div>
<div>
<p>这里的“逻辑合约”就是“链上代码”的概念，它存在于被共识的数据当中，具备历史的意义</p>
</div>
</div>
<h4 id="substrate对应合约更新策略-1"><a class="header" href="#substrate对应合约更新策略-1">Substrate对应‘合约更新策略’</a></h4>
<p>那么将Substrate的框架对应过来，其中：</p>
<ul>
<li>“核心合约”的部分就是节点采用wasm执行去从“状态”存储中加载出最新的合约代码</li>
<li>“逻辑合约”的部分就是这条链的Runtime</li>
<li>“数据合约”的部分就是这条链自己的状态数据</li>
</ul>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/v2-b9bb441d00298a06de67ab8fdd368c08_720w.jpg" alt="img" /></p>
<div id="admonition-wasm" class="admonition tip">
<div class="admonition-title">
<p>wasm</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-wasm"></a></p>
</div>
<div>
<p>由此可见，由于wasm代码的存在，可以保证即使节点没有更新到最新版本，仍然能够<strong>以最新的代码运行</strong>，保证不会因为代码的不同而分叉。同时在节点同步老数据的过程中也<strong>不会因为本地代码是最新的而导致同步出错</strong></p>
</div>
</div>
<h2 id="项目结构-1"><a class="header" href="#项目结构-1">项目结构</a></h2>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/substrate_github.gif" alt="substrate_github" /></p>
<h3 id="客户端架构-1"><a class="header" href="#客户端架构-1">客户端架构</a></h3>
<h4 id="架构图-1"><a class="header" href="#架构图-1">架构图</a></h4>
<div id="admonition-substrate-client" class="admonition tip">
<div class="admonition-title">
<p>Substrate Client</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-substrate-client"></a></p>
</div>
<div>
<pre><code class="language-text">┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃         ___ _   _ ___ ___ _____ ___    _ _____ ___    ___ _    ___ ___ _  _ _____        ┃
┃        / __| | | | _ ) __|_   _| _ \  /_\_   _| __|  / __| |  |_ _| __| \| |_   _|       ┃
┃        \__ \ |_| | _ \__ \ | | |   / / _ \| | | _|  | (__| |__ | || _|| .` | | |         ┃
┃        |___/\___/|___/___/ |_| |_|_\/_/ \_\_| |___|  \___|____|___|___|_|\_| |_|         ┃
┃                                                                                          ┃
┃                                                                                          ┃
┃     ┌───────────────┐     ┌──────────────────────────────────────────────────────────┐   ┃
┃     │               │     │                                                          │   ┃
┃     │               │     │                                                          │   ┃
┃     │               │     │                           RPC                            │   ┃
┃     │               │     │                                                          │   ┃
┃     │      P2P      │     │                                                          │   ┃
┃     │    NETWORK    │     └──────────────────────────────────────────────────────────┘   ┃
┃     │               │     ┌────────────────────────────────────────┐ ┌───────────────┐   ┃
┃     │               │     │                                        │ │               │   ┃
┃     │               │     │            ┌───────────────┐           │ │               │   ┃
┃     │               │     │            │               │           │ │   CONSENSUS   │   ┃
┃     └───────────────┘     │            │     Wasm      │           │ │               │   ┃
┃          .───────.        │            │    Runtime    │           │ │               │   ┃
┃       ,─'         '─.     │            │               │           │ └───────────────┘   ┃
┃      ╱               ╲░   │            └───────────────┘           │                     ┃
┃     ;     NATIVE      :░  │                                        │ ┌───────────────┐   ┃
┃     :     RUNTIME     ;░░ │                                        │ │               │   ┃
┃      ╲               ╱░░░ │                STORAGE                 │ │               │   ┃
┃       ╲             ╱░░░  │                                        │ │   TELEMETRY   │   ┃
┃        '─.       ,─'░░░   │                                        │ │               │   ┃
┃          ░`─────'░░░░░    │                                        │ │               │   ┃
┃             ░░░░░░░       └────────────────────────────────────────┘ └───────────────┘   ┃
┃                                                                                          ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
</code></pre>
</div>
</div>
<p>现在我们知道了 Substrate 是什么，让我们对框架、它的移动部分以及我们可以用来创建自定义区块链的扩展点进行高级概述。
由于我们在这里处理的是去中心化的点对点系统，所以我们谈论的基本单元是节点,这是我们的区块链运行的地方。
该节点在客户端内部运行，并提供系统运行所需的所有基本组件，例如p2p网络、区块链的存储、块处理和共识的逻辑，以及从外部与区块链交互的能力。</p>
<h4 id="模块说明-1"><a class="header" href="#模块说明-1">模块说明</a></h4>
<blockquote>
<p>substrate客户端是基于substrate实现的区块链的节点客户端（可以理解为全节点），
它主要由以下几个组件组成（以下也就是告诉我们实现一条链由哪几部分组成）：</p>
</blockquote>
<h5 id="存储-1"><a class="header" href="#存储-1">存储</a></h5>
<p>用来维持区块链系统所呈现的状态演变。substrate提供了的存储方式是一种简单有效的key-value对存储机制的方式。</p>
<h5 id="runtime-2"><a class="header" href="#runtime-2">Runtime</a></h5>
<p>这里就可以回答上面的问题，什么是runtime？runtime定义了区块的处理方式，主要是状态转换的逻辑。在substrate中，runtime code被编译成wasm作为区块链存储状态的一部分。</p>
<h5 id="p2p网络-1"><a class="header" href="#p2p网络-1">p2p网络</a></h5>
<p>允许客户端和其它网络参与者进行通信。</p>
<h5 id="共识-1"><a class="header" href="#共识-1">共识</a></h5>
<p>提供了一种逻辑，能使网络参与者就区块链的状态达成一致。 substrate 支持提供自定义的共识引擎。</p>
<h5 id="rpc-1"><a class="header" href="#rpc-1">RPC</a></h5>
<p>远程过程调用。</p>
<h5 id="telemetry-遥测-1"><a class="header" href="#telemetry-遥测-1">telemetry （遥测）</a></h5>
<p>通过嵌入式Prometheus服务器的方式对外展示（我理解应该是类似于区块链浏览器一样的东西，或者是提供信息给区块链浏览器展示）。</p>
<h3 id="tree-level1-1"><a class="header" href="#tree-level1-1">Tree Level1</a></h3>
<p>首先来看看项目的整理结构：</p>
<pre><code class="language-shell"> tree -L 1 | pbcopy                                                                                                                                                                                                                        ─╯
.
├── Cargo.lock
├── Cargo.toml
├── HEADER-APACHE2
├── HEADER-GPL3
├── LICENSE-APACHE2
├── LICENSE-GPL3
├── README.md
├── bin
├── client
├── docker
├── docs
├── frame
├── primitives
├── rustfmt.toml
├── scripts
├── shell.nix
├── test-utils
└── utils

9 directories, 9 files
</code></pre>
<h4 id="用cargo组织代码-1"><a class="header" href="#用cargo组织代码-1">用Cargo组织代码</a></h4>
<p>Substrate非常明显使用Cargo来组织代码：</p>
<ol>
<li>项目根目录的Cargo.toml会用workspace+members导入各子模块</li>
</ol>
<pre><code class="language-yaml">[ workspace ]
  resolver = &quot;2&quot;

  members = [...]
</code></pre>
<div id="admonition-workspacememgers" class="admonition info">
<div class="admonition-title">
<p>workspace+memgers</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-workspacememgers"></a></p>
</div>
<div>
<p>在[workspace]项下, members 属性表示工作区目录中的程序库列表</p>
</div>
</div>
<ol start="2">
<li>各子模块之间也用Cargo.toml来相互导入使用</li>
</ol>
<pre><code class="language-yaml">[ dependencies ]
  sc-consensus = { version = &quot;0.10.0-dev&quot;, path = &quot;../../client/consensus/common&quot; }
</code></pre>
<div id="admonition-高内聚低耦合" class="admonition tip">
<div class="admonition-title">
<p>高内聚，低耦合</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-高内聚低耦合"></a></p>
</div>
<div>
<p>这里正是通过Cargo.toml的语法，将模块功能内聚之后供调用</p>
</div>
</div>
<h3 id="主要部分介绍nodeframecore-1"><a class="header" href="#主要部分介绍nodeframecore-1">主要部分介绍：Node、Frame、Core</a></h3>
<h4 id="substrate-node-1"><a class="header" href="#substrate-node-1">Substrate Node:</a></h4>
<p>我们将从 Substrate Node 开始。这是我们可以开始的最高级别；</p>
<p>它提供了最多的预建功能和最少的技术自由度。它是完全可运行的，包括所有基本组件的默认实现，例如:</p>
<ul>
<li>账户管理</li>
<li>特权访问</li>
<li>共识</li>
<li>…</li>
</ul>
<p>我们可以自定义链的创世块（即初始状态）以开始。 在这里，我们可以运行节点并熟悉 Substrate 提供的开箱即用的功能，玩转状态并与正在运行的区块链交互以熟悉。</p>
<p>另一种实现相同目的的方法是使用 <a href="https://substrate.io/developers/playground/">Substrate Playground</a>，您可以在其中查看后端和前端模板以熟悉它们。
然而，一旦我们准备好真正构建自己的区块链，我们最好降低一层并使用 FRAME。</p>
<pre><code class="language-shell">tree bin -L 2 | pbcopy                                                                                                                                                                                                                       ─╯
bin
├── node
│   ├── bench
│   ├── cli
│   ├── executor
│   ├── inspect
│   ├── primitives
│   ├── rpc
│   ├── runtime
│   └── testing
├── node-template: 使用Substrate写项目的基础模版
│   ├── LICENSE
│   ├── README.md
│   ├── docker-compose.yml
│   ├── docs
│   ├── node
│   ├── pallets
│   ├── runtime
│   ├── scripts
│   └── shell.nix
└── utils
    ├── chain-spec-builder
    └── subkey

18 directories, 4 files
</code></pre>
<h5 id="重点说说nodepallets和runtime-1"><a class="header" href="#重点说说nodepallets和runtime-1">重点说说node、pallets和runtime</a></h5>
<div id="admonition-nodepalletsruntimes" class="admonition tip">
<div class="admonition-title">
<p>node、pallets、runtimes</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-nodepalletsruntimes"></a></p>
</div>
<div>
<p>│   ├── node: 链的一些基础功能的实现（或者说比较底层的实现，如网络、rpc，搭建链的最基础的code)
│   ├── pallets: 放置的就是各个pallet，也就是业务相关的模块
│   ├── runtime: 可以简单理解为把所有pallet组合到一起，也就是业务相关的逻辑</p>
</div>
</div>
<p>三者的关系大致如下：</p>
<div id="admonition-nodepalletsruntime的关系" class="admonition tip">
<div class="admonition-title">
<p>node、pallets、runtime的关系</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-nodepalletsruntime的关系"></a></p>
</div>
<div>
<pre><code class="language-text">┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃             ___ _   _ ___ ___ _____ ___    _ _____ ___   _  _  ___  ___  ___             ┃
┃            / __| | | | _ ) __|_   _| _ \  /_\_   _| __| | \| |/ _ \|   \| __|            ┃
┃            \__ \ |_| | _ \__ \ | | |   / / _ \| | | _|  | .` | (_) | |) | _|             ┃
┃            |___/\___/|___/___/ |_| |_|_\/_/ \_\_| |___| |_|\_|\___/|___/|___|            ┃
┃                                                                                          ┃
┃                                                                                          ┃
┃                                                                                          ┃
┃  ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓ ┃
┃  ┃                         ___ _   _ _  _ _____ ___ __  __ ___                         ┃ ┃
┃  ┃                        | _ \ | | | \| |_   _|_ _|  \/  | __|                        ┃ ┃
┃  ┃                        |   / |_| | .` | | |  | || |\/| | _|                         ┃ ┃
┃  ┃                        |_|_\\___/|_|\_| |_| |___|_|  |_|___|                        ┃ ┃
┃  ┃                                                                                     ┃ ┃
┃  ┃                                                                                     ┃ ┃
┃  ┃                                                                                     ┃ ┃
┃  ┃                                                                                     ┃ ┃
┃  ┃    ┌───────────────┐    ┌───────────────┐    ┌───────────────┐   ┌───────────────┐  ┃ ┃
┃  ┃    │               │    │               │    │               │   │               │  ┃ ┃
┃  ┃    │   pallet 1    │    │   pallet 2    │    │      ...      │   │   pallet n    │  ┃ ┃
┃  ┃    │               │    │               │    │               │   │               │  ┃ ┃
┃  ┃    └───────────────┘    └───────────────┘    └───────────────┘   └───────────────┘  ┃ ┃
┃  ┃                                                                                     ┃ ┃
┃  ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛ ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
</code></pre>
</div>
</div>
<blockquote>
<p>当然，对于pallets来说，在runtime中使用的pallet，有些是我们自己开发的pallet，有些是substrate中已经开发好的pallet，甚至还有些是pallet是第三方开发的pallet。</p>
</blockquote>
<h4 id="substrate-frame-1"><a class="header" href="#substrate-frame-1">Substrate FRAME</a></h4>
<p>FRAME (Framework for Runtime Aggregation of Modularized Entities) 是一个框架，用于从现有库构建 Substrate 运行时(Runtime)
，并具有高度的自由度来确定我们的区块链逻辑。</p>
<p>我们基本上是从 Substrate 的预构建节点模板开始，可以添加所谓的托盘（pallet, Substrate 库模块的名称）来定制和扩展我们的链。</p>
<p>在这个抽象级别，我们还能够完全自定义我们区块链的逻辑、状态和数据类型。这当然是大多数旨在接近 Substrate 的基本定制项目在易于开发和技术自由之间利用两全其美的地方。</p>
<div id="admonition-专注定制" class="admonition tip">
<div class="admonition-title">
<p>专注定制</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-专注定制"></a></p>
</div>
<div>
<p>从这个起点开始，我们必须投入最少的时间来建立我们的区块链，并且可以完全专注于我们自己的定制。</p>
</div>
</div>
<p>我们仍然需要在它们到来时采用一些默认值——或者更确切地说，因为它们可以被配置——但是如果我们从根本上想要做不同的事情，我们可以从 Core 开始再降低一步。</p>
<div id="admonition-frame" class="admonition info">
<div class="admonition-title">
<p>FRAME</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-frame"></a></p>
</div>
<div>
<p>The Framework for Runtime Aggregation of Modularized Entities (FRAME) is a set of modules and support libraries that simplify runtime development. 
In Substrate , these modules are called Pallets, each hosting domain-specific logic to include in a chain’s runtime.</p>
<p>FRAME also provides some helper modules to interact with important Substrate Primitives that provide the interface to the core client.</p>
<p>The following diagram shows the architectural overview of FRAME and its support libraries:</p>
</div>
</div>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/frame-arch.png" alt="frame-arch" /></p>
<p><a href="https://docs.substrate.io/v3/runtime/frame/">FRAME | Substrate_</a></p>
<pre><code class="language-shell">tree frame -L 1 | pbcopy
frame
├── alliance: The Alliance Pallet provides a collective that curates a list of accounts and URLs, deemed by the voting members to be unscrupulous actors.
├── assets: A simple, secure module for dealing with fungible assets. The Assets module provides functionality for asset management of fungible asset classes with a fixed supply
├── atomic-swap: A module for atomically sending funds.
├── aura: The Aura module extends Aura consensus by managing offline reporting.
├── authority-discovery: This module is used by the client/authority-discovery to retrieve the current set of authorities.
├── authorship
├── babe
├── bags-list
├── balances: The Balances module provides functionality for handling accounts and balances.
├── beefy
├── beefy-mmr
├── benchmarking
├── bounties
├── child-bounties
├── collective
├── contracts
├── conviction-voting
├── democracy
├── election-provider-multi-phase
├── election-provider-support
├── elections-phragmen
├── examples
├── executive
├── gilt
├── grandpa
├── identity
├── im-online
├── indices
├── lottery
├── membership
├── merkle-mountain-range
├── multisig
├── nicks
├── node-authorization
├── nomination-pools
├── offences
├── preimage
├── proxy
├── randomness-collective-flip
├── ranked-collective
├── recovery
├── referenda
├── remark
├── scheduler
├── scored-pool
├── session
├── society
├── staking
├── state-trie-migration
├── sudo
├── support
├── system
├── timestamp
├── tips
├── transaction-payment
├── transaction-storage
├── treasury
├── try-runtime
├── uniques
├── utility
├── vesting
└── whitelist

62 directories, 0 files

</code></pre>
<h4 id="substrate-coreclient-1"><a class="header" href="#substrate-coreclient-1">Substrate Core(client)</a></h4>
<p>Substrate Core 本质上意味着我们可以以任何我们想要的方式实现我们的运行时，只要它以 WebAssembly 为目标并遵守 Substrate 块创建的基本法则。</p>
<p>然后，我们可以使用这个运行时并在 Substrate 节点中运行它。</p>
<div id="admonition-最高自由度" class="admonition info">
<div class="admonition-title">
<p>最高自由度</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-最高自由度"></a></p>
</div>
<div>
<p>这种方法当然需要最多的工作和最高的难度，但它也具有最高的技术自由度，同时仍然能够在 Substrate 生态系统中无缝工作。</p>
</div>
</div>
<p>说到 Substrate 的生态系统，有一个充满活力（充满活力）的开发者社区，他们在自己的项目中使用 Substrate，其中许多人通过共享自己的托盘(pallet)来回馈生态系统。</p>
<p>您可以通过使用诸如 <a href="https://substratemarketplace.com/">Substrate Market</a>
之类的站点或仅在托管 <a href="https://crates.io/">crates.io: Rust Package Registry</a> 的任何地方找到托盘(pallet)，因为 Substrate 托盘本质上是自包含的 Rust
库，您可以将其集成到您的 Substrate 项目中, 并根据需要进行配置。</p>
<p>与任何其他库一样，建议首先审核代码，并了解依赖外部代码与编写自己的代码之间的权衡。</p>
<p>在玩了一点预建节点之后，我们应该专注于 FRAME，学习如何通过在 Substrate 模板节点之上构建自定义区块链。这也是许多精彩教程的起点。</p>
<pre><code class="language-shell"> tree client -L 1 | pbcopy                                                                                                                                                                                                                    ─╯
client
├── allocator
├── api
├── authority-discovery
├── basic-authorship
├── beefy
├── block-builder
├── chain-spec
├── cli
├── consensus
├── db
├── executor
├── finality-grandpa
├── informant
├── keystore
├── network
├── network-gossip
├── offchain
├── peerset
├── proposer-metrics
├── rpc
├── rpc-api
├── rpc-servers
├── service
├── state-db
├── sync-state-rpc
├── sysinfo
├── telemetry
├── tracing
├── transaction-pool
└── utils

30 directories, 0 files
</code></pre>
<h3 id="其他-1"><a class="header" href="#其他-1">其他</a></h3>
<h4 id="primitives-1"><a class="header" href="#primitives-1">primitives</a></h4>
<pre><code class="language-shell">tree primitives -L 1 | pbcopy
primitives
├── api
├── application-crypto
├── arithmetic
├── authority-discovery
├── authorship
├── beefy
├── block-builder
├── blockchain
├── consensus
├── core
├── database
├── debug-derive
├── externalities
├── finality-grandpa
├── inherents
├── io
├── keyring
├── keystore
├── maybe-compressed-blob
├── merkle-mountain-range
├── npos-elections
├── offchain
├── panic-handler
├── rpc
├── runtime
├── runtime-interface
├── sandbox
├── serializer
├── session
├── staking
├── state-machine
├── std
├── storage
├── tasks
├── test-primitives
├── timestamp
├── tracing
├── transaction-pool
├── transaction-storage-proof
├── trie
├── version
└── wasm-interface

42 directories, 0 files

</code></pre>
<h4 id="scriptsci-1"><a class="header" href="#scriptsci-1">scripts/ci</a></h4>
<pre><code class="language-shell">tree scripts/ci | pbcopy
scripts/ci
├── common
│   └── lib.sh
├── deny.toml
├── docker
│   ├── subkey.Dockerfile
│   └── substrate.Dockerfile
├── github
│   ├── check_labels.sh
│   └── generate_changelog.sh
├── gitlab
│   ├── check_runtime.sh
│   ├── check_signed.sh
│   ├── ensure-deps.sh
│   ├── pipeline
│   │   ├── build.yml
│   │   ├── check.yml
│   │   ├── publish.yml
│   │   └── test.yml
│   ├── publish_draft_release.sh
│   └── skip_if_draft.sh
├── monitoring
│   ├── alerting-rules
│   │   ├── alerting-rule-tests.yaml
│   │   └── alerting-rules.yaml
│   └── grafana-dashboards
│       ├── README_dashboard.md
│       ├── substrate-networking.json
│       └── substrate-service-tasks.json
├── node-template-release
│   ├── Cargo.toml
│   └── src
│       └── main.rs
└── node-template-release.sh

10 directories, 23 files

</code></pre>
<h4 id="utils-1"><a class="header" href="#utils-1">utils</a></h4>
<pre><code class="language-shell">tree utils -L 1 | pbcopy
utils
├── build-script-utils
├── fork-tree
├── frame
├── prometheus
└── wasm-builder

5 directories, 0 files

</code></pre>
<h2 id="功能逻辑-1"><a class="header" href="#功能逻辑-1">功能逻辑</a></h2>
<div id="admonition-注意" class="admonition tip">
<div class="admonition-title">
<p>注意</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_intro.html#admonition-注意"></a></p>
</div>
<div>
<p>这里将结合前面提到的runtim/core分块方式来进行功能模块说明</p>
</div>
</div>
<h2 id="特色代码-1"><a class="header" href="#特色代码-1">特色代码</a></h2>
<h2 id="参考资源-43"><a class="header" href="#参考资源-43">参考资源</a></h2>
<h3 id="online-book-39"><a class="header" href="#online-book-39">online-book</a></h3>
<ul>
<li><a href="https://github.com/paritytech/substrate">paritytech/substrate: Substrate: The platform for blockchain innovators</a></li>
<li><a href="https://docs.substrate.io/v3/getting-started/architecture/">Architecture | Substrate_</a></li>
<li><a href="https://www.bilibili.com/video/BV1KT4y1Y7Uf">substrate轻松学</a></li>
</ul>
<h3 id="fragment-39"><a class="header" href="#fragment-39">fragment</a></h3>
<ul>
<li><a href="https://www.zhihu.com/column/c_74315572">链块与分散的数据 - 知乎</a></li>
<li><a href="https://web.archive.org/web/20220627112702/https://mp.weixin.qq.com/s/MP0LXWVqUn5R4C6fAbe1nQ">区块链与substrate</a></li>
<li><a href="https://web.archive.org/web/20220618042220/https://zhuanlan.zhihu.com/p/47805322">substrate 源码解析与运用 - 介绍 - 知乎</a></li>
<li><a href="https://www.zhihu.com/column/substrate">Substrate区块链开发 - 知乎</a></li>
<li><a href="https://substrate.io/ecosystem/">Substrate Ecosystem | Substrate_</a></li>
<li><a href="https://blog.logrocket.com/substrate-blockchain-framework-core-concepts/"><strong>Substrate blockchain development: Core concepts - LogRocket
Blog</strong></a>：对Substrate的简要介绍</li>
<li><a href="https://substrate.io/developers/playground/">Playground | Substrate_</a></li>
<li><a href="https://substratemarketplace.com/">Substrate Market</a></li>
<li><a href="https://crates.io/">crates.io: Rust Package Registry</a></li>
<li><a href="https://docs.substrate.io/quick-start/">Quick start | Substrate Docs</a></li>
<li><a href="https://docs.substrate.io/tutorials/">Tutorials | Substrate Docs</a></li>
<li><a href="https://substrate.io/ecosystem/projects/">Projects | Substrate_</a>: 一些基于Substrate建立的项目，值得参考</li>
<li><a href="https://docs.substrate.io/tutorials/v3/kitties/pt1/">Build the Substrate Kitties Chain | Substrate_</a>: 教你建立一个nft平台</li>
<li><a href="https://docs.substrate.io/v3/runtime/frame/">FRAME | Substrate_</a></li>
<li><a href="https://medium.com/frctls/the-substrate-guide-i-wish-i-had-6bc76b10ddd2">The Substrate Guide I Wish I Had. Fractal’s blockchain lead Shelby… | by Fractal | Fractal | Medium</a></li>
<li><a href="https://docs.substrate.io/reference/how-to-guides/">How-to quick reference guides | Substrate Docs</a></li>
</ul>
<h3 id="runtime-3"><a class="header" href="#runtime-3">Runtime</a></h3>
<ul>
<li><a href="https://web.archive.org/web/20220627114404/https://zhuanlan.zhihu.com/p/79539782">剖析Substrate Runtime - 知乎</a>
<blockquote>
<p>基于Substrate开发自己的运行时模块，会遇到一个比较大的挑战，就是理解Substrate运行时（Runtime）。
本文首先介绍了Runtime的架构，类型，常用宏，并结合一个实际的演示项目，做了具体代码分析，以帮助大家更好地理解在Substrate中它们是如何一起工作的。</p>
</blockquote>
</li>
</ul>
<h3 id="local-39"><a class="header" href="#local-39">local</a></h3>
<div style="break-before: page; page-break-before: always;"></div><h1 id="substrate官方教程梳理与练习"><a class="header" href="#substrate官方教程梳理与练习">Substrate官方教程梳理与练习</a></h1>
<!--ts-->
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#substrate%E5%AE%98%E6%96%B9%E6%95%99%E7%A8%8B%E6%A2%B3%E7%90%86%E4%B8%8E%E7%BB%83%E4%B9%A0">Substrate官方教程梳理与练习</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E6%80%BB%E8%A7%88">总览</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#get-started">Get Started</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#build-a-local-blockchain">Build a local blockchain</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E8%AE%BE%E7%BD%AE%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83">设置开发环境</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E4%BD%BF%E7%94%A8rustup%E8%AE%BE%E7%BD%AErust%E7%8E%AF%E5%A2%83">使用rustup设置rust环境</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E6%A3%80%E6%9F%A5%E7%8E%AF%E5%A2%83">检查环境</a></li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E5%90%AF%E5%8A%A8%E9%93%BE%E8%8A%82%E7%82%B9">启动链节点</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E4%B8%8B%E8%BD%BDnode-template">下载node-template</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#node-templeate%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84">node-templeate项目结构</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#cargotoml">Cargo.toml</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E7%BC%96%E8%AF%91%E5%89%8D%E7%9A%84%E6%A3%80%E6%9F%A5">编译前的检查</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E7%BC%96%E8%AF%91">编译</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E5%8F%AF%E8%83%BD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98">可能遇到的问题</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E6%9C%AC%E5%9C%B0%E8%BF%90%E8%A1%8C%E8%8A%82%E7%82%B9">本地运行节点</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#docker%E8%BF%90%E8%A1%8C%E8%8A%82%E7%82%B9">docker运行节点</a></li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E5%89%8D%E7%AB%AF%E8%AE%BF%E9%97%AE">前端访问</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E4%BD%BF%E7%94%A8%E5%89%8D%E7%AB%AF%E6%A8%A1%E7%89%88">使用前端模版</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E4%BD%BF%E7%94%A8polkadot-js%E8%AE%BF%E9%97%AE%E8%8A%82%E7%82%B9">使用polkadot-js访问节点</a></li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#substrate%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F">Substrate使用方式</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E4%BD%BF%E7%94%A8subtrate-node">使用subtrate node</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E4%BD%BF%E7%94%A8substrate-frame">使用substrate frame</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E4%BD%BF%E7%94%A8substrate-core">使用substrate core</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#simulate-a-network">Simulate a network</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#add-trusted-nodes">Add trusted nodes</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E5%8A%A0%E5%AF%86%E6%96%B9%E5%BC%8F%E6%A2%B3%E7%90%86">加密方式梳理</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#sr25519">Sr25519</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#ed25519">Ed25519</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#ss58-%E5%AF%B9%E5%BA%94%E5%85%AC%E9%92%A5%E5%9C%B0%E5%9D%80%E6%A0%BC%E5%BC%8F">SS58: 对应公钥/地址格式</a></li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E6%AD%A5%E9%AA%A4">步骤：</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#actdiag">actdiag</a></li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#authorize-specific-nodes">Authorize specific nodes</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#alice%E6%8E%88%E6%9D%83charlie%E8%BF%87%E7%A8%8B">Alice授权Charlie过程</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#charlie%E8%BF%9E%E6%8E%A5dave%E8%BF%87%E7%A8%8B">Charlie连接Dave过程</a></li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E6%B5%81%E7%A8%8B%E5%9B%BE">流程图</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E6%80%BB%E7%BB%93">总结</a></li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#monitor-node-metrics">Monitor node metrics</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E6%9C%AC%E8%8A%82%E5%A4%A7%E6%A6%82%E7%9A%84%E6%9E%B6%E6%9E%84">本节大概的架构</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E5%AE%89%E8%A3%85prometheus%E5%92%8Cgrafana">安装Prometheus和grafana</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E9%85%8D%E7%BD%AEprometheusyml">配置Prometheus.yml</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E5%90%AF%E5%8A%A8grafana">启动grafana</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E6%BA%90">配置数据源</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E5%AF%BC%E5%85%A5%E7%9C%8B%E6%9D%BF%E6%A8%A1%E7%89%88">导入看板模版</a></li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#upgrade-a-running-network">Upgrade a running network</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E6%97%B6%E5%BA%8F%E5%9B%BE">时序图</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E7%AC%AC%E4%B8%80%E6%AC%A1%E6%9B%B4%E6%96%B0%E8%BF%90%E8%A1%8C%E6%97%B6">第一次更新运行时</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E7%AC%AC%E4%BA%8C%E6%AC%A1%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6%E8%AE%BE%E7%BD%AE%E8%87%AA%E5%8A%A8%E6%89%A7%E8%A1%8C%E6%9D%A1%E4%BB%B6">第二次上传文件设置自动执行条件</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#work-with-pallets">Work with pallets</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E6%96%87%E6%A1%A3%E4%BB%A3%E7%A0%81%E6%9B%B4%E6%96%B0%E9%97%AE%E9%A2%98">文档/代码更新问题</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#pallet%E5%89%8D%E7%BD%AErust%E7%9F%A5%E8%AF%86">Pallet前置Rust知识</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#add-a-pallet-to-the-runtime">Add a pallet to the runtime</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#runtime%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90">runtime结构分析</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E6%97%B6%E5%BA%8F%E5%9B%BE-1">时序图</a></li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#specify-the-origin-for-a-call">Specify the origin for a call</a>
* <a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E4%B8%BA%E5%B8%90%E6%88%B7%E8%AE%BE%E7%BD%AE%E6%98%B5%E7%A7%B0">为帐户设置昵称</a>
* <a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E4%BD%BF%E7%94%A8nicks-pallet%E6%9F%A5%E8%AF%A2%E8%B4%A6%E6%88%B7%E4%BF%A1%E6%81%AF">使用Nicks pallet查询账户信息</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E5%8F%AF%E8%83%BD%E5%87%BA%E7%8E%B0%E7%9A%84%E9%97%AE%E9%A2%98">可能出现的问题</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#signed%E4%B8%8Esudo%E6%9C%89%E4%B8%8D%E5%90%8C%E6%9D%83%E9%99%90">signed与sudo有不同权限。</a></li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#configure-the-contracts-pallet">Configure the contracts pallet</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#use-macros-in-a-custom-pallet">Use macros in a custom pallet</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#pallet%E7%BB%84%E6%88%90">Pallet组成</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E6%97%B6%E5%BA%8F%E5%9B%BE-2">时序图</a></li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#publish-custom-pallets">Publish Custom pallets</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E5%86%85%E7%BD%AEpallets">内置pallets</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E5%8F%91%E5%B8%83pallets">发布pallets</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#develop-smart-contracts">Develop smart contracts</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#prepare-your-first-contract">Prepare your first contract</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#develop-a-smart-contract">Develop a smart contract</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#use-maps-for-storing-values">Use maps for storing values</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#buid-a-token-contract">Buid a token contract</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#troubleshoot-smart-contracts">Troubleshoot smart contracts</a></li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#connect-with-other-chains">Connect with other chains</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#start-a-local-relay-chain">Start a local relay chain</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E6%B3%A2%E5%8D%A1%E6%9E%B6%E6%9E%84">波卡架构</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#parachains">parachains</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E6%B3%A8%E6%84%8F%E7%89%88%E6%9C%AC%E5%8C%B9%E9%85%8D">注意版本匹配</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E6%97%B6%E5%BA%8F%E5%9B%BE-3">时序图</a></li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#connect-a-local-parachain">Connect a local parachain</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#common-good-parachains">Common Good Parachains</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#conver-a-solo-chain">Conver a solo chain</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#parachain-slots-autcion">Parachain Slots Autcion</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E8%B7%A8%E9%93%BE%E7%94%A8%E5%88%B0%E7%9A%84%E4%BF%A1%E6%81%AF%E6%A0%BC%E5%BC%8F">跨链用到的信息格式</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E6%97%B6%E5%BA%8F%E5%9B%BE-4">时序图</a></li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#connect-to-rococo-testnet">Connect to Rococo testnet</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#substrate%E9%A2%84%E7%BD%AE%E8%B4%A6%E6%88%B7%E5%92%8C%E5%AF%86%E9%92%A5">substrate预置账户和密钥</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#wallets">wallets</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#polkadot-jsextension">polkadot-js/extension</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#ss58%E5%9C%B0%E5%9D%80%E6%A0%BC%E5%BC%8F">SS58地址格式</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#rococo-faucet-martic-channel">Rococo faucet martic channel</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E6%97%B6%E5%BA%8F%E5%9B%BE-5">时序图</a></li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#access-evm-accounts">Access EVM accounts</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#ethereum-core-concepts-and-terminology">Ethereum core concepts and terminology</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#ethereum-virtual-machine-evm-basics">Ethereum Virtual Machine (EVM) basics</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#decentralized-applications-and-smart-contracts">Decentralized applications and smart contracts</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#pallet-design-principles">Pallet design principles</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#truffle">Truffle</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#remix-ide">Remix IDE</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E6%97%B6%E5%BA%8F%E5%9B%BE-6">时序图</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#substrate%E6%96%87%E6%A1%A3%E7%BB%83%E4%B9%A0">substrate文档练习</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#pallet%E5%9F%BA%E7%A1%80">pallet基础</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E5%B0%9D%E8%AF%95%E6%B7%BB%E5%8A%A0pallet%E5%88%B0runtime">尝试添加pallet到runtime</a></li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6">智能合约</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E5%88%9D%E6%8E%A2ink">初探ink!</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E6%B7%B1%E5%85%A5ink">深入ink!</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#erc20">ERC20</a></li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E8%BF%9E%E6%8E%A5%E5%85%B6%E4%BB%96%E9%93%BE">连接其他链</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E4%B8%AD%E7%BB%A7%E9%93%BE%E8%BF%9E%E6%8E%A5">中继链连接</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E5%B9%B3%E8%A1%8C%E9%93%BE%E8%BF%9E%E6%8E%A5">平行链连接</a></li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E6%B5%8B%E8%AF%95">测试</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E7%BC%96%E5%86%99%E6%B5%8B%E8%AF%95">编写测试</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#benchmarking">benchmarking</a></li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#%E5%8D%87%E7%BA%A7">升级</a></li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:59 UTC 2022 -->
<!--te-->
<h1 id="总览"><a class="header" href="#总览">总览</a></h1>
<figure><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="2679.3896px" preserveAspectRatio="none" style="width:850px;height:2679px;background:#FFFFFF;" version="1.1" viewBox="0 0 850 2679" width="850.6405px" zoomAndPan="magnify"><defs/><g><rect fill="#F1F1F1" height="23.2497" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="96.0814" x="6.4054" y="1327.6146"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="83.2705" x="12.8109" y="1342.3439">Substrate Tutorials</text><rect fill="#F1F1F1" height="44.1274" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="130.6707" x="134.5139" y="461.6761"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="49.9623" x="140.9194" y="476.4054">Get started</text><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#get-started" target="_top" title="#get-started" xlink:actuate="onRequest" xlink:href="#get-started" xlink:show="new" xlink:title="#get-started" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" text-decoration="underline" textLength="21.7784" x="193.4439" y="476.4054">jump</text></a><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="0" x="140.9194" y="486.8443"/><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="117.8598" x="140.9194" y="497.2831">开始接触Substrate基础内容</text><rect fill="#F1F1F1" height="23.2497" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="138.9977" x="297.2118" y="88.2548"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="101.8463" x="303.6172" y="102.9841">Build a local blockchain</text><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#build-a-local-blockchain" target="_top" title="#build-a-local-blockchain" xlink:actuate="onRequest" xlink:href="#build-a-local-blockchain" xlink:show="new" xlink:title="#build-a-local-blockchain" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" text-decoration="underline" textLength="21.7784" x="408.0256" y="102.9841">jump</text></a><rect fill="#F1F1F1" height="75.4439" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="283.1198" x="468.2366" y="12.8109"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="35.8704" x="474.642" y="27.5402">前置条件</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="0" x="474.642" y="37.979"/><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="266.4657" x="474.642" y="48.4179">1. 有良好的互联网连接并可以访问本地计算机上的 shell 终端。</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="233.1575" x="474.642" y="58.8567">2. 您相当(generally)熟悉软件开发并使用命令行界面。</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="149.887" x="474.642" y="69.2956">3. 相当熟悉区块链和智能合约平台。</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="270.309" x="474.642" y="79.7344">4. 你已经安装了 Rust 并按照安装中的描述设置了你的开发环境。</text><path d="M436.2095,99.8796 L442.6149,99.8796 C452.2231,99.8796 452.2231,50.5328 461.8312,50.5328 L468.2366,50.5328 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><rect fill="#F1F1F1" height="85.8827" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="166.5411" x="468.2366" y="101.0656"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="35.8704" x="474.642" y="115.795">目标内容</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="0" x="474.642" y="126.2338"/><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="114.0166" x="474.642" y="136.6726">1. 下载链端模版和前端模版</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="128.1085" x="474.642" y="147.1115">- substrate-node-template</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="153.7302" x="474.642" y="157.5503">- substrate-front-end-template</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="114.0166" x="474.642" y="167.9892">2. 启动节点、启动前端查看</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="96.0814" x="474.642" y="178.428">3. 在前端进行转账操作</text><path d="M436.2095,99.8796 L442.6149,99.8796 C452.2231,99.8796 452.2231,144.007 461.8312,144.007 L468.2366,144.007 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><path d="M265.1846,483.7398 L271.5901,483.7398 C281.1982,483.7398 281.1982,99.8796 290.8063,99.8796 L297.2118,99.8796 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><rect fill="#F1F1F1" height="169.3935" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="210.098" x="297.2118" y="207.3506"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="83.9111" x="303.6172" y="222.08">Simulate a network</text><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#simulate-a-network" target="_top" title="#simulate-a-network" xlink:actuate="onRequest" xlink:href="#simulate-a-network" xlink:show="new" xlink:title="#simulate-a-network" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" text-decoration="underline" textLength="21.7784" x="390.0904" y="222.08">jump</text></a><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="0" x="303.6172" y="232.5188"/><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="143.4815" x="303.6172" y="242.9577">本教程提供了有关如何使用一组认证</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="179.3519" x="303.6172" y="253.3965">私有验证器启动私有区块链网络的基本介绍。</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="0" x="303.6172" y="263.8354"/><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="162.6978" x="303.6172" y="274.2742">Substrate节点模板使用认证共识模型，</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="143.4815" x="303.6172" y="284.713">将块生产限制为授权账户轮换列表。</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="197.2871" x="303.6172" y="295.1519">授权账户（认证机构）负责以循环方式创建区块。</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="0" x="303.6172" y="305.5907"/><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="161.4167" x="303.6172" y="316.0296">在本教程中将通过使用两个预定义的帐户</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="143.4815" x="303.6172" y="326.4684">作为认证机制，使节点能够生成块，</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="188.3195" x="303.6172" y="336.9073">以此来了解权限共识模型在实践中的工作原理。</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="0" x="303.6172" y="347.3461"/><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="161.4167" x="303.6172" y="357.7849">在这个模拟网络中，两个节点使用不同的</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="170.3843" x="303.6172" y="368.2238">帐户和密钥启动，但在单台计算机上运行。</text><rect fill="#F1F1F1" height="85.8827" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="263.9035" x="539.3369" y="199.7592"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="35.8704" x="545.7423" y="214.4886">前置条件</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="0" x="545.7423" y="224.9274"/><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="53.8056" x="545.7423" y="235.3662">完成上一节课</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="251.0927" x="545.7423" y="245.8051">1. 安装Rust和Rust工具链，为Substrate 开发配置了环境。</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="249.8116" x="545.7423" y="256.2439">2. 已完成构建本地区块链并在本地安装Substrate节点模板。</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="149.887" x="545.7423" y="266.6828">3. 熟悉软件开发和使用命令行界面。</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="131.9518" x="545.7423" y="277.1216">4. 熟悉区块链和智能合约平台。</text><path d="M507.3097,292.0474 L513.7151,292.0474 C523.3233,292.0474 523.3233,242.7006 532.9314,242.7006 L539.3369,242.7006 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><rect fill="#F1F1F1" height="85.8827" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="253.6549" x="539.3369" y="298.4528"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="35.8704" x="545.7423" y="313.1822">目标内容</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="0" x="545.7423" y="323.621"/><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="158.8546" x="545.7423" y="334.0598">1. 使用预定义的帐户启动区块链节点。</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="167.8222" x="545.7423" y="344.4987">2. 了解用于启动节点的关键命令行选项。</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="149.887" x="545.7423" y="354.9375">3. 确定节点是否正在运行并产生块。</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="167.8222" x="545.7423" y="365.3764">4. 将第二个节点连接到正在运行的网络。</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="240.844" x="545.7423" y="375.8152">5. 验证对等计算机(peer computers)产生并最终确定块。</text><path d="M507.3097,292.0474 L513.7151,292.0474 C523.3233,292.0474 523.3233,341.3942 532.9314,341.3942 L539.3369,341.3942 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><path d="M265.1846,483.7398 L271.5901,483.7398 C281.1982,483.7398 281.1982,292.0474 290.8063,292.0474 L297.2118,292.0474 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><rect fill="#F1F1F1" height="23.2497" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="119.7815" x="297.2118" y="446.4932"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="82.63" x="303.6172" y="461.2226">Add trusted nodes</text><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#add-trusted-nodes" target="_top" title="#add-trusted-nodes" xlink:actuate="onRequest" xlink:href="#add-trusted-nodes" xlink:show="new" xlink:title="#add-trusted-nodes" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" text-decoration="underline" textLength="21.7784" x="388.8093" y="461.2226">jump</text></a><rect fill="#F1F1F1" height="44.1274" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="66.6164" x="449.0203" y="397.1464"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="35.8704" x="455.4258" y="411.8758">前置条件</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="0" x="455.4258" y="422.3146"/><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="53.8056" x="455.4258" y="432.7534">完成上一节课</text><path d="M416.9932,458.1181 L423.3986,458.1181 C433.0068,458.1181 433.0068,419.2101 442.6149,419.2101 L449.0203,419.2101 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><rect fill="#F1F1F1" height="65.0051" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="171.6654" x="449.0203" y="454.0846"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="35.8704" x="455.4258" y="468.814">目标内容</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="0" x="455.4258" y="479.2528"/><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="131.9518" x="455.4258" y="489.6917">1. 生成用作网络授权的密钥对。</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="114.0166" x="455.4258" y="500.1305">2. 创建自定义链规范文件。</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="158.8546" x="455.4258" y="510.5694">3. 启动一个私有的两节点区块链网络。</text><path d="M416.9932,458.1181 L423.3986,458.1181 C433.0068,458.1181 433.0068,486.5872 442.6149,486.5872 L449.0203,486.5872 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><path d="M265.1846,483.7398 L271.5901,483.7398 C281.1982,483.7398 281.1982,458.1181 290.8063,458.1181 L297.2118,458.1181 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><rect fill="#F1F1F1" height="23.2497" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="146.0437" x="297.2118" y="586.4668"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="108.8922" x="303.6172" y="601.1961">Authorize specific nodes</text><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#authorize-specific-nodes" target="_top" title="#authorize-specific-nodes" xlink:actuate="onRequest" xlink:href="#authorize-specific-nodes" xlink:show="new" xlink:title="#authorize-specific-nodes" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" text-decoration="underline" textLength="21.7784" x="415.0716" y="601.1961">jump</text></a><rect fill="#F1F1F1" height="54.5662" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="81.9894" x="475.2826" y="531.9006"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="35.8704" x="481.688" y="546.6299">前置条件</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="0" x="481.688" y="557.0687"/><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="69.1786" x="481.688" y="567.5076">1. 完成上一节课</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="64.0543" x="481.688" y="577.9464">2. 熟悉libp2p</text><rect fill="#F1F1F1" height="23.2497" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="39.7136" x="589.2992" y="547.5588"/><a href="https://wiki.polkadot.network/docs/faq#networking" target="_top" title="https://wiki.polkadot.network/docs/faq#networking" xlink:actuate="onRequest" xlink:href="https://wiki.polkadot.network/docs/faq#networking" xlink:show="new" xlink:title="https://wiki.polkadot.network/docs/faq#networking" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" text-decoration="underline" textLength="26.9028" x="595.7046" y="562.2882">libp2p</text></a><path d="M557.272,559.1837 L563.6775,559.1837 C573.2856,559.1837 573.2856,559.1837 582.8937,559.1837 L589.2992,559.1837 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><path d="M443.2555,598.0916 L449.6609,598.0916 C459.269,598.0916 459.269,559.1837 468.8772,559.1837 L475.2826,559.1837 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><rect fill="#F1F1F1" height="65.0051" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="230.5953" x="475.2826" y="599.2776"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="35.8704" x="481.688" y="614.007">目标内容</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="0" x="481.688" y="624.4458"/><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="105.049" x="481.688" y="634.8847">1. 检查并编译节点模板。</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="217.7845" x="481.688" y="645.3235">2. 将节点授权托盘(pallet)添加到节点模板运行时。</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="149.887" x="481.688" y="655.7623">3. 启动多个节点并授权新节点加入。</text><path d="M443.2555,598.0916 L449.6609,598.0916 C459.269,598.0916 459.269,631.7802 468.8772,631.7802 L475.2826,631.7802 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><path d="M265.1846,483.7398 L271.5901,483.7398 C281.1982,483.7398 281.1982,598.0916 290.8063,598.0916 L297.2118,598.0916 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><rect fill="#F1F1F1" height="23.2497" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="131.9518" x="297.2118" y="731.6598"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="94.8003" x="303.6172" y="746.3891">monitor node metrics</text><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#monitor-node-metrics" target="_top" title="#monitor-node-metrics" xlink:actuate="onRequest" xlink:href="#monitor-node-metrics" xlink:show="new" xlink:title="#monitor-node-metrics" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" text-decoration="underline" textLength="21.7784" x="400.9797" y="746.3891">jump</text></a><rect fill="#F1F1F1" height="54.5662" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="153.7302" x="461.1907" y="677.0935"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="35.8704" x="467.5961" y="691.8229">前置条件</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="0" x="467.5961" y="702.2617"/><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="140.9194" x="467.5961" y="712.7006">完成Build a local blockchain</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="110.1733" x="467.5961" y="723.1394">完成Simulate a network</text><path d="M429.1635,743.2846 L435.569,743.2846 C445.1771,743.2846 445.1771,704.3766 454.7852,704.3766 L461.1907,704.3766 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><rect fill="#F1F1F1" height="65.0051" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="297.2118" x="461.1907" y="744.4706"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="35.8704" x="467.5961" y="759.2">目标内容</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="0" x="467.5961" y="769.6388"/><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="153.7302" x="467.5961" y="780.0776">1. 安装 Prometheus 和 Grafana。</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="249.8116" x="467.5961" y="790.5165">2. 配置 Prometheus 以捕获 Substrate 节点的时间序列。</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="284.4009" x="467.5961" y="800.9553">3. 配置 Grafana 以可视化使用 Prometheus 端点收集的节点指标。</text><path d="M429.1635,743.2846 L435.569,743.2846 C445.1771,743.2846 445.1771,776.9731 454.7852,776.9731 L461.1907,776.9731 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><path d="M265.1846,483.7398 L271.5901,483.7398 C281.1982,483.7398 281.1982,743.2846 290.8063,743.2846 L297.2118,743.2846 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><rect fill="#F1F1F1" height="23.2497" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="157.5735" x="297.2118" y="876.8527"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="120.422" x="303.6172" y="891.5821">Upgrade a running network</text><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#upgrade-a-running-network" target="_top" title="#upgrade-a-running-network" xlink:actuate="onRequest" xlink:href="#upgrade-a-running-network" xlink:show="new" xlink:title="#upgrade-a-running-network" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" text-decoration="underline" textLength="21.7784" x="426.6014" y="891.5821">jump</text></a><rect fill="#F1F1F1" height="54.5662" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="270.309" x="486.8124" y="822.2865"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="35.8704" x="493.2178" y="837.0159">前置条件</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="0" x="493.2178" y="847.4547"/><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="138.3572" x="493.2178" y="857.8936">1. Build a local blockchain</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="257.4981" x="493.2178" y="868.3324">2. 从 Add a pallet to the runtime 了解如何添加pallet</text><path d="M454.7852,888.4776 L461.1907,888.4776 C470.7988,888.4776 470.7988,849.5696 480.4069,849.5696 L486.8124,849.5696 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><rect fill="#F1F1F1" height="65.0051" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="303.6172" x="486.8124" y="889.6636"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="35.8704" x="493.2178" y="904.3929">目标内容</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="0" x="493.2178" y="914.8318"/><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="290.8063" x="493.2178" y="925.2706">1. 使用 Sudo 托盘(sudo pallet)模拟链升级的治理(governance)。</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="176.7898" x="493.2178" y="935.7095">2. 升级运行节点的运行时以包含新的托盘。</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="96.0814" x="493.2178" y="946.1483">3. 为运行时安排升级。</text><path d="M454.7852,888.4776 L461.1907,888.4776 C470.7988,888.4776 470.7988,922.1661 480.4069,922.1661 L486.8124,922.1661 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><path d="M265.1846,483.7398 L271.5901,483.7398 C281.1982,483.7398 281.1982,888.4776 290.8063,888.4776 L297.2118,888.4776 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><path d="M102.4868,1339.2394 L108.8922,1339.2394 C118.5004,1339.2394 118.5004,483.7398 128.1085,483.7398 L134.5139,483.7398 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><rect fill="#F1F1F1" height="44.1274" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="174.2276" x="134.5139" y="1151.5805"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="74.3029" x="140.9194" y="1166.3098">Work with pallets</text><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#work-with-pallets" target="_top" title="#work-with-pallets" xlink:actuate="onRequest" xlink:href="#work-with-pallets" xlink:show="new" xlink:title="#work-with-pallets" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" text-decoration="underline" textLength="21.7784" x="217.7845" y="1166.3098">jump</text></a><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="0" x="140.9194" y="1176.7487"/><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="161.4167" x="140.9194" y="1187.1875">通过示例介绍pallets的结构和相关使用</text><rect fill="#F1F1F1" height="23.2497" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="153.7302" x="340.7687" y="1016.8263"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="116.5787" x="347.1741" y="1031.5557">Add a pallet to the runtime</text><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#add-a-pallet-to-the-runtime" target="_top" title="#add-a-pallet-to-the-runtime" xlink:actuate="onRequest" xlink:href="#add-a-pallet-to-the-runtime" xlink:show="new" xlink:title="#add-a-pallet-to-the-runtime" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" text-decoration="underline" textLength="21.7784" x="466.315" y="1031.5557">jump</text></a><rect fill="#F1F1F1" height="44.1274" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="151.168" x="526.526" y="967.4795"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="35.8704" x="532.9314" y="982.2089">前置条件</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="0" x="532.9314" y="992.6477"/><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="138.3572" x="532.9314" y="1003.0865">1. Build a local blockchain</text><path d="M494.4989,1028.4512 L500.9043,1028.4512 C510.5124,1028.4512 510.5124,989.5432 520.1206,989.5432 L526.526,989.5432 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><rect fill="#F1F1F1" height="65.0051" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="316.428" x="526.526" y="1024.4177"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="35.8704" x="532.9314" y="1039.1471">目标内容</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="0" x="532.9314" y="1049.5859"/><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="185.7573" x="532.9314" y="1060.0248">1. 了解如何更新运行时依赖项以包含新托盘。</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="303.6172" x="532.9314" y="1070.4636">2. 了解如何配置特定于托盘(pallet-specific)的 Rust 特征(trait)。</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="230.5953" x="532.9314" y="1080.9025">3. 通过使用前端模板与新托盘交互来查看运行时的更改。</text><path d="M494.4989,1028.4512 L500.9043,1028.4512 C510.5124,1028.4512 510.5124,1056.9203 520.1206,1056.9203 L526.526,1056.9203 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><path d="M308.7415,1173.6441 L315.1469,1173.6441 C324.7551,1173.6441 324.7551,1028.4512 334.3632,1028.4512 L340.7687,1028.4512 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><rect fill="#F1F1F1" height="23.2497" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="167.8222" x="340.7687" y="1141.1416"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="130.6707" x="347.1741" y="1155.871">Configure the contracts pallet</text><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#configure-the-contracts-pallet" target="_top" title="#configure-the-contracts-pallet" xlink:actuate="onRequest" xlink:href="#configure-the-contracts-pallet" xlink:show="new" xlink:title="#configure-the-contracts-pallet" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" text-decoration="underline" textLength="21.7784" x="480.4069" y="1155.871">jump</text></a><rect fill="#F1F1F1" height="44.1274" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="151.168" x="540.6179" y="1102.2337"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="35.8704" x="547.0234" y="1116.963">前置条件</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="0" x="547.0234" y="1127.4019"/><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="138.3572" x="547.0234" y="1137.8407">1. Build a local blockchain</text><path d="M508.5908,1152.7665 L514.9962,1152.7665 C524.6044,1152.7665 524.6044,1124.2973 534.2125,1124.2973 L540.6179,1124.2973 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><rect fill="#F1F1F1" height="44.1274" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="48.6812" x="540.6179" y="1159.1719"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="35.8704" x="547.0234" y="1173.9012">目标内容</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="0" x="547.0234" y="1184.3401"/><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="0" x="547.0234" y="1194.7789"/><path d="M508.5908,1152.7665 L514.9962,1152.7665 C524.6044,1152.7665 524.6044,1181.2356 534.2125,1181.2356 L540.6179,1181.2356 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><path d="M308.7415,1173.6441 L315.1469,1173.6441 C324.7551,1173.6441 324.7551,1152.7665 334.3632,1152.7665 L340.7687,1152.7665 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><rect fill="#F1F1F1" height="23.2497" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="169.7438" x="340.7687" y="1286.3346"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="132.5923" x="347.1741" y="1301.064">Use macros in a custom pallet</text><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#use-macros-in-a-custom-pallet" target="_top" title="#use-macros-in-a-custom-pallet" xlink:actuate="onRequest" xlink:href="#use-macros-in-a-custom-pallet" xlink:show="new" xlink:title="#use-macros-in-a-custom-pallet" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" text-decoration="underline" textLength="21.7784" x="482.3286" y="1301.064">jump</text></a><rect fill="#F1F1F1" height="75.4439" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="151.168" x="542.5396" y="1216.1101"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="35.8704" x="548.945" y="1230.8395">前置条件</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="0" x="548.945" y="1241.2783"/><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="0" x="548.945" y="1251.7172"/><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="138.3572" x="548.945" y="1262.156">1. Build a local blockchain</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="107.6112" x="548.945" y="1272.5948">2. Simulate a network</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="93.5192" x="548.945" y="1283.0337">3. 需要1～2h编译运行</text><path d="M510.5124,1297.9594 L516.9179,1297.9594 C526.526,1297.9594 526.526,1253.8321 536.1341,1253.8321 L542.5396,1253.8321 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><rect fill="#F1F1F1" height="75.4439" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="220.3466" x="542.5396" y="1304.3649"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="35.8704" x="548.945" y="1319.0942">目标内容</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="0" x="548.945" y="1329.5331"/><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="122.9842" x="548.945" y="1339.9719">1. 了解定制托盘的基本结构。</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="207.5358" x="548.945" y="1350.4108">2. 查看 Rust 宏如何简化需要编写的代码的示例。</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="176.7898" x="548.945" y="1360.8496">3. 启动一个包含自定义托盘的区块链节点。</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="158.8546" x="548.945" y="1371.2884">4. 添加暴露存在证明托盘的前端代码。</text><path d="M510.5124,1297.9594 L516.9179,1297.9594 C526.526,1297.9594 526.526,1342.0868 536.1341,1342.0868 L542.5396,1342.0868 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><path d="M308.7415,1173.6441 L315.1469,1173.6441 C324.7551,1173.6441 324.7551,1297.9594 334.3632,1297.9594 L340.7687,1297.9594 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><path d="M102.4868,1339.2394 L108.8922,1339.2394 C118.5004,1339.2394 118.5004,1173.6441 128.1085,1173.6441 L134.5139,1173.6441 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><rect fill="#F1F1F1" height="44.1274" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="145.4032" x="134.5139" y="1662.1279"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="108.2517" x="140.9194" y="1676.8573">Develop smart contracts</text><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#develop-smart-contracts" target="_top" title="#develop-smart-contracts" xlink:actuate="onRequest" xlink:href="#develop-smart-contracts" xlink:show="new" xlink:title="#develop-smart-contracts" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" text-decoration="underline" textLength="21.7784" x="251.7332" y="1676.8573">jump</text></a><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="0" x="140.9194" y="1687.2961"/><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="0" x="140.9194" y="1697.735"/><rect fill="#F1F1F1" height="23.2497" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="151.168" x="311.9442" y="1441.9664"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="114.0166" x="318.3497" y="1456.6958">Prepare your first contract</text><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#prepare-your-first-contract" target="_top" title="#prepare-your-first-contract" xlink:actuate="onRequest" xlink:href="#prepare-your-first-contract" xlink:show="new" xlink:title="#prepare-your-first-contract" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" text-decoration="underline" textLength="21.7784" x="434.9284" y="1456.6958">jump</text></a><rect fill="#F1F1F1" height="33.6885" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="48.6812" x="495.1394" y="1392.6196"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="35.8704" x="501.5448" y="1407.349">前置条件</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="0" x="501.5448" y="1417.7878"/><path d="M463.1123,1453.5913 L469.5177,1453.5913 C479.1258,1453.5913 479.1258,1409.4639 488.734,1409.4639 L495.1394,1409.4639 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><rect fill="#F1F1F1" height="75.4439" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="210.098" x="495.1394" y="1439.119"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="35.8704" x="501.5448" y="1453.8484">目标内容</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="0" x="501.5448" y="1464.2872"/><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="131.9518" x="501.5448" y="1474.7261">1. 了解如何创建智能合约项目。</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="197.2871" x="501.5448" y="1485.1649">2. 使用ink!智能合约语言构建和测试智能合约。</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="188.3195" x="501.5448" y="1495.6037">3. 在本地 Substrate 节点上部署智能合约。</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="131.9518" x="501.5448" y="1506.0426">4. 通过浏览器与智能合约交互。</text><path d="M463.1123,1453.5913 L469.5177,1453.5913 C479.1258,1453.5913 479.1258,1476.841 488.734,1476.841 L495.1394,1476.841 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><path d="M279.9171,1684.1916 L286.3225,1684.1916 C295.9307,1684.1916 295.9307,1453.5913 305.5388,1453.5913 L311.9442,1453.5913 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><rect fill="#F1F1F1" height="23.2497" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="147.9653" x="311.9442" y="1581.94"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="110.8139" x="318.3497" y="1596.6693">Develop a smart contract</text><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#develop-a-smart-contract" target="_top" title="#develop-a-smart-contract" xlink:actuate="onRequest" xlink:href="#develop-a-smart-contract" xlink:show="new" xlink:title="#develop-a-smart-contract" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" text-decoration="underline" textLength="21.7784" x="431.7257" y="1596.6693">jump</text></a><rect fill="#F1F1F1" height="44.1274" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="166.5411" x="491.9367" y="1527.3738"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="35.8704" x="498.3421" y="1542.1031">前置条件</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="0" x="498.3421" y="1552.542"/><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="153.7302" x="498.3421" y="1562.9808">1. Prepare your first contract</text><path d="M459.9096,1593.5648 L466.315,1593.5648 C475.9231,1593.5648 475.9231,1549.4375 485.5313,1549.4375 L491.9367,1549.4375 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><rect fill="#F1F1F1" height="75.4439" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="171.6654" x="491.9367" y="1584.312"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="35.8704" x="498.3421" y="1599.0414">目标内容</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="0" x="498.3421" y="1609.4802"/><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="131.9518" x="498.3421" y="1619.919">1. 了解如何使用智能合约模板。</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="122.9842" x="498.3421" y="1630.3579">2. 使用智能合约存储简单值。</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="158.8546" x="498.3421" y="1640.7967">3. 使用智能合约增加和检索存储的值。</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="149.887" x="498.3421" y="1651.2356">4. 向智能合约添加公共和私有功能。</text><path d="M459.9096,1593.5648 L466.315,1593.5648 C475.9231,1593.5648 475.9231,1622.034 485.5313,1622.034 L491.9367,1622.034 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><path d="M279.9171,1684.1916 L286.3225,1684.1916 C295.9307,1684.1916 295.9307,1593.5648 305.5388,1593.5648 L311.9442,1593.5648 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><rect fill="#F1F1F1" height="23.2497" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="159.4951" x="311.9442" y="1706.2553"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="122.3436" x="318.3497" y="1720.9847">Use maps for storing values</text><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#use-maps-for-storing-values" target="_top" title="#use-maps-for-storing-values" xlink:actuate="onRequest" xlink:href="#use-maps-for-storing-values" xlink:show="new" xlink:title="#use-maps-for-storing-values" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" text-decoration="underline" textLength="21.7784" x="443.2555" y="1720.9847">jump</text></a><rect fill="#F1F1F1" height="33.6885" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="48.6812" x="503.4665" y="1672.5668"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="35.8704" x="509.8719" y="1687.2961">前置条件</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="0" x="509.8719" y="1697.735"/><path d="M471.4393,1717.8801 L477.8448,1717.8801 C487.4529,1717.8801 487.4529,1689.411 497.061,1689.411 L503.4665,1689.411 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><rect fill="#F1F1F1" height="44.1274" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="48.6812" x="503.4665" y="1719.0662"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="35.8704" x="509.8719" y="1733.7955">目标内容</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="0" x="509.8719" y="1744.2343"/><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="0" x="509.8719" y="1754.6732"/><path d="M471.4393,1717.8801 L477.8448,1717.8801 C487.4529,1717.8801 487.4529,1741.1298 497.061,1741.1298 L503.4665,1741.1298 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><path d="M279.9171,1684.1916 L286.3225,1684.1916 C295.9307,1684.1916 295.9307,1717.8801 305.5388,1717.8801 L311.9442,1717.8801 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><rect fill="#F1F1F1" height="23.2497" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="131.9518" x="311.9442" y="1846.2289"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="94.8003" x="318.3497" y="1860.9582">Buid a token contract</text><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#build-a-token-contract" target="_top" title="#build-a-token-contract" xlink:actuate="onRequest" xlink:href="#build-a-token-contract" xlink:show="new" xlink:title="#build-a-token-contract" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" text-decoration="underline" textLength="21.7784" x="415.7121" y="1860.9582">jump</text></a><rect fill="#F1F1F1" height="65.0051" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="166.5411" x="475.9231" y="1776.0044"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="35.8704" x="482.3286" y="1790.7337">前置条件</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="0" x="482.3286" y="1801.1726"/><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="0" x="482.3286" y="1811.6114"/><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="153.7302" x="482.3286" y="1822.0503">1. Prepare your first contract</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="138.3572" x="482.3286" y="1832.4891">2. Develop a smart contract</text><path d="M443.896,1857.8537 L450.3014,1857.8537 C459.9096,1857.8537 459.9096,1808.5069 469.5177,1808.5069 L475.9231,1808.5069 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><rect fill="#F1F1F1" height="85.8827" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="212.6601" x="475.9231" y="1853.8203"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="35.8704" x="482.3286" y="1868.5496">目标内容</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="0" x="482.3286" y="1878.9885"/><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="199.8493" x="482.3286" y="1889.4273">1. 了解 ERC-20 标准中定义的基本属性和接口。</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="146.0437" x="482.3286" y="1899.8662">2. 创建符合 ERC-20 标准的代币。</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="105.049" x="482.3286" y="1910.305">3. 在合约之间转移代币。</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="185.7573" x="482.3286" y="1920.7439">4. 处理涉及批准或第三方的转移活动的路由。</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="131.9518" x="482.3286" y="1931.1827">5. 创建与令牌活动相关的事件。</text><path d="M443.896,1857.8537 L450.3014,1857.8537 C459.9096,1857.8537 459.9096,1896.7617 469.5177,1896.7617 L475.9231,1896.7617 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><path d="M279.9171,1684.1916 L286.3225,1684.1916 C295.9307,1684.1916 295.9307,1857.8537 305.5388,1857.8537 L311.9442,1857.8537 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><rect fill="#F1F1F1" height="23.2497" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="168.4627" x="311.9442" y="1952.5139"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="131.3112" x="318.3497" y="1967.2432">Troubleshoot smart contracts</text><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#troubleshoot-smart-contracts" target="_top" title="#troubleshoot-smart-contracts" xlink:actuate="onRequest" xlink:href="#troubleshoot-smart-contracts" xlink:show="new" xlink:title="#troubleshoot-smart-contracts" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" text-decoration="underline" textLength="21.7784" x="452.2231" y="1967.2432">jump</text></a><path d="M279.9171,1684.1916 L286.3225,1684.1916 C295.9307,1684.1916 295.9307,1964.1387 305.5388,1964.1387 L311.9442,1964.1387 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><path d="M102.4868,1339.2394 L108.8922,1339.2394 C118.5004,1339.2394 118.5004,1684.1916 128.1085,1684.1916 L134.5139,1684.1916 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><rect fill="#F1F1F1" height="23.2497" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="153.0897" x="134.5139" y="2315.4964"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="115.9382" x="140.9194" y="2330.2257">Connect with other chains</text><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#connect-with-other-chains" target="_top" title="#connect-with-other-chains" xlink:actuate="onRequest" xlink:href="#connect-with-other-chains" xlink:show="new" xlink:title="#connect-with-other-chains" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" text-decoration="underline" textLength="21.7784" x="259.4197" y="2330.2257">jump</text></a><rect fill="#F1F1F1" height="23.2497" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="137.0761" x="319.6307" y="2058.7989"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="99.9246" x="326.0362" y="2073.5283">Start a local relay chain</text><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#start-a-local-relay-chain" target="_top" title="#start-a-local-relay-chain" xlink:actuate="onRequest" xlink:href="#start-a-local-relay-chain" xlink:show="new" xlink:title="#start-a-local-relay-chain" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" text-decoration="underline" textLength="21.7784" x="428.523" y="2073.5283">jump</text></a><rect fill="#F1F1F1" height="75.4439" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="151.168" x="488.734" y="1988.5744"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="35.8704" x="495.1394" y="2003.3038">前置条件</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="0" x="495.1394" y="2013.7426"/><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="138.3572" x="495.1394" y="2024.1815">1. Build a local blockchain</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="102.4868" x="495.1394" y="2034.6203">2. Add trusted nodes</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="78.1462" x="495.1394" y="2045.0592">3. 了解波卡的架构</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="60.211" x="495.1394" y="2055.498">4. 了解平行链</text><rect fill="#F1F1F1" height="23.2497" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="118.5004" x="671.9292" y="1996.6413"/><a href="https://wiki.polkadot.network/docs/learn-architecture" target="_top" title="https://wiki.polkadot.network/docs/learn-architecture" xlink:actuate="onRequest" xlink:href="https://wiki.polkadot.network/docs/learn-architecture" xlink:show="new" xlink:title="https://wiki.polkadot.network/docs/learn-architecture" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" text-decoration="underline" textLength="105.6895" x="678.3346" y="2011.3706">Atchitecture of Polkadot</text></a><path d="M639.902,2026.2964 L646.3075,2026.2964 C655.9156,2026.2964 655.9156,2008.2661 665.5237,2008.2661 L671.9292,2008.2661 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><rect fill="#F1F1F1" height="23.2497" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="60.8515" x="671.9292" y="2032.7018"/><a href="https://wiki.polkadot.network/docs/learn-parachains" target="_top" title="https://wiki.polkadot.network/docs/learn-parachains" xlink:actuate="onRequest" xlink:href="https://wiki.polkadot.network/docs/learn-parachains" xlink:show="new" xlink:title="https://wiki.polkadot.network/docs/learn-parachains" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" text-decoration="underline" textLength="48.0407" x="678.3346" y="2047.4312">Parachains</text></a><path d="M639.902,2026.2964 L646.3075,2026.2964 C655.9156,2026.2964 655.9156,2044.3267 665.5237,2044.3267 L671.9292,2044.3267 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><path d="M456.7069,2070.4238 L463.1123,2070.4238 C472.7204,2070.4238 472.7204,2026.2964 482.3286,2026.2964 L488.734,2026.2964 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><rect fill="#F1F1F1" height="75.4439" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="179.3519" x="488.734" y="2076.8292"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="35.8704" x="495.1394" y="2091.5585">目标内容</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="0" x="495.1394" y="2101.9974"/><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="78.1462" x="495.1394" y="2112.4362">1. 确认软件需求。</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="166.5411" x="495.1394" y="2122.8751">2. 设置平行链(para chain)构建环境。</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="153.7302" x="495.1394" y="2133.3139">3. 准备中继链(relay chain)规格。</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="96.0814" x="495.1394" y="2143.7528">4. 在本地启动中继链。</text><path d="M456.7069,2070.4238 L463.1123,2070.4238 C472.7204,2070.4238 472.7204,2114.5511 482.3286,2114.5511 L488.734,2114.5511 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><path d="M287.6036,2327.1212 L294.009,2327.1212 C303.6172,2327.1212 303.6172,2070.4238 313.2253,2070.4238 L319.6307,2070.4238 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><rect fill="#F1F1F1" height="23.2497" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="150.5275" x="319.6307" y="2232.461"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="113.376" x="326.0362" y="2247.1904">Connect a local parachain</text><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#connect-a-local-parachain" target="_top" title="#connect-a-local-parachain" xlink:actuate="onRequest" xlink:href="#connect-a-local-parachain" xlink:show="new" xlink:title="#connect-a-local-parachain" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" text-decoration="underline" textLength="21.7784" x="441.9744" y="2247.1904">jump</text></a><rect fill="#F1F1F1" height="54.5662" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="245.9683" x="502.1854" y="2165.084"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="35.8704" x="508.5908" y="2179.8133">前置条件</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="0" x="508.5908" y="2190.2521"/><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="143.4815" x="508.5908" y="2200.691">1. Start a local relay chain</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="233.1575" x="508.5908" y="2211.1298">2. 注意与1的波卡版本一致，比如： polkadot-v0.9.24</text><path d="M470.1583,2244.0859 L476.5637,2244.0859 C486.1718,2244.0859 486.1718,2192.3671 495.78,2192.3671 L502.1854,2192.3671 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><rect fill="#F1F1F1" height="23.2497" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="220.9872" x="502.1854" y="2232.461"/><a href="https://github.com/substrate-developer-hub/substrate-parachain-template/tree/polkadot-v0.9.24" target="_top" title="https://github.com/substrate-developer-hub/substrate-parachain-template/tree/polkadot-v0.9.24" xlink:actuate="onRequest" xlink:href="https://github.com/substrate-developer-hub/substrate-parachain-template/tree/polkadot-v0.9.24" xlink:show="new" xlink:title="https://github.com/substrate-developer-hub/substrate-parachain-template/tree/polkadot-v0.9.24" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" text-decoration="underline" textLength="208.1763" x="508.5908" y="2247.1904">polkadot-v0.9.24/substrate-parachain-template</text></a><path d="M470.1583,2244.0859 L476.5637,2244.0859 C486.1718,2244.0859 486.1718,2244.0859 495.78,2244.0859 L502.1854,2244.0859 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><rect fill="#F1F1F1" height="54.5662" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="207.5358" x="502.1854" y="2268.5216"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="35.8704" x="508.5908" y="2283.2509">目标内容</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="0" x="508.5908" y="2293.6898"/><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="194.7249" x="508.5908" y="2304.1286">1. 在中继链上为你的平行链注册一个 ParaID。</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="131.9518" x="508.5908" y="2314.5674">2. 在中继链上开始生产平行链。</text><path d="M470.1583,2244.0859 L476.5637,2244.0859 C486.1718,2244.0859 486.1718,2295.8047 495.78,2295.8047 L502.1854,2295.8047 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><path d="M287.6036,2327.1212 L294.009,2327.1212 C303.6172,2327.1212 303.6172,2244.0859 313.2253,2244.0859 L319.6307,2244.0859 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><rect fill="#F1F1F1" height="23.2497" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="157.5735" x="319.6307" y="2380.026"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="120.422" x="326.0362" y="2394.7554">Connect to Rococo testnet</text><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#connect-to-rococo-testnet" target="_top" title="#connect-to-rococo-testnet" xlink:actuate="onRequest" xlink:href="#connect-to-rococo-testnet" xlink:show="new" xlink:title="#connect-to-rococo-testnet" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" text-decoration="underline" textLength="21.7784" x="449.0203" y="2394.7554">jump</text></a><rect fill="#F1F1F1" height="75.4439" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="156.2924" x="509.2313" y="2335.8986"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="35.8704" x="515.6368" y="2350.628">前置条件</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="0" x="515.6368" y="2361.0668"/><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="125.5463" x="515.6368" y="2371.5057">1. 回顾Add trusted nodes:</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="117.8598" x="515.6368" y="2381.9445">- 如何生成并修改链规范文件</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="93.5192" x="515.6368" y="2392.3834">- 如何生成和存储keys</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="143.4815" x="515.6368" y="2402.8222">2. Connect a local parachain</text><path d="M477.2042,2391.6509 L483.6096,2391.6509 C493.2178,2391.6509 493.2178,2373.6206 502.8259,2373.6206 L509.2313,2373.6206 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><rect fill="#F1F1F1" height="23.2497" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="48.6812" x="509.2313" y="2424.1534"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="35.8704" x="515.6368" y="2438.8828">目标内容</text><path d="M477.2042,2391.6509 L483.6096,2391.6509 C493.2178,2391.6509 493.2178,2435.7782 502.8259,2435.7782 L509.2313,2435.7782 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><path d="M287.6036,2327.1212 L294.009,2327.1212 C303.6172,2327.1212 303.6172,2391.6509 313.2253,2391.6509 L319.6307,2391.6509 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><rect fill="#F1F1F1" height="23.2497" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="134.5139" x="319.6307" y="2551.3161"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="97.3625" x="326.0362" y="2566.0455">Access EVM accounts</text><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#access-evm-accounts" target="_top" title="#access-evm-accounts" xlink:actuate="onRequest" xlink:href="#access-evm-accounts" xlink:show="new" xlink:title="#access-evm-accounts" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" text-decoration="underline" textLength="21.7784" x="425.9608" y="2566.0455">jump</text></a><rect fill="#F1F1F1" height="169.3935" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="274.1522" x="486.1718" y="2460.2139"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="35.8704" x="492.5772" y="2474.9433">前置条件</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="0" x="492.5772" y="2485.3821"/><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="53.8056" x="492.5772" y="2495.821">一、完成课程</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="138.3572" x="492.5772" y="2506.2598">1. Build a local blockchain</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="153.7302" x="492.5772" y="2516.6987">2. Add a pallet to the runtime</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="163.9789" x="492.5772" y="2527.1375">3. Use macros in a custom pallet</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="53.8056" x="492.5772" y="2537.5764">二、熟悉操作</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="161.4167" x="492.5772" y="2548.0152">1. 启动一个 Substrate 区块链节点。</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="149.887" x="492.5772" y="2558.454">2. 在运行时添加、移除和配置托盘。</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="261.3414" x="492.5772" y="2568.8929">3. 通过使用 Polkadot-JS 或其他前端连接到节点来提交交易。</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="53.8056" x="492.5772" y="2579.3317">三、掌握概念</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="105.049" x="492.5772" y="2589.7706">1. 以太坊核心概念和术语</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="140.9194" x="492.5772" y="2600.2094">2. 以太坊虚拟机 (EVM) 基础知识</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="131.9518" x="492.5772" y="2610.6482">3. 去中心化应用程序和智能合约</text><text fill="#000000" font-family="monospace" font-size="8.9676" lengthAdjust="spacing" textLength="69.1786" x="492.5772" y="2621.0871">4. 托盘设计原则</text><path d="M454.1447,2562.941 L460.5501,2562.941 C470.1583,2562.941 470.1583,2544.9107 479.7664,2544.9107 L486.1718,2544.9107 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><rect fill="#F1F1F1" height="23.2497" rx="8.0068" ry="8.0068" style="stroke:#181818;stroke-width:0.9608138658628484;" width="48.6812" x="486.1718" y="2642.4183"/><text fill="#000000" font-family="sans-serif" font-size="8.9676" lengthAdjust="spacing" textLength="35.8704" x="492.5772" y="2657.1476">目标内容</text><path d="M454.1447,2562.941 L460.5501,2562.941 C470.1583,2562.941 470.1583,2654.0431 479.7664,2654.0431 L486.1718,2654.0431 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><path d="M287.6036,2327.1212 L294.009,2327.1212 C303.6172,2327.1212 303.6172,2562.941 313.2253,2562.941 L319.6307,2562.941 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/><path d="M102.4868,1339.2394 L108.8922,1339.2394 C118.5004,1339.2394 118.5004,2327.1212 128.1085,2327.1212 L134.5139,2327.1212 " fill="none" style="stroke:#181818;stroke-width:0.640542577241899;"/></g></svg></figure>
<h1 id="get-started"><a class="header" href="#get-started">Get Started</a></h1>
<h2 id="build-a-local-blockchain"><a class="header" href="#build-a-local-blockchain">Build a local blockchain</a></h2>
<figure><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="504.6316px" preserveAspectRatio="none" style="width:850px;height:504px;background:#FFFFFF;" version="1.1" viewBox="0 0 850 504" width="850.8947px" zoomAndPan="magnify"><defs/><g><rect fill="#F1F1F1" height="32.4762" rx="11.1842" ry="11.1842" style="stroke:#181818;stroke-width:1.3421052631578947;" width="188.7895" x="8.9474" y="235.2878"/><text fill="#000000" font-family="sans-serif" font-size="12.5263" lengthAdjust="spacing" textLength="142.2632" x="17.8947" y="255.8624">Build a local blockchain</text><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#总览" target="_top" title="#总览" xlink:actuate="onRequest" xlink:href="#总览" xlink:show="new" xlink:title="#总览" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="12.5263" lengthAdjust="spacing" text-decoration="underline" textLength="25.0526" x="163.7368" y="255.8624">返回</text></a><rect fill="#F1F1F1" height="90.8018" rx="11.1842" ry="11.1842" style="stroke:#181818;stroke-width:1.3421052631578947;" width="561.8947" x="242.4737" y="17.8947"/><text fill="#000000" font-family="sans-serif" font-size="12.5263" lengthAdjust="spacing" textLength="164.6316" x="251.4211" y="38.4693">Compile a Substrate node:</text><text fill="#000000" font-family="monospace" font-size="12.5263" lengthAdjust="spacing" textLength="0" x="251.4211" y="53.0507"/><text fill="#000000" font-family="monospace" font-size="12.5263" lengthAdjust="spacing" textLength="544" x="251.4211" y="67.6321">git clone https://github.com/substrate-developer-hub/substrate-node-template</text><text fill="#000000" font-family="monospace" font-size="12.5263" lengthAdjust="spacing" textLength="350.7368" x="251.4211" y="82.2136">cd substrate-node-template &amp;&amp; git checkout latest</text><text fill="#000000" font-family="monospace" font-size="12.5263" lengthAdjust="spacing" textLength="150.3158" x="251.4211" y="96.795">cargo build --release</text><path d="M197.7368,251.5259 L206.6842,251.5259 C220.1053,251.5259 220.1053,63.2956 233.5263,63.2956 L242.4737,63.2956 " fill="none" style="stroke:#181818;stroke-width:0.8947368421052632;"/><rect fill="#F1F1F1" height="61.639" rx="11.1842" ry="11.1842" style="stroke:#181818;stroke-width:1.3421052631578947;" width="275.5789" x="242.4737" y="126.5913"/><text fill="#000000" font-family="sans-serif" font-size="12.5263" lengthAdjust="spacing" textLength="124.3684" x="251.4211" y="147.1659">Start the local node:</text><text fill="#000000" font-family="monospace" font-size="12.5263" lengthAdjust="spacing" textLength="0" x="251.4211" y="161.7473"/><text fill="#000000" font-family="monospace" font-size="12.5263" lengthAdjust="spacing" textLength="257.6842" x="251.4211" y="176.3287">./target/release/node-template --dev</text><path d="M197.7368,251.5259 L206.6842,251.5259 C220.1053,251.5259 220.1053,157.4108 233.5263,157.4108 L242.4737,157.4108 " fill="none" style="stroke:#181818;stroke-width:0.8947368421052632;"/><rect fill="#F1F1F1" height="134.5461" rx="11.1842" ry="11.1842" style="stroke:#181818;stroke-width:1.3421052631578947;" width="597.6842" x="242.4737" y="206.125"/><text fill="#000000" font-family="sans-serif" font-size="12.5263" lengthAdjust="spacing" textLength="182.5263" x="251.4211" y="226.6996">Install the front-end template:</text><text fill="#000000" font-family="monospace" font-size="12.5263" lengthAdjust="spacing" textLength="0" x="251.4211" y="241.281"/><text fill="#000000" font-family="monospace" font-size="12.5263" lengthAdjust="spacing" textLength="100.2105" x="251.4211" y="255.8624">node --version</text><text fill="#000000" font-family="monospace" font-size="12.5263" lengthAdjust="spacing" textLength="100.2105" x="251.4211" y="270.4438">yarn --version</text><text fill="#000000" font-family="monospace" font-size="12.5263" lengthAdjust="spacing" textLength="136" x="251.4211" y="285.0252">npm install -g yarn</text><text fill="#000000" font-family="monospace" font-size="12.5263" lengthAdjust="spacing" textLength="579.7895" x="251.4211" y="299.6067">git clone https://github.com/substrate-developer-hub/substrate-front-end-template</text><text fill="#000000" font-family="monospace" font-size="12.5263" lengthAdjust="spacing" textLength="221.8947" x="251.4211" y="314.1881">cd substrate-front-end-template</text><text fill="#000000" font-family="monospace" font-size="12.5263" lengthAdjust="spacing" textLength="85.8947" x="251.4211" y="328.7695">yarn install</text><path d="M197.7368,251.5259 L206.6842,251.5259 C220.1053,251.5259 220.1053,273.398 233.5263,273.398 L242.4737,273.398 " fill="none" style="stroke:#181818;stroke-width:0.8947368421052632;"/><rect fill="#F1F1F1" height="76.2204" rx="11.1842" ry="11.1842" style="stroke:#181818;stroke-width:1.3421052631578947;" width="526.1053" x="242.4737" y="358.5658"/><text fill="#000000" font-family="sans-serif" font-size="12.5263" lengthAdjust="spacing" textLength="176.2632" x="251.4211" y="379.1404">Start the front-end template:</text><text fill="#000000" font-family="monospace" font-size="12.5263" lengthAdjust="spacing" textLength="0" x="251.4211" y="393.7218"/><text fill="#000000" font-family="monospace" font-size="12.5263" lengthAdjust="spacing" textLength="71.5789" x="251.4211" y="408.3032">yarn start</text><text fill="#000000" font-family="monospace" font-size="12.5263" lengthAdjust="spacing" textLength="508.2105" x="251.4211" y="422.8846">Open http://localhost:8000 in a browser to view the front-end template.</text><path d="M197.7368,251.5259 L206.6842,251.5259 C220.1053,251.5259 220.1053,396.676 233.5263,396.676 L242.4737,396.676 " fill="none" style="stroke:#181818;stroke-width:0.8947368421052632;"/><rect fill="#F1F1F1" height="32.4762" rx="11.1842" ry="11.1842" style="stroke:#181818;stroke-width:1.3421052631578947;" width="211.1579" x="242.4737" y="452.6809"/><text fill="#000000" font-family="sans-serif" font-size="12.5263" lengthAdjust="spacing" textLength="193.2632" x="251.4211" y="473.2555">Transfer funds from an account</text><path d="M197.7368,251.5259 L206.6842,251.5259 C220.1053,251.5259 220.1053,468.919 233.5263,468.919 L242.4737,468.919 " fill="none" style="stroke:#181818;stroke-width:0.8947368421052632;"/></g></svg></figure>
<blockquote>
<p>这里主要使用官方提供的默认模版启动节点。</p>
</blockquote>
<ul>
<li><a href="https://docs.substrate.io/tutorials/get-started/build-local-blockchain/">Build a local blockchain | Substrate_ Docs</a></li>
</ul>
<div id="admonition-一定要注意文档是否更新" class="admonition note">
<div class="admonition-title">
<p>一定要注意文档是否更新</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#admonition-一定要注意文档是否更新"></a></p>
</div>
<div>
<p>由于rust对crate的版本只能检查，无法解决冲突问题，需要手动进行，所以一定要注意文档是否有更新，尤其是里面的代码</p>
</div>
</div>
<p><a href="https://github.com/substrate-developer-hub/substrate-docs/issues/1132">New Substrate documentation released · Issue #1132 · substrate-developer-hub/substrate-docs</a></p>
<blockquote>
<p>另外，substrate官方文档也一直处在更新状态中。</p>
</blockquote>
<h3 id="设置开发环境"><a class="header" href="#设置开发环境">设置开发环境</a></h3>
<h4 id="使用rustup设置rust环境"><a class="header" href="#使用rustup设置rust环境">使用rustup设置rust环境</a></h4>
<pre><code class="language-shell"># 1.安装预编译包
sudo apt update &amp;&amp; sudo apt install -y git clang curl libssl-dev llvm libudev-dev

# 2.安装Rust编译环境
curl https://sh.rustup.rs -sSf | sh
source ~/.cargo/env
rustup default stable
rustup update
rustup update nightly
rustup target add wasm32-unknown-unknown --toolchain nightly
</code></pre>
<h4 id="检查环境"><a class="header" href="#检查环境">检查环境</a></h4>
<pre><code class="language-shell">rustc --version
rustup show
</code></pre>
<h3 id="启动链节点"><a class="header" href="#启动链节点">启动链节点</a></h3>
<div id="admonition-node-template" class="admonition info">
<div class="admonition-title">
<p>node-template</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#admonition-node-template"></a></p>
</div>
<div>
<p>node-template实际上是官方提供的使用substrate开发的模板链，可以理解为substrate官方提供的样例，后续任何人想使用substrate可以在这个样例的基础上进行修改，这样开发链就更方便。</p>
<blockquote>
<p>这就好比以前的好多山寨链，在btc的源码上改下创世区块的配置，就是一条新链。那么substrate其实也一样，提供了node-template这样一个模板，后续根据需求在这个上面改吧改吧，就能产生一条新链。</p>
</blockquote>
</div>
</div>
<h4 id="下载node-template"><a class="header" href="#下载node-template">下载node-template</a></h4>
<pre><code class="language-shell">git clone https://github.com/substrate-developer-hub/substrate-node-template
cd substrate-node-template
git checkout latest
</code></pre>
<div id="admonition-注意查看最新分支的编号" class="admonition note">
<div class="admonition-title">
<p>⚠️注意查看最新分支的编号</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#admonition-注意查看最新分支的编号"></a></p>
</div>
<div>
<p>/home/substrate-node-template on  #polkadot-v0.9.24</p>
</div>
</div>
<h4 id="node-templeate项目结构"><a class="header" href="#node-templeate项目结构">node-templeate项目结构</a></h4>
<div id="admonition-node-template项目结构" class="admonition info">
<div class="admonition-title">
<p>node-template项目结构</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#admonition-node-template项目结构"></a></p>
</div>
<div>
<pre><code class="language-shell">tree -L 2                                                                                                                                                                                                                              ─╯
.
├── Cargo.lock
├── Cargo.toml
├── LICENSE
├── README.md
├── docker-compose.yml
├── docs
│   └── rust-setup.md
├── node
│   ├── Cargo.toml
│   ├── build.rs
│   └── src
├── pallets
│   └── template
├── runtime
│   ├── Cargo.toml
│   ├── build.rs
│   └── src
├── rustfmt.toml
├── scripts
│   ├── docker_run.sh
│   └── init.sh
├── shell.nix
└── target
    ├── CACHEDIR.TAG
    └── release

10 directories, 15 files
</code></pre>
</div>
</div>
<h4 id="cargotoml"><a class="header" href="#cargotoml">Cargo.toml</a></h4>
<pre><code class="language-toml">[workspace]
members = [
    &quot;node&quot;,
    &quot;pallets/template&quot;,
    &quot;runtime&quot;,
]
[profile.release]
panic = &quot;unwind&quot;
</code></pre>
<blockquote>
<p>可见node-template主要包含三部分：node、pallets/template、runtime</p>
</blockquote>
<h4 id="编译前的检查"><a class="header" href="#编译前的检查">编译前的检查</a></h4>
<pre><code class="language-shell">cargo check -p node-template-runtime
</code></pre>
<div id="admonition-idea将会在修改cargotoml之后自动执行指令进行检查" class="admonition tip">
<div class="admonition-title">
<p>IDEA将会在修改Cargo.toml之后自动执行指令进行检查</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#admonition-idea将会在修改cargotoml之后自动执行指令进行检查"></a></p>
</div>
<div>
<pre><code class="language-shell">cargo metadata --verbose --format-version 1 --all-features
</code></pre>
</div>
</div>
<ul>
<li><a href="https://doc.rust-lang.org/cargo/commands/cargo-metadata.html">cargo metadata - The Cargo Book</a></li>
</ul>
<blockquote>
<p>Output JSON to stdout containing information about the workspace members and resolved dependencies of the current
package.</p>
</blockquote>
<p>It is recommended to include the –format-version flag to future-proof your code to ensure the output is in the format
you are expecting.</p>
<h4 id="编译"><a class="header" href="#编译">编译</a></h4>
<pre><code class="language-shell">cargo build --release
</code></pre>
<blockquote>
<p>这个过程比较慢，会下载并编译上面三部分内的Cargo.toml列出的所有包</p>
</blockquote>
<h4 id="可能遇到的问题"><a class="header" href="#可能遇到的问题">可能遇到的问题</a></h4>
<ul>
<li>安装cmake</li>
</ul>
<pre><code class="language-shell">brew install cmake
</code></pre>
<h4 id="本地运行节点"><a class="header" href="#本地运行节点">本地运行节点</a></h4>
<pre><code class="language-shell">./target/release/node-template --dev
</code></pre>
<h4 id="docker运行节点"><a class="header" href="#docker运行节点">docker运行节点</a></h4>
<h3 id="前端访问"><a class="header" href="#前端访问">前端访问</a></h3>
<p><a href="https://docs.substrate.io/tutorials/get-started/build-local-blockchain/#install-the-front-end-template">Build a local blockchain | Substrate_ Docs</a></p>
<h4 id="使用前端模版"><a class="header" href="#使用前端模版">使用前端模版</a></h4>
<pre><code class="language-shell">node --version
yarn --version
npm install -g yarn
git clone https://github.com/substrate-developer-hub/substrate-front-end-template
cd substrate-front-end-template
yarn install
yarn start
</code></pre>
<blockquote>
<p>启动后访问本地：http://localhost:8000</p>
</blockquote>
<h4 id="使用polkadot-js访问节点"><a class="header" href="#使用polkadot-js访问节点">使用polkadot-js访问节点</a></h4>
<div id="admonition-polkadot-js-app" class="admonition info">
<div class="admonition-title">
<p>polkadot-js-app</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#admonition-polkadot-js-app"></a></p>
</div>
<div>
<p>在substrate官方的教程中，是使用了substrate的前端模板来访问刚才启动的节点。但是在实际的开发中，后端人员其实更多的使用polkadot-js-app来访问我们的节点，所以这里我们也使用它来访问我们的节点。</p>
</div>
</div>
<ul>
<li>在浏览器中输入https://polkadot.js.org/apps, 点击左上角会展开；</li>
</ul>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/CleanShot%202022-07-01%20at%2020.08.02%402x.png" alt="CleanShot 2022-07-01 at 20.08.02@2x" /></p>
<ul>
<li>
<p>在展开的菜单中点击DEVELOPMENT；</p>
</li>
<li>
<p>点击Local Node；</p>
</li>
<li>
<p>点击switch。</p>
</li>
</ul>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/CleanShot%202022-07-01%20at%2020.17.59%402x.png" alt="CleanShot 2022-07-01 at 20.17.59@2x" /></p>
<h3 id="substrate使用方式"><a class="header" href="#substrate使用方式">Substrate使用方式</a></h3>
<blockquote>
<p>使用substrate的方式主要有以下几种：</p>
</blockquote>
<h4 id="使用subtrate-node"><a class="header" href="#使用subtrate-node">使用subtrate node</a></h4>
<p>开发者可以运行已经设计好的substrate节点，并配置genesis区块，在此方式下只需要提供一个json文件就可以启动自己的区块链。其实我们上一节的substrate初体验，也可以看成是使用此种方式的一个例子。</p>
<h4 id="使用substrate-frame"><a class="header" href="#使用substrate-frame">使用substrate frame</a></h4>
<p>frame其实是一组模块（pallet）和支持库。使用substrate frame可以轻松的创建自己的自定义运行时，因为frame是用来构建底层节点的。使用frame还可以配置数据类型，也可以从模块库中选择甚至是添加自己定义的模块。</p>
<h4 id="使用substrate-core"><a class="header" href="#使用substrate-core">使用substrate core</a></h4>
<p>使用substrate code运行开发者完全从头开始设计运行时（runtime，问题：什么是runtime？），当然此种方式也是使用substrate自由度最大的方式。</p>
<div id="admonition-几种方式的关系可以用图描述如下技术自由-vs-开发便利" class="admonition tip">
<div class="admonition-title">
<p>几种方式的关系可以用图描述如下：技术自由 vs 开发便利</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#admonition-几种方式的关系可以用图描述如下技术自由-vs-开发便利"></a></p>
</div>
<div>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/technical-freedom.png" alt="Technical freedom vs development ease" /></p>
</div>
</div>
<h2 id="simulate-a-network"><a class="header" href="#simulate-a-network">Simulate a network</a></h2>
<blockquote>
<p><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#substrate%E5%AE%98%E6%96%B9%E6%95%99%E7%A8%8B%E6%A2%B3%E7%90%86%E4%B8%8E%E7%BB%83%E4%B9%A0">返回顶部</a></p>
</blockquote>
<figure><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="689.0656px" preserveAspectRatio="none" style="width:850px;height:689px;background:#FFFFFF;" version="1.1" viewBox="0 0 850 689" width="850.4159px" zoomAndPan="magnify"><defs/><g><rect fill="#F1F1F1" height="15.0941" rx="5.1981" ry="5.1981" style="stroke:#181818;stroke-width:0.6237769080234834;" width="76.1008" x="4.1585" y="336.695"/><text fill="#000000" font-family="sans-serif" font-size="5.8219" lengthAdjust="spacing" textLength="54.4765" x="8.317" y="346.2575">Simulate a network</text><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#总览" target="_top" title="#总览" xlink:actuate="onRequest" xlink:href="#总览" xlink:show="new" xlink:title="#总览" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="5.8219" lengthAdjust="spacing" text-decoration="underline" textLength="11.6438" x="64.4569" y="346.2575">返回</text></a><rect fill="#F1F1F1" height="15.0941" rx="5.1981" ry="5.1981" style="stroke:#181818;stroke-width:0.6237769080234834;" width="108.5372" x="101.0519" y="109.6645"/><text fill="#000000" font-family="sans-serif" font-size="5.8219" lengthAdjust="spacing" textLength="100.2202" x="105.2104" y="119.2271">Start the first alice blockchain node</text><rect fill="#F1F1F1" height="48.9795" rx="5.1981" ry="5.1981" style="stroke:#181818;stroke-width:0.6237769080234834;" width="271.135" x="230.3816" y="8.317"/><text fill="#000000" font-family="sans-serif" font-size="5.8219" lengthAdjust="spacing" textLength="61.546" x="234.5401" y="17.8796">清理之前alice的链数据:</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="0" x="234.5401" y="24.6567"/><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="262.818" x="234.5401" y="31.4337">./target/release/node-template purge-chain --base-path /tmp/alice --chain local</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="222.8963" x="234.5401" y="38.2108">Are you sure to remove "/tmp/alice/chains/local_testnet/db"? [y/N]:</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="0" x="234.5401" y="44.9879"/><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="0" x="234.5401" y="51.765"/><path d="M209.589,117.2116 L213.7476,117.2116 C219.9853,117.2116 219.9853,32.8068 226.2231,32.8068 L230.3816,32.8068 " fill="none" style="stroke:#181818;stroke-width:0.4158512720156556;"/><rect fill="#90EE90" height="89.6419" rx="5.1981" ry="5.1981" style="stroke:#181818;stroke-width:0.6237769080234834;" width="257.8278" x="230.3816" y="65.6135"/><text fill="#000000" font-family="sans-serif" font-size="5.8219" lengthAdjust="spacing" textLength="36.1791" x="234.5401" y="75.1761">启动alice节点</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="0" x="234.5401" y="81.9532"/><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="99.8043" x="234.5401" y="88.7302">./target/release/node-template</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="73.1898" x="234.5401" y="95.5073">--base-path /tmp/alice</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="43.2485" x="234.5401" y="102.2844">--chain local</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="23.2877" x="234.5401" y="109.0615">--alice</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="39.9217" x="234.5401" y="115.8385">--port 30333</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="46.5753" x="234.5401" y="122.6156">--ws-port 9945</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="49.9022" x="234.5401" y="129.3927">--rpc-port 9933</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="249.5108" x="234.5401" y="136.1698">--node-key 0000000000000000000000000000000000000000000000000000000000000001</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="182.9746" x="234.5401" y="142.9468">--telemetry-url "wss://telemetry.polkadot.io/submit/ 0"</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="36.5949" x="234.5401" y="149.7239">--validator</text><path d="M209.589,117.2116 L213.7476,117.2116 C219.9853,117.2116 219.9853,110.4345 226.2231,110.4345 L230.3816,110.4345 " fill="none" style="stroke:#181818;stroke-width:0.4158512720156556;"/><rect fill="#F1F1F1" height="62.5336" rx="5.1981" ry="5.1981" style="stroke:#181818;stroke-width:0.6237769080234834;" width="234.5401" x="230.3816" y="163.5725"/><a href="https://docs.substrate.io/tutorials/get-started/simulate-network/#review-the-command-line-options" target="_top" title="点击查看" xlink:actuate="onRequest" xlink:href="https://docs.substrate.io/tutorials/get-started/simulate-network/#review-the-command-line-options" xlink:show="new" xlink:title="点击查看" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="5.8219" lengthAdjust="spacing" text-decoration="underline" textLength="97.3092" x="234.5401" y="173.135">Review the command-line options</text></a><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="56.5558" x="234.5401" y="179.9121">For more details:</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="0" x="234.5401" y="186.6892"/><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="226.2231" x="234.5401" y="193.4663">./target/release/node-template --help &gt; the-command-line-options.txt</text><rect fill="#000000" height="1.4555" style="stroke:#000000;stroke-width:0.0;" width="1.4555" x="248.6791" y="198.2896"/><text fill="#000000" font-family="sans-serif" font-size="5.8219" lengthAdjust="spacing" textLength="2.0793" x="250.7583" y="200.2434">:</text><a href="https://docs.substrate.io/tutorials/get-started/simulate-network/#review-the-node-messages-displayed" target="_top" title="点击查看" xlink:actuate="onRequest" xlink:href="https://docs.substrate.io/tutorials/get-started/simulate-network/#review-the-node-messages-displayed" xlink:show="new" xlink:title="点击查看" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="5.8219" lengthAdjust="spacing" text-decoration="underline" textLength="108.5372" x="252.8376" y="200.2434">Review the node messages displayed</text></a><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="0" x="234.5401" y="207.0204"/><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="109.7847" x="234.5401" y="213.7975">&#128296; Initializing Genesis block/state</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="76.5166" x="234.5401" y="220.5746">&#127991; Local node identity is</text><path d="M209.589,117.2116 L213.7476,117.2116 C219.9853,117.2116 219.9853,194.8393 226.2231,194.8393 L230.3816,194.8393 " fill="none" style="stroke:#181818;stroke-width:0.4158512720156556;"/><path d="M80.2593,344.242 L84.4178,344.242 C90.6556,344.242 90.6556,117.2116 96.8933,117.2116 L101.0519,117.2116 " fill="none" style="stroke:#181818;stroke-width:0.4158512720156556;"/><rect fill="#F1F1F1" height="130.3044" rx="5.1981" ry="5.1981" style="stroke:#181818;stroke-width:0.6237769080234834;" width="182.9746" x="101.0519" y="275.3926"/><text fill="#000000" font-family="sans-serif" font-size="5.8219" lengthAdjust="spacing" textLength="132.2407" x="105.2104" y="284.9552">Add a second node to the blockchain network</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="0" x="105.2104" y="291.7323"/><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="128.0822" x="105.2104" y="298.5093">现在开始使用 alice 帐户密钥的节点正在运行，</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="138.8943" x="105.2104" y="305.2864">接着可以使用 bob 帐户将另一个节点添加到网络中。</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="0" x="105.2104" y="312.0635"/><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="128.0822" x="105.2104" y="318.8406">因为要加入一个已经在运行的网络，所以可以使用</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="116.4384" x="105.2104" y="325.6176">正在运行的节点来识别新节点要加入的网络。</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="0" x="105.2104" y="332.3947"/><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="139.726" x="105.2104" y="339.1718">这些命令与之前使用的命令相似，但有一些重要区别。</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="46.5753" x="105.2104" y="345.9489">1. --base-path</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="29.9413" x="105.2104" y="352.7259">2. --port</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="39.9217" x="105.2104" y="359.503">3. --ws-port</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="43.2485" x="105.2104" y="366.2801">4. --rpc-port</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="174.6575" x="105.2104" y="373.0572">5. --bootnodes: 指定一个单独启动节点，这个节点来自于alias</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="0" x="105.2104" y="379.8342"/><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="79.0117" x="105.2104" y="386.6113">总共有4步，重点介绍后面两步</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="56.5558" x="105.2104" y="393.3884">1. 重新打开一个终端</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="98.1409" x="105.2104" y="400.1655">2. 进入substrate-node-template</text><rect fill="#F1F1F1" height="62.5336" rx="5.1981" ry="5.1981" style="stroke:#181818;stroke-width:0.6237769080234834;" width="183.8063" x="304.819" y="234.4232"/><text fill="#000000" font-family="sans-serif" font-size="5.8219" lengthAdjust="spacing" textLength="46.5753" x="310.6409" y="243.9857">清除之前的链数据</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="0" x="308.9775" y="250.7628"/><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="139.726" x="308.9775" y="257.5399">./target/release/node-template purge-chain</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="66.5362" x="308.9775" y="264.3169">--base-path /tmp/bob</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="43.2485" x="308.9775" y="271.094">--chain local</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="6.6536" x="308.9775" y="277.8711">-y</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="0" x="308.9775" y="284.6482"/><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="175.4892" x="308.9775" y="291.4252">通过在命令中添加-y，可以在不提示确认操作的情况下删除链数据。</text><path d="M284.0264,340.5448 L288.1849,340.5448 C294.4227,340.5448 294.4227,265.69 300.6605,265.69 L304.819,265.69 " fill="none" style="stroke:#181818;stroke-width:0.4158512720156556;"/><rect fill="#90EE90" height="89.6419" rx="5.1981" ry="5.1981" style="stroke:#181818;stroke-width:0.6237769080234834;" width="317.7104" x="304.819" y="305.2738"/><text fill="#000000" font-family="sans-serif" font-size="5.8219" lengthAdjust="spacing" textLength="81.091" x="308.9775" y="314.8364">启动第二个节点，用bob的账号</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="0" x="308.9775" y="321.6134"/><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="99.8043" x="308.9775" y="328.3905">./target/release/node-template</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="66.5362" x="308.9775" y="335.1676">--base-path /tmp/bob</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="43.2485" x="308.9775" y="341.9447">--chain local</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="16.6341" x="308.9775" y="348.7217">--bob</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="39.9217" x="308.9775" y="355.4988">--port 30334</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="46.5753" x="308.9775" y="362.2759">--ws-port 9946</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="49.9022" x="308.9775" y="369.053">--rpc-port 9934</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="182.9746" x="308.9775" y="375.8301">--telemetry-url "wss://telemetry.polkadot.io/submit/ 0"</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="36.5949" x="308.9775" y="382.6071">--validator</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="309.3933" x="308.9775" y="389.3842">--bootnodes /ip4/127.0.0.1/tcp/30333/p2p/12D3KooWEyoppNCUx8Yx66oV9fJnriXwCcXwDDUA2kj6vnc6iDEp</text><rect fill="#F1F1F1" height="15.0941" rx="5.1981" ry="5.1981" style="stroke:#181818;stroke-width:0.6237769080234834;" width="41.5851" x="643.3219" y="253.5231"/><text fill="#000000" font-family="sans-serif" font-size="5.8219" lengthAdjust="spacing" textLength="33.2681" x="647.4804" y="263.0856">--base-path</text><path d="M622.5294,350.0948 L626.6879,350.0948 C632.9256,350.0948 632.9256,261.0701 639.1634,261.0701 L643.3219,261.0701 " fill="none" style="stroke:#181818;stroke-width:0.4158512720156556;"/><rect fill="#F1F1F1" height="15.0941" rx="5.1981" ry="5.1981" style="stroke:#181818;stroke-width:0.6237769080234834;" width="23.7035" x="643.3219" y="276.9342"/><text fill="#000000" font-family="sans-serif" font-size="5.8219" lengthAdjust="spacing" textLength="15.3865" x="647.4804" y="286.4968">--bob</text><path d="M622.5294,350.0948 L626.6879,350.0948 C632.9256,350.0948 632.9256,284.4813 639.1634,284.4813 L643.3219,284.4813 " fill="none" style="stroke:#181818;stroke-width:0.4158512720156556;"/><rect fill="#F1F1F1" height="15.0941" rx="5.1981" ry="5.1981" style="stroke:#181818;stroke-width:0.6237769080234834;" width="24.1194" x="643.3219" y="300.3453"/><text fill="#000000" font-family="sans-serif" font-size="5.8219" lengthAdjust="spacing" textLength="15.8023" x="647.4804" y="309.9079">--port</text><path d="M622.5294,350.0948 L626.6879,350.0948 C632.9256,350.0948 632.9256,307.8924 639.1634,307.8924 L643.3219,307.8924 " fill="none" style="stroke:#181818;stroke-width:0.4158512720156556;"/><rect fill="#F1F1F1" height="15.0941" rx="5.1981" ry="5.1981" style="stroke:#181818;stroke-width:0.6237769080234834;" width="34.0998" x="643.3219" y="323.7565"/><text fill="#000000" font-family="sans-serif" font-size="5.8219" lengthAdjust="spacing" textLength="25.7828" x="647.4804" y="333.319">--ws-port</text><path d="M622.5294,350.0948 L626.6879,350.0948 C632.9256,350.0948 632.9256,331.3035 639.1634,331.3035 L643.3219,331.3035 " fill="none" style="stroke:#181818;stroke-width:0.4158512720156556;"/><rect fill="#F1F1F1" height="15.0941" rx="5.1981" ry="5.1981" style="stroke:#181818;stroke-width:0.6237769080234834;" width="35.3474" x="643.3219" y="347.1676"/><text fill="#000000" font-family="sans-serif" font-size="5.8219" lengthAdjust="spacing" textLength="27.0303" x="647.4804" y="356.7301">--rpc-port</text><path d="M622.5294,350.0948 L626.6879,350.0948 C632.9256,350.0948 632.9256,354.7146 639.1634,354.7146 L643.3219,354.7146 " fill="none" style="stroke:#181818;stroke-width:0.4158512720156556;"/><rect fill="#F1F1F1" height="76.0878" rx="5.1981" ry="5.1981" style="stroke:#181818;stroke-width:0.6237769080234834;" width="202.1037" x="643.3219" y="370.5787"/><text fill="#000000" font-family="sans-serif" font-size="5.8219" lengthAdjust="spacing" textLength="35.7632" x="647.4804" y="380.1413">--bootnodes</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="0" x="647.4804" y="386.9183"/><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="110.6164" x="647.4804" y="393.6954">ip4 表示节点的 IP 地址使用 IPv4 格式</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="189.6282" x="647.4804" y="400.4725">127.0.0.1 指定运行节点的 IP 地址,在这种情况下，本地主机的地址。</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="111.4481" x="647.4804" y="407.2496">tcp 将 TCP 指定为用于对等通信的协议。</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="193.7867" x="647.4804" y="414.0266">30333 指定用于点对点通信的端口号,在这种情况下，TCP 流量的端口号。</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="0" x="647.4804" y="420.8037"/><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="172.9941" x="647.4804" y="427.5808">12D3KooWEyoppNCUx8Yx66oV9fJnriXwCcXwDDUA2kj6vnc6iDEp</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="93.1507" x="647.4804" y="434.3579">标识该网络要与之通信的运行节点。</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="139.726" x="647.4804" y="441.1349">在这种情况下，节点的标识符开始使用 alice 帐户。</text><path d="M622.5294,350.0948 L626.6879,350.0948 C632.9256,350.0948 632.9256,408.6226 639.1634,408.6226 L643.3219,408.6226 " fill="none" style="stroke:#181818;stroke-width:0.4158512720156556;"/><path d="M284.0264,340.5448 L288.1849,340.5448 C294.4227,340.5448 294.4227,350.0948 300.6605,350.0948 L304.819,350.0948 " fill="none" style="stroke:#181818;stroke-width:0.4158512720156556;"/><path d="M80.2593,344.242 L84.4178,344.242 C90.6556,344.242 90.6556,340.5448 96.8933,340.5448 L101.0519,340.5448 " fill="none" style="stroke:#181818;stroke-width:0.4158512720156556;"/><rect fill="#90EE90" height="225.1835" rx="5.1981" ry="5.1981" style="stroke:#181818;stroke-width:0.6237769080234834;" width="274.4618" x="101.0519" y="454.9835"/><a href="https://docs.substrate.io/tutorials/get-started/simulate-network/#verify-blocks-are-produced-and-finalized" target="_top" title="https://docs.substrate.io/tutorials/get-started/simulate-network/#verify-blocks-are-produced-and-finalized" xlink:actuate="onRequest" xlink:href="https://docs.substrate.io/tutorials/get-started/simulate-network/#verify-blocks-are-produced-and-finalized" xlink:show="new" xlink:title="https://docs.substrate.io/tutorials/get-started/simulate-network/#verify-blocks-are-produced-and-finalized" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="5.8219" lengthAdjust="spacing" text-decoration="underline" textLength="113.5274" x="105.2104" y="464.5461">Verify blocks are produced and finalized</text></a><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="0" x="105.2104" y="471.3232"/><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="104.7945" x="105.2104" y="478.1002">为了方便识别，还在每行前面加了标记：</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="106.4579" x="105.2104" y="484.8773">✌️  version 4.0.0-dev-9c89be106cb</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="259.4912" x="105.2104" y="491.6544">❤️  by Substrate DevHub &lt;https://github.com/substrate-developer-hub&gt;, 2017-2022</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="116.4384" x="105.2104" y="498.4315">&#128203; Chain specification: Local Testnet</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="53.229" x="105.2104" y="505.2085">&#127991;  Node name: Bob</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="53.229" x="105.2104" y="511.9856">&#128100; Role: AUTHORITY</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="196.2818" x="105.2104" y="518.7627">&#128190; Database: RocksDb at /tmp/bob/chains/local_testnet/db/full</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="202.9354" x="105.2104" y="525.5398">⛓  Native runtime: node-template-100 (node-template-1.tx1.au1)</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="266.1448" x="105.2104" y="532.3168">&#128296; Initializing Genesis block/state (state: 0x0336…17a1, header-hash: 0x387f…a9b7)</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="266.1448" x="105.2104" y="539.0939">&#128116; Loading GRANDPA authority set from genesis on what appears to be first startup.</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="256.1644" x="105.2104" y="545.871">Using default protocol ID "sup" because none is configured in the chain specs</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="259.4912" x="105.2104" y="552.6481">&#127991;  Local node identity is: 12D3KooWCPbSKhf9WggmGev8RBwzB5WKDNi9BjA8gjwsA4uDSkxN</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="79.8434" x="105.2104" y="559.4251">&#128187; Operating system: macos</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="83.1703" x="105.2104" y="566.2022">&#128187; CPU architecture: x86_64</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="86.4971" x="105.2104" y="572.9793">&#128230; Highest known block at #0</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="166.3405" x="105.2104" y="579.7564">&#127991;  Local node identity is: &lt;encrypted account name&gt;</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="0" x="105.2104" y="586.5334"/><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="149.7065" x="105.2104" y="593.3105">&#128269; Discovered new external address for our node</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="119.7652" x="105.2104" y="600.0876">The first node was started by alice:</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="0" x="105.2104" y="606.8647"/><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="123.092" x="105.2104" y="613.6418">&#128164; Idle (1 peers), best... finalized...</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="113.1115" x="105.2104" y="620.4188">The node has a one peer (1 peers).</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="202.9354" x="105.2104" y="627.1959">The nodes have produced some blocks (best: #4 (0x2b8a…fdc4)).</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="199.6086" x="105.2104" y="633.973">The blocks are being finalized (finalized #2 (0x8b6a…dce6)).</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="0" x="105.2104" y="640.7501"/><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="89.8239" x="105.2104" y="647.5271">&#128588; Starting consensus session</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="0" x="105.2104" y="654.3042"/><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="119.7652" x="105.2104" y="661.0813">&#127873; Prepared block for proposing at ...</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="123.092" x="105.2104" y="667.8584">&#128278; Pre-sealed block for proposal at ...</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="89.8239" x="105.2104" y="674.6354">✨ Imported #85 (0x5f7a…9b10)</text><rect fill="#F1F1F1" height="96.419" rx="5.1981" ry="5.1981" style="stroke:#181818;stroke-width:0.6237769080234834;" width="311.0568" x="396.3063" y="519.3658"/><text fill="#000000" font-family="sans-serif" font-size="5.8219" lengthAdjust="spacing" textLength="69.863" x="400.4648" y="528.9283">需要关注的标记有两个：&#128269;和&#128164;</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="0" x="400.4648" y="535.7054"/><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="149.7065" x="400.4648" y="542.4825">&#128269; Discovered new external address for our node</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="119.7652" x="400.4648" y="549.2595">The first node was started by alice:</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="0" x="400.4648" y="556.0366"/><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="133.9041" x="400.4648" y="562.8137">注意：新版本已经更新，没有这个标记，改成如下：</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="302.7397" x="400.4648" y="569.5908">discovered: 12D3KooWEyoppNCUx8Yx66oV9fJnriXwCcXwDDUA2kj6vnc6iDEp /ip4/172.16.0.79/tcp/30333</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="109.7847" x="400.4648" y="576.3678">这也和第一个alice节点启动的身份码一致</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="0" x="400.4648" y="583.1449"/><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="123.092" x="400.4648" y="589.922">&#128164; Idle (1 peers), best... finalized...</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="113.1115" x="400.4648" y="596.6991">The node has a one peer (1 peers).</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="202.9354" x="400.4648" y="603.4761">The nodes have produced some blocks (best: #4 (0x2b8a…fdc4)).</text><text fill="#000000" font-family="monospace" font-size="5.8219" lengthAdjust="spacing" textLength="0" x="400.4648" y="610.2532"/><path d="M375.5137,567.5753 L379.6722,567.5753 C385.91,567.5753 385.91,567.5753 392.1477,567.5753 L396.3063,567.5753 " fill="none" style="stroke:#181818;stroke-width:0.4158512720156556;"/><path d="M80.2593,344.242 L84.4178,344.242 C90.6556,344.242 90.6556,567.5753 96.8933,567.5753 L101.0519,567.5753 " fill="none" style="stroke:#181818;stroke-width:0.4158512720156556;"/></g></svg></figure>
<h2 id="add-trusted-nodes"><a class="header" href="#add-trusted-nodes">Add trusted nodes</a></h2>
<figure><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="2373.3766px" preserveAspectRatio="none" style="width:850px;height:2373px;background:#FFFFFF;" version="1.1" viewBox="0 0 850 2373" width="850.4089px" zoomAndPan="magnify"><defs/><g><rect fill="#6495ED" height="74.8068" rx="5.1106" ry="5.1106" style="stroke:#181818;stroke-width:0.6132756132756133;" width="176.6234" x="4.0885" y="1148.9032"/><text fill="#000000" font-family="sans-serif" font-size="5.7239" lengthAdjust="spacing" textLength="26.9841" x="8.177" y="1158.3048">(重点内容)</text><a href="https://docs.substrate.io/tutorials/get-started/trusted-network/" target="_top" title="https://docs.substrate.io/tutorials/get-started/trusted-network/" xlink:actuate="onRequest" xlink:href="https://docs.substrate.io/tutorials/get-started/trusted-network/" xlink:show="new" xlink:title="https://docs.substrate.io/tutorials/get-started/trusted-network/" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="5.7239" lengthAdjust="spacing" text-decoration="underline" textLength="52.7417" x="35.1611" y="1158.3048">Add trusted nodes</text></a><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#总览" target="_top" title="#总览" xlink:actuate="onRequest" xlink:href="#总览" xlink:show="new" xlink:title="#总览" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="5.7239" lengthAdjust="spacing" text-decoration="underline" textLength="11.4478" x="87.9028" y="1158.3048">返回</text></a><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="8.177" y="1164.9677"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="133.2852" x="8.177" y="1171.6307">1. Sr25519: 用于使用 aura 为一个节点生成块。</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="143.0976" x="8.177" y="1178.2937">2. Ed25519: 用于使用 grapdpa 为一个节点生成块。</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="52.3329" x="8.177" y="1184.9567">2. SS58: 对应公钥</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="8.177" y="1191.6197"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="17.1717" x="8.177" y="1198.2827">步骤：</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="153.7278" x="8.177" y="1204.9456">1. 使用Sr25519 -&gt; 一个助记词和对应SS58公钥 -&gt; aura</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="168.4464" x="8.177" y="1211.6086">2. 使用Ed25519+前面的助记词 -&gt; Ed25519 公钥 -&gt; grandpa</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="8.177" y="1218.2716"/><rect fill="#00FFFF" height="134.7737" rx="5.1106" ry="5.1106" style="stroke:#181818;stroke-width:0.6132756132756133;" width="233.8624" x="201.1544" y="8.177"/><text fill="#000000" font-family="sans-serif" font-size="5.7239" lengthAdjust="spacing" textLength="81.7701" x="205.2429" y="17.5786">About Substrate Consensus:</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="205.2429" y="24.2416"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="225.6854" x="205.2429" y="30.9045">The Substrate node template uses a proof of authority consensus model</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="179.8942" x="205.2429" y="37.5675">also referred to as authority round or Aura consensus .</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="176.6234" x="205.2429" y="44.2305">The Aura consensus protocol limits block production to</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="127.5613" x="205.2429" y="50.8935">a rotating list of authorized accounts.</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="205.2429" y="57.5565"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="170.0818" x="205.2429" y="64.2195">The authorized accounts—authorities—create blocks in</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="183.165" x="205.2429" y="70.8824">a round robin fashion and are generally considered to be</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="117.7489" x="205.2429" y="77.5454">trusted participants in the network.</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="205.2429" y="84.2084"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="163.5402" x="205.2429" y="90.8714">This consensus model provides a simple approach to</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="209.3314" x="205.2429" y="97.5344">starting a solo blockchain for a limited number of participants.</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="205.2429" y="104.1974"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="173.3526" x="205.2429" y="110.8603">In this tutorial, you'll see how to generate the keys</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="192.9774" x="205.2429" y="117.5233">required to authorize a node to participate in the network,</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="183.165" x="205.2429" y="124.1863">how to configure and share information about the network</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="199.519" x="205.2429" y="130.8493">with other authorized accounts, and how to launch the network</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="114.4781" x="205.2429" y="137.5123">with an approved set of validators.</text><path d="M180.7119,1186.3066 L184.8004,1186.3066 C190.9331,1186.3066 190.9331,75.5639 197.0659,75.5639 L201.1544,75.5639 " fill="none" style="stroke:#181818;stroke-width:0.40885040885040885;"/><rect fill="#F1F1F1" height="14.84" rx="5.1106" ry="5.1106" style="stroke:#181818;stroke-width:0.6132756132756133;" width="100.1684" x="201.1544" y="435.5151"/><text fill="#000000" font-family="sans-serif" font-size="5.7239" lengthAdjust="spacing" textLength="91.9913" x="205.2429" y="444.9167">Generate your account and keys</text><rect fill="#F1F1F1" height="48.1549" rx="5.1106" ry="5.1106" style="stroke:#181818;stroke-width:0.6132756132756133;" width="155.3632" x="321.7653" y="151.1277"/><text fill="#000000" font-family="sans-serif" font-size="5.7239" lengthAdjust="spacing" textLength="67.4603" x="325.8538" y="160.5293">Key generation options:</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="325.8538" y="167.1923"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="94.8533" x="325.8538" y="173.8553">1. a node-template subcommand</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="147.1861" x="325.8538" y="180.5182">2. the standalone subkey command-line program</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="98.1241" x="325.8538" y="187.1812">3. the Polkadot-JS application</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="130.8321" x="325.8538" y="193.8442">4. third-party key generation utilities.</text><path d="M301.3228,442.9351 L305.4113,442.9351 C311.544,442.9351 311.544,175.2052 317.6768,175.2052 L321.7653,175.2052 " fill="none" style="stroke:#181818;stroke-width:0.40885040885040885;"/><rect fill="#F1F1F1" height="14.84" rx="5.1106" ry="5.1106" style="stroke:#181818;stroke-width:0.6132756132756133;" width="136.9649" x="321.7653" y="328.9074"/><text fill="#000000" font-family="sans-serif" font-size="5.7239" lengthAdjust="spacing" textLength="128.7879" x="325.8538" y="338.3089">Generate local keys using the node template:</text><rect fill="#F1F1F1" height="134.7737" rx="5.1106" ry="5.1106" style="stroke:#181818;stroke-width:0.6132756132756133;" width="345.0697" x="479.1727" y="207.4596"/><text fill="#000000" font-family="sans-serif" font-size="5.7239" lengthAdjust="spacing" textLength="140.2357" x="483.2612" y="216.8612">使用Sr25519 -&gt; 一个助记词和对应SS58公钥 -&gt; aura</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="483.2612" y="223.5242"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="137.3737" x="483.2612" y="230.1872"># Generate a random secret phrase and keys</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="111.2073" x="483.2612" y="236.8502">./target/release/node-template key</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="26.1664" x="483.2612" y="243.5131">generate</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="52.3329" x="483.2612" y="250.1761">--scheme Sr25519</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="71.9577" x="483.2612" y="256.8391">--password-interactive</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="71.9577" x="483.2612" y="263.5021">Key password: &lt;123456&gt;</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="483.2612" y="270.1651"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="336.8927" x="483.2612" y="276.8281">Secret phrase:       answer cotton spike caution blouse only radio artefact middle guilt bleak original</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="91.5825" x="489.8028" y="283.491">Network ID:        substrate</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="278.0183" x="489.8028" y="290.154">Secret seed:       0xfcd01919178fa73e7223bdeea134b1ef809b75d3fabd672a52dcc69b964813b6</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="278.0183" x="489.8028" y="296.817">Public key (hex):  0x5413998d3c189f62288daaf2bd2ca3da5e78b00be9172a36ae063aae4cc7f607</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="278.0183" x="489.8028" y="303.48">Account ID:        0x5413998d3c189f62288daaf2bd2ca3da5e78b00be9172a36ae063aae4cc7f607</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="219.1438" x="489.8028" y="310.143">Public key (SS58): 5DxwhfEDto6kGkHz1SZQWE1hDGM8E2LFQNujQdJ3vHNWrnc3</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="219.1438" x="489.8028" y="316.806">SS58 Address:      5DxwhfEDto6kGkHz1SZQWE1hDGM8E2LFQNujQdJ3vHNWrnc3</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="483.2612" y="323.4689"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="169.2641" x="483.2612" y="330.1319">您现在拥有 Sr25519 密钥，用于使用 aura 为一个节点生成块。</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="258.3935" x="483.2612" y="336.7949">在此示例中，帐户的 Sr25519 公钥是 5DxwhfEDto6kGkHz1SZQWE1hDGM8E2LFQNujQdJ3vHNWrnc3</text><path d="M458.7302,336.3274 L462.8187,336.3274 C468.9514,336.3274 468.9514,274.8465 475.0842,274.8465 L479.1727,274.8465 " fill="none" style="stroke:#181818;stroke-width:0.40885040885040885;"/><rect fill="#F1F1F1" height="114.7848" rx="5.1106" ry="5.1106" style="stroke:#181818;stroke-width:0.6132756132756133;" width="345.0697" x="479.1727" y="350.4104"/><text fill="#000000" font-family="sans-serif" font-size="5.7239" lengthAdjust="spacing" textLength="159.0428" x="484.8966" y="359.8119">使用Ed25519+前面的助记词 -&gt; Ed25519 公钥 -&gt; grandpa</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="483.2612" y="366.4749"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="111.2073" x="483.2612" y="373.1379">./target/release/node-template key</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="22.8956" x="483.2612" y="379.8009">inspect</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="52.3329" x="483.2612" y="386.4639">--scheme Ed25519</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="71.9577" x="483.2612" y="393.1268">--password-interactive</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="274.7475" x="483.2612" y="399.7898">"answer cotton spike caution blouse only radio artefact middle guilt bleak original"</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="483.2612" y="406.4528"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="65.4161" x="483.2612" y="413.1158">Key password: 123456</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="336.8927" x="483.2612" y="419.7788">Secret phrase:       answer cotton spike caution blouse only radio artefact middle guilt bleak original</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="91.5825" x="489.8028" y="426.4418">Network ID:        substrate</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="278.0183" x="489.8028" y="433.1047">Secret seed:       0xfcd01919178fa73e7223bdeea134b1ef809b75d3fabd672a52dcc69b964813b6</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="278.0183" x="489.8028" y="439.7677">Public key (hex):  0xb293f948a04a5bac3b8321f99bb4c9532f6ffe2b8ff40926b23c68c9726ca40a</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="278.0183" x="489.8028" y="446.4307">Account ID:        0xb293f948a04a5bac3b8321f99bb4c9532f6ffe2b8ff40926b23c68c9726ca40a</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="219.1438" x="489.8028" y="453.0937">Public key (SS58): 5G6rLZNtZPyMrYTo2YXL9nzaatJ837hmKPnsgYqDURgAWBgX</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="219.1438" x="489.8028" y="459.7567">SS58 Address:      5G6rLZNtZPyMrYTo2YXL9nzaatJ837hmKPnsgYqDURgAWBgX</text><path d="M458.7302,336.3274 L462.8187,336.3274 C468.9514,336.3274 468.9514,407.8027 475.0842,407.8027 L479.1727,407.8027 " fill="none" style="stroke:#181818;stroke-width:0.40885040885040885;"/><path d="M301.3228,442.9351 L305.4113,442.9351 C311.544,442.9351 311.544,336.3274 317.6768,336.3274 L321.7653,336.3274 " fill="none" style="stroke:#181818;stroke-width:0.40885040885040885;"/><rect fill="#F1F1F1" height="261.3704" rx="5.1106" ry="5.1106" style="stroke:#181818;stroke-width:0.6132756132756133;" width="327.0803" x="321.7653" y="473.3721"/><a href="https://docs.substrate.io/tutorials/get-started/trusted-network/#generate-a-second-set-of-keys" target="_top" title="https://docs.substrate.io/tutorials/get-started/trusted-network/#generate-a-second-set-of-keys" xlink:actuate="onRequest" xlink:href="https://docs.substrate.io/tutorials/get-started/trusted-network/#generate-a-second-set-of-keys" xlink:show="new" xlink:title="https://docs.substrate.io/tutorials/get-started/trusted-network/#generate-a-second-set-of-keys" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="5.7239" lengthAdjust="spacing" text-decoration="underline" textLength="86.6763" x="325.8538" y="482.7737">Generate a second set of keys</text></a><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="325.8538" y="489.4367"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="143.0976" x="325.8538" y="496.0996">此教程的专用网络仅包含两个节点，因此需要两组密钥。</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="325.8538" y="502.7626"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="74.4108" x="325.8538" y="509.4256">有几个选项可以继续本教程：</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="95.671" x="325.8538" y="516.0886">1. 可以将密钥用于预定义帐户之一。</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="210.1491" x="325.8538" y="522.7516">2. 可以使用本地计算机上的不同身份重复上一节中的步骤，以生成第二个密钥对。</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="164.3579" x="325.8538" y="529.4146">3. 您可以派生一个子密钥对来模拟本地计算机上的第二个身份。</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="164.3579" x="325.8538" y="536.0775">4. 您可以招募其他参与者来生成加入您的私有网络所需的密钥。</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="325.8538" y="542.7405"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="108.7542" x="325.8538" y="549.4035">出于强化目的，这里再次重复前面的操作，</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="325.8538" y="556.0665"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="271.4767" x="325.8538" y="562.7295">./target/release/node-template key generate --scheme Sr25519 --password-interactive</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="65.4161" x="325.8538" y="569.3925">Key password: 234567</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="317.2679" x="325.8538" y="576.0555">Secret phrase:       twelve genuine tree month sport thought more almost frown question suit life</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="91.5825" x="332.3954" y="582.7184">Network ID:        substrate</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="278.0183" x="332.3954" y="589.3814">Secret seed:       0x627c5e2ac10a94cc0150efb2e2d38e0de2477e6a53892ade5f8b3cd9862e541e</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="278.0183" x="332.3954" y="596.0444">Public key (hex):  0x0069217a6b3a9a4d3fa248a69fb39cef88c27301b5a63aeff52ba59c6781173d</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="278.0183" x="332.3954" y="602.7074">Account ID:        0x0069217a6b3a9a4d3fa248a69fb39cef88c27301b5a63aeff52ba59c6781173d</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="219.1438" x="332.3954" y="609.3704">Public key (SS58): 5C5F62ga8UtigQK1YRTcuVk1sexcmuLHtVSBnJk5xQQ9P6ud</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="219.1438" x="332.3954" y="616.0334">SS58 Address:      5C5F62ga8UtigQK1YRTcuVk1sexcmuLHtVSBnJk5xQQ9P6ud</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="325.8538" y="622.6963"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="325.8538" y="629.3593"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="318.9033" x="325.8538" y="636.0223">./target/release/node-template key inspect --password-interactive --scheme Ed25519 "&lt;前面的助记词&gt;"</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="65.4161" x="325.8538" y="642.6853">Key password: 234567</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="317.2679" x="325.8538" y="649.3483">Secret phrase:       twelve genuine tree month sport thought more almost frown question suit life</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="91.5825" x="332.3954" y="656.0113">Network ID:        substrate</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="278.0183" x="332.3954" y="662.6742">Secret seed:       0x627c5e2ac10a94cc0150efb2e2d38e0de2477e6a53892ade5f8b3cd9862e541e</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="278.0183" x="332.3954" y="669.3372">Public key (hex):  0xcde9a701b5965bb5327f900c83c2f9753d1d124fa21228851d6e26659d8dff5f</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="278.0183" x="332.3954" y="676.0002">Account ID:        0xcde9a701b5965bb5327f900c83c2f9753d1d124fa21228851d6e26659d8dff5f</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="219.1438" x="332.3954" y="682.6632">Public key (SS58): 5Gih5kiPMdKBrz4HTuKWQrTedqr8TLYWLb2WW67VzUyRzgF1</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="219.1438" x="332.3954" y="689.3262">SS58 Address:      5Gih5kiPMdKBrz4HTuKWQrTedqr8TLYWLb2WW67VzUyRzgF1</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="325.8538" y="695.9892"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="51.5152" x="325.8538" y="702.6521">使用的第二组键是：</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="325.8538" y="709.3151"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="250.2165" x="325.8538" y="715.9781">Sr25519 对应 SS58：5C5F62ga8UtigQK1YRTcuVk1sexcmuLHtVSBnJk5xQQ9P6ud 用于aura。</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="254.305" x="325.8538" y="722.6411">Ed25519 对应 SS58：5Gih5kiPMdKBrz4HTuKWQrTedqr8TLYWLb2WW67VzUyRzgF1 用于grapdpa</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="325.8538" y="729.3041"/><path d="M301.3228,442.9351 L305.4113,442.9351 C311.544,442.9351 311.544,604.0573 317.6768,604.0573 L321.7653,604.0573 " fill="none" style="stroke:#181818;stroke-width:0.40885040885040885;"/><path d="M180.7119,1186.3066 L184.8004,1186.3066 C190.9331,1186.3066 190.9331,442.9351 197.0659,442.9351 L201.1544,442.9351 " fill="none" style="stroke:#181818;stroke-width:0.40885040885040885;"/><rect fill="#F1F1F1" height="121.4477" rx="5.1106" ry="5.1106" style="stroke:#181818;stroke-width:0.6132756132756133;" width="207.696" x="201.1544" y="925.5447"/><text fill="#000000" font-family="sans-serif" font-size="5.7239" lengthAdjust="spacing" textLength="100.1684" x="205.2429" y="934.9463">Create a custom chain specification</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="205.2429" y="941.6092"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="183.165" x="205.2429" y="948.2722">生成用于区块链的密钥后，您就可以使用这些密钥对创建自定义链规范，</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="199.519" x="205.2429" y="954.9352">然后与作为验证器(validators)的受信任网络参与者共享您的自定义链规范。</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="205.2429" y="961.5982"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="177.4411" x="205.2429" y="968.2612">为了使其他人能够参与您的区块链网络，请确保他们生成自己的密钥。</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="205.2429" y="974.9242"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="183.165" x="205.2429" y="981.5871">收集完网络参与者的密钥后，可以创建自定义链规范以替换本地链规范。</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="205.2429" y="988.2501"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="177.4411" x="205.2429" y="994.9131">为简单起见，本教程中创建的自定义链规范是本地链规范的修改版本，</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="80.1347" x="205.2429" y="1001.5761">用于说明如何创建双节点网络。</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="205.2429" y="1008.2391"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="188.8889" x="205.2429" y="1014.9021">如果您拥有所需的密钥，您可以按照相同的步骤将更多节点添加到网络中。</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="205.2429" y="1021.5651"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="150.457" x="205.2429" y="1028.228">--------&gt; Modify the local chain specification</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="205.2429" y="1034.891"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="185.6181" x="205.2429" y="1041.554">这个操作很重要，后续课程还会用到。(Connect to Rococo testnet)</text><rect fill="#F1F1F1" height="41.4919" rx="5.1106" ry="5.1106" style="stroke:#181818;stroke-width:0.6132756132756133;" width="142.2799" x="429.2929" y="914.0362"/><text fill="#000000" font-family="sans-serif" font-size="5.7239" lengthAdjust="spacing" textLength="118.5666" x="433.3814" y="923.4378">Export the local chain specification to a file</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="433.3814" y="930.1007"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="134.1029" x="433.3814" y="936.7637">./target/release/node-template build-spec</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="85.0409" x="433.3814" y="943.4267">--disable-default-bootnode</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="101.3949" x="433.3814" y="950.0897">--chain local &gt; customSpec.json</text><rect fill="#F08080" height="101.4588" rx="5.1106" ry="5.1106" style="stroke:#181818;stroke-width:0.6132756132756133;" width="99.7595" x="592.0154" y="742.9195"/><text fill="#000000" font-family="sans-serif" font-size="5.7239" lengthAdjust="spacing" textLength="65.0072" x="596.1039" y="752.3211">head customSpec.json</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="596.1039" y="758.9841"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="55.6037" x="596.1039" y="765.6471"># customSpec.json</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="3.2708" x="596.1039" y="772.31">{</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="78.4993" x="599.3747" y="778.973">"name": "Local Testnet",</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="71.9577" x="599.3747" y="785.636">"id": "local_testnet",</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="68.6869" x="599.3747" y="792.299">"chainType": "Local",</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="52.3329" x="599.3747" y="798.962">"bootNodes": [],</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="88.3117" x="599.3747" y="805.625">"telemetryEndpoints": null,</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="62.1453" x="599.3747" y="812.2879">"protocolId": null,</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="62.1453" x="599.3747" y="818.9509">"properties": null,</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="78.4993" x="599.3747" y="825.6139">"consensusEngine": null,</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="71.9577" x="599.3747" y="832.2769">"codeSubstitutes": {},</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="3.2708" x="596.1039" y="838.9399">}</text><path d="M571.5729,934.7822 L575.6614,934.7822 C581.7941,934.7822 581.7941,793.6489 587.9269,793.6489 L592.0154,793.6489 " fill="none" style="stroke:#181818;stroke-width:0.40885040885040885;"/><rect fill="#F1F1F1" height="41.4919" rx="5.1106" ry="5.1106" style="stroke:#181818;stroke-width:0.6132756132756133;" width="130.8321" x="592.0154" y="852.5553"/><text fill="#000000" font-family="sans-serif" font-size="5.7239" lengthAdjust="spacing" textLength="74.8196" x="596.1039" y="861.9569">tail -n 80 customSpec.json</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="596.1039" y="868.6199"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="122.6551" x="596.1039" y="875.2828">此命令显示 Wasm 二进制字段后面的最后部分，</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="103.0303" x="596.1039" y="881.9458">包括运行时使用的几个托盘的详细信息，</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="86.6763" x="596.1039" y="888.6088">例如 sudo 和 balances 托盘。</text><path d="M571.5729,934.7822 L575.6614,934.7822 C581.7941,934.7822 581.7941,873.3013 587.9269,873.3013 L592.0154,873.3013 " fill="none" style="stroke:#181818;stroke-width:0.40885040885040885;"/><rect fill="#F1F1F1" height="68.1439" rx="5.1106" ry="5.1106" style="stroke:#181818;stroke-width:0.6132756132756133;" width="253.4873" x="592.0154" y="902.2243"/><text fill="#000000" font-family="sans-serif" font-size="5.7239" lengthAdjust="spacing" textLength="245.3102" x="596.1039" y="911.6258">Modify the name field to identify this chain specification as a custom chain specification.</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="596.1039" y="918.2888"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="91.5825" x="596.1039" y="924.9518">"name": "My Custom Testnet",</text><rect fill="#000000" height="1.431" style="stroke:#000000;stroke-width:0.0;" width="1.431" x="615.3199" y="929.6939"/><text fill="#000000" font-family="sans-serif" font-size="5.7239" lengthAdjust="spacing" textLength="106.3011" x="617.3641" y="931.6148">:Modify aura field to specify the nodes</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="596.1039" y="938.2778"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="85.0409" x="596.1039" y="944.9407">"aura": { "authorities": [</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="181.5296" x="599.3747" y="951.6037">"&lt;aura的Sr25519密钥&gt;", "&lt;aura的Sr25519公钥对应地址(SS58)&gt;"</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="3.2708" x="599.3747" y="958.2667">]</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="6.5416" x="596.1039" y="964.9297">},</text><path d="M571.5729,934.7822 L575.6614,934.7822 C581.7941,934.7822 581.7941,936.2962 587.9269,936.2962 L592.0154,936.2962 " fill="none" style="stroke:#181818;stroke-width:0.40885040885040885;"/><rect fill="#F1F1F1" height="148.0997" rx="5.1106" ry="5.1106" style="stroke:#181818;stroke-width:0.6132756132756133;" width="177.4411" x="592.0154" y="978.5451"/><text fill="#000000" font-family="sans-serif" font-size="5.7239" lengthAdjust="spacing" textLength="126.3348" x="596.1039" y="987.9467">Modify the grandpa field to specify the nodes</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="596.1039" y="994.6097"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="39.2496" x="596.1039" y="1001.2727">"grandpa": {</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="52.3329" x="605.9163" y="1007.9356">"authorities": [</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="3.2708" x="612.4579" y="1014.5986">[</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="146.3684" x="618.9995" y="1021.2616">"节点 1 的grandpa Ed25519 对应 SS58公钥(地址)",</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="3.2708" x="618.9995" y="1027.9246">1</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="6.5416" x="612.4579" y="1034.5876">],</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="3.2708" x="612.4579" y="1041.2506">[</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="146.3684" x="618.9995" y="1047.9135">"节点 2 的grandpa Ed25519 对应 SS58公钥(地址)",</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="3.2708" x="618.9995" y="1054.5765">1</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="3.2708" x="612.4579" y="1061.2395">]</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="3.2708" x="605.9163" y="1067.9025">]</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="6.5416" x="599.3747" y="1074.5655">},</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="596.1039" y="1081.2285"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="159.4517" x="596.1039" y="1087.8914">请注意，grandpa 部分中的 authority 字段有两个数据值。</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="596.1039" y="1094.5544"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="61.3276" x="596.1039" y="1101.2174">1. 第一个值是地址键。</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="84.2232" x="596.1039" y="1107.8804">2. 第二个值用于支持加权投票。</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="596.1039" y="1114.5434"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="107.1188" x="596.1039" y="1121.2064">在此示例中，每个验证者的权重为 1 票。</text><path d="M571.5729,934.7822 L575.6614,934.7822 C581.7941,934.7822 581.7941,1052.595 587.9269,1052.595 L592.0154,1052.595 " fill="none" style="stroke:#181818;stroke-width:0.40885040885040885;"/><path d="M408.8504,986.2686 L412.9389,986.2686 C419.0717,986.2686 419.0717,934.7822 425.2044,934.7822 L429.2929,934.7822 " fill="none" style="stroke:#181818;stroke-width:0.40885040885040885;"/><rect fill="#F1F1F1" height="94.7958" rx="5.1106" ry="5.1106" style="stroke:#181818;stroke-width:0.6132756132756133;" width="200.3367" x="429.2929" y="1134.8218"/><text fill="#000000" font-family="sans-serif" font-size="5.7239" lengthAdjust="spacing" textLength="39.2496" x="433.3814" y="1144.2234">Add validators</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="433.3814" y="1150.8864"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="28.6195" x="433.3814" y="1157.5493">如你所见：</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="433.3814" y="1164.2123"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="192.1597" x="433.3814" y="1170.8753">可以通过修改 aura 和 grandpa 部分来添加和更改链规范中的权限地址。</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="103.0303" x="433.3814" y="1177.5383">可以使用此技术添加任意数量的验证器。</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="433.3814" y="1184.2013"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="34.3434" x="433.3814" y="1190.8643">添加验证器：</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="116.1135" x="433.3814" y="1197.5272">1. 修改 aura 部分以包含 Sr25519 地址。</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="154.5455" x="433.3814" y="1204.1902">2. 修改 grapdpa 部分以包括 Ed25519 地址和投票权重。</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="433.3814" y="1210.8532"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="91.5825" x="433.3814" y="1217.5162">确保为每个验证器使用唯一的密钥。</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="143.0976" x="433.3814" y="1224.1792">如果两个验证器具有相同的密钥，它们会产生冲突的块。</text><path d="M408.8504,986.2686 L412.9389,986.2686 C419.0717,986.2686 419.0717,1182.2197 425.2044,1182.2197 L429.2929,1182.2197 " fill="none" style="stroke:#181818;stroke-width:0.40885040885040885;"/><path d="M180.7119,1186.3066 L184.8004,1186.3066 C190.9331,1186.3066 190.9331,986.2686 197.0659,986.2686 L201.1544,986.2686 " fill="none" style="stroke:#181818;stroke-width:0.40885040885040885;"/><rect fill="#F1F1F1" height="61.4809" rx="5.1106" ry="5.1106" style="stroke:#181818;stroke-width:0.6132756132756133;" width="133.2852" x="201.1544" y="1055.1694"/><a href="https://docs.substrate.io/tutorials/get-started/trusted-network/#convert-the-chain-specification-to-raw-format" target="_top" title="https://docs.substrate.io/tutorials/get-started/trusted-network/#convert-the-chain-specification-to-raw-format" xlink:actuate="onRequest" xlink:href="https://docs.substrate.io/tutorials/get-started/trusted-network/#convert-the-chain-specification-to-raw-format" xlink:show="new" xlink:title="https://docs.substrate.io/tutorials/get-started/trusted-network/#convert-the-chain-specification-to-raw-format" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="5.7239" lengthAdjust="spacing" text-decoration="underline" textLength="125.1082" x="205.2429" y="1064.571">Convert the chain specification to raw format</text></a><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="205.2429" y="1071.234"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="98.1241" x="205.2429" y="1077.897">./target/release/node-template</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="32.708" x="205.2429" y="1084.56">build-spec</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="75.2285" x="205.2429" y="1091.2229">--chain=customSpec.json</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="16.354" x="205.2429" y="1097.8859">--raw</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="85.0409" x="205.2429" y="1104.5489">--disable-default-bootnode</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="65.4161" x="205.2429" y="1111.2119">&gt; customSpecRaw.json</text><path d="M180.7119,1186.3066 L184.8004,1186.3066 C190.9331,1186.3066 190.9331,1085.9099 197.0659,1085.9099 L201.1544,1085.9099 " fill="none" style="stroke:#181818;stroke-width:0.40885040885040885;"/><rect fill="#F1F1F1" height="108.1218" rx="5.1106" ry="5.1106" style="stroke:#181818;stroke-width:0.6132756132756133;" width="287.013" x="201.1544" y="1237.7946"/><text fill="#000000" font-family="sans-serif" font-size="5.7239" lengthAdjust="spacing" textLength="114.0693" x="205.2429" y="1247.1962">Share the chain specification with others</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="205.2429" y="1253.8592"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="137.3737" x="205.2429" y="1260.5221">如果你正在创建私有区块链网络以与其他参与者共享，</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="131.6498" x="205.2429" y="1267.1851">请确保只有一个人创建链规范并与该规范中的所有其</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="97.3064" x="205.2429" y="1273.8481">他验证器共享生成的该规范的原始版本</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="116.9312" x="205.2429" y="1280.5111">（例如 customSpecRaw.json 文件）网络。</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="205.2429" y="1287.1741"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="136.556" x="205.2429" y="1293.8371">因为 Rust 编译器生成的优化的 WebAssembly 二进</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="139.8268" x="205.2429" y="1300.5">制文件在确定性上无法重现，所以每个生成 Wasm 运行</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="107.1188" x="205.2429" y="1307.163">时的人都会生成稍微不同的 Wasm blob。</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="205.2429" y="1313.826"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="137.3737" x="205.2429" y="1320.489">为了确保确定性，区块链网络中的所有参与者必须使用</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="74.4108" x="205.2429" y="1327.152">完全相同的原始链规范文件。</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="205.2429" y="1333.815"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="278.836" x="205.2429" y="1340.478">有关此问题的更多信息，请参阅&lt;Hunting down a non-determinism-bug in our Rust Wasm build&gt;。</text><rect fill="#F1F1F1" height="14.84" rx="5.1106" ry="5.1106" style="stroke:#181818;stroke-width:0.6132756132756133;" width="181.5296" x="508.6099" y="1284.4355"/><a href="https://dev.to/gnunicorn/hunting-down-a-non-determinism-bug-in-our-rust-wasm-build-4fk1" target="_top" title="https://dev.to/gnunicorn/hunting-down-a-non-determinism-bug-in-our-rust-wasm-build-4fk1" xlink:actuate="onRequest" xlink:href="https://dev.to/gnunicorn/hunting-down-a-non-determinism-bug-in-our-rust-wasm-build-4fk1" xlink:show="new" xlink:title="https://dev.to/gnunicorn/hunting-down-a-non-determinism-bug-in-our-rust-wasm-build-4fk1" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="5.7239" lengthAdjust="spacing" text-decoration="underline" textLength="173.3526" x="512.6984" y="1293.8371">Hunting down a non-determinism-bug in our Rust Wasm build</text></a><path d="M488.1674,1291.8555 L492.2559,1291.8555 C498.3886,1291.8555 498.3886,1291.8555 504.5214,1291.8555 L508.6099,1291.8555 " fill="none" style="stroke:#181818;stroke-width:0.40885040885040885;"/><path d="M180.7119,1186.3066 L184.8004,1186.3066 C190.9331,1186.3066 190.9331,1291.8555 197.0659,1291.8555 L201.1544,1291.8555 " fill="none" style="stroke:#181818;stroke-width:0.40885040885040885;"/><rect fill="#F1F1F1" height="101.4588" rx="5.1106" ry="5.1106" style="stroke:#181818;stroke-width:0.6132756132756133;" width="231.4093" x="201.1544" y="1354.0934"/><text fill="#000000" font-family="sans-serif" font-size="5.7239" lengthAdjust="spacing" textLength="105.8923" x="205.2429" y="1363.495">Prepare to launch the private network</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="205.2429" y="1370.1579"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="194.6128" x="205.2429" y="1376.8209">将自定义链规范分发给所有网络参与者后，就可以启动自己的私有区块链了。</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="205.2429" y="1383.4839"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="143.0976" x="205.2429" y="1390.1469">这些步骤类似于在启动第一个区块链节点中执行的步骤。</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="205.2429" y="1396.8099"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="200.3367" x="205.2429" y="1403.4729">但是，如果按照本教程中的步骤操作，则可以将多台计算机添加到您的网络中。</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="205.2429" y="1410.1358"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="68.6869" x="205.2429" y="1416.7988">要继续，请验证以下内容：</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="135.7383" x="205.2429" y="1423.4618">1. 已经为至少两个权限帐户生成或收集了帐户密钥。</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="223.2323" x="205.2429" y="1430.1248">2. 已经更新自定义链规范，以包含用于块生产（aura）和块完成（grandpa）的密钥。</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="215.873" x="205.2429" y="1436.7878">3. 已将自定义链规范转换为原始格式，并将原始链规范分发给参与私有网络的节点。</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="205.2429" y="1443.4508"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="171.7172" x="205.2429" y="1450.1137">如果已完成这些步骤，您就可以启动私有区块链中的第一个节点了。</text><path d="M180.7119,1186.3066 L184.8004,1186.3066 C190.9331,1186.3066 190.9331,1404.8228 197.0659,1404.8228 L201.1544,1404.8228 " fill="none" style="stroke:#181818;stroke-width:0.40885040885040885;"/><rect fill="#F1F1F1" height="234.7185" rx="5.1106" ry="5.1106" style="stroke:#181818;stroke-width:0.6132756132756133;" width="335.2573" x="201.1544" y="1463.7292"/><a href="https://docs.substrate.io/tutorials/get-started/trusted-network/#start-the-first-node" target="_top" title="https://docs.substrate.io/tutorials/get-started/trusted-network/#start-the-first-node" xlink:actuate="onRequest" xlink:href="https://docs.substrate.io/tutorials/get-started/trusted-network/#start-the-first-node" xlink:show="new" xlink:title="https://docs.substrate.io/tutorials/get-started/trusted-network/#start-the-first-node" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="5.7239" lengthAdjust="spacing" text-decoration="underline" textLength="52.3329" x="205.2429" y="1473.1307">Start the first node</text></a><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="205.2429" y="1479.7937"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="154.5455" x="205.2429" y="1486.4567">此命令还使用您自己的密钥而不是预定义的帐户来启动节点。</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="148.8215" x="205.2429" y="1493.1197">由于没有使用具有已知密钥的预定义帐户，因此需要在单独</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="80.1347" x="205.2429" y="1499.7827">的步骤中将密钥添加到密钥库。</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="205.2429" y="1506.4457"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="98.1241" x="208.5137" y="1513.1086">./target/release/node-template</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="75.2285" x="211.7845" y="1519.7716">--base-path /tmp/node01</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="91.5825" x="211.7845" y="1526.4346">--chain ./customSpecRaw.json</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="39.2496" x="211.7845" y="1533.0976">--port 30333</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="45.7912" x="211.7845" y="1539.7606">--ws-port 9945</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="49.062" x="211.7845" y="1546.4236">--rpc-port 9933</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="179.8942" x="211.7845" y="1553.0866">--telemetry-url "wss://telemetry.polkadot.io/submit/ 0"</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="35.9788" x="211.7845" y="1559.7495">--validator</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="65.4161" x="211.7845" y="1566.4125">--rpc-methods Unsafe</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="49.062" x="211.7845" y="1573.0755">--name MyNode01</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="71.9577" x="211.7845" y="1579.7385">--password-interactive</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="81.7701" x="205.2429" y="1586.4015">Keystore password: 234567</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="111.2073" x="205.2429" y="1593.0645">2022-07-21 21:10:58 Substrate Node</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="170.0818" x="205.2429" y="1599.7274">2022-07-21 21:10:58 ✌️  version 4.0.0-dev-9c89be106cb</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="320.5387" x="205.2429" y="1606.3904">2022-07-21 21:10:58 ❤️  by Substrate DevHub &lt;https://github.com/substrate-developer-hub&gt;, 2017-2022</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="192.9774" x="205.2429" y="1613.0534">2022-07-21 21:10:58 &#128203; Chain specification: My Custom Testnet</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="134.1029" x="205.2429" y="1619.7164">2022-07-21 21:10:58 &#127991;  Node name: MyNode01</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="117.7489" x="205.2429" y="1626.3794">2022-07-21 21:10:58 &#128100; Role: AUTHORITY</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="268.2059" x="205.2429" y="1633.0424">2022-07-21 21:10:58 &#128190; Database: RocksDb at /tmp/node01/chains/local_testnet/db/full</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="264.9351" x="205.2429" y="1639.7053">2022-07-21 21:10:58 ⛓  Native runtime: node-template-100 (node-template-1.tx1.au1)</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="327.0803" x="205.2429" y="1646.3683">2022-07-21 21:10:59 &#128296; Initializing Genesis block/state (state: 0xe114…e9a6, header-hash: 0xbe24…67a2)</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="327.0803" x="205.2429" y="1653.0313">2022-07-21 21:10:59 &#128116; Loading GRANDPA authority set from genesis on what appears to be first startup.</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="317.2679" x="205.2429" y="1659.6943">2022-07-21 21:10:59 Using default protocol ID "sup" because none is configured in the chain specs</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="320.5387" x="205.2429" y="1666.3573">2022-07-21 21:10:59 &#127991;  Local node identity is: 12D3KooWA6tqKTpAQVV8uanr7X3sRaEuTAaeHw3V5RVEupMoaCDA</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="143.9153" x="205.2429" y="1673.0203">2022-07-21 21:10:59 &#128187; Operating system: macos</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="147.1861" x="205.2429" y="1679.6832">2022-07-21 21:10:59 &#128187; CPU architecture: x86_64</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="150.457" x="205.2429" y="1686.3462">2022-07-21 21:10:59 &#128230; Highest known block at #0</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="215.873" x="205.2429" y="1693.0092">2022-07-21 21:10:59 〽️ Prometheus exporter started at 127.0.0.1:9615</text><rect fill="#F1F1F1" height="41.4919" rx="5.1106" ry="5.1106" style="stroke:#181818;stroke-width:0.6132756132756133;" width="161.9048" x="556.8543" y="1447.6786"/><text fill="#000000" font-family="sans-serif" font-size="5.7239" lengthAdjust="spacing" textLength="71.5488" x="560.9428" y="1457.0802">--base-path /tmp/node01</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="560.9428" y="1463.7432"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="153.7278" x="560.9428" y="1470.4061">The --base-path command-line option specifies a</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="147.1861" x="560.9428" y="1477.0691">custom location for the chain associated with</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="52.3329" x="560.9428" y="1483.7321">this first node.</text><path d="M536.4117,1581.0884 L540.5002,1581.0884 C546.633,1581.0884 546.633,1468.4246 552.7658,1468.4246 L556.8543,1468.4246 " fill="none" style="stroke:#181818;stroke-width:0.40885040885040885;"/><rect fill="#F1F1F1" height="94.7958" rx="5.1106" ry="5.1106" style="stroke:#181818;stroke-width:0.6132756132756133;" width="174.5791" x="556.8543" y="1497.3475"/><text fill="#000000" font-family="sans-serif" font-size="5.7239" lengthAdjust="spacing" textLength="85.4497" x="560.9428" y="1506.7491">--chain ./customSpecRaw.json</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="560.9428" y="1513.4121"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="147.1861" x="560.9428" y="1520.0751">The --chain command-line option specifies the</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="88.3117" x="560.9428" y="1526.7381">custom chain specification.</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="560.9428" y="1533.401"/><rect fill="#000000" height="1.431" style="stroke:#000000;stroke-width:0.0;" width="1.431" x="574.8437" y="1538.1432"/><text fill="#000000" font-family="sans-serif" font-size="5.7239" lengthAdjust="spacing" textLength="35.57" x="576.8879" y="1540.064">--port 30333</text><rect fill="#000000" height="1.431" style="stroke:#000000;stroke-width:0.0;" width="1.431" x="574.8437" y="1544.8061"/><text fill="#000000" font-family="sans-serif" font-size="5.7239" lengthAdjust="spacing" textLength="41.7027" x="576.8879" y="1546.727">--ws-port 9945</text><rect fill="#000000" height="1.431" style="stroke:#000000;stroke-width:0.0;" width="1.431" x="574.8437" y="1551.4691"/><text fill="#000000" font-family="sans-serif" font-size="5.7239" lengthAdjust="spacing" textLength="42.9293" x="576.8879" y="1553.39">--rpc-port 9933</text><rect fill="#000000" height="1.431" style="stroke:#000000;stroke-width:0.0;" width="1.431" x="574.8437" y="1558.1321"/><text fill="#000000" font-family="sans-serif" font-size="5.7239" lengthAdjust="spacing" textLength="150.457" x="576.8879" y="1560.053">--telemetry-url "wss://telemetry.polkadot.io/submit/ 0"</text><rect fill="#000000" height="1.431" style="stroke:#000000;stroke-width:0.0;" width="1.431" x="574.8437" y="1564.7951"/><text fill="#000000" font-family="sans-serif" font-size="5.7239" lengthAdjust="spacing" textLength="29.4372" x="576.8879" y="1566.716">:--validator</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="560.9428" y="1573.3789"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="163.5402" x="560.9428" y="1580.0419">The --validator command-line option indicates that</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="130.8321" x="560.9428" y="1586.7049">this node is an authority for the chain.</text><path d="M536.4117,1581.0884 L540.5002,1581.0884 C546.633,1581.0884 546.633,1544.7454 552.7658,1544.7454 L556.8543,1544.7454 " fill="none" style="stroke:#181818;stroke-width:0.40885040885040885;"/><rect fill="#F1F1F1" height="48.1549" rx="5.1106" ry="5.1106" style="stroke:#181818;stroke-width:0.6132756132756133;" width="197.8836" x="556.8543" y="1600.3204"/><text fill="#000000" font-family="sans-serif" font-size="5.7239" lengthAdjust="spacing" textLength="61.7364" x="560.9428" y="1609.7219">--rpc-methods Unsafe</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="560.9428" y="1616.3849"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="166.811" x="560.9428" y="1623.0479">The --rpc-methods Unsafe command-line option allows</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="189.7066" x="560.9428" y="1629.7109">you to continue the tutorial using an unsafe communication</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="166.811" x="560.9428" y="1636.3739">mode because your blockchain is not being used in a</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="62.1453" x="560.9428" y="1643.0368">production setting.</text><path d="M536.4117,1581.0884 L540.5002,1581.0884 C546.633,1581.0884 546.633,1624.3978 552.7658,1624.3978 L556.8543,1624.3978 " fill="none" style="stroke:#181818;stroke-width:0.40885040885040885;"/><rect fill="#F1F1F1" height="34.8289" rx="5.1106" ry="5.1106" style="stroke:#181818;stroke-width:0.6132756132756133;" width="178.2588" x="556.8543" y="1656.6523"/><text fill="#000000" font-family="sans-serif" font-size="5.7239" lengthAdjust="spacing" textLength="51.924" x="560.9428" y="1666.0538">--name MyNode01</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="560.9428" y="1672.7168"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="163.5402" x="560.9428" y="1679.3798">The --name command-line option enables you to give</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="170.0818" x="560.9428" y="1686.0428">your node a human-readable name in the telemetry UI.</text><path d="M536.4117,1581.0884 L540.5002,1581.0884 C546.633,1581.0884 546.633,1674.0667 552.7658,1674.0667 L556.8543,1674.0667 " fill="none" style="stroke:#181818;stroke-width:0.40885040885040885;"/><rect fill="#F1F1F1" height="14.84" rx="5.1106" ry="5.1106" style="stroke:#181818;stroke-width:0.6132756132756133;" width="70.7311" x="556.8543" y="1699.6582"/><text fill="#000000" font-family="sans-serif" font-size="5.7239" lengthAdjust="spacing" textLength="62.5541" x="560.9428" y="1709.0598">--password-interactive</text><path d="M536.4117,1581.0884 L540.5002,1581.0884 C546.633,1581.0884 546.633,1707.0782 552.7658,1707.0782 L556.8543,1707.0782 " fill="none" style="stroke:#181818;stroke-width:0.40885040885040885;"/><path d="M180.7119,1186.3066 L184.8004,1186.3066 C190.9331,1186.3066 190.9331,1581.0884 197.0659,1581.0884 L201.1544,1581.0884 " fill="none" style="stroke:#181818;stroke-width:0.40885040885040885;"/><rect fill="#F1F1F1" height="28.166" rx="5.1106" ry="5.1106" style="stroke:#181818;stroke-width:0.6132756132756133;" width="120.6109" x="201.1544" y="1798.6927"/><text fill="#000000" font-family="sans-serif" font-size="5.7239" lengthAdjust="spacing" textLength="112.4339" x="205.2429" y="1808.0942">View information about node operations</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="205.2429" y="1814.7572"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="51.5152" x="205.2429" y="1821.4202">注意其中的这些信息</text><rect fill="#F1F1F1" height="28.166" rx="5.1106" ry="5.1106" style="stroke:#181818;stroke-width:0.6132756132756133;" width="232.227" x="342.2078" y="1722.6752"/><text fill="#000000" font-family="sans-serif" font-size="5.7239" lengthAdjust="spacing" textLength="19.216" x="346.2963" y="1732.0768">--chain</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="346.2963" y="1738.7398"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="224.05" x="346.2963" y="1745.4028">输出表明正在使用的链规范是您使用 --chain 命令行选项创建和指定的自定义链规范。</text><path d="M321.7653,1812.7756 L325.8538,1812.7756 C331.9865,1812.7756 331.9865,1736.7582 338.1193,1736.7582 L342.2078,1736.7582 " fill="none" style="stroke:#181818;stroke-width:0.40885040885040885;"/><rect fill="#F1F1F1" height="28.166" rx="5.1106" ry="5.1106" style="stroke:#181818;stroke-width:0.6132756132756133;" width="222.4146" x="342.2078" y="1759.0182"/><text fill="#000000" font-family="sans-serif" font-size="5.7239" lengthAdjust="spacing" textLength="27.393" x="346.2963" y="1768.4198">--validator</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="346.2963" y="1775.0827"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="214.2376" x="346.2963" y="1781.7457">输出表明该节点是一个授权，因为您使用 --validator 命令行选项启动了该节点。</text><path d="M321.7653,1812.7756 L325.8538,1812.7756 C331.9865,1812.7756 331.9865,1773.1012 338.1193,1773.1012 L342.2078,1773.1012 " fill="none" style="stroke:#181818;stroke-width:0.40885040885040885;"/><rect fill="#F1F1F1" height="28.166" rx="5.1106" ry="5.1106" style="stroke:#181818;stroke-width:0.6132756132756133;" width="234.6801" x="342.2078" y="1795.3612"/><text fill="#000000" font-family="sans-serif" font-size="5.7239" lengthAdjust="spacing" textLength="14.3098" x="346.2963" y="1804.7627">state</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="346.2963" y="1811.4257"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="226.5031" x="346.2963" y="1818.0887">输出显示使用块哈希（状态：0x2bde…8f66，标头哈希：0x6c78…37de）初始化创世块。</text><path d="M321.7653,1812.7756 L325.8538,1812.7756 C331.9865,1812.7756 331.9865,1809.4441 338.1193,1809.4441 L342.2078,1809.4441 " fill="none" style="stroke:#181818;stroke-width:0.40885040885040885;"/><rect fill="#F1F1F1" height="34.8289" rx="5.1106" ry="5.1106" style="stroke:#181818;stroke-width:0.6132756132756133;" width="183.9827" x="342.2078" y="1831.7041"/><text fill="#000000" font-family="sans-serif" font-size="5.7239" lengthAdjust="spacing" textLength="36.3877" x="346.2963" y="1841.1057">node identify</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="346.2963" y="1847.7687"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="154.5455" x="346.2963" y="1854.4317">输出指定您的节点的本地节点身份。在此示例中，节点身份为</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="175.8057" x="346.2963" y="1861.0946">12d3koowlmrydlontytytytdyzlwde1paxzxtw5rgjmhlfzw96sx。</text><path d="M321.7653,1812.7756 L325.8538,1812.7756 C331.9865,1812.7756 331.9865,1849.1186 338.1193,1849.1186 L342.2078,1849.1186 " fill="none" style="stroke:#181818;stroke-width:0.40885040885040885;"/><rect fill="#F1F1F1" height="28.166" rx="5.1106" ry="5.1106" style="stroke:#181818;stroke-width:0.6132756132756133;" width="151.2747" x="342.2078" y="1874.7101"/><text fill="#000000" font-family="sans-serif" font-size="5.7239" lengthAdjust="spacing" textLength="29.4372" x="346.2963" y="1884.1116">IP address</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="346.2963" y="1890.7746"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="143.0976" x="346.2963" y="1897.4376">输出指定用于节点的 IP 地址是本地主机 127.0.0.1。</text><path d="M321.7653,1812.7756 L325.8538,1812.7756 C331.9865,1812.7756 331.9865,1888.7931 338.1193,1888.7931 L342.2078,1888.7931 " fill="none" style="stroke:#181818;stroke-width:0.40885040885040885;"/><path d="M180.7119,1186.3066 L184.8004,1186.3066 C190.9331,1186.3066 190.9331,1812.7756 197.0659,1812.7756 L201.1544,1812.7756 " fill="none" style="stroke:#181818;stroke-width:0.40885040885040885;"/><rect fill="#F1F1F1" height="94.7958" rx="5.1106" ry="5.1106" style="stroke:#181818;stroke-width:0.6132756132756133;" width="168.4464" x="201.1544" y="2008.8769"/><a href="https://docs.substrate.io/tutorials/get-started/trusted-network/#add-keys-to-the-keystore" target="_top" title="https://docs.substrate.io/tutorials/get-started/trusted-network/#add-keys-to-the-keystore" xlink:actuate="onRequest" xlink:href="https://docs.substrate.io/tutorials/get-started/trusted-network/#add-keys-to-the-keystore" xlink:show="new" xlink:title="https://docs.substrate.io/tutorials/get-started/trusted-network/#add-keys-to-the-keystore" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="5.7239" lengthAdjust="spacing" text-decoration="underline" textLength="70.3223" x="205.2429" y="2018.2785">Add keys to the keystore</text></a><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="205.2429" y="2024.9414"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="97.3064" x="205.2429" y="2031.6044">启动第一个节点后，尚未生成任何块。</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="205.2429" y="2038.2674"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="160.2694" x="205.2429" y="2044.9304">下一步是将两种类型的密钥添加到网络中每个节点的密钥库中。</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="205.2429" y="2051.5934"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="40.0673" x="205.2429" y="2058.2564">对于每个节点：</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="103.848" x="205.2429" y="2064.9194">1. 添加 aura 权限密钥以启用块生产。</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="113.6604" x="205.2429" y="2071.5823">2. 添加g randpa 权限密钥以启用块完成。</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="205.2429" y="2078.2453"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="91.5825" x="205.2429" y="2084.9083">有几种方法可以将密钥插入密钥库。</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="205.2429" y="2091.5713"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="153.7278" x="205.2429" y="2098.2343">对于本教程，您可以使用 key 子命令插入本地生成的密钥。</text><rect fill="#F1F1F1" height="121.4477" rx="5.1106" ry="5.1106" style="stroke:#181818;stroke-width:0.6132756132756133;" width="194.6128" x="390.0433" y="1911.0531"/><text fill="#000000" font-family="sans-serif" font-size="5.7239" lengthAdjust="spacing" textLength="74.0019" x="395.7672" y="1920.4546">Insert the aura secret key:</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="394.1318" y="1927.1176"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="98.1241" x="394.1318" y="1933.7806">./target/release/node-template</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="111.2073" x="394.1318" y="1940.4436">key insert --base-path /tmp/node01</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="85.0409" x="400.6734" y="1947.1066">--chain customSpecRaw.json</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="52.3329" x="400.6734" y="1953.7695">--scheme Sr25519</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="81.7701" x="400.6734" y="1960.4325">--suri &lt;your-secret-seed&gt;</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="71.9577" x="400.6734" y="1967.0955">--password-interactive</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="49.062" x="400.6734" y="1973.7585">--key-type aura</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="394.1318" y="1980.4215"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="170.0818" x="394.1318" y="1987.0845">Replace &lt;your-secret-seed&gt; with the secret phrase or</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="173.3526" x="394.1318" y="1993.7474">secret seed for the first key pair that you generated</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="140.6445" x="394.1318" y="2000.4104">in Generate local keys using node template.</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="394.1318" y="2007.0734"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="186.4358" x="394.1318" y="2013.7364">You can also insert a key from a specified file location.</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="394.1318" y="2020.3994"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="156.9986" x="394.1318" y="2027.0624">./target/release/node-template key insert --help</text><path d="M369.6008,2056.2748 L373.6893,2056.2748 C379.822,2056.2748 379.822,1971.7769 385.9548,1971.7769 L390.0433,1971.7769 " fill="none" style="stroke:#181818;stroke-width:0.40885040885040885;"/><rect fill="#F1F1F1" height="68.1439" rx="5.1106" ry="5.1106" style="stroke:#181818;stroke-width:0.6132756132756133;" width="142.2799" x="390.0433" y="2040.6778"/><text fill="#000000" font-family="sans-serif" font-size="5.7239" lengthAdjust="spacing" textLength="82.9966" x="394.1318" y="2050.0794">Insert the grandpa secret key</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="394.1318" y="2056.7423"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="134.1029" x="394.1318" y="2063.4053">./target/release/node-template key insert</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="75.2285" x="400.6734" y="2070.0683">--base-path /tmp/node01</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="85.0409" x="400.6734" y="2076.7313">--chain customSpecRaw.json</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="52.3329" x="400.6734" y="2083.3943">--scheme Ed25519</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="78.4993" x="400.6734" y="2090.0573">--suri &lt;your-secret-key&gt;</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="71.9577" x="400.6734" y="2096.7202">--password-interactive</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="49.062" x="400.6734" y="2103.3832">--key-type gran</text><path d="M369.6008,2056.2748 L373.6893,2056.2748 C379.822,2056.2748 379.822,2074.7497 385.9548,2074.7497 L390.0433,2074.7497 " fill="none" style="stroke:#181818;stroke-width:0.40885040885040885;"/><rect fill="#F1F1F1" height="28.166" rx="5.1106" ry="5.1106" style="stroke:#181818;stroke-width:0.6132756132756133;" width="152.0924" x="390.0433" y="2116.9987"/><text fill="#000000" font-family="sans-serif" font-size="5.7239" lengthAdjust="spacing" textLength="143.5065" x="394.1318" y="2126.4002">Verify that your keys are in the keystore for node01</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="394.1318" y="2133.0632"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="143.9153" x="394.1318" y="2139.7262">ls /tmp/node01/chains/local_testnet/keystore</text><path d="M369.6008,2056.2748 L373.6893,2056.2748 C379.822,2056.2748 379.822,2131.0816 385.9548,2131.0816 L390.0433,2131.0816 " fill="none" style="stroke:#181818;stroke-width:0.40885040885040885;"/><rect fill="#F1F1F1" height="48.1549" rx="5.1106" ry="5.1106" style="stroke:#181818;stroke-width:0.6132756132756133;" width="171.7172" x="390.0433" y="2153.3416"/><text fill="#000000" font-family="sans-serif" font-size="5.7239" lengthAdjust="spacing" textLength="47.8355" x="394.1318" y="2162.7432">Restart the node</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="394.1318" y="2169.4062"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="163.5402" x="394.1318" y="2176.0692">After you have added your keys to the keystore for</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="160.2694" x="394.1318" y="2182.7322">the first node under /tmp/node01, you can restart</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="160.2694" x="394.1318" y="2189.3951">the node using the command you used previously in</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="75.2285" x="394.1318" y="2196.0581">&lt;Start the first node&gt;.</text><path d="M369.6008,2056.2748 L373.6893,2056.2748 C379.822,2056.2748 379.822,2177.4191 385.9548,2177.4191 L390.0433,2177.4191 " fill="none" style="stroke:#181818;stroke-width:0.40885040885040885;"/><path d="M180.7119,1186.3066 L184.8004,1186.3066 C190.9331,1186.3066 190.9331,2056.2748 197.0659,2056.2748 L201.1544,2056.2748 " fill="none" style="stroke:#181818;stroke-width:0.40885040885040885;"/><rect fill="#F1F1F1" height="154.7627" rx="5.1106" ry="5.1106" style="stroke:#181818;stroke-width:0.6132756132756133;" width="279.6537" x="201.1544" y="2209.6736"/><text fill="#000000" font-family="sans-serif" font-size="5.7239" lengthAdjust="spacing" textLength="89.1294" x="205.2429" y="2219.0751">Enable other participants to join</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="205.2429" y="2225.7381"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="153.7278" x="205.2429" y="2232.4011">tip: You can now allow other validators to join</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="160.2694" x="205.2429" y="2239.0641">the network using the --bootnodes and --validator</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="68.6869" x="205.2429" y="2245.7271">command-line options.</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="205.2429" y="2252.39"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="160.2694" x="205.2429" y="2259.053">To add a second validator to the private network,</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="114.4781" x="205.2429" y="2265.716">just start a second blockchain node</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="0" x="205.2429" y="2272.379"/><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="98.1241" x="205.2429" y="2279.042">./target/release/node-template</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="75.2285" x="211.7845" y="2285.705">--base-path /tmp/node02</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="91.5825" x="211.7845" y="2292.3679">--chain ./customSpecRaw.json</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="39.2496" x="211.7845" y="2299.0309">--port 30334</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="45.7912" x="211.7845" y="2305.6939">--ws-port 9946</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="49.062" x="211.7845" y="2312.3569">--rpc-port 9934</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="179.8942" x="211.7845" y="2319.0199">--telemetry-url "wss://telemetry.polkadot.io/submit/ 0"</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="35.9788" x="211.7845" y="2325.6829">--validator</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="65.4161" x="211.7845" y="2332.3458">--rpc-methods Unsafe</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="49.062" x="211.7845" y="2339.0088">--name MyNode02</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="35.9788" x="211.7845" y="2345.6718">--bootnodes</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="264.9351" x="211.7845" y="2352.3348">/ip4/127.0.0.1/tcp/30333/p2p/12D3KooWLmrYDLoNTyTYtRdDyZLWDe1paxzxTw5RgjmHLfzW96SX</text><text fill="#000000" font-family="monospace" font-size="5.7239" lengthAdjust="spacing" textLength="71.9577" x="211.7845" y="2358.9978">--password-interactive</text><path d="M180.7119,1186.3066 L184.8004,1186.3066 C190.9331,1186.3066 190.9331,2287.0549 197.0659,2287.0549 L201.1544,2287.0549 " fill="none" style="stroke:#181818;stroke-width:0.40885040885040885;"/></g></svg></figure>
<h3 id="加密方式梳理"><a class="header" href="#加密方式梳理">加密方式梳理</a></h3>
<ul>
<li><a href="https://docs.substrate.io/reference/command-line-tools/subkey/#signature-schemes">substrate支持三种签名方案：sr25519、ed25519、secp256k1</a></li>
<li><a href="https://wiki.polkadot.network/docs/learn-cryptography">Cryptography Explainer · Polkadot Wiki</a></li>
<li><a href="https://en.wikipedia.org/wiki/EdDSA#Ed25519">EdDSA - Wikipedia</a></li>
<li><a href="https://en.bitcoin.it/wiki/Secp256k1">Secp256k1 - Bitcoin Wiki</a></li>
</ul>
<h4 id="sr25519"><a class="header" href="#sr25519">Sr25519</a></h4>
<blockquote>
<p>用于使用 aura 为一个节点生成块。</p>
</blockquote>
<ul>
<li><a href="https://github.com/paritytech/substrate/blob/master/primitives/core/src/sr25519.rs">substrate/sr25519.rs at master · paritytech/substrate</a></li>
</ul>
<h4 id="ed25519"><a class="header" href="#ed25519">Ed25519</a></h4>
<blockquote>
<p>用于使用 grapdpa 为一个节点生成块。</p>
</blockquote>
<ul>
<li><a href="https://github.com/paritytech/substrate/blob/42b2d623d058197aebc3c737fb44fbbf278a85b4/primitives/consensus/aura/src/lib.rs#L47-L63">pub mod ed25519-substrate/lib.rs at 42b2d623d058197aebc3c737fb44fbbf278a85b4 · paritytech/substrate</a></li>
</ul>
<h4 id="ss58-对应公钥地址格式"><a class="header" href="#ss58-对应公钥地址格式">SS58: 对应公钥/地址格式</a></h4>
<ul>
<li><a href="https://github.com/paritytech/substrate/blob/0ba251c9388452c879bfcca425ada66f1f9bc802/primitives/core/src/crypto.rs#L46">pub use ss58_registry-substrate/crypto.rs at 0ba251c9388452c879bfcca425ada66f1f9bc802 · paritytech/substrate</a></li>
<li><a href="https://docs.substrate.io/reference/glossary/#ss58-address-format">Glossary | Substrate_ Docs</a></li>
</ul>
<h3 id="步骤"><a class="header" href="#步骤">步骤：</a></h3>
<ol>
<li>使用Sr25519 -&gt; 一个助记词和对应SS58公钥 -&gt; aura</li>
<li>使用Ed25519+前面的助记词 -&gt; Ed25519 公钥 -&gt; grandpa</li>
</ol>
<h3 id="actdiag"><a class="header" href="#actdiag">actdiag</a></h3>
<pre><svg viewBox="0 0 1024 680" xmlns="http://www.w3.org/2000/svg" xmlns:inkspace="http://www.inkscape.org/namespaces/inkscape" xmlns:xlink="http://www.w3.org/1999/xlink" width="1024px" height="680px">
  <defs id="defs_block">
    <filter height="1.504" id="filter_blur" inkspace:collect="always" width="1.1575" x="-0.07875" y="-0.252">
      <feGaussianBlur id="feGaussianBlur3780" inkspace:collect="always" stdDeviation="4.2" />
    </filter>
  </defs>
  <title>blockdiag</title>
  <desc>actdiag {
  first_sr25519 -&gt; first_ed25519 -&gt; add_validators
  second_sr25519 -&gt; second_ed25519 -&gt; add_validators
  export_customSpec -&gt; add_validators
  add_validators -&gt; first_start -&gt; first_import_key -&gt; first_restart
  add_validators -&gt; second_start -&gt; second_import_key -&gt; second_restart
  first_restart -&gt; peers
  second_restart -&gt; peers

  lane node1 {
    label = "node1"
    first_sr25519 [label = "使用Sr25519 -&gt; 一个助记词和对应SS58公钥 -&gt; aura"];
    first_ed25519 [label = "使用Ed25519+前面的助记词 -&gt; Ed25519 公钥 -&gt; grandpa"];
    first_start [label = "使用链规范文件启动第一个节点"];
    first_import_key [label = "导入第一个节点的key"];
    first_restart [label = "使用链规范文件重启第一个节点"];
  }
  lane network {
    label = "本地链"
    export_customSpec [label = "导出链规范文件"];
    add_validators [label = "添加验证节点信息"];
    peers [label = "进入本地链，互为观察者(peers)"];
  }
  lane node2 {
    label = "node2"
    second_sr25519 [label = "使用Sr25519 -&gt; 一个助记词和对应SS58公钥 -&gt; aura"];
    second_ed25519 [label = "使用Ed25519+前面的助记词 -&gt; Ed25519 公钥 -&gt; grandpa"];
    second_start [label = "使用链规范文件启动第二个节点"];
    second_import_key [label = "导入第二个节点的key"];
    second_restart [label = "使用链规范文件重启第二个节点"];
  }
}</desc>
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="67" y="126" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="67" y="206" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="835" y="206" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="451" y="126" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="259" y="286" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="835" y="126" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="67" y="366" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="67" y="446" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="67" y="526" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="643" y="526" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="643" y="366" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="643" y="446" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="259" y="606" />
  <rect fill="#ffff99" height="62" stroke="#ffff99" width="192" x="32" y="38" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="31" x="128.5" y="75">node1</text>
  <rect fill="#ffff99" height="62" stroke="#ffff99" width="384" x="224" y="38" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="33" x="416.5" y="75">本地链</text>
  <rect fill="#ffff99" height="62" stroke="#ffff99" width="384" x="608" y="38" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="31" x="800.5" y="75">node2</text>
  <rect fill="none" height="622" stroke="gray" width="960" x="32" y="38" />
  <path d="M 32 100 L 992 100" fill="none" stroke="gray" />
  <path d="M 224 38 L 224 660" fill="none" stroke="gray" />
  <path d="M 608 38 L 608 660" fill="none" stroke="gray" />
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="64" y="120" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="122" x="128.0" y="133">使用Sr25519 -&gt; 一个助</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="126" x="128.0" y="146">记词和对应SS58公钥 -&gt; </text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="25" x="128.5" y="159">aura</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="64" y="200" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="126" x="128.0" y="213">使用Ed25519+前面的助记</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="124" x="128.0" y="226">词 -&gt; Ed25519 公钥 -&gt;</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="49" x="128.5" y="239"> grandpa</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="832" y="200" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="126" x="896.0" y="213">使用Ed25519+前面的助记</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="124" x="896.0" y="226">词 -&gt; Ed25519 公钥 -&gt;</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="49" x="896.5" y="239"> grandpa</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="448" y="120" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="77" x="512.5" y="146">导出链规范文件</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="256" y="280" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="88" x="320.0" y="306">添加验证节点信息</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="832" y="120" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="122" x="896.0" y="133">使用Sr25519 -&gt; 一个助</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="126" x="896.0" y="146">记词和对应SS58公钥 -&gt; </text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="25" x="896.5" y="159">aura</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="64" y="360" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="121" x="128.5" y="379">使用链规范文件启动第一</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="33" x="128.5" y="392">个节点</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="64" y="440" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="107" x="128.5" y="466">导入第一个节点的key</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="64" y="520" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="121" x="128.5" y="539">使用链规范文件重启第一</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="33" x="128.5" y="552">个节点</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="640" y="520" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="121" x="704.5" y="539">使用链规范文件重启第二</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="33" x="704.5" y="552">个节点</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="640" y="360" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="121" x="704.5" y="379">使用链规范文件启动第二</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="33" x="704.5" y="392">个节点</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="640" y="440" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="107" x="704.5" y="466">导入第二个节点的key</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="256" y="600" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="128" x="320.0" y="619">进入本地链，互为观察者(</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="37" x="320.5" y="632">peers)</text>
  <path d="M 128 160 L 128 192" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="128,199 124,192 132,192 128,199" stroke="rgb(0,0,0)" />
  <path d="M 128 240 L 128 260" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 128 260 L 320 260" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 320 260 L 320 272" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="320,279 316,272 324,272 320,279" stroke="rgb(0,0,0)" />
  <path d="M 320 320 L 320 340" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 128 340 L 320 340" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 128 340 L 128 352" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="128,359 124,352 132,352 128,359" stroke="rgb(0,0,0)" />
  <path d="M 320 320 L 320 340" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 320 340 L 704 340" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 704 340 L 704 352" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="704,359 700,352 708,352 704,359" stroke="rgb(0,0,0)" />
  <path d="M 896 160 L 896 192" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="896,199 892,192 900,192 896,199" stroke="rgb(0,0,0)" />
  <path d="M 896 240 L 896 260" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 320 260 L 896 260" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 320 260 L 320 272" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="320,279 316,272 324,272 320,279" stroke="rgb(0,0,0)" />
  <path d="M 512 160 L 512 260" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 320 260 L 512 260" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 320 260 L 320 272" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="320,279 316,272 324,272 320,279" stroke="rgb(0,0,0)" />
  <path d="M 128 400 L 128 432" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="128,439 124,432 132,432 128,439" stroke="rgb(0,0,0)" />
  <path d="M 128 480 L 128 512" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="128,519 124,512 132,512 128,519" stroke="rgb(0,0,0)" />
  <path d="M 128 560 L 128 580" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 128 580 L 320 580" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 320 580 L 320 592" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="320,599 316,592 324,592 320,599" stroke="rgb(0,0,0)" />
  <path d="M 704 400 L 704 432" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="704,439 700,432 708,432 704,439" stroke="rgb(0,0,0)" />
  <path d="M 704 480 L 704 512" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="704,519 700,512 708,512 704,519" stroke="rgb(0,0,0)" />
  <path d="M 704 560 L 704 580" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 320 580 L 704 580" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 320 580 L 320 592" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="320,599 316,592 324,592 320,599" stroke="rgb(0,0,0)" />
</svg></pre>
<h2 id="authorize-specific-nodes"><a class="header" href="#authorize-specific-nodes">Authorize specific nodes</a></h2>
<figure><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1791.7219px" preserveAspectRatio="none" style="width:850px;height:1791px;background:#FFFFFF;" version="1.1" viewBox="0 0 850 1791" width="850.3311px" zoomAndPan="magnify"><defs/><g><rect fill="#008B8B" height="60.5857" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="154.9669" x="3.3113" y="865.3663"/><a href="https://docs.substrate.io/tutorials/get-started/permissioned-network/" target="_top" title="https://docs.substrate.io/tutorials/get-started/permissioned-network/" xlink:actuate="onRequest" xlink:href="https://docs.substrate.io/tutorials/get-started/permissioned-network/" xlink:show="new" xlink:title="https://docs.substrate.io/tutorials/get-started/permissioned-network/" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" text-decoration="underline" textLength="56.2914" x="6.6225" y="872.9806">Authorize specific nodes</text></a><text fill="#000000" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" textLength="1.3245" x="62.9139" y="872.9806"> </text><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#总览" target="_top" title="#总览" xlink:actuate="onRequest" xlink:href="#总览" xlink:show="new" xlink:title="#总览" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" text-decoration="underline" textLength="9.2715" x="64.2384" y="872.9806">返回</text></a><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="6.6225" y="878.3769"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="92.7152" x="6.6225" y="883.7732">using the node authorization pallet</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="6.6225" y="889.1695"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="148.3444" x="6.6225" y="894.5659">The node-authorization pallet is a prebuilt FRAME pallet</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="143.0464" x="6.6225" y="899.9622">that enables you to manage a configurable set of nodes</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="135.0993" x="6.6225" y="905.3585">for a network. Each node is identified by a PeerId.</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="6.6225" y="910.7548"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="132.4503" x="6.6225" y="916.1511">Each PeerId is owned by one and only one AccountId</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="55.6291" x="6.6225" y="921.5474">that claims the node.</text><rect fill="#BA55D3" height="152.3231" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="170.8609" x="174.8344" y="6.6225"/><text fill="#000000" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" textLength="61.9205" x="178.1457" y="14.2368">Why permissioned network</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="178.1457" y="19.6331"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="135.0993" x="178.1457" y="25.0294">In Add trusted nodes, you saw how to build a simple</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="153.6424" x="178.1457" y="30.4257">network with a known set of validator nodes. That tutorial</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="156.2914" x="178.1457" y="35.8221">illustrated a simplified version of a permissioned network.</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="178.1457" y="41.2184"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="158.9404" x="178.1457" y="46.6147">In a permissioned network, only authorized nodes are allowed</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="164.2384" x="178.1457" y="52.011">to perform specific network activities. For example, you might</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="158.9404" x="178.1457" y="57.4073">grant some nodes the permission to validate blocks and other</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="124.5033" x="178.1457" y="62.8036">nodes the permission to propagate transactions.</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="178.1457" y="68.2"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="161.5894" x="178.1457" y="73.5963">A blockchain with nodes that are granted specific permissions</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="148.3444" x="178.1457" y="78.9926">is different from a public or permissionless blockchain.</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="156.2914" x="178.1457" y="84.3889">In a permissionless blockchain, anyone can join the network</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="164.2384" x="178.1457" y="89.7852">by running the node software on suitable hardware. In general,</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="164.2384" x="178.1457" y="95.1815">a permissionless blockchain offers greater decentralization of</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="153.6424" x="178.1457" y="100.5779">the network. However, there are use cases where creating a</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="119.2053" x="178.1457" y="105.9742">permissioned blockchain might be appropriate.</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="178.1457" y="111.3705"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="156.2914" x="178.1457" y="116.7668">For example,a permissioned blockchain would be suitable for</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="84.7682" x="178.1457" y="122.1631">the following types of projects:</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="178.1457" y="127.5594"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="100.6623" x="178.1457" y="132.9558">1. For a private or consortium network</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="153.6424" x="178.1457" y="138.3521">such as a private enterprise or a non-profit organization.</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="105.9603" x="178.1457" y="143.7484">2. In highly-regulated data environments</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="161.5894" x="178.1457" y="149.1447">such as healthcare, finance, or business-to-business ledgers.</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="156.2914" x="178.1457" y="154.541">3. For testing of a pre-public blockchain network at scale.</text><path d="M158.2781,895.6591 L161.5894,895.6591 C166.5563,895.6591 166.5563,82.784 171.5232,82.784 L174.8344,82.784 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/><rect fill="#BA55D3" height="12.0188" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="85.0993" x="174.8344" y="278.3992"/><text fill="#000000" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" textLength="78.4768" x="178.1457" y="286.0135">Node authorization and ownership</text><rect fill="#F1F1F1" height="49.793" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="178.8079" x="276.4901" y="165.5681"/><text fill="#000000" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" textLength="149.3377" x="279.8013" y="173.1824">There are two ways you can authorize a node to join the network:</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="279.8013" y="178.5787"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="148.3444" x="279.8013" y="183.975">1. By adding the PeerId to the list of predefined nodes.</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="140.3974" x="279.8013" y="189.3713">You must be approved by the governance or sudo pallet</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="68.8742" x="279.8013" y="194.7676">in the network to do this.</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="279.8013" y="200.1639"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="166.8874" x="279.8013" y="205.5603">2. By asking for a paired peer connection from a specific node.</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="172.1854" x="279.8013" y="210.9566">This node can either be a predefined node PeerId or a normal one.</text><path d="M259.9338,284.4086 L263.245,284.4086 C268.2119,284.4086 268.2119,190.4646 273.1788,190.4646 L276.4901,190.4646 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/><rect fill="#F1F1F1" height="44.3967" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="141.7219" x="276.4901" y="221.9837"/><text fill="#000000" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" textLength="105.298" x="279.8013" y="229.5979">any user can claim to be the owner of a PeerId</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="279.8013" y="234.9942"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="129.8013" x="279.8013" y="240.3906">To protect against false claims, you should claim</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="92.7152" x="279.8013" y="245.7869">the node before you start the node.</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="279.8013" y="251.1832"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="132.4503" x="279.8013" y="256.5795">After you start the node, its PeerID is visible to</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="135.0993" x="279.8013" y="261.9758">the network and anyone could subsequently claim it.</text><path d="M259.9338,284.4086 L263.245,284.4086 C268.2119,284.4086 268.2119,244.182 273.1788,244.182 L276.4901,244.182 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/><rect fill="#F1F1F1" height="60.5857" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="149.6689" x="276.4901" y="273.0029"/><text fill="#000000" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" textLength="52.9801" x="279.8013" y="280.6172">As the owner of a node</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="279.8013" y="286.0135"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="129.8013" x="279.8013" y="291.4098">you can add and remove connections for your node.</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="279.8013" y="296.8061"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="121.8543" x="279.8013" y="302.2024">For example, you can manipulate the connection</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="111.2583" x="279.8013" y="307.5988">between a predefined node and your node or</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="129.8013" x="279.8013" y="312.9951">between your node and other non-predefined nodes.</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="279.8013" y="318.3914"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="143.0464" x="279.8013" y="323.7877">You can't change the connections for predefined nodes.</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="135.0993" x="279.8013" y="329.184">They are always allowed to connect with each other.</text><path d="M259.9338,284.4086 L263.245,284.4086 C268.2119,284.4086 268.2119,303.2957 273.1788,303.2957 L276.4901,303.2957 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/><rect fill="#F1F1F1" height="44.3967" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="147.0199" x="276.4901" y="340.2111"/><text fill="#000000" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" textLength="34.7682" x="279.8013" y="347.8254">offchain worker</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="140.3974" x="279.8013" y="353.2217">The node-authorization pallet uses an offchain worker</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="90.0662" x="279.8013" y="358.618">to configure its node connections.</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="279.8013" y="364.0143"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="127.1523" x="279.8013" y="369.4106">Make sure to enable the offchain worker when you</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="127.1523" x="279.8013" y="374.807">start the node because it is disabled by default</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="63.5762" x="279.8013" y="380.2033">for non-authority nodes.</text><path d="M259.9338,284.4086 L263.245,284.4086 C268.2119,284.4086 268.2119,362.4095 273.1788,362.4095 L276.4901,362.4095 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/><rect fill="#F1F1F1" height="12.0188" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="145.6954" x="276.4901" y="391.2303"/><a href="https://wiki.polkadot.network/docs/faq#networking" target="_top" title="https://wiki.polkadot.network/docs/faq#networking" xlink:actuate="onRequest" xlink:href="https://wiki.polkadot.network/docs/faq#networking" xlink:show="new" xlink:title="https://wiki.polkadot.network/docs/faq#networking" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" text-decoration="underline" textLength="139.0728" x="279.8013" y="398.8446">Need to be familiar with peer-to-peer networking in Substrate</text></a><path d="M259.9338,284.4086 L263.245,284.4086 C268.2119,284.4086 268.2119,397.2398 273.1788,397.2398 L276.4901,397.2398 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/><path d="M158.2781,895.6591 L161.5894,895.6591 C166.5563,895.6591 166.5563,284.4086 171.5232,284.4086 L174.8344,284.4086 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/><rect fill="#F1F1F1" height="33.6041" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="75.4967" x="174.8344" y="297.0406"/><text fill="#000000" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" textLength="64.9007" x="178.1457" y="304.6548">编译一下项目，获取可执行文件</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="178.1457" y="310.0512"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="68.8742" x="178.1457" y="315.4475">cd substrate-node-template</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="50.3311" x="178.1457" y="320.8438">git checkout latest</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="55.6291" x="178.1457" y="326.2401">cargo build --release</text><path d="M158.2781,895.6591 L161.5894,895.6591 C166.5563,895.6591 166.5563,313.8426 171.5232,313.8426 L174.8344,313.8426 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/><rect fill="#F1F1F1" height="12.0188" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="82.4503" x="174.8344" y="538.8918"/><a href="https://docs.substrate.io/tutorials/get-started/permissioned-network/#add-the-node-authorization-pallet" target="_top" title="https://docs.substrate.io/tutorials/get-started/permissioned-network/#add-the-node-authorization-pallet" xlink:actuate="onRequest" xlink:href="https://docs.substrate.io/tutorials/get-started/permissioned-network/#add-the-node-authorization-pallet" xlink:show="new" xlink:title="https://docs.substrate.io/tutorials/get-started/permissioned-network/#add-the-node-authorization-pallet" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" text-decoration="underline" textLength="75.8278" x="178.1457" y="546.506">Add the node authorization pallet</text></a><rect fill="#F1F1F1" height="65.982" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="189.404" x="273.8411" y="409.8717"/><text fill="#000000" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" textLength="24.8344" x="277.1523" y="417.486">Cargo.toml</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="277.1523" y="422.8823"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="172.1854" x="277.1523" y="428.2786">the Cargo.toml file controls two important pieces of information:</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="277.1523" y="433.6749"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="164.2384" x="277.1523" y="439.0712">1. The pallets to be imported as dependencies for the runtime,</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="158.9404" x="277.1523" y="444.4675">including the location and version of the pallets to import.</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="140.3974" x="277.1523" y="449.8639">2. The features in each pallet that should be enabled</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="182.7815" x="277.1523" y="455.2602">when compiling the native Rust binary. By enabling the standard (std)</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="182.7815" x="277.1523" y="460.6565">feature set from each pallet , you can compile the runtime to include</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="169.5364" x="277.1523" y="466.0528">functions, types, and primitives that would otherwise be missing</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="100.6623" x="277.1523" y="471.4491">when you build the WebAssembly binary.</text><rect fill="#F1F1F1" height="12.0188" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="53.9735" x="479.8013" y="427.5326"/><a href="https://doc.rust-lang.org/cargo/guide/dependencies.html" target="_top" title="https://doc.rust-lang.org/cargo/guide/dependencies.html" xlink:actuate="onRequest" xlink:href="https://doc.rust-lang.org/cargo/guide/dependencies.html" xlink:show="new" xlink:title="https://doc.rust-lang.org/cargo/guide/dependencies.html" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" text-decoration="underline" textLength="47.351" x="483.1126" y="435.1469">cargo dependencies</text></a><path d="M463.245,442.8627 L466.5563,442.8627 C471.5232,442.8627 471.5232,433.542 476.4901,433.542 L479.8013,433.542 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/><rect fill="#F1F1F1" height="12.0188" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="39.7351" x="479.8013" y="446.1739"/><a href="https://doc.rust-lang.org/cargo/reference/features.html" target="_top" title="https://doc.rust-lang.org/cargo/reference/features.html" xlink:actuate="onRequest" xlink:href="https://doc.rust-lang.org/cargo/reference/features.html" xlink:show="new" xlink:title="https://doc.rust-lang.org/cargo/reference/features.html" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" text-decoration="underline" textLength="33.1126" x="483.1126" y="453.7882">cargo features</text></a><path d="M463.245,442.8627 L466.5563,442.8627 C471.5232,442.8627 471.5232,452.1834 476.4901,452.1834 L479.8013,452.1834 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/><path d="M257.2848,544.9012 L260.596,544.9012 C265.5629,544.9012 265.5629,442.8627 270.5298,442.8627 L273.8411,442.8627 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/><rect fill="#F1F1F1" height="12.0188" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="93.3775" x="273.8411" y="555.0807"/><text fill="#000000" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" textLength="86.755" x="277.1523" y="562.695">Add note-authorization dependencies</text><rect fill="#F1F1F1" height="55.1894" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="154.9669" x="383.7748" y="482.4762"/><text fill="#000000" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" textLength="77.1523" x="387.0861" y="490.0905">runtime/Cargo.toml-&gt;[depencies]</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="387.0861" y="495.4868"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="37.0861" x="387.0861" y="500.8831">[dependencies]</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="76.8212" x="387.0861" y="506.2794">pallet-node-authorization = {</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="66.2252" x="397.6821" y="511.6757">default-features = false,</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="137.7483" x="397.6821" y="517.0721">git = "https://github.com/paritytech/substrate.git",</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="58.2781" x="397.6821" y="522.4684">tag = "devhub/latest",</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="60.9272" x="397.6821" y="527.8647">version = "4.0.0-dev" }</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="15.894" x="387.0861" y="533.261">&lt;code&gt;</text><path d="M367.2185,561.0901 L370.5298,561.0901 C375.4967,561.0901 375.4967,510.0709 380.4636,510.0709 L383.7748,510.0709 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/><rect fill="#F1F1F1" height="71.3783" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="144.3709" x="383.7748" y="544.2881"/><text fill="#000000" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" textLength="71.8543" x="387.0861" y="551.9024">runtime/Cargo.toml-&gt;[features]</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="387.0861" y="557.2987"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="26.4901" x="387.0861" y="562.695">[features]</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="45.0331" x="387.0861" y="568.0913">default = ['std']</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="18.543" x="387.0861" y="573.4876">std = [</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="7.947" x="389.7351" y="578.8839">...</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="135.0993" x="389.7351" y="584.2803">"pallet-node-authorization/std",    # add this line</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="7.947" x="389.7351" y="589.6766">...</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="2.649" x="387.0861" y="595.0729">]</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="387.0861" y="600.4692"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="118.543" x="387.0861" y="605.8655">如果忘记更新 Cargo.toml 文件中的 features 部分，</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="115.894" x="387.0861" y="611.2618">可能会在编译运行时二进制文件时看到找不到函数错误。</text><rect fill="#F1F1F1" height="55.1894" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="181.457" x="544.702" y="552.3826"/><a href="https://docs.substrate.io/main-docs/build/build-process/" target="_top" title="https://docs.substrate.io/main-docs/build/build-process/" xlink:actuate="onRequest" xlink:href="https://docs.substrate.io/main-docs/build/build-process/" xlink:show="new" xlink:title="https://docs.substrate.io/main-docs/build/build-process/" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" text-decoration="underline" textLength="31.1258" x="548.0132" y="559.9968">Build process</text></a><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="548.0132" y="565.3931"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="119.8675" x="548.0132" y="570.7895">本节指定要为此运行时编译的默认功能集是 std 功能集。</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="548.0132" y="576.1858"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="174.8344" x="548.0132" y="581.5821">使用 std 功能集编译运行时的时候，将启用所有列为依赖项的托盘中的 std 功能。</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="548.0132" y="586.9784"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="131.7881" x="548.0132" y="592.3747">有关如何使用标准库将运行时编译为原生 Rust 二进制文件以及</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="148.3444" x="548.0132" y="597.771">使用 no_std 属性编译为 WebAssembly 二进制文件的更多详细信息，</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="41.7219" x="548.0132" y="603.1674">请参阅构建运行时。</text><path d="M528.1457,579.9772 L531.457,579.9772 C536.4238,579.9772 536.4238,579.9772 541.3907,579.9772 L544.702,579.9772 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/><path d="M367.2185,561.0901 L370.5298,561.0901 C375.4967,561.0901 375.4967,579.9772 380.4636,579.9772 L383.7748,579.9772 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/><rect fill="#F1F1F1" height="17.4151" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="101.9868" x="383.7748" y="622.2889"/><text fill="#000000" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" textLength="59.2715" x="387.0861" y="629.9032">check new dependencies</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="95.3642" x="387.0861" y="635.2995">cargo check -p node-template-runtime</text><path d="M367.2185,561.0901 L370.5298,561.0901 C375.4967,561.0901 375.4967,630.9965 380.4636,630.9965 L383.7748,630.9965 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/><path d="M257.2848,544.9012 L260.596,544.9012 C265.5629,544.9012 265.5629,561.0901 270.5298,561.0901 L273.8411,561.0901 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/><rect fill="#F1F1F1" height="33.6041" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="191.3907" x="273.8411" y="646.3266"/><text fill="#000000" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" textLength="58.6093" x="277.1523" y="653.9409">Add an administrative rule</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="277.1523" y="659.3372"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="184.106" x="277.1523" y="664.7335">要在本教程中模拟治理(governance)，可以将托盘配置为使用 EnsureRoot 特权功能，</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="184.7682" x="277.1523" y="670.1298">该功能可以使用 Sudo 托盘调用。 Sudo 托盘默认包含在节点模板中，使您能够通过根级</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="143.7086" x="277.1523" y="675.5261">管理帐户进行调用。在生产环境中，将使用更现实的基于治理的检查。</text><rect fill="#F1F1F1" height="22.8115" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="85.4305" x="481.7881" y="651.7229"/><text fill="#000000" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" textLength="38.4106" x="485.0993" y="659.3372">runtime/src/lib.rs</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="485.0993" y="664.7335"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="78.8079" x="485.0993" y="670.1298">use frame_system::EnsureRoot；</text><path d="M465.2318,663.1286 L468.543,663.1286 C473.5099,663.1286 473.5099,663.1286 478.4768,663.1286 L481.7881,663.1286 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/><path d="M257.2848,544.9012 L260.596,544.9012 C265.5629,544.9012 265.5629,663.1286 270.5298,663.1286 L273.8411,663.1286 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/><path d="M158.2781,895.6591 L161.5894,895.6591 C166.5563,895.6591 166.5563,544.9012 171.5232,544.9012 L174.8344,544.9012 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/><rect fill="#F1F1F1" height="12.0188" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="95.3642" x="174.8344" y="951.4616"/><text fill="#000000" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" textLength="88.7417" x="178.1457" y="959.0759">Implement the Config trait for the pallet</text><rect fill="#F1F1F1" height="65.982" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="175.4967" x="286.755" y="686.5532"/><text fill="#000000" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" textLength="54.3046" x="290.0662" y="694.1675">About Pallet Config Trait</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="290.0662" y="699.5638"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="290.0662" y="704.9601"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="101.9868" x="290.0662" y="710.3564">每个托盘都有一个名为 Config 的 Rust 特征。</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="103.9735" x="290.0662" y="715.7527">Config trait 用于识别托盘所需的参数和类型。</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="290.0662" y="721.149"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="150.9934" x="290.0662" y="726.5454">添加托盘所需的大多数特定于托盘的代码都是使用 Config 特征实现的。</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="168.8742" x="290.0662" y="731.9417">可以通过参考其 Rust 文档或托盘的源代码来查看您需要为任何托盘实现的内容。</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="290.0662" y="737.338"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="133.7748" x="290.0662" y="742.7343">例如，要查看 node-authorization 托盘中的 Config trait</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="137.0861" x="290.0662" y="748.1306">需要实现什么，可以参考托盘节点授权::Config 的 Rust 文档。</text><rect fill="#F1F1F1" height="12.0188" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="300.3311" x="478.8079" y="704.2141"/><text fill="#000000" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" textLength="293.7086" x="482.1192" y="711.8284">[[Traits: Defining Shared Behavior - The Rust Programming Language](https://doc.rust-lang.org/book/ch10-02-traits.html) Traits]]</text><path d="M462.2517,719.5442 L465.5629,719.5442 C470.5298,719.5442 470.5298,710.2235 475.4967,710.2235 L478.8079,710.2235 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/><rect fill="#F1F1F1" height="12.0188" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="98.6755" x="478.8079" y="722.8554"/><a href="https://paritytech.github.io/substrate/master/pallet_node_authorization/pallet/trait.Config.html" target="_top" title="https://paritytech.github.io/substrate/master/pallet_node_authorization/pallet/trait.Config.html" xlink:actuate="onRequest" xlink:href="https://paritytech.github.io/substrate/master/pallet_node_authorization/pallet/trait.Config.html" xlink:show="new" xlink:title="https://paritytech.github.io/substrate/master/pallet_node_authorization/pallet/trait.Config.html" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" text-decoration="underline" textLength="92.053" x="482.1192" y="730.4697">pallet_node_authorization::pallet::Config</text></a><path d="M462.2517,719.5442 L465.5629,719.5442 C470.5298,719.5442 470.5298,728.8649 475.4967,728.8649 L478.8079,728.8649 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/><path d="M270.1987,957.471 L273.5099,957.471 C278.4768,957.471 278.4768,719.5442 283.4437,719.5442 L286.755,719.5442 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/><rect fill="#F1F1F1" height="12.0188" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="140.7285" x="286.755" y="865.3663"/><text fill="#000000" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" textLength="134.106" x="290.0662" y="872.9806">To implement the node-authorization pallet in your runtime</text><rect fill="#F1F1F1" height="12.0188" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="45.0331" x="444.0397" y="865.3663"/><text fill="#000000" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" textLength="38.4106" x="447.351" y="872.9806">runtime/src/lib.rs</text><rect fill="#F1F1F1" height="39.0004" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="109.2715" x="505.6291" y="759.1577"/><text fill="#000000" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" textLength="57.6159" x="508.9404" y="766.772">Add the parameter_types</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="508.9404" y="772.1683"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="47.6821" x="508.9404" y="777.5646">parameter_types! {</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="100" x="511.5894" y="782.9609">pub const MaxWellKnownNodes: u32 = 8；</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="100" x="511.5894" y="788.3572">pub const MaxPeerIdLength: u32 = 128；</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="2.649" x="508.9404" y="793.7536">}</text><path d="M489.0728,871.3757 L492.3841,871.3757 C497.351,871.3757 497.351,778.6579 502.3179,778.6579 L505.6291,778.6579 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/><rect fill="#F1F1F1" height="71.3783" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="144.3709" x="505.6291" y="804.7806"/><text fill="#000000" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" textLength="46.6887" x="508.9404" y="812.3949">Add the impl section</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="508.9404" y="817.7912"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="137.7483" x="508.9404" y="823.1875">impl pallet_node_authorization::Config for Runtime {</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="52.3179" x="511.5894" y="828.5839">type Event = Event；</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="115.894" x="511.5894" y="833.9802">type MaxWellKnownNodes = MaxWellKnownNodes；</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="105.298" x="511.5894" y="839.3765">type MaxPeerIdLength = MaxPeerIdLength；</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="105.298" x="511.5894" y="844.7728">type AddOrigin = EnsureRoot&lt;AccountId&gt;；</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="113.245" x="511.5894" y="850.1691">type RemoveOrigin = EnsureRoot&lt;AccountId&gt;；</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="113.9073" x="511.5894" y="855.5654">type SwapOrigin = EnsureRoot&lt;AccountId&gt;; //</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="116.5563" x="511.5894" y="860.9618">type ResetOrigin = EnsureRoot&lt;AccountId&gt;; //</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="63.5762" x="511.5894" y="866.3581">type WeightInfo = (); //</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="2.649" x="508.9404" y="871.7544">}</text><path d="M489.0728,871.3757 L492.3841,871.3757 C497.351,871.3757 497.351,840.4698 502.3179,840.4698 L505.6291,840.4698 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/><rect fill="#F1F1F1" height="71.3783" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="255.6291" x="505.6291" y="882.7815"/><text fill="#000000" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" textLength="104.9669" x="508.9404" y="890.3957">Add the pallet to the construct_runtime macro</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="508.9404" y="895.7921"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="50.3311" x="508.9404" y="901.1884">construct_runtime!(</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="58.2781" x="508.9404" y="906.5847">pub enum Runtime where</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="37.0861" x="516.8874" y="911.981">Block = Block,</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="68.8742" x="516.8874" y="917.3773">NodeBlock = opaque::Block,</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="103.3113" x="516.8874" y="922.7736">UncheckedExtrinsic = UncheckedExtrinsic</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="2.649" x="511.5894" y="928.1699">{</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="50.3311" x="516.8874" y="933.5663">/* Add This Line */</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="241.0596" x="516.8874" y="938.9626">NodeAuthorization: pallet_node_authorization::{Pallet, Call, Storage, Event&lt;T&gt;, Config&lt;T&gt;},</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="2.649" x="511.5894" y="944.3589">}</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="7.2848" x="508.9404" y="949.7552">)；</text><path d="M489.0728,871.3757 L492.3841,871.3757 C497.351,871.3757 497.351,918.4706 502.3179,918.4706 L505.6291,918.4706 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/><rect fill="#F1F1F1" height="22.8115" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="101.9868" x="505.6291" y="960.7823"/><text fill="#000000" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" textLength="28.8079" x="508.9404" y="968.3966">Cargo check</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="508.9404" y="973.7929"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="95.3642" x="508.9404" y="979.1892">cargo check -p node-template-runtime</text><path d="M489.0728,871.3757 L492.3841,871.3757 C497.351,871.3757 497.351,972.188 502.3179,972.188 L505.6291,972.188 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/><path d="M427.4834,871.3757 L430.7947,871.3757 C435.7616,871.3757 435.7616,871.3757 440.7285,871.3757 L444.0397,871.3757 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/><path d="M270.1987,957.471 L273.5099,957.471 C278.4768,957.471 278.4768,871.3757 283.4437,871.3757 L286.755,871.3757 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/><rect fill="#F1F1F1" height="71.3783" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="168.2119" x="286.755" y="1073.6134"/><text fill="#000000" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" textLength="96.3576" x="290.0662" y="1081.2277">Add genesis storage for authorized nodes</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="290.0662" y="1086.624"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="158.9404" x="290.0662" y="1092.0203">Before you can launch the network to use node authorization,</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="153.6424" x="290.0662" y="1097.4166">some additional configuration is needed to handle the peer</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="98.0132" x="290.0662" y="1102.813">identifiers and account identifiers .</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="290.0662" y="1108.2093"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="132.4503" x="290.0662" y="1113.6056">For example, the PeerId is encoded in bs58 format,</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="148.3444" x="290.0662" y="1119.0019">so you need to add a new dependency for the bs58 library</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="161.5894" x="290.0662" y="1124.3982">in the node/Cargo.toml to decode the PeerId to get its bytes.</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="290.0662" y="1129.7945"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="153.6424" x="290.0662" y="1135.1909">To keep things simple, the authorized nodes are associated</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="66.2252" x="290.0662" y="1140.5872">with predefined accounts.</text><rect fill="#F1F1F1" height="28.2078" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="45.0331" x="471.5232" y="1068.4629"/><text fill="#000000" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" textLength="38.4106" x="474.8344" y="1076.0771">node/Cargo.toml</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="474.8344" y="1081.4734"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="37.0861" x="474.8344" y="1086.8698">[dependencies]</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="37.0861" x="474.8344" y="1092.2661">bs58 = "0.4.0"</text><path d="M454.9669,1109.3026 L458.2781,1109.3026 C463.245,1109.3026 463.245,1082.5667 468.2119,1082.5667 L471.5232,1082.5667 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/><rect fill="#F1F1F1" height="12.0188" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="60.2649" x="471.5232" y="1103.2931"/><text fill="#000000" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" textLength="53.6424" x="474.8344" y="1110.9074">node/src/chain_spec.rs</text><rect fill="#F1F1F1" height="39.0004" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="149.6689" x="548.3444" y="990.2163"/><text fill="#000000" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" textLength="70.5298" x="551.6556" y="997.8305">Add genesis storage for nodes</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="551.6556" y="1003.2269"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="143.0464" x="551.6556" y="1008.6232">// A struct wraps Vec&lt;u8&gt;, represents as our `PeerId`.</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="70.8609" x="551.6556" y="1014.0195">use sp_core::OpaquePeerId；</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="129.8013" x="551.6556" y="1019.4158">// The genesis config that serves for our pallet.</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="137.0861" x="551.6556" y="1024.8121">use node_template_runtime::NodeAuthorizationConfig；</text><path d="M531.7881,1109.3026 L535.0993,1109.3026 C540.0662,1109.3026 540.0662,1009.7165 545.0331,1009.7165 L548.3444,1009.7165 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/><rect fill="#F1F1F1" height="60.5857" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="149.6689" x="548.3444" y="1035.8392"/><text fill="#000000" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" textLength="82.4503" x="551.6556" y="1043.4535">Locate the testnet_genesis function</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="551.6556" y="1048.8498"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="143.0464" x="551.6556" y="1054.2461">/// Configure initial storage state for FRAME modules.</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="50.3311" x="551.6556" y="1059.6424">fn testnet_genesis(</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="50.3311" x="554.3046" y="1065.0387">wasm_binary: &amp;[u8],</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="121.8543" x="554.3046" y="1070.4351">initial_authorities: Vec&lt;(AuraId, GrandpaId)&gt;,</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="52.9801" x="554.3046" y="1075.8314">root_key: AccountId,</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="87.4172" x="554.3046" y="1081.2277">endowed_accounts: Vec&lt;AccountId&gt;,</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="58.2781" x="554.3046" y="1086.624">_enable_println: bool,</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="52.9801" x="554.3046" y="1092.0203">) -&gt; GenesisConfig {</text><path d="M531.7881,1109.3026 L535.0993,1109.3026 C540.0662,1109.3026 540.0662,1066.132 545.0331,1066.132 L548.3444,1066.132 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/><rect fill="#F1F1F1" height="125.3415" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="298.0132" x="548.3444" y="1103.0474"/><text fill="#000000" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" textLength="84.106" x="551.6556" y="1110.6617">Within the GenesisConfig declaration</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="551.6556" y="1116.058"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="119.2053" x="554.3046" y="1121.4543">node_authorization: NodeAuthorizationConfig {</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="31.7881" x="559.6026" y="1126.8506">nodes: vec![</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="2.649" x="564.9007" y="1132.2469">(</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="272.8477" x="570.1987" y="1137.6433">OpaquePeerId(bs58::decode("12D3KooWBmAwcd4PJNJvfV89HwE48nwkRmAgo8Vy3uQEyNNHBox2").into_vec().unwrap()),</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="71.5232" x="570.1987" y="1143.0396">endowed_accounts[0].clone()</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="5.298" x="564.9007" y="1148.4359">),</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="2.649" x="564.9007" y="1153.8322">(</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="272.8477" x="570.1987" y="1159.2285">OpaquePeerId(bs58::decode("12D3KooWQYV9dGMFoRzNStwpXztXaBUjtPqi6aU76ZgUriHhKust").into_vec().unwrap()),</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="71.5232" x="570.1987" y="1164.6248">endowed_accounts[1].clone()</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="5.298" x="564.9007" y="1170.0211">),</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="5.298" x="559.6026" y="1175.4175">],</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="5.298" x="554.3046" y="1180.8138">},</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="551.6556" y="1186.2101"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="147.0199" x="551.6556" y="1191.6064">在这段代码中，NodeAuthorizationConfig 包含一个 nodes 属性，</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="78.8079" x="551.6556" y="1197.0027">它是一个包含两个元素的元组的向量。</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="181.457" x="551.6556" y="1202.399">1. 元组的第一个元素是 OpaquePeerId。 bs58::decode 操作将人类可读的 PeerId</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="186.755" x="551.6556" y="1207.7954">（例如 12D3KooWBmAwcd4PJNJvfV89HwE48nwkRmAgo8Vy3uQEyNNHBox2）转换为字节。</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="122.5166" x="551.6556" y="1213.1917">2. 元组的第二个元素是代表该节点所有者的 AccountId。</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="551.6556" y="1218.588"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="154.9669" x="551.6556" y="1223.9843">此示例使用预定义的 Alice 和 Bob，此处标识为捐赠账户 [0] 和 [1]。</text><path d="M531.7881,1109.3026 L535.0993,1109.3026 C540.0662,1109.3026 540.0662,1165.7181 545.0331,1165.7181 L548.3444,1165.7181 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/><path d="M454.9669,1109.3026 L458.2781,1109.3026 C463.245,1109.3026 463.245,1109.3026 468.2119,1109.3026 L471.5232,1109.3026 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/><rect fill="#F1F1F1" height="12.0188" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="33.1126" x="471.5232" y="1121.9345"/><a href="https://docs.substrate.io/reference/command-line-tools/subkey/#well-known-keys" target="_top" title="https://docs.substrate.io/reference/command-line-tools/subkey/#well-known-keys" xlink:actuate="onRequest" xlink:href="https://docs.substrate.io/reference/command-line-tools/subkey/#well-known-keys" xlink:show="new" xlink:title="https://docs.substrate.io/reference/command-line-tools/subkey/#well-known-keys" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" text-decoration="underline" textLength="26.4901" x="474.8344" y="1129.5488">预定义的key</text></a><path d="M454.9669,1109.3026 L458.2781,1109.3026 C463.245,1109.3026 463.245,1127.9439 468.2119,1127.9439 L471.5232,1127.9439 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/><path d="M270.1987,957.471 L273.5099,957.471 C278.4768,957.471 278.4768,1109.3026 283.4437,1109.3026 L286.755,1109.3026 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/><rect fill="#F1F1F1" height="22.8115" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="73.1788" x="286.755" y="1151.6142"/><text fill="#000000" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" textLength="66.5563" x="290.0662" y="1159.2285">Verify that the node compiles</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="290.0662" y="1164.6248"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="55.6291" x="290.0662" y="1170.0211">cargo build --release</text><path d="M270.1987,957.471 L273.5099,957.471 C278.4768,957.471 278.4768,1163.02 283.4437,1163.02 L286.755,1163.02 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/><path d="M158.2781,895.6591 L161.5894,895.6591 C166.5563,895.6591 166.5563,957.471 171.5232,957.471 L174.8344,957.471 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/><rect fill="#F1F1F1" height="12.0188" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="84.4371" x="174.8344" y="1503.8442"/><text fill="#000000" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" textLength="77.8146" x="178.1457" y="1511.4584">Launch the permissioned network</text><rect fill="#F1F1F1" height="44.3967" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="204.6358" x="275.8278" y="1235.0114"/><text fill="#000000" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" textLength="71.5232" x="279.1391" y="1242.6257">For the purposes of this tutorial</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="279.1391" y="1248.022"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="180.7947" x="279.1391" y="1253.4183">现在可以使用预定义帐户的节点密钥和对等标识符来启动许可网络并授权其他节点加入。</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="279.1391" y="1258.8146"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="76.8212" x="279.1391" y="1264.2109">出于本教程的目的，将启动四个节点:</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="184.106" x="279.1391" y="1269.6072">1. 其中三个节点与预定义的帐户相关联，并且所有这三个节点都被允许创作和验证区块。</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="198.0132" x="279.1391" y="1275.0036">2. 第四个节点是一个子节点，只有在该节点所有者批准的情况下才被授权从选定节点读取数据。</text><path d="M259.2715,1509.8536 L262.5828,1509.8536 C267.5497,1509.8536 267.5497,1257.2097 272.5166,1257.2097 L275.8278,1257.2097 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/><rect fill="#F1F1F1" height="60.5857" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="200.6623" x="275.8278" y="1286.0306"/><a href="https://docs.substrate.io/tutorials/get-started/permissioned-network/#obtain-node-keys-and-peerids" target="_top" title="https://docs.substrate.io/tutorials/get-started/permissioned-network/#obtain-node-keys-and-peerids" xlink:actuate="onRequest" xlink:href="https://docs.substrate.io/tutorials/get-started/permissioned-network/#obtain-node-keys-and-peerids" xlink:show="new" xlink:title="https://docs.substrate.io/tutorials/get-started/permissioned-network/#obtain-node-keys-and-peerids" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" text-decoration="underline" textLength="69.2053" x="279.1391" y="1293.6449">Obtain node keys and peerIDs</text></a><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="279.1391" y="1299.0412"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="187.4172" x="279.1391" y="1304.4375">现在已经在创世存储（Genesis storage）中配置了与 Alice 和 Bob 账户关联的节点。</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="279.1391" y="1309.8339"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="188.0795" x="279.1391" y="1315.2302">可以使用子密钥程序(subkey)检查与预定义帐户关联的密钥，并生成和检查您自己的密钥。</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="279.1391" y="1320.6265"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="194.0397" x="279.1391" y="1326.0228">但是，如果运行 subkey generate-node-key 命令，节点密钥和对等标识符是随机生成的，</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="69.5364" x="279.1391" y="1331.4191">并且与教程中使用的密钥不匹配。</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="279.1391" y="1336.8154"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="171.5232" x="279.1391" y="1342.2118">因为本教程使用预定义的账户和众所周知的节点密钥，所以总结了每个账户的密钥。</text><path d="M259.2715,1509.8536 L262.5828,1509.8536 C267.5497,1509.8536 267.5497,1316.3235 272.5166,1316.3235 L275.8278,1316.3235 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/><rect fill="#F1F1F1" height="55.1894" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="205.298" x="275.8278" y="1353.2388"/><a href="https://docs.substrate.io/tutorials/get-started/permissioned-network/#start-the-first-node" target="_top" title="https://docs.substrate.io/tutorials/get-started/permissioned-network/#start-the-first-node" xlink:actuate="onRequest" xlink:href="https://docs.substrate.io/tutorials/get-started/permissioned-network/#start-the-first-node" xlink:show="new" xlink:title="https://docs.substrate.io/tutorials/get-started/permissioned-network/#start-the-first-node" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" text-decoration="underline" textLength="56.6225" x="279.1391" y="1360.8531">使用表中数据启动alice节点</text></a><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="279.1391" y="1366.2494"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="79.4702" x="279.1391" y="1371.6457">./target/release/node-template</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="34.4371" x="279.1391" y="1377.0421">--chain=local</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="71.5232" x="279.1391" y="1382.4384">--base-path /tmp/validator1</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="18.543" x="279.1391" y="1387.8347">--alice</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="198.6755" x="279.1391" y="1393.231">--node-key=c12b6d18942f5ee8528c8e2baf4e147b5c5c18710926ea492d09cbd9f6c9f82a</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="31.7881" x="279.1391" y="1398.6273">--port 30333</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="37.0861" x="279.1391" y="1404.0236">--ws-port 9944</text><path d="M259.2715,1509.8536 L262.5828,1509.8536 C267.5497,1509.8536 267.5497,1380.8335 272.5166,1380.8335 L275.8278,1380.8335 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/><rect fill="#F1F1F1" height="55.1894" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="205.298" x="275.8278" y="1415.0507"/><text fill="#000000" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" textLength="55.298" x="279.1391" y="1422.665">使用表中数据启动bob节点</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="279.1391" y="1428.0613"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="79.4702" x="279.1391" y="1433.4576">./target/release/node-template</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="34.4371" x="279.1391" y="1438.8539">--chain=local</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="71.5232" x="279.1391" y="1444.2502">--base-path /tmp/validator2</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="13.245" x="279.1391" y="1449.6466">--bob</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="198.6755" x="279.1391" y="1455.0429">--node-key=6ce3be907dbcabf20a9a5a60a712b4256a54196000a8ed4050d352bc113f8c58</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="31.7881" x="279.1391" y="1460.4392">--port 30334</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="37.0861" x="279.1391" y="1465.8355">--ws-port 9945</text><path d="M259.2715,1509.8536 L262.5828,1509.8536 C267.5497,1509.8536 267.5497,1442.6454 272.5166,1442.6454 L275.8278,1442.6454 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/><rect fill="#90EE90" height="12.0188" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="159.6026" x="275.8278" y="1476.8626"/><text fill="#000000" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" textLength="152.9801" x="279.1391" y="1484.4769">两个节点都启动后，您应该能够在两个终端日志中看到创建和完成的新块。</text><path d="M259.2715,1509.8536 L262.5828,1509.8536 C267.5497,1509.8536 267.5497,1482.872 272.5166,1482.872 L275.8278,1482.872 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/><rect fill="#F1F1F1" height="92.9636" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="205.298" x="275.8278" y="1495.5039"/><text fill="#000000" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" textLength="108.6093" x="279.1391" y="1503.1182">Add a third node to the list of well-known nodes</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="279.1391" y="1508.5145"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="111.9205" x="279.1391" y="1513.9108">您可以使用 --name charlie 命令启动第三个节点。</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="97.351" x="279.1391" y="1519.3072">节点授权托盘使用脱链工作者来配置节点连接。</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="111.2583" x="279.1391" y="1524.7035">由于第三个节点不是知名节点，并且会将网络中的第四</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="55.6291" x="279.1391" y="1530.0998">个节点配置为只读子节点，</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="142.3841" x="279.1391" y="1535.4961">因此您必须包含命令行选项以启用脱链工作者(offchain worker)。</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="279.1391" y="1540.8924"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="79.4702" x="279.1391" y="1546.2887">./target/release/node-template</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="34.4371" x="279.1391" y="1551.6851">--chain=local</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="71.5232" x="279.1391" y="1557.0814">--base-path /tmp/validator3</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="37.0861" x="279.1391" y="1562.4777">--name charlie</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="198.6755" x="279.1391" y="1567.874">--node-key=3a9d5b35b9fb4c42aafadeca046f6bf56107bd2579687f069b42646684b94d9e</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="31.7881" x="279.1391" y="1573.2703">--port 30335</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="37.0861" x="279.1391" y="1578.6666">--ws-port=9946</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="63.5762" x="279.1391" y="1584.063">--offchain-worker always</text><path d="M259.2715,1509.8536 L262.5828,1509.8536 C267.5497,1509.8536 267.5497,1541.9857 272.5166,1541.9857 L275.8278,1541.9857 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/><rect fill="#90EE90" height="49.793" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="144.3709" x="275.8278" y="1595.09"/><text fill="#000000" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" textLength="60.596" x="279.1391" y="1602.7043">charlie节点没有连接的peers</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="279.1391" y="1608.1006"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="115.894" x="279.1391" y="1613.4969">启动此节点后，您应该会看到该节点没有连接的对等方。</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="125.1656" x="279.1391" y="1618.8933">因为这是一个许可网络，所以必须明确授权该节点进行连接。</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="279.1391" y="1624.2896"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="137.7483" x="279.1391" y="1629.6859">Alice 和 Bob 节点在 genesis chain_spec.rsfile 中配置。</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="279.1391" y="1635.0822"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="113.245" x="279.1391" y="1640.4785">必须使用对 Sudo 托盘的调用手动添加所有其他节点。</text><path d="M259.2715,1509.8536 L262.5828,1509.8536 C267.5497,1509.8536 267.5497,1619.9865 272.5166,1619.9865 L275.8278,1619.9865 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/><rect fill="#F1F1F1" height="39.0004" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="139.0728" x="275.8278" y="1651.5056"/><a href="https://docs.substrate.io/tutorials/get-started/permissioned-network/#authorize-access-for-the-third-node" target="_top" title="https://docs.substrate.io/tutorials/get-started/permissioned-network/#authorize-access-for-the-third-node" xlink:actuate="onRequest" xlink:href="https://docs.substrate.io/tutorials/get-started/permissioned-network/#authorize-access-for-the-third-node" xlink:show="new" xlink:title="https://docs.substrate.io/tutorials/get-started/permissioned-network/#authorize-access-for-the-third-node" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" text-decoration="underline" textLength="80.4636" x="279.1391" y="1659.1199">Authorize access for the third node</text></a><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="279.1391" y="1664.5162"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="132.4503" x="279.1391" y="1669.9125">This tutorial uses the sudo pallet for governance.</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="129.8013" x="279.1391" y="1675.3088">Therefore, yu can use the sudo pallet to call the</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="105.9603" x="279.1391" y="1680.7051">add_well_known_node function provided by</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="127.1523" x="279.1391" y="1686.1014">node-authorization pallet to add the third node.</text><path d="M259.2715,1509.8536 L262.5828,1509.8536 C267.5497,1509.8536 267.5497,1671.0058 272.5166,1671.0058 L275.8278,1671.0058 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/><rect fill="#F1F1F1" height="87.5673" rx="4.1391" ry="4.1391" style="stroke:#181818;stroke-width:0.49668874172185434;" width="205.298" x="275.8278" y="1697.1285"/><a href="https://docs.substrate.io/tutorials/get-started/permissioned-network/#add-a-sub-node" target="_top" title="https://docs.substrate.io/tutorials/get-started/permissioned-network/#add-a-sub-node" xlink:actuate="onRequest" xlink:href="https://docs.substrate.io/tutorials/get-started/permissioned-network/#add-a-sub-node" xlink:show="new" xlink:title="https://docs.substrate.io/tutorials/get-started/permissioned-network/#add-a-sub-node" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="4.6358" lengthAdjust="spacing" text-decoration="underline" textLength="36.4238" x="279.1391" y="1704.7428">Add a sub-node</text></a><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="279.1391" y="1710.1391"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="92.7152" x="279.1391" y="1715.5354">该网络中的第四个节点不是众所周知的节点。</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="126.4901" x="279.1391" y="1720.9317">1. 该节点归用户 dave 所有，是 charlie 节点的子节点。</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="129.1391" x="279.1391" y="1726.3281">2. 子节点只能通过连接到 charlie 拥有的节点来访问网络。</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="170.1987" x="279.1391" y="1731.7244">3. 父节点负责其授权连接的任何子节点，并在子节点需要删除或审计时控制访问。</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="0" x="279.1391" y="1737.1207"/><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="79.4702" x="279.1391" y="1742.517">./target/release/node-template</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="34.4371" x="279.1391" y="1747.9133">--chain=local</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="71.5232" x="279.1391" y="1753.3096">--base-path /tmp/validator4</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="29.1391" x="279.1391" y="1758.706">--name dave</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="198.6755" x="279.1391" y="1764.1023">--node-key=a99331ff4f0e0a0434a6263da0a5823ea3afcfffe590c9f3014e6cf620f2b19a</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="31.7881" x="279.1391" y="1769.4986">--port 30336</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="37.0861" x="279.1391" y="1774.8949">--ws-port 9947</text><text fill="#000000" font-family="monospace" font-size="4.6358" lengthAdjust="spacing" textLength="63.5762" x="279.1391" y="1780.2912">--offchain-worker always</text><path d="M259.2715,1509.8536 L262.5828,1509.8536 C267.5497,1509.8536 267.5497,1740.9121 272.5166,1740.9121 L275.8278,1740.9121 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/><path d="M158.2781,895.6591 L161.5894,895.6591 C166.5563,895.6591 166.5563,1509.8536 171.5232,1509.8536 L174.8344,1509.8536 " fill="none" style="stroke:#181818;stroke-width:0.33112582781456956;"/></g></svg></figure>
<h3 id="alice授权charlie过程"><a class="header" href="#alice授权charlie过程">Alice授权Charlie过程</a></h3>
<ol>
<li>使用polkadot-js-app打开并切换到本地网络，开发者&gt;超级管理(sudo)&gt;nodeAuthorization</li>
</ol>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/image-20220723180351122.png" alt="image-20220723180351122" /></p>
<ol start="2">
<li>切换到nodeAuthorization</li>
</ol>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/image-20220723180419349.png" alt="image-20220723180419349" /></p>
<ol start="3">
<li>切换addConnections(node, owner)</li>
</ol>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/image-20220723180452122.png" alt="image-20220723180452122" /></p>
<ol start="4">
<li>选择CHARLIE节点进行授权</li>
</ol>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/image-20220723180656562.png" alt="image-20220723180656562" /></p>
<ul>
<li>注意填写charlie的peerid</li>
</ul>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/image-20220723182510593.png" alt="image-20220723182510593" /></p>
<ol start="5">
<li>签名并提交</li>
</ol>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/image-20220723180850302.png" alt="image-20220723180850302" /></p>
<blockquote>
<p>交易包含在区块中后，您应该看到 charlie 节点连接到 alice 和 bob 节点，并开始同步区块。这三个节点可以使用本地网络中默认启用的 mDNS 发现机制找到彼此。 如果您的节点不在同一个本地网络上，您应该使用命令行选项
–no-mdns 来禁用它。</p>
</blockquote>
<h4 id="charlie连接dave过程"><a class="header" href="#charlie连接dave过程">Charlie连接Dave过程</a></h4>
<ol>
<li>切换Charlie账户，执行addConnections(node, connections)操作</li>
</ol>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/image-20220723183824019.png" alt="image-20220723183824019" /></p>
<blockquote>
<p>注意：第一个填Chalie的peerid in hex，第二个填Dave的peer id in hex</p>
</blockquote>
<ol start="2">
<li>切换Dave账户，执行claimNode(node)操作</li>
</ol>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/image-20220723183609177.png" alt="image-20220723183609177" /></p>
<ol start="3">
<li>提示，操作成功后右侧会出现弹窗</li>
</ol>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/image-20220723183551671.png" alt="image-20220723183551671" /></p>
<blockquote>
<p>您现在应该看到 Dave 正在捕获区块，并且只有一个属于 Charlie 的节点！重新启动 Dave 的节点，以防它没有立即与 Charlie 连接</p>
</blockquote>
<h3 id="流程图"><a class="header" href="#流程图">流程图</a></h3>
<pre><svg aria-labelledby="chart-title-mermaid-1658893498835 chart-desc-mermaid-1658893498835" role="img" viewBox="-143 -10 1552 2725" height="2725" xmlns="http://www.w3.org/2000/svg" width="1552" id="mermaid-1658893498835"><title id="chart-title-mermaid-1658893498835"/><desc id="chart-desc-mermaid-1658893498835"/><rect class="rect" height="314" width="236" fill="rgb(200, 150, 255)" y="2305" x="1123"/><rect class="rect" height="402" width="170" fill="rgb(200, 150, 255)" y="1835" x="-10"/><rect class="rect" height="402" width="436" fill="rgb(200, 150, 255)" y="1277" x="765"/><rect class="rect" height="314" width="564" fill="rgb(200, 150, 255)" y="661" x="364"/><rect class="rect" height="226" width="500" fill="rgb(200, 150, 255)" y="221" x="396"/><style>#mermaid-1658893498835 {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-1658893498835 .error-icon{fill:#552222;}#mermaid-1658893498835 .error-text{fill:#552222;stroke:#552222;}#mermaid-1658893498835 .edge-thickness-normal{stroke-width:2px;}#mermaid-1658893498835 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1658893498835 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1658893498835 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1658893498835 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1658893498835 .marker{fill:#333333;stroke:#333333;}#mermaid-1658893498835 .marker.cross{stroke:#333333;}#mermaid-1658893498835 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-1658893498835 .actor{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#mermaid-1658893498835 text.actor&gt;tspan{fill:black;stroke:none;}#mermaid-1658893498835 .actor-line{stroke:grey;}#mermaid-1658893498835 .messageLine0{stroke-width:1.5;stroke-dasharray:none;stroke:#333;}#mermaid-1658893498835 .messageLine1{stroke-width:1.5;stroke-dasharray:2,2;stroke:#333;}#mermaid-1658893498835 #arrowhead path{fill:#333;stroke:#333;}#mermaid-1658893498835 .sequenceNumber{fill:white;}#mermaid-1658893498835 #sequencenumber{fill:#333;}#mermaid-1658893498835 #crosshead path{fill:#333;stroke:#333;}#mermaid-1658893498835 .messageText{fill:#333;stroke:#333;}#mermaid-1658893498835 .labelBox{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#mermaid-1658893498835 .labelText,#mermaid-1658893498835 .labelText&gt;tspan{fill:black;stroke:none;}#mermaid-1658893498835 .loopText,#mermaid-1658893498835 .loopText&gt;tspan{fill:black;stroke:none;}#mermaid-1658893498835 .loopLine{stroke-width:2px;stroke-dasharray:2,2;stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);}#mermaid-1658893498835 .note{stroke:#aaaa33;fill:#fff5ad;}#mermaid-1658893498835 .noteText,#mermaid-1658893498835 .noteText&gt;tspan{fill:black;stroke:none;}#mermaid-1658893498835 .activation0{fill:#f4f4f4;stroke:#666;}#mermaid-1658893498835 .activation1{fill:#f4f4f4;stroke:#666;}#mermaid-1658893498835 .activation2{fill:#f4f4f4;stroke:#666;}#mermaid-1658893498835 .actorPopupMenu{position:absolute;}#mermaid-1658893498835 .actorPopupMenuPanel{position:absolute;fill:#ECECFF;box-shadow:0px 8px 16px 0px rgba(0,0,0,0.2);filter:drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));}#mermaid-1658893498835 .actor-man line{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#mermaid-1658893498835 .actor-man circle,#mermaid-1658893498835 line{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;stroke-width:2px;}#mermaid-1658893498835 :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g/><defs><symbol height="24" width="24" id="computer"><path d="M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z" transform="scale(.5)"/></symbol></defs><defs><symbol clip-rule="evenodd" fill-rule="evenodd" id="database"><path d="M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z" transform="scale(.5)"/></symbol></defs><defs><symbol height="24" width="24" id="clock"><path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z" transform="scale(.5)"/></symbol></defs><line stroke="#999" stroke-width="0.5px" class="200" y2="2659" x2="75" y1="80" x1="75" id="actor0"/><g class="actor-man"><line y2="45" x2="75" y1="25" x1="75" id="actor-man-torso0"/><line y2="33" x2="93" y1="33" x1="57" id="actor-man-arms0"/><line y2="45" x2="75" y1="60" x1="57"/><line y2="60" x2="91" y1="45" x1="75"/><circle height="65" width="150" r="15" cy="10" cx="75"/><text style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: &quot;Open Sans&quot;, sans-serif;" class="actor" alignment-baseline="central" dominant-baseline="central" y="67.5" x="75"><tspan dy="0" x="75">终端</tspan></text></g><g><line stroke="#999" stroke-width="0.5px" class="200" y2="2659" x2="641" y1="5" x1="641" id="actor1"/><g id="root-1"><rect class="actor" ry="3" rx="3" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="566"/><text style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: &quot;Open Sans&quot;, sans-serif;" class="actor" alignment-baseline="central" dominant-baseline="central" y="32.5" x="641"><tspan dy="0" x="641">运行时:添加pallet</tspan></text></g></g><g><line stroke="#999" stroke-width="0.5px" class="200" y2="2659" x2="973" y1="5" x1="973" id="actor2"/><g id="root-2"><rect class="actor" ry="3" rx="3" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="898"/><text style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: &quot;Open Sans&quot;, sans-serif;" class="actor" alignment-baseline="central" dominant-baseline="central" y="32.5" x="973"><tspan dy="0" x="973">节点:修改链规范</tspan></text></g></g><g><line stroke="#999" stroke-width="0.5px" class="200" y2="2659" x2="1241" y1="5" x1="1241" id="actor3"/><g id="root-3"><rect class="actor" ry="3" rx="3" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="1166"/><text style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: &quot;Open Sans&quot;, sans-serif;" class="actor" alignment-baseline="central" dominant-baseline="central" y="32.5" x="1241"><tspan dy="0" x="1241">polkadot-js-app</tspan></text></g></g><defs><marker orient="auto" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="9" id="arrowhead"><path d="M 0 0 L 10 5 L 0 10 z"/></marker></defs><defs><marker refY="4" refX="16" orient="auto" markerHeight="8" markerWidth="15" id="crosshead"><path style="stroke-dasharray: 0, 0;" d="M 9,2 V 6 L16,4 Z" stroke-width="1px" stroke="#000000" fill="black"/><path style="stroke-dasharray: 0, 0;" d="M 0,1 L 6,7 M 6,1 L 0,7" stroke-width="1px" stroke="#000000" fill="none"/></marker></defs><defs><marker orient="auto" markerHeight="28" markerWidth="20" refY="7" refX="18" id="filled-head"><path d="M 18,7 L9,13 L14,7 L9,1 Z"/></marker></defs><defs><marker orient="auto" markerHeight="40" markerWidth="60" refY="15" refX="15" id="sequencenumber"><circle r="6" cy="15" cx="15"/></marker></defs><g><rect class="activation0" ry="0" rx="0" height="292" width="10" stroke="#666" fill="#EDF2AE" y="213" x="636"/></g><g><rect class="activation0" ry="0" rx="0" height="380" width="10" stroke="#666" fill="#EDF2AE" y="653" x="636"/></g><g/><g><rect class="activation1" ry="0" rx="0" height="360" width="10" stroke="#666" fill="#EDF2AE" y="1377" x="973"/></g><text style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="80" x="75">git chekout latest &amp; cargo build --release</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 75,123 C 135,113 135,153 75,143"/><text style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="168" x="358">开始修改运行时cargo文件，添加pallet依赖与feature</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="211" x2="641" y1="211" x1="75"/><text style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="246" x="646">runtime/Cargo.toml:depencies添加pallet-node-authorization</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 646,289 C 706,279 706,319 646,309"/><text style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="334" x="646">runtime/Cargo.toml:features添加pallet-node-authorization/std</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 646,377 C 706,367 706,407 646,397"/><text style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="462" x="356">prepare to check</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="505" x2="75" y1="505" x1="636"/><text style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="520" x="75">cargo check -p node-template-runtime</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 75,563 C 135,553 135,593 75,583"/><text style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="608" x="358">开始给节点node添加pallet用到的参数类型、实现块、构建运行时配置</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="651" x2="641" y1="651" x1="75"/><text style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="686" x="646">runtime/src/runtime.rs:add parameter_types</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 646,729 C 706,719 706,759 646,749"/><text style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="774" x="646">runtime/src/runtime.rs:add impl section</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 646,817 C 706,807 706,847 646,837"/><text style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="862" x="646">runtime/src/runtime.rs:add the pallet to the construct_runtime macro</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 646,905 C 706,895 706,935 646,925"/><text style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="990" x="356">开始检查</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="1033" x2="75" y1="1033" x1="636"/><text style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="1048" x="75">cargo check -p node-template-runtime</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 75,1091 C 135,1081 135,1121 75,1111"/><text style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="1136" x="524">开始给授权节点添加创始区块存储功能</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="1179" x2="973" y1="1179" x1="75"/><text style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="1194" x="978">node/Cargo.toml:add bs58 dependency</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 978,1237 C 1038,1227 1038,1267 978,1257"/><text style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="1302" x="978">添加创始区块存储功能</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 978,1345 C 1038,1335 1038,1375 978,1365"/><text style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="1390" x="983">node/src/node.rs:add genesis storage for nodes</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 983,1433 C 1043,1423 1043,1463 983,1453"/><text style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="1478" x="983">node/src/node.rs:locate the testnet_genesis function</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 983,1521 C 1043,1511 1043,1551 983,1541"/><text style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="1566" x="983">node/src/node.rs:add GenesisConfig declaration</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 983,1609 C 1043,1599 1043,1639 983,1629"/><text style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="1694" x="522">cargo check &amp; start nodes</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="1737" x2="75" y1="1737" x1="968"/><text style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="1752" x="75">cargo check -p node-template-runtime</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 75,1795 C 135,1785 135,1825 75,1815"/><text style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="1860" x="75">start alice node</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 75,1903 C 135,1893 135,1933 75,1923"/><text style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="1948" x="75">start bob node</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 75,1991 C 135,1981 135,2021 75,2011"/><text style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="2036" x="75">start Charlie node</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 75,2079 C 135,2069 135,2109 75,2099"/><text style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="2124" x="75">start Dave node</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 75,2167 C 135,2157 135,2197 75,2187"/><text style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="2252" x="658">开始进行授权与建立连接操作</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="2295" x2="1241" y1="2295" x1="75"/><text style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="2330" x="1241">使用alice账号给Charlie授权</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 1241,2373 C 1301,2363 1301,2403 1241,2393"/><text style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="2418" x="1241">使用Charlie账号连接Dave节点</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 1241,2461 C 1301,2451 1301,2491 1241,2481"/><text style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="2506" x="1241">Dave对外claimNode</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 1241,2549 C 1301,2539 1301,2579 1241,2569"/><g class="actor-man"><line y2="2684" x2="75" y1="2664" x1="75" id="actor-man-torso3"/><line y2="2672" x2="93" y1="2672" x1="57" id="actor-man-arms3"/><line y2="2684" x2="75" y1="2699" x1="57"/><line y2="2699" x2="91" y1="2684" x1="75"/><circle height="65" width="150" r="15" cy="2649" cx="75"/><text style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: &quot;Open Sans&quot;, sans-serif;" class="actor" alignment-baseline="central" dominant-baseline="central" y="2706.5" x="75"><tspan dy="0" x="75">终端</tspan></text></g><g><rect class="actor" ry="3" rx="3" height="65" width="150" stroke="#666" fill="#eaeaea" y="2639" x="566"/><text style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: &quot;Open Sans&quot;, sans-serif;" class="actor" alignment-baseline="central" dominant-baseline="central" y="2671.5" x="641"><tspan dy="0" x="641">运行时:添加pallet</tspan></text></g><g><rect class="actor" ry="3" rx="3" height="65" width="150" stroke="#666" fill="#eaeaea" y="2639" x="898"/><text style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: &quot;Open Sans&quot;, sans-serif;" class="actor" alignment-baseline="central" dominant-baseline="central" y="2671.5" x="973"><tspan dy="0" x="973">节点:修改链规范</tspan></text></g><g><rect class="actor" ry="3" rx="3" height="65" width="150" stroke="#666" fill="#eaeaea" y="2639" x="1166"/><text style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: &quot;Open Sans&quot;, sans-serif;" class="actor" alignment-baseline="central" dominant-baseline="central" y="2671.5" x="1241"><tspan dy="0" x="1241">polkadot-js-app</tspan></text></g></svg></pre>
<h3 id="总结"><a class="header" href="#总结">总结</a></h3>
<p>任何节点都可以发出影响其他节点行为的交易(extrinsics)，只要它位于用于参考的链数据上，并且您在密钥库中拥有可用于所需来源的相关帐户的密钥。此演示中的所有节点都可以访问开发人员签名密钥，因此能够代表 Charlie
从网络上的任何连接节点发出影响 charlie 子节点的命令。</p>
<p>在现实世界的应用程序中，节点操作员只能访问他们的节点密钥，并且是唯一能够正确签署和提交外部信息的人，很可能来自他们自己的节点，他们可以控制密钥的安全性。</p>
<ul>
<li><a href="https://docs.substrate.io/main-docs/fundamentals/accounts-addresses-keys/">Accounts, addresses, and keys | Substrate_ Docs</a></li>
</ul>
<h2 id="monitor-node-metrics"><a class="header" href="#monitor-node-metrics">Monitor node metrics</a></h2>
<div id="admonition-error-rendering-admonishment" class="admonition bug">
<div class="admonition-title">
<p>Error rendering admonishment</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#admonition-error-rendering-admonishment"></a></p>
</div>
<div>
<p>Failed with: TOML parsing error: expected an equals, found an identifier at line 1 column 5</p>
<p>Original markdown input:</p>
<pre><code>```admonish tip info title='承接关系:需要基于上一节课'
![image-20220724104945822](https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/image-20220724104945822.png)
```
</code></pre>
</div>
</div>
<figure><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="469.8832px" preserveAspectRatio="none" style="width:850px;height:469px;background:#FFFFFF;" version="1.1" viewBox="0 0 850 469" width="850.3972px" zoomAndPan="magnify"><defs/><g><rect fill="#F1F1F1" height="85.6206" rx="4.965" ry="4.965" style="stroke:#181818;stroke-width:0.5957943925233644;" width="243.0841" x="3.972" y="191.8365"/><a href="https://docs.substrate.io/tutorials/get-started/node-metrics/" target="_top" title="https://docs.substrate.io/tutorials/get-started/node-metrics/" xlink:actuate="onRequest" xlink:href="https://docs.substrate.io/tutorials/get-started/node-metrics/" xlink:show="new" xlink:title="https://docs.substrate.io/tutorials/get-started/node-metrics/" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="5.5607" lengthAdjust="spacing" text-decoration="underline" textLength="58.3879" x="7.9439" y="200.9701">Monitor node metrics</text></a><text fill="#000000" font-family="sans-serif" font-size="5.5607" lengthAdjust="spacing" textLength="1.5888" x="66.3318" y="200.9701"> </text><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#总览" target="_top" title="#总览" xlink:actuate="onRequest" xlink:href="#总览" xlink:show="new" xlink:title="#总览" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="5.5607" lengthAdjust="spacing" text-decoration="underline" textLength="11.1215" x="67.9206" y="200.9701">返回</text></a><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="0" x="7.9439" y="207.4431"/><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="197.0093" x="7.9439" y="213.9162">Substrate exposes metrics about the operation of your network.</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="0" x="7.9439" y="220.3892"/><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="149.3458" x="7.9439" y="226.8623">For example, you can collect information about:</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="136.6355" x="7.9439" y="233.3353">1. how many peers your node is connected to</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="120.7477" x="7.9439" y="239.8084">2. how much memory your node is using.</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="0" x="7.9439" y="246.2815"/><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="235.1402" x="7.9439" y="252.7545">To visualize these metrics, you can use tools like Prometheus and Grafana.</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="0" x="7.9439" y="259.2276"/><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="190.6542" x="7.9439" y="265.7006">This tutorial demonstrates how to use Grafana and Prometheus</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="168.4112" x="7.9439" y="272.1737">to scrape and visualize these types of node metrics .</text><rect fill="#8FBC8F" height="182.7165" rx="4.965" ry="4.965" style="stroke:#181818;stroke-width:0.5957943925233644;" width="395.6075" x="266.9159" y="7.9439"/><text fill="#000000" font-family="sans-serif" font-size="5.5607" lengthAdjust="spacing" textLength="62.757" x="270.8879" y="17.0775">A possible architecture</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="0" x="270.8879" y="23.5506"/><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="387.6636" x="270.8879" y="30.0236">+-----------+                     +-------------+                                                              +---------+</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="387.6636" x="270.8879" y="36.4967">| Substrate |                     | Prometheus  |                                                              | Grafana |</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="387.6636" x="270.8879" y="42.9697">+-----------+                     +-------------+                                                              +---------+</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="352.7103" x="289.9533" y="49.4428">|               -----------------\ |                                                                          |</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="352.7103" x="289.9533" y="55.9158">|               | Every 1 minute |-|                                                                          |</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="352.7103" x="289.9533" y="62.3889">|               |----------------| |                                                                          |</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="352.7103" x="289.9533" y="68.862">|                                  |                                                                          |</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="352.7103" x="289.9533" y="75.335">|        GET current metric values |                                                                          |</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="352.7103" x="289.9533" y="81.8081">|&lt;---------------------------------|                                                                          |</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="352.7103" x="289.9533" y="88.2811">|                                  |                                                                          |</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="352.7103" x="289.9533" y="94.7542">| `substrate_peers_count 5`        |                                                                          |</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="352.7103" x="289.9533" y="101.2273">|---------------------------------&gt;|                                                                          |</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="352.7103" x="289.9533" y="107.7003">|                                  | --------------------------------------------------------------------\    |</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="352.7103" x="289.9533" y="114.1734">|                                  |-| Save metric value with corresponding time stamp in local database |    |</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="352.7103" x="289.9533" y="120.6464">|                                  | |-------------------------------------------------------------------|    |</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="352.7103" x="289.9533" y="127.1195">|                                  |                                         -------------------------------\ |</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="352.7103" x="289.9533" y="133.5925">|                                  |                                         | Every time user opens graphs |-|</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="352.7103" x="289.9533" y="140.0656">|                                  |                                         |------------------------------| |</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="352.7103" x="289.9533" y="146.5387">|                                  |                                                                          |</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="352.7103" x="289.9533" y="153.0117">|                                  |       GET values of metric `substrate_peers_count` from time-X to time-Y |</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="352.7103" x="289.9533" y="159.4848">|                                  |&lt;-------------------------------------------------------------------------|</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="352.7103" x="289.9533" y="165.9578">|                                  |                                                                          |</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="352.7103" x="289.9533" y="172.4309">|                                  | `substrate_peers_count (1582023828, 5), (1582023847, 4) [...]`           |</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="352.7103" x="289.9533" y="178.9039">|                                  |-------------------------------------------------------------------------&gt;|</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="352.7103" x="289.9533" y="185.377">|                                  |                                                                          |</text><path d="M247.0561,234.6468 L251.028,234.6468 C256.986,234.6468 256.986,99.3022 262.9439,99.3022 L266.9159,99.3022 " fill="none" style="stroke:#181818;stroke-width:0.3971962616822429;"/><rect fill="#F1F1F1" height="40.3092" rx="4.965" ry="4.965" style="stroke:#181818;stroke-width:0.5957943925233644;" width="297.1028" x="266.9159" y="198.6043"/><text fill="#000000" font-family="sans-serif" font-size="5.5607" lengthAdjust="spacing" textLength="49.6495" x="270.8879" y="207.7379">Tutorial objectives</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="0" x="270.8879" y="214.211"/><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="108.0374" x="270.8879" y="220.684">1. Install Prometheus and Grafana.</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="231.9626" x="270.8879" y="227.1571">2. Configure Prometheus to capture a time series for your Substrate node.</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="289.1589" x="270.8879" y="233.6301">3. Configure Grafana to visualize the node metrics collected using the Prometheus endpoint.</text><path d="M247.0561,234.6468 L251.028,234.6468 C256.986,234.6468 256.986,218.7589 262.9439,218.7589 L266.9159,218.7589 " fill="none" style="stroke:#181818;stroke-width:0.3971962616822429;"/><rect fill="#F1F1F1" height="14.417" rx="4.965" ry="4.965" style="stroke:#181818;stroke-width:0.5957943925233644;" width="93.3411" x="266.9159" y="246.8575"/><a href="https://docs.substrate.io/tutorials/get-started/node-metrics/#install-prometheus-and-grafana" target="_top" title="https://docs.substrate.io/tutorials/get-started/node-metrics/#install-prometheus-and-grafana" xlink:actuate="onRequest" xlink:href="https://docs.substrate.io/tutorials/get-started/node-metrics/#install-prometheus-and-grafana" xlink:show="new" xlink:title="https://docs.substrate.io/tutorials/get-started/node-metrics/#install-prometheus-and-grafana" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="5.5607" lengthAdjust="spacing" text-decoration="underline" textLength="85.3972" x="270.8879" y="255.9911">Install Prometheus and Grafana</text></a><path d="M247.0561,234.6468 L251.028,234.6468 C256.986,234.6468 256.986,254.066 262.9439,254.066 L266.9159,254.066 " fill="none" style="stroke:#181818;stroke-width:0.3971962616822429;"/><rect fill="#F1F1F1" height="14.417" rx="4.965" ry="4.965" style="stroke:#181818;stroke-width:0.5957943925233644;" width="69.5093" x="266.9159" y="269.2184"/><text fill="#000000" font-family="sans-serif" font-size="5.5607" lengthAdjust="spacing" textLength="61.5654" x="270.8879" y="278.352">Start a Substrate node</text><path d="M247.0561,234.6468 L251.028,234.6468 C256.986,234.6468 256.986,276.4269 262.9439,276.4269 L266.9159,276.4269 " fill="none" style="stroke:#181818;stroke-width:0.3971962616822429;"/><rect fill="#F1F1F1" height="169.7704" rx="4.965" ry="4.965" style="stroke:#181818;stroke-width:0.5957943925233644;" width="316.1682" x="266.9159" y="291.5793"/><text fill="#000000" font-family="sans-serif" font-size="5.5607" lengthAdjust="spacing" textLength="146.9626" x="270.8879" y="300.7129">Configure Prometheus to scrape your Substrate node</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="50.8411" x="270.8879" y="307.1859"># prometheus.yml</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="0" x="270.8879" y="313.659"/><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="31.7757" x="270.8879" y="320.132"># --snip--</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="0" x="270.8879" y="326.6051"/><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="212.8972" x="270.8879" y="333.0782"># A scrape configuration containing exactly one endpoint to scrape:</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="95.3271" x="270.8879" y="339.5512"># Here it's Prometheus itself.</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="47.6636" x="270.8879" y="346.0243">scrape_configs:</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="301.8692" x="277.243" y="352.4973"># The job name is added as a label `job=&lt;job_name&gt;` to any timeseries scraped from this config.</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="88.972" x="277.243" y="358.9704">- job_name: "substrate_node"</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="0" x="270.8879" y="365.4434"/><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="117.5701" x="283.5981" y="371.9165"># metrics_path defaults to '/metrics'</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="88.972" x="283.5981" y="378.3896"># scheme defaults to 'http'.</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="0" x="270.8879" y="384.8626"/><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="251.028" x="283.5981" y="391.3357"># Override the global default and scrape targets from this job every 5 seconds.</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="247.8505" x="283.5981" y="397.8087"># ** NOTE: you want to have this *LESS THAN* the block time in order to ensure</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="152.5234" x="283.5981" y="404.2818"># ** that you have a data point for every block!</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="60.3738" x="283.5981" y="410.7549">scrape_interval: 5s</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="0" x="270.8879" y="417.2279"/><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="47.6636" x="283.5981" y="423.701">static_configs:</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="92.1495" x="289.9533" y="430.174">- targets: ["localhost:9615"]</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="0" x="270.8879" y="436.6471"/><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="0" x="270.8879" y="443.1201"/><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="190.6542" x="270.8879" y="449.5932"># specify a custom config file instead if you made one here:</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="130.2804" x="270.8879" y="456.0663">./prometheus --config.file prometheus.yml</text><rect fill="#F1F1F1" height="27.3631" rx="4.965" ry="4.965" style="stroke:#181818;stroke-width:0.5957943925233644;" width="93.7383" x="602.9439" y="362.7829"/><text fill="#000000" font-family="sans-serif" font-size="5.5607" lengthAdjust="spacing" textLength="81.8224" x="606.9159" y="371.9165">Check all Prometheus metrics</text><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="0" x="606.9159" y="378.3896"/><text fill="#000000" font-family="monospace" font-size="5.5607" lengthAdjust="spacing" textLength="85.7944" x="606.9159" y="384.8626">curl localhost:9615/metrics</text><rect fill="#F1F1F1" height="14.417" rx="4.965" ry="4.965" style="stroke:#181818;stroke-width:0.5957943925233644;" width="129.0888" x="716.5421" y="369.256"/><a href="https://docs.substrate.io/tutorials/get-started/node-metrics/#visualizing-prometheus-metrics-with-grafana" target="_top" title="https://docs.substrate.io/tutorials/get-started/node-metrics/#visualizing-prometheus-metrics-with-grafana" xlink:actuate="onRequest" xlink:href="https://docs.substrate.io/tutorials/get-started/node-metrics/#visualizing-prometheus-metrics-with-grafana" xlink:show="new" xlink:title="https://docs.substrate.io/tutorials/get-started/node-metrics/#visualizing-prometheus-metrics-with-grafana" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="5.5607" lengthAdjust="spacing" text-decoration="underline" textLength="121.1449" x="720.514" y="378.3896">Visualizing Prometheus metrics with Grafana</text></a><path d="M696.6822,376.4645 L700.6542,376.4645 C706.6121,376.4645 706.6121,376.4645 712.5701,376.4645 L716.5421,376.4645 " fill="none" style="stroke:#181818;stroke-width:0.3971962616822429;"/><path d="M583.0841,376.4645 L587.0561,376.4645 C593.014,376.4645 593.014,376.4645 598.972,376.4645 L602.9439,376.4645 " fill="none" style="stroke:#181818;stroke-width:0.3971962616822429;"/><path d="M247.0561,234.6468 L251.028,234.6468 C256.986,234.6468 256.986,376.4645 262.9439,376.4645 L266.9159,376.4645 " fill="none" style="stroke:#181818;stroke-width:0.3971962616822429;"/></g></svg></figure>
<h3 id="本节大概的架构"><a class="header" href="#本节大概的架构">本节大概的架构</a></h3>
<div id="admonition-prometheus和grafana配合流程" class="admonition info">
<div class="admonition-title">
<p>prometheus和grafana配合流程</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#admonition-prometheus和grafana配合流程"></a></p>
</div>
<div>
<pre><code class="language-text">+-----------+                     +-------------+                                                              +---------+
| Substrate |                     | Prometheus  |                                                              | Grafana |
+-----------+                     +-------------+                                                              +---------+
      |               -----------------\ |                                                                          |
      |               | Every 1 minute |-|                                                                          |
      |               |----------------| |                                                                          |
      |                                  |                                                                          |
      |        GET current metric values |                                                                          |
      |&lt;---------------------------------|                                                                          |
      |                                  |                                                                          |
      | `substrate_peers_count 5`        |                                                                          |
      |---------------------------------&gt;|                                                                          |
      |                                  | --------------------------------------------------------------------\    |
      |                                  |-| Save metric value with corresponding time stamp in local database |    |
      |                                  | |-------------------------------------------------------------------|    |
      |                                  |                                         -------------------------------\ |
      |                                  |                                         | Every time user opens graphs |-|
      |                                  |                                         |------------------------------| |
      |                                  |                                                                          |
      |                                  |       GET values of metric `substrate_peers_count` from time-X to time-Y |
      |                                  |&lt;-------------------------------------------------------------------------|
      |                                  |                                                                          |
      |                                  | `substrate_peers_count (1582023828, 5), (1582023847, 4) [...]`           |
      |                                  |-------------------------------------------------------------------------&gt;|
      |                                  |                                                                          |
</code></pre>
</div>
</div>
<h3 id="安装prometheus和grafana"><a class="header" href="#安装prometheus和grafana">安装Prometheus和grafana</a></h3>
<ul>
<li><a href="https://prometheus.io/download/">Download | Prometheus</a></li>
<li><a href="https://grafana.com/grafana/download?edition=oss">Download Grafana | Grafana Labs</a></li>
</ul>
<pre><code class="language-shell">gunzip prometheus-&lt;version&gt;.darwin-amd64.tar.gz &amp;&amp; tar -xvf prometheus-2.35.0.darwin-amd64.tar
brew update &amp;&amp; brew install grafana
==&gt; Downloading https://ghcr.io/v2/homebrew/core/grafana/manifests/9.0.2
######################################################################## 100.0%
==&gt; Downloading https://ghcr.io/v2/homebrew/core/grafana/blobs/sha256:6022dd955d971d2d34d70f29e56335610108c84b75081020092e29f3ec641724
==&gt; Downloading from https://pkg-containers.githubusercontent.com/ghcr1/blobs/sha256:6022dd955d971d2d34d70f29e56335610108c84b75081020092e29f3ec64
######################################################################## 100.0%
==&gt; Pouring grafana--9.0.2.monterey.bottle.tar.gz
==&gt; Caveats
To restart grafana after an upgrade:
  brew services restart grafana
Or, if you don't want/need a background service you can just run:
  /usr/local/opt/grafana/bin/grafana-server --config /usr/local/etc/grafana/grafana.ini --homepath /usr/local/opt/grafana/share/grafana --packaging=brew cfg:default.paths.logs=/usr/local/var/log/grafana cfg:default.paths.data=/usr/local/var/lib/grafana cfg:default.paths.plugins=/usr/local/var/lib/grafana/plugins
==&gt; Summary
🍺  /usr/local/Cellar/grafana/9.0.2: 6,007 files, 247.3MB
==&gt; Running `brew cleanup grafana`...
Disable this behaviour by setting HOMEBREW_NO_INSTALL_CLEANUP.
Hide these hints with HOMEBREW_NO_ENV_HINTS (see `man brew`).
</code></pre>
<h3 id="配置prometheusyml"><a class="header" href="#配置prometheusyml">配置Prometheus.yml</a></h3>
<pre><code class="language-yaml"># --snip--

# A scrape configuration containing exactly one endpoint to scrape:
# Here it's Prometheus itself.
scrape_configs:
  # The job name is added as a label `job=&lt;job_name&gt;` to any timeseries scraped from this config.
  - job_name: &quot;substrate_node&quot;

    # metrics_path defaults to '/metrics'
    # scheme defaults to 'http'.

    # Override the global default and scrape targets from this job every 5 seconds.
    # ** NOTE: you want to have this *LESS THAN* the block time in order to ensure
    # ** that you have a data point for every block!
    scrape_interval: 5s

    static_configs:
      - targets: [ &quot;localhost:9615&quot; ]
</code></pre>
<pre><code class="language-shell"># specify a custom config file instead if you made one here:
./prometheus --config.file substrate_prometheus.yml
curl localhost:9615/metrics
</code></pre>
<div id="admonition-浏览器查看" class="admonition info">
<div class="admonition-title">
<p>浏览器查看</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#admonition-浏览器查看"></a></p>
</div>
<div>
<p>也可以直接打开浏览器：localhost:9615/metrics</p>
</div>
</div>
<h3 id="启动grafana"><a class="header" href="#启动grafana">启动grafana</a></h3>
<pre><code class="language-shell"># 后台运行
brew services restart grafana
# 指定运行
/usr/local/opt/grafana/bin/grafana-server --config /usr/local/etc/grafana/grafana.ini --homepath /usr/local/opt/grafana/share/grafana --packaging=brew cfg:default.paths.logs=/usr/local/var/log/grafana cfg:default.paths.data=/usr/local/var/lib/grafana cfg:default.paths.plugins=/usr/local/var/lib/grafana/plugins
</code></pre>
<ul>
<li>http://localhost:3000/</li>
</ul>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/image-20220724110946857.png" alt="image-20220724110946857" /></p>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/image-20220724111058420.png" alt="image-20220724111058420" /></p>
<blockquote>
<p>然后需要选择 Prometheus 数据源类型并指定 Grafana 需要查找它的位置。</p>
<p>Grafana 需要的 Prometheus 端口不是在 prometheus.yml 文件 (http://localhost:9615) 中为节点发布其数据的位置设置的端口。</p>
<p>在同时运行 Substrate 节点和 Prometheus 的情况下，配置 Grafana 以在其默认端口 http://localhost:9090 或配置的端口（如果自定义它）上查找 Prometheus。</p>
</blockquote>
<h3 id="配置数据源"><a class="header" href="#配置数据源">配置数据源</a></h3>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/CleanShot%202022-07-24%20at%2011.16.03.png" alt="CleanShot 2022-07-24 at 11.16.03" /></p>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/CleanShot%202022-07-24%20at%2011.16.59.png" alt="CleanShot 2022-07-24 at 11.16.59" /></p>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/CleanShot%202022-07-24%20at%2011.18.17.png" alt="CleanShot 2022-07-24 at 11.18.17" /></p>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/CleanShot%202022-07-24%20at%2011.34.47.png" alt="CleanShot 2022-07-24 at 11.34.47" /></p>
<h3 id="导入看板模版"><a class="header" href="#导入看板模版">导入看板模版</a></h3>
<p><a href="https://grafana.com/docs/grafana/v7.5/dashboards/export-import/">Export and import | Grafana documentation</a></p>
<p><a href="https://grafana.com/grafana/dashboards/">Dashboards | Grafana Labs</a></p>
<p><a href="https://grafana.com/grafana/dashboards/13759">Substrate Node Template Metrics dashboard for Grafana | Grafana Labs</a></p>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/image-20220724113036077.png" alt="image-20220724113036077" /></p>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/CleanShot%202022-07-24%20at%2011.31.10.png" alt="CleanShot 2022-07-24 at 11.31.10" /></p>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/image-20220724113401390.png" alt="image-20220724113401390" /></p>
<h2 id="upgrade-a-running-network"><a class="header" href="#upgrade-a-running-network">Upgrade a running network</a></h2>
<figure><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1507.2542px" preserveAspectRatio="none" style="width:850px;height:1507px;background:#FFFFFF;" version="1.1" viewBox="0 0 850 1507" width="850.4567px" zoomAndPan="magnify"><defs/><g><rect height="5.3168" style="stroke:#00000000;stroke-width:0.4567436861902203;fill:none;" width="60.2902" x="761.3917" y="4.5674"/><text fill="#888888" font-family="sans-serif" font-size="4.5674" lengthAdjust="spacing" textLength="60.2902" x="761.3917" y="8.807">Upgrade a running network</text><rect fill="#F1F1F1" height="16.5784" rx="5.7093" ry="5.7093" style="stroke:#181818;stroke-width:0.6851155292853305;" width="109.6185" x="4.5674" y="745.0417"/><text fill="#000000" font-family="sans-serif" font-size="6.3944" lengthAdjust="spacing" textLength="85.8678" x="9.1349" y="755.5446">Upgrade a running network</text><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#总览" target="_top" title="#总览" xlink:actuate="onRequest" xlink:href="#总览" xlink:show="new" xlink:title="#总览" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="6.3944" lengthAdjust="spacing" text-decoration="underline" textLength="12.7888" x="96.8297" y="755.5446">返回</text></a><rect fill="#F1F1F1" height="165.4483" rx="5.7093" ry="5.7093" style="stroke:#181818;stroke-width:0.6851155292853305;" width="268.5653" x="137.0231" y="14.9084"/><text fill="#000000" font-family="sans-serif" font-size="6.3944" lengthAdjust="spacing" textLength="70.7953" x="141.5905" y="25.4113">Forkless upgrade intro</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="0" x="141.5905" y="32.8548"/><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="252.1225" x="141.5905" y="40.2983">Unlike many blockchains, the Substrate development framework supports</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="248.4686" x="141.5905" y="47.7418">forkless upgrades to the runtime that is the core of the blockchain.</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="0" x="141.5905" y="55.1853"/><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="233.8528" x="141.5905" y="62.6287">Most blockchain projects require a hard fork of the code base to</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="215.583" x="141.5905" y="70.0722">support ongoing development of new features or enhancements</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="76.7329" x="141.5905" y="77.5157">to existing features.</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="0" x="141.5905" y="84.9592"/><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="259.4304" x="141.5905" y="92.4027">With Substrate , you can deploy enhanced runtime capabilities—including</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="135.1961" x="141.5905" y="99.8462">breaking changes—without a hard fork.</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="0" x="141.5905" y="107.2897"/><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="211.9291" x="141.5905" y="114.7332">Because the definition of the runtime is itself an element</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="222.8909" x="141.5905" y="122.1767">in a Substrate chain's state, network participants can update</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="222.8909" x="141.5905" y="129.6202">this value by calling the set_code function in a transaction.</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="0" x="141.5905" y="137.0637"/><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="219.237" x="141.5905" y="144.5072">Because updates to the runtime state are validates using the</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="230.1988" x="141.5905" y="151.9507">blockchain's consensus mechanisms and cryptographic guarantees,</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="233.8528" x="141.5905" y="159.3942">network participants can use the blockchain itself to distribute</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="222.8909" x="141.5905" y="166.8377">updated or extended runtime logic without needing to fork the</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="149.8119" x="141.5905" y="174.2812">chain or release a new blockchain client.</text><rect fill="#F1F1F1" height="16.5784" rx="5.7093" ry="5.7093" style="stroke:#181818;stroke-width:0.6851155292853305;" width="39.28" x="428.4256" y="76.4867"/><text fill="#000000" font-family="sans-serif" font-size="6.3944" lengthAdjust="spacing" textLength="30.1451" x="432.993" y="86.9896">Hard Fork</text><path d="M405.5884,97.6325 L410.1558,97.6325 C417.007,97.6325 417.007,84.7759 423.8581,84.7759 L428.4256,84.7759 " fill="none" style="stroke:#181818;stroke-width:0.4567436861902203;"/><rect fill="#F1F1F1" height="16.5784" rx="5.7093" ry="5.7093" style="stroke:#181818;stroke-width:0.6851155292853305;" width="98.1999" x="428.4256" y="102.2"/><a href="https://paritytech.github.io/substrate/master/frame_system/pallet/enum.Call.html#variant.set_code" target="_top" title="https://paritytech.github.io/substrate/master/frame_system/pallet/enum.Call.html#variant.set_code" xlink:actuate="onRequest" xlink:href="https://paritytech.github.io/substrate/master/frame_system/pallet/enum.Call.html#variant.set_code" xlink:show="new" xlink:title="https://paritytech.github.io/substrate/master/frame_system/pallet/enum.Call.html#variant.set_code" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="6.3944" lengthAdjust="spacing" text-decoration="underline" textLength="89.065" x="432.993" y="112.7028">Substrate set_code function</text></a><path d="M405.5884,97.6325 L410.1558,97.6325 C417.007,97.6325 417.007,110.4892 423.8581,110.4892 L428.4256,110.4892 " fill="none" style="stroke:#181818;stroke-width:0.4567436861902203;"/><path d="M114.1859,753.3309 L118.7534,753.3309 C125.6045,753.3309 125.6045,97.6325 132.4557,97.6325 L137.0231,97.6325 " fill="none" style="stroke:#181818;stroke-width:0.4567436861902203;"/><rect fill="#F1F1F1" height="46.3523" rx="5.7093" ry="5.7093" style="stroke:#181818;stroke-width:0.6851155292853305;" width="253.9495" x="137.0231" y="189.4915"/><text fill="#000000" font-family="sans-serif" font-size="6.3944" lengthAdjust="spacing" textLength="57.093" x="141.5905" y="199.9944">Tutorial objectives</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="0" x="141.5905" y="207.4379"/><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="241.1607" x="141.5905" y="214.8814">1. Use the Sudo pallet to simulate governance for a chain upgrade.</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="244.8146" x="141.5905" y="222.3249">2. Upgrade the runtime for a running node to include a new pallet .</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="135.1961" x="141.5905" y="229.7684">3. Schedule an upgrade for a runtime.</text><path d="M114.1859,753.3309 L118.7534,753.3309 C125.6045,753.3309 125.6045,212.6677 132.4557,212.6677 L137.0231,212.6677 " fill="none" style="stroke:#181818;stroke-width:0.4567436861902203;"/><rect fill="#F1F1F1" height="98.4568" rx="5.7093" ry="5.7093" style="stroke:#181818;stroke-width:0.6851155292853305;" width="250.2955" x="137.0231" y="276.7831"/><text fill="#000000" font-family="sans-serif" font-size="6.3944" lengthAdjust="spacing" textLength="136.5664" x="141.5905" y="287.286">Authorize an upgrade using the Sudo pallet</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="0" x="141.5905" y="294.7295"/><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="230.1988" x="141.5905" y="302.173">In FRAME, the Root origin identifies the runtime administrator.</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="208.2751" x="141.5905" y="309.6165">Only this administrator can update the runtime by calling</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="222.8909" x="141.5905" y="317.06">the set_code function. To invoke this function using the Root</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="230.1988" x="141.5905" y="324.5035">origin, you can use the the sudo function in the Sudo pallet to</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="241.1607" x="141.5905" y="331.9469">specify the account that has superuser administrative permissions.</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="0" x="141.5905" y="339.3904"/><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="226.5449" x="141.5905" y="346.8339">By default, the chain specification file for the node template</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="219.237" x="141.5905" y="354.2774">specifies that the alice development account is the owner of</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="226.5449" x="141.5905" y="361.7209">the Sudo administrative account. Therefore, this tutorial uses</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="168.0817" x="141.5905" y="369.1644">the alice account to perform runtime upgrades.</text><rect fill="#F1F1F1" height="150.5613" rx="5.7093" ry="5.7093" style="stroke:#181818;stroke-width:0.6851155292853305;" width="257.6034" x="410.1558" y="189.4915"/><text fill="#000000" font-family="sans-serif" font-size="6.3944" lengthAdjust="spacing" textLength="135.6529" x="414.7233" y="199.9944">Resource accounting for runtime upgrades</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="0" x="414.7233" y="207.4379"/><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="230.1988" x="414.7233" y="214.8814">Function calls that are dispatched to the Substrate runtime are</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="226.5449" x="414.7233" y="222.3249">always associated with a weight to account for resource usage.</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="230.1988" x="414.7233" y="229.7684">The FRAME System module sets boundaries on the block length and</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="164.4277" x="414.7233" y="237.2119">block weight that these transactions can use.</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="0" x="414.7233" y="244.6554"/><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="215.583" x="414.7233" y="252.0989">However, the set_code function is intentionally designed to</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="222.8909" x="414.7233" y="259.5424">consume the maximum weight that can fit in a block. Forcing a</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="233.8528" x="414.7233" y="266.9859">runtime upgrade to consume an entire block prevents transactions</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="248.4686" x="414.7233" y="274.4294">in the same block from executing on different versions of a runtime.</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="0" x="414.7233" y="281.8729"/><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="244.8146" x="414.7233" y="289.3163">The weight annotation for the set_code function also specifies that</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="248.4686" x="414.7233" y="296.7598">the function is in the Operational class because it provides network</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="237.5067" x="414.7233" y="304.2033">capabilities. Functions calls that are identified as operational:</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="0" x="414.7233" y="311.6468"/><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="182.6975" x="414.7233" y="319.0903">1. Can consume the entire weight limit of a block.</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="109.6185" x="414.7233" y="326.5338">2. Are given maximum priority.</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="171.7356" x="414.7233" y="333.9773">3. Are exempt from paying the transaction fees.</text><path d="M387.3186,326.0115 L391.8861,326.0115 C398.7372,326.0115 398.7372,264.7722 405.5884,264.7722 L410.1558,264.7722 " fill="none" style="stroke:#181818;stroke-width:0.4567436861902203;"/><rect fill="#F1F1F1" height="113.3438" rx="5.7093" ry="5.7093" style="stroke:#181818;stroke-width:0.6851155292853305;" width="268.5653" x="410.1558" y="349.1877"/><text fill="#000000" font-family="sans-serif" font-size="6.3944" lengthAdjust="spacing" textLength="97.7431" x="414.7233" y="359.6906">Managing resource accounting</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="0" x="414.7233" y="367.1341"/><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="230.1988" x="414.7233" y="374.5775">In this tutorial, the sudo_unchecked_weight function is used to</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="193.6593" x="414.7233" y="382.021">invoke the set_code function for the runtime upgrade.</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="0" x="414.7233" y="389.4645"/><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="244.8146" x="414.7233" y="396.908">The sudo_unchecked_weight function is the same as the sudo function</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="252.1225" x="414.7233" y="404.3515">except that it supports an additional parameter to specify the weight</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="259.4304" x="414.7233" y="411.795">to use for the call. This parameter enables you to work around resource</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="244.8146" x="414.7233" y="419.2385">accounting safeguards to specify a weight of zero for the call that</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="248.4686" x="414.7233" y="426.682">dispatches the set_code function. This setting allows for a block to</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="252.1225" x="414.7233" y="434.1255">take an indefinite time to compute to ensure that the runtime upgrade</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="197.3133" x="414.7233" y="441.569">does not fail, no matter how complex the operation is.</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="0" x="414.7233" y="449.0125"/><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="193.6593" x="414.7233" y="456.456">It can take all the time it needs to succeed or fail.</text><path d="M387.3186,326.0115 L391.8861,326.0115 C398.7372,326.0115 398.7372,405.8596 405.5884,405.8596 L410.1558,405.8596 " fill="none" style="stroke:#181818;stroke-width:0.4567436861902203;"/><path d="M114.1859,753.3309 L118.7534,753.3309 C125.6045,753.3309 125.6045,326.0115 132.4557,326.0115 L137.0231,326.0115 " fill="none" style="stroke:#181818;stroke-width:0.4567436861902203;"/><rect fill="#F1F1F1" height="38.9089" rx="5.7093" ry="5.7093" style="stroke:#181818;stroke-width:0.6851155292853305;" width="308.7587" x="137.0231" y="488.2447"/><text fill="#000000" font-family="sans-serif" font-size="6.3944" lengthAdjust="spacing" textLength="152.0956" x="141.5905" y="498.7476">Upgrade the runtime to add the Scheduler pallet</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="0" x="141.5905" y="506.1911"/><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="255.7765" x="141.5905" y="513.6346">The node template doesn't include the Scheduler pallet in its runtime.</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="299.6239" x="141.5905" y="521.0781">To illustrate a runtime upgrade, let's add the Scheduler pallet to a running node.</text><rect fill="#F1F1F1" height="46.3523" rx="5.7093" ry="5.7093" style="stroke:#181818;stroke-width:0.6851155292853305;" width="199.1402" x="468.619" y="471.6664"/><text fill="#000000" font-family="sans-serif" font-size="6.3944" lengthAdjust="spacing" textLength="173.5626" x="473.1865" y="482.1692">First Screen: Start the local node in development mode</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="95.0027" x="473.1865" y="489.6127"># Leave this node running.</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="190.0054" x="473.1865" y="497.0562"># You can edit and re-compile to upgrade the runtime</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="182.6975" x="473.1865" y="504.4997"># without stopping or restarting the running node.</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="102.3106" x="473.1865" y="511.9432">cargo run --release -- --dev</text><path d="M445.7818,507.6992 L450.3493,507.6992 C457.2004,507.6992 457.2004,494.8425 464.0516,494.8425 L468.619,494.8425 " fill="none" style="stroke:#181818;stroke-width:0.4567436861902203;"/><rect fill="#F1F1F1" height="16.5784" rx="5.7093" ry="5.7093" style="stroke:#181818;stroke-width:0.6851155292853305;" width="121.4938" x="468.619" y="527.1536"/><text fill="#000000" font-family="sans-serif" font-size="6.3944" lengthAdjust="spacing" textLength="112.3589" x="473.1865" y="537.6565">Second Screen: Upgrade Operation</text><path d="M445.7818,507.6992 L450.3493,507.6992 C457.2004,507.6992 457.2004,535.4428 464.0516,535.4428 L468.619,535.4428 " fill="none" style="stroke:#181818;stroke-width:0.4567436861902203;"/><path d="M114.1859,753.3309 L118.7534,753.3309 C125.6045,753.3309 125.6045,507.6992 132.4557,507.6992 L137.0231,507.6992 " fill="none" style="stroke:#181818;stroke-width:0.4567436861902203;"/><rect fill="#F1F1F1" height="16.5784" rx="5.7093" ry="5.7093" style="stroke:#181818;stroke-width:0.6851155292853305;" width="151.1822" x="137.0231" y="617.8279"/><text fill="#000000" font-family="sans-serif" font-size="6.3944" lengthAdjust="spacing" textLength="142.0473" x="141.5905" y="628.3308">substrate-node-template/runtime/Cargo.toml</text><rect fill="#F1F1F1" height="76.1263" rx="5.7093" ry="5.7093" style="stroke:#181818;stroke-width:0.6851155292853305;" width="213.756" x="311.0425" y="552.8668"/><text fill="#000000" font-family="sans-serif" font-size="6.3944" lengthAdjust="spacing" textLength="133.3692" x="315.6099" y="563.3697">Add the Scheduler pallet as a dependency</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="51.1553" x="315.6099" y="570.8132">[dependencies]</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="10.9618" x="315.6099" y="578.2567">...</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="73.079" x="315.6099" y="585.7002">pallet-scheduler = {</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="80.3869" x="330.2257" y="593.1437">version = "4.0.0-dev",</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="91.3487" x="330.2257" y="600.5872">default-features = false,</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="190.0054" x="330.2257" y="608.0307">git = "https://github.com/paritytech/substrate.git",</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="105.9645" x="333.8796" y="615.4742">branch = "polkadot-v0.9.24" }</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="10.9618" x="315.6099" y="622.9177">...</text><path d="M288.2053,626.1171 L292.7727,626.1171 C299.6239,626.1171 299.6239,590.93 306.475,590.93 L311.0425,590.93 " fill="none" style="stroke:#181818;stroke-width:0.4567436861902203;"/><rect fill="#F1F1F1" height="61.2393" rx="5.7093" ry="5.7093" style="stroke:#181818;stroke-width:0.6851155292853305;" width="147.0715" x="311.0425" y="638.128"/><text fill="#000000" font-family="sans-serif" font-size="6.3944" lengthAdjust="spacing" textLength="137.9366" x="315.6099" y="648.6309">Add the Scheduler pallet to the features list.</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="36.5395" x="315.6099" y="656.0744">[features]</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="62.1171" x="315.6099" y="663.5179">default = ["std"]</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="25.5776" x="315.6099" y="670.9614">std = [</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="10.9618" x="319.2638" y="678.4049">...</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="84.0408" x="319.2638" y="685.8484">"pallet-scheduler/std",</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="10.9618" x="319.2638" y="693.2919">...</text><path d="M288.2053,626.1171 L292.7727,626.1171 C299.6239,626.1171 299.6239,668.7477 306.475,668.7477 L311.0425,668.7477 " fill="none" style="stroke:#181818;stroke-width:0.4567436861902203;"/><path d="M114.1859,753.3309 L118.7534,753.3309 C125.6045,753.3309 125.6045,626.1171 132.4557,626.1171 L137.0231,626.1171 " fill="none" style="stroke:#181818;stroke-width:0.4567436861902203;"/><rect fill="#F1F1F1" height="16.5784" rx="5.7093" ry="5.7093" style="stroke:#181818;stroke-width:0.6851155292853305;" width="143.4175" x="137.0231" y="949.3988"/><text fill="#000000" font-family="sans-serif" font-size="6.3944" lengthAdjust="spacing" textLength="134.2826" x="141.5905" y="959.9017">substrate-node-template/runtime/src/lib.rs</text><rect fill="#F1F1F1" height="46.3523" rx="5.7093" ry="5.7093" style="stroke:#181818;stroke-width:0.6851155292853305;" width="190.9189" x="303.2778" y="708.5022"/><text fill="#000000" font-family="sans-serif" font-size="6.3944" lengthAdjust="spacing" textLength="146.158" x="307.8452" y="719.0051">Add the types required by the Scheduler pallet</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="65.7711" x="307.8452" y="726.4486">parameter_types! {</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="178.13" x="311.4992" y="733.8921">pub MaximumSchedulerWeight: Weight = 10_000_000；</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="152.5524" x="311.4992" y="741.3356">pub const MaxScheduledPerBlock: u32 = 50；</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="3.6539" x="307.8452" y="748.7791">}</text><path d="M280.4406,957.688 L285.0081,957.688 C291.8592,957.688 291.8592,731.6784 298.7104,731.6784 L303.2778,731.6784 " fill="none" style="stroke:#181818;stroke-width:0.4567436861902203;"/><rect fill="#F1F1F1" height="120.7873" rx="5.7093" ry="5.7093" style="stroke:#181818;stroke-width:0.6851155292853305;" width="227.4584" x="303.2778" y="763.9895"/><text fill="#000000" font-family="sans-serif" font-size="6.3944" lengthAdjust="spacing" textLength="211.9291" x="307.8452" y="774.4923">Add the implementation for the Config trait for the Scheduler pallet .</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="0" x="307.8452" y="781.9358"/><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="157.1198" x="307.8452" y="789.3793">impl pallet_scheduler::Config for Runtime {</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="72.1655" x="311.4992" y="796.8228">type Event = Event；</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="79.4734" x="311.4992" y="804.2663">type Origin = Origin；</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="126.9747" x="311.4992" y="811.7098">type PalletsOrigin = OriginCaller；</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="64.8576" x="311.4992" y="819.1533">type Call = Call；</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="163.5142" x="311.4992" y="826.5968">type MaximumWeight = MaximumSchedulerWeight；</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="214.6695" x="311.4992" y="834.0403">type ScheduleOrigin = frame_system::EnsureRoot&lt;AccountId&gt;；</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="181.784" x="311.4992" y="841.4838">type MaxScheduledPerBlock = MaxScheduledPerBlock；</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="79.4734" x="311.4992" y="848.9273">type WeightInfo = ()；</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="167.1682" x="311.4992" y="856.3708">type OriginPrivilegeCmp = EqualPrivilegeOnly；</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="101.3971" x="311.4992" y="863.8143">type PreimageProvider = ()；</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="123.3208" x="311.4992" y="871.2578">type NoPreimagePostponement = ()；</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="3.6539" x="307.8452" y="878.7013">}</text><path d="M280.4406,957.688 L285.0081,957.688 C291.8592,957.688 291.8592,824.3831 298.7104,824.3831 L303.2778,824.3831 " fill="none" style="stroke:#181818;stroke-width:0.4567436861902203;"/><rect fill="#F1F1F1" height="98.4568" rx="5.7093" ry="5.7093" style="stroke:#181818;stroke-width:0.6851155292853305;" width="204.1644" x="303.2778" y="893.9116"/><text fill="#000000" font-family="sans-serif" font-size="6.3944" lengthAdjust="spacing" textLength="195.0296" x="307.8452" y="904.4145">Add the Scheduler pallet inside the construct_runtime! macro.</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="0" x="307.8452" y="911.858"/><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="69.425" x="307.8452" y="919.3015">construct_runtime!(</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="80.3869" x="311.4992" y="926.745">pub enum Runtime where</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="51.1553" x="311.4992" y="934.1885">Block = Block,</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="95.0027" x="311.4992" y="941.632">NodeBlock = opaque::Block,</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="142.504" x="311.4992" y="949.0755">UncheckedExtrinsic = UncheckedExtrinsic</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="3.6539" x="311.4992" y="956.519">{</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="36.5395" x="318.8071" y="963.9625">/* snip */</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="102.3106" x="318.8071" y="971.406">Scheduler: pallet_scheduler,</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="3.6539" x="311.4992" y="978.8494">}</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="10.0484" x="307.8452" y="986.2929">)；</text><path d="M280.4406,957.688 L285.0081,957.688 C291.8592,957.688 291.8592,943.14 298.7104,943.14 L303.2778,943.14 " fill="none" style="stroke:#181818;stroke-width:0.4567436861902203;"/><rect fill="#F1F1F1" height="31.4654" rx="5.7093" ry="5.7093" style="stroke:#181818;stroke-width:0.6851155292853305;" width="194.5728" x="303.2778" y="1001.5033"/><text fill="#000000" font-family="sans-serif" font-size="6.3944" lengthAdjust="spacing" textLength="174.4761" x="307.8452" y="1012.0062">Add the following trait dependency at the top of the file:</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="0" x="307.8452" y="1019.4497"/><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="185.4379" x="307.8452" y="1026.8932">pub use frame_support::traits::EqualPrivilegeOnly；</text><path d="M280.4406,957.688 L285.0081,957.688 C291.8592,957.688 291.8592,1017.236 298.7104,1017.236 L303.2778,1017.236 " fill="none" style="stroke:#181818;stroke-width:0.4567436861902203;"/><rect fill="#F1F1F1" height="91.0133" rx="5.7093" ry="5.7093" style="stroke:#181818;stroke-width:0.6851155292853305;" width="297.7969" x="303.2778" y="1042.1035"/><text fill="#000000" font-family="sans-serif" font-size="6.3944" lengthAdjust="spacing" textLength="107.3348" x="307.8452" y="1052.6064">Increment the spec_version in the</text><a href="https://paritytech.github.io/substrate/master/sp_version/struct.RuntimeVersion.html" target="_top" title="https://paritytech.github.io/substrate/master/sp_version/struct.RuntimeVersion.html" xlink:actuate="onRequest" xlink:href="https://paritytech.github.io/substrate/master/sp_version/struct.RuntimeVersion.html" xlink:show="new" xlink:title="https://paritytech.github.io/substrate/master/sp_version/struct.RuntimeVersion.html" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="6.3944" lengthAdjust="spacing" text-decoration="underline" textLength="70.3385" x="417.007" y="1052.6064">RuntimeVersion struct</text></a><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="0" x="307.8452" y="1060.0499"/><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="190.0054" x="307.8452" y="1067.4934">pub const VERSION: RuntimeVersion = RuntimeVersion {</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="175.3896" x="311.4992" y="1074.9369">spec_name: create_runtime_str!("node-template"),</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="175.3896" x="311.4992" y="1082.3804">impl_name: create_runtime_str!("node-template"),</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="76.7329" x="311.4992" y="1089.8239">authoring_version: 1,</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="285.0081" x="311.4992" y="1097.2674">spec_version: 101,  // *Increment* this value, the template uses 100 as a base</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="58.4632" x="311.4992" y="1104.7109">impl_version: 1,</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="98.6566" x="311.4992" y="1112.1544">apis: RUNTIME_API_VERSIONS,</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="84.0408" x="311.4992" y="1119.5979">transaction_version: 1,</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="10.0484" x="307.8452" y="1127.0414">}；</text><rect fill="#F1F1F1" height="83.5698" rx="5.7093" ry="5.7093" style="stroke:#181818;stroke-width:0.6851155292853305;" width="221.0639" x="623.9119" y="1020.112"/><text fill="#000000" font-family="sans-serif" font-size="6.3944" lengthAdjust="spacing" textLength="168.9952" x="628.4793" y="1030.6149">Review the components of the RuntimeVersion struct</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="0" x="628.4793" y="1038.0584"/><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="160.7738" x="628.4793" y="1045.5019">spec_name specifies the name of the runtime.</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="157.1198" x="628.4793" y="1052.9454">impl_name specifies the name of the client.</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="211.9291" x="628.4793" y="1060.3889">authoring_version specifies the version for block authors.</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="182.6975" x="628.4793" y="1067.8324">spec_version specifies the version of the runtime.</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="179.0435" x="628.4793" y="1075.2759">impl_version specifies the version of the client.</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="153.4659" x="628.4793" y="1082.7194">apis specifies the list of supported APIs.</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="160.7738" x="628.4793" y="1090.1629">transaction_version specifies the version of</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="131.5422" x="628.4793" y="1097.6064">the dispatchable function interface.</text><path d="M601.0747,1087.6102 L605.6421,1087.6102 C612.4933,1087.6102 612.4933,1061.897 619.3444,1061.897 L623.9119,1061.897 " fill="none" style="stroke:#181818;stroke-width:0.4567436861902203;"/><rect fill="#F1F1F1" height="16.5784" rx="5.7093" ry="5.7093" style="stroke:#181818;stroke-width:0.6851155292853305;" width="29.6883" x="623.9119" y="1112.8167"/><a href="https://docs.substrate.io/reference/glossary/#author" target="_top" title="https://docs.substrate.io/reference/glossary/#author" xlink:actuate="onRequest" xlink:href="https://docs.substrate.io/reference/glossary/#author" xlink:show="new" xlink:title="https://docs.substrate.io/reference/glossary/#author" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="6.3944" lengthAdjust="spacing" text-decoration="underline" textLength="20.5535" x="628.4793" y="1123.3196">author</text></a><path d="M601.0747,1087.6102 L605.6421,1087.6102 C612.4933,1087.6102 612.4933,1121.1059 619.3444,1121.1059 L623.9119,1121.1059 " fill="none" style="stroke:#181818;stroke-width:0.4567436861902203;"/><rect fill="#F1F1F1" height="16.5784" rx="5.7093" ry="5.7093" style="stroke:#181818;stroke-width:0.6851155292853305;" width="36.0828" x="623.9119" y="1138.53"/><a href="https://docs.substrate.io/reference/glossary/#dispatch" target="_top" title="https://docs.substrate.io/reference/glossary/#dispatch" xlink:actuate="onRequest" xlink:href="https://docs.substrate.io/reference/glossary/#dispatch" xlink:show="new" xlink:title="https://docs.substrate.io/reference/glossary/#dispatch" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="6.3944" lengthAdjust="spacing" text-decoration="underline" textLength="26.9479" x="628.4793" y="1149.0329">dispatch</text></a><path d="M601.0747,1087.6102 L605.6421,1087.6102 C612.4933,1087.6102 612.4933,1146.8192 619.3444,1146.8192 L623.9119,1146.8192 " fill="none" style="stroke:#181818;stroke-width:0.4567436861902203;"/><path d="M280.4406,957.688 L285.0081,957.688 C291.8592,957.688 291.8592,1087.6102 298.7104,1087.6102 L303.2778,1087.6102 " fill="none" style="stroke:#181818;stroke-width:0.4567436861902203;"/><rect fill="#F1F1F1" height="38.9089" rx="5.7093" ry="5.7093" style="stroke:#181818;stroke-width:0.6851155292853305;" width="177.2166" x="303.2778" y="1142.2517"/><text fill="#000000" font-family="sans-serif" font-size="6.3944" lengthAdjust="spacing" textLength="154.3794" x="307.8452" y="1152.7546">Build the updated runtime in the second terminal</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="0" x="307.8452" y="1160.1981"/><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="131.5422" x="307.8452" y="1167.6416"># without stopping the running node.</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="168.0817" x="307.8452" y="1175.0851">cargo build --release -p node-template-runtime</text><path d="M280.4406,957.688 L285.0081,957.688 C291.8592,957.688 291.8592,1161.7062 298.7104,1161.7062 L303.2778,1161.7062 " fill="none" style="stroke:#181818;stroke-width:0.4567436861902203;"/><rect fill="#F1F1F1" height="16.5784" rx="5.7093" ry="5.7093" style="stroke:#181818;stroke-width:0.6851155292853305;" width="256.69" x="303.2778" y="1190.2955"/><text fill="#000000" font-family="sans-serif" font-size="6.3944" lengthAdjust="spacing" textLength="247.5551" x="307.8452" y="1200.7983">Connect to the local node to upgrade the runtime to use the new build artifact.</text><path d="M280.4406,957.688 L285.0081,957.688 C291.8592,957.688 291.8592,1198.5846 298.7104,1198.5846 L303.2778,1198.5846 " fill="none" style="stroke:#181818;stroke-width:0.4567436861902203;"/><path d="M114.1859,753.3309 L118.7534,753.3309 C125.6045,753.3309 125.6045,957.688 132.4557,957.688 L137.0231,957.688 " fill="none" style="stroke:#181818;stroke-width:0.4567436861902203;"/><rect fill="#F1F1F1" height="16.5784" rx="5.7093" ry="5.7093" style="stroke:#181818;stroke-width:0.6851155292853305;" width="79.9301" x="137.0231" y="975.1121"/><a href="https://polkadot.js.org/apps/#/extrinsics?rpc=ws://127.0.0.1:9944" target="_top" title="https://polkadot.js.org/apps/#/extrinsics?rpc=ws://127.0.0.1:9944" xlink:actuate="onRequest" xlink:href="https://polkadot.js.org/apps/#/extrinsics?rpc=ws://127.0.0.1:9944" xlink:show="new" xlink:title="https://polkadot.js.org/apps/#/extrinsics?rpc=ws://127.0.0.1:9944" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="6.3944" lengthAdjust="spacing" text-decoration="underline" textLength="70.7953" x="141.5905" y="985.615">Polkadot-JS application</text></a><path d="M114.1859,753.3309 L118.7534,753.3309 C125.6045,753.3309 125.6045,983.4013 132.4557,983.4013 L137.0231,983.4013 " fill="none" style="stroke:#181818;stroke-width:0.4567436861902203;"/><rect fill="#F1F1F1" height="68.6828" rx="5.7093" ry="5.7093" style="stroke:#181818;stroke-width:0.6851155292853305;" width="327.0285" x="137.0231" y="1319.5396"/><text fill="#000000" font-family="sans-serif" font-size="6.3944" lengthAdjust="spacing" textLength="68.0548" x="141.5905" y="1330.0425">Schedule an Upgrade</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="0" x="141.5905" y="1337.486"/><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="285.0081" x="141.5905" y="1344.9295">Now that the node template has been upgraded to include the Scheduler pallet ,</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="255.7765" x="141.5905" y="1352.373">the schedule function can be used to perform the next runtime upgrade.</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="0" x="141.5905" y="1359.8165"/><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="281.3541" x="141.5905" y="1367.26">In the previous part, the sudo_unchecked_weight function was used to override</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="285.0081" x="141.5905" y="1374.7035">the weight associated with the set_code function; in this section, the runtime</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="317.8936" x="141.5905" y="1382.147">upgrade will be scheduled so that it can be processed as the only extrinsic in a block.</text><rect fill="#F1F1F1" height="16.5784" rx="5.7093" ry="5.7093" style="stroke:#181818;stroke-width:0.6851155292853305;" width="78.1032" x="486.8888" y="1216.0087"/><a href="https://paritytech.github.io/substrate/master/pallet_scheduler/pallet/enum.Call.html#variant.schedule" target="_top" title="https://paritytech.github.io/substrate/master/pallet_scheduler/pallet/enum.Call.html#variant.schedule" xlink:actuate="onRequest" xlink:href="https://paritytech.github.io/substrate/master/pallet_scheduler/pallet/enum.Call.html#variant.schedule" xlink:show="new" xlink:title="https://paritytech.github.io/substrate/master/pallet_scheduler/pallet/enum.Call.html#variant.schedule" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="6.3944" lengthAdjust="spacing" text-decoration="underline" textLength="68.9683" x="491.4562" y="1226.5116">the schedule function</text></a><path d="M464.0516,1353.8811 L468.619,1353.8811 C475.4702,1353.8811 475.4702,1224.2979 482.3213,1224.2979 L486.8888,1224.2979 " fill="none" style="stroke:#181818;stroke-width:0.4567436861902203;"/><rect fill="#F1F1F1" height="16.5784" rx="5.7093" ry="5.7093" style="stroke:#181818;stroke-width:0.6851155292853305;" width="35.1693" x="486.8888" y="1241.7219"/><a href="https://docs.substrate.io/main-docs/fundamentals/transaction-types/" target="_top" title="https://docs.substrate.io/main-docs/fundamentals/transaction-types/" xlink:actuate="onRequest" xlink:href="https://docs.substrate.io/main-docs/fundamentals/transaction-types/" xlink:show="new" xlink:title="https://docs.substrate.io/main-docs/fundamentals/transaction-types/" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="6.3944" lengthAdjust="spacing" text-decoration="underline" textLength="26.0344" x="491.4562" y="1252.2248">extrinsic</text></a><path d="M464.0516,1353.8811 L468.619,1353.8811 C475.4702,1353.8811 475.4702,1250.0111 482.3213,1250.0111 L486.8888,1250.0111 " fill="none" style="stroke:#181818;stroke-width:0.4567436861902203;"/><rect fill="#F1F1F1" height="158.0048" rx="5.7093" ry="5.7093" style="stroke:#181818;stroke-width:0.6851155292853305;" width="250.2955" x="486.8888" y="1267.4352"/><text fill="#000000" font-family="sans-serif" font-size="6.3944" lengthAdjust="spacing" textLength="95.4594" x="491.4562" y="1277.9381">Prepare an Upgraded Runtime</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="76.7329" x="491.4562" y="1285.3816">// runtime/src/lib.rs</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="190.0054" x="491.4562" y="1292.825">pub const VERSION: RuntimeVersion = RuntimeVersion {</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="175.3896" x="495.1102" y="1300.2685">spec_name: create_runtime_str!("node-template"),</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="175.3896" x="495.1102" y="1307.712">impl_name: create_runtime_str!("node-template"),</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="76.7329" x="495.1102" y="1315.1555">authoring_version: 1,</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="168.0817" x="495.1102" y="1322.599">spec_version: 102,  // *Increment* this value.</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="58.4632" x="495.1102" y="1330.0425">impl_version: 1,</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="98.6566" x="495.1102" y="1337.486">apis: RUNTIME_API_VERSIONS,</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="84.0408" x="495.1102" y="1344.9295">transaction_version: 1,</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="10.0484" x="491.4562" y="1352.373">}；</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="0" x="491.4562" y="1359.8165"/><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="36.5395" x="491.4562" y="1367.26">/* snip */</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="0" x="491.4562" y="1374.7035"/><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="65.7711" x="491.4562" y="1382.147">parameter_types! {</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="237.5067" x="495.1102" y="1389.5905">pub const ExistentialDeposit: u128 = 1000;  // Update this value.</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="108.705" x="495.1102" y="1397.034">pub const MaxLocks: u32 = 50；</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="3.6539" x="491.4562" y="1404.4775">}</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="0" x="491.4562" y="1411.921"/><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="36.5395" x="491.4562" y="1419.3645">/* snip */</text><path d="M464.0516,1353.8811 L468.619,1353.8811 C475.4702,1353.8811 475.4702,1346.4376 482.3213,1346.4376 L486.8888,1346.4376 " fill="none" style="stroke:#181818;stroke-width:0.4567436861902203;"/><rect fill="#F1F1F1" height="31.4654" rx="5.7093" ry="5.7093" style="stroke:#181818;stroke-width:0.6851155292853305;" width="177.2166" x="486.8888" y="1434.5748"/><text fill="#000000" font-family="sans-serif" font-size="6.3944" lengthAdjust="spacing" textLength="86.3246" x="491.4562" y="1445.0777">Build the upgraded runtime</text><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="0" x="491.4562" y="1452.5212"/><text fill="#000000" font-family="monospace" font-size="6.3944" lengthAdjust="spacing" textLength="168.0817" x="491.4562" y="1459.9647">cargo build --release -p node-template-runtime</text><path d="M464.0516,1353.8811 L468.619,1353.8811 C475.4702,1353.8811 475.4702,1450.3075 482.3213,1450.3075 L486.8888,1450.3075 " fill="none" style="stroke:#181818;stroke-width:0.4567436861902203;"/><rect fill="#F1F1F1" height="16.5784" rx="5.7093" ry="5.7093" style="stroke:#181818;stroke-width:0.6851155292853305;" width="76.7329" x="486.8888" y="1475.1751"/><a href="https://docs.substrate.io/tutorials/get-started/forkless-upgrade/#upgrade-the-runtime" target="_top" title="https://docs.substrate.io/tutorials/get-started/forkless-upgrade/#upgrade-the-runtime" xlink:actuate="onRequest" xlink:href="https://docs.substrate.io/tutorials/get-started/forkless-upgrade/#upgrade-the-runtime" xlink:show="new" xlink:title="https://docs.substrate.io/tutorials/get-started/forkless-upgrade/#upgrade-the-runtime" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="6.3944" lengthAdjust="spacing" text-decoration="underline" textLength="67.5981" x="491.4562" y="1485.6779">Upgrade the Runtime</text></a><path d="M464.0516,1353.8811 L468.619,1353.8811 C475.4702,1353.8811 475.4702,1483.4642 482.3213,1483.4642 L486.8888,1483.4642 " fill="none" style="stroke:#181818;stroke-width:0.4567436861902203;"/><path d="M114.1859,753.3309 L118.7534,753.3309 C125.6045,753.3309 125.6045,1353.8811 132.4557,1353.8811 L137.0231,1353.8811 " fill="none" style="stroke:#181818;stroke-width:0.4567436861902203;"/><rect height="5.3168" style="stroke:#00000000;stroke-width:0.4567436861902203;fill:none;" width="60.2902" x="382.9796" y="1496.3209"/><text fill="#888888" font-family="sans-serif" font-size="4.5674" lengthAdjust="spacing" textLength="60.2902" x="382.9796" y="1500.5605">Upgrade a running network</text></g></svg></figure>
<h3 id="时序图"><a class="header" href="#时序图">时序图</a></h3>
<figure><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1510.337px" preserveAspectRatio="none" style="width:850px;height:1510px;background:#FFFFFF;" version="1.1" viewBox="0 0 850 1510" width="850.7741px" zoomAndPan="magnify"><defs/><g><line style="stroke:#181818;stroke-width:0.3870673952641166;stroke-dasharray:5.0,5.0;" x1="199.7268" x2="199.7268" y1="52.0606" y2="1459.359"/><line style="stroke:#181818;stroke-width:0.3870673952641166;stroke-dasharray:5.0,5.0;" x1="291.8488" x2="291.8488" y1="52.0606" y2="1459.359"/><line style="stroke:#181818;stroke-width:0.3870673952641166;stroke-dasharray:5.0,5.0;" x1="476.867" x2="476.867" y1="52.0606" y2="1459.359"/><line style="stroke:#181818;stroke-width:0.3870673952641166;stroke-dasharray:5.0,5.0;" x1="664.5947" x2="664.5947" y1="52.0606" y2="1459.359"/><rect fill="#E2E2F0" height="47.4158" rx="1.9353" ry="1.9353" style="stroke:#181818;stroke-width:0.3870673952641166;" width="75.8652" x="161.7942" y="3.8707"/><text fill="#000000" font-family="sans-serif" font-size="13.9344" font-weight="bold" lengthAdjust="spacing" textLength="37.9326" x="180.7605" y="22.2239">终端1</text><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="161.7942" x2="237.6594" y1="29.3808" y2="29.3808"/><text fill="#000000" font-family="sans-serif" font-size="10.8379" lengthAdjust="spacing" textLength="65.0273" x="167.2131" y="43.3115">直接运行节点</text><rect fill="#E2E2F0" height="47.4158" rx="1.9353" ry="1.9353" style="stroke:#181818;stroke-width:0.3870673952641166;" width="75.8652" x="161.7942" y="1458.5849"/><text fill="#000000" font-family="sans-serif" font-size="13.9344" font-weight="bold" lengthAdjust="spacing" textLength="37.9326" x="180.7605" y="1476.938">终端1</text><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="161.7942" x2="237.6594" y1="1484.095" y2="1484.095"/><text fill="#000000" font-family="sans-serif" font-size="10.8379" lengthAdjust="spacing" textLength="65.0273" x="167.2131" y="1498.0257">直接运行节点</text><rect fill="#E2E2F0" height="47.4158" rx="1.9353" ry="1.9353" style="stroke:#181818;stroke-width:0.3870673952641166;" width="54.1894" x="264.7541" y="3.8707"/><text fill="#000000" font-family="sans-serif" font-size="13.9344" font-weight="bold" lengthAdjust="spacing" textLength="37.9326" x="272.8825" y="22.2239">终端2</text><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="264.7541" x2="318.9435" y1="29.3808" y2="29.3808"/><text fill="#000000" font-family="sans-serif" font-size="10.8379" lengthAdjust="spacing" textLength="43.3515" x="270.173" y="43.3115">用于更新</text><rect fill="#E2E2F0" height="47.4158" rx="1.9353" ry="1.9353" style="stroke:#181818;stroke-width:0.3870673952641166;" width="54.1894" x="264.7541" y="1458.5849"/><text fill="#000000" font-family="sans-serif" font-size="13.9344" font-weight="bold" lengthAdjust="spacing" textLength="37.9326" x="272.8825" y="1476.938">终端2</text><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="264.7541" x2="318.9435" y1="1484.095" y2="1484.095"/><text fill="#000000" font-family="sans-serif" font-size="10.8379" lengthAdjust="spacing" textLength="43.3515" x="270.173" y="1498.0257">用于更新</text><rect fill="#E2E2F0" height="47.4158" rx="1.9353" ry="1.9353" style="stroke:#181818;stroke-width:0.3870673952641166;" width="52.6412" x="450.5464" y="3.8707"/><text fill="#000000" font-family="sans-serif" font-size="13.9344" font-weight="bold" lengthAdjust="spacing" textLength="41.8033" x="455.9654" y="22.2239">运行时</text><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="450.5464" x2="503.1876" y1="29.3808" y2="29.3808"/><text fill="#000000" font-family="sans-serif" font-size="10.8379" lengthAdjust="spacing" textLength="32.5137" x="460.6102" y="43.3115">运行时</text><rect fill="#E2E2F0" height="47.4158" rx="1.9353" ry="1.9353" style="stroke:#181818;stroke-width:0.3870673952641166;" width="52.6412" x="450.5464" y="1458.5849"/><text fill="#000000" font-family="sans-serif" font-size="13.9344" font-weight="bold" lengthAdjust="spacing" textLength="41.8033" x="455.9654" y="1476.938">运行时</text><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="450.5464" x2="503.1876" y1="1484.095" y2="1484.095"/><text fill="#000000" font-family="sans-serif" font-size="10.8379" lengthAdjust="spacing" textLength="32.5137" x="460.6102" y="1498.0257">运行时</text><rect fill="#E2E2F0" height="47.4158" rx="1.9353" ry="1.9353" style="stroke:#181818;stroke-width:0.3870673952641166;" width="192.7596" x="568.602" y="3.8707"/><text fill="#000000" font-family="sans-serif" font-size="13.9344" font-weight="bold" lengthAdjust="spacing" textLength="181.9217" x="574.0209" y="22.2239">Polkadot-JS application</text><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="568.602" x2="761.3616" y1="29.3808" y2="29.3808"/><text fill="#000000" font-family="sans-serif" font-size="10.8379" lengthAdjust="spacing" textLength="43.3515" x="643.306" y="43.3115">波卡前端</text><rect fill="#E2E2F0" height="47.4158" rx="1.9353" ry="1.9353" style="stroke:#181818;stroke-width:0.3870673952641166;" width="192.7596" x="568.602" y="1458.5849"/><text fill="#000000" font-family="sans-serif" font-size="13.9344" font-weight="bold" lengthAdjust="spacing" textLength="181.9217" x="574.0209" y="1476.938">Polkadot-JS application</text><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="568.602" x2="761.3616" y1="1484.095" y2="1484.095"/><text fill="#000000" font-family="sans-serif" font-size="10.8379" lengthAdjust="spacing" textLength="43.3515" x="643.306" y="1498.0257">波卡前端</text><rect fill="#EEEEEE" height="2.3224" style="stroke:#EEEEEE;stroke-width:0.7741347905282332;" width="845.3552" x="0" y="75.7231"/><line style="stroke:#000000;stroke-width:0.7741347905282332;" x1="0" x2="845.3552" y1="75.7231" y2="75.7231"/><line style="stroke:#000000;stroke-width:0.7741347905282332;" x1="0" x2="845.3552" y1="78.0455" y2="78.0455"/><rect fill="#EEEEEE" height="17.9079" style="stroke:#000000;stroke-width:1.5482695810564664;" width="75.0911" x="385.1321" y="67.5433"/><text fill="#000000" font-family="sans-serif" font-size="10.0638" font-weight="bold" lengthAdjust="spacing" textLength="60.3825" x="389.7769" y="79.9812">运行原先节点</text><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="199.7268" x2="232.2404" y1="109.5522" y2="109.5522"/><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="232.2404" x2="232.2404" y1="109.5522" y2="119.6159"/><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="200.5009" x2="232.2404" y1="119.6159" y2="119.6159"/><polygon fill="#181818" points="208.2423,116.5194,200.5009,119.6159,208.2423,122.7125,205.1457,119.6159" style="stroke:#181818;stroke-width:0.7741347905282332;"/><text fill="#000000" font-family="sans-serif" font-size="10.0638" font-weight="bold" lengthAdjust="spacing" textLength="17.8051" x="205.1457" y="105.6305">1.1</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="60.3825" x="226.0474" y="105.6305">运行原先节点</text><path d="M61.1566,99.7727 L61.1566,119.126 L195.8561,119.126 L195.8561,107.514 L188.1148,99.7727 L61.1566,99.7727 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.3870673952641166;"/><path d="M188.1148,99.7727 L188.1148,107.514 L195.8561,107.514 L188.1148,99.7727 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.3870673952641166;"/><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="47.2222" x="65.8015" y="112.9847">cargo run</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" text-decoration="line-through" textLength="36.3843" x="116.1202" y="112.9847">release</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="25.5464" x="158.6976" y="112.9847">--dev</text><rect fill="#EEEEEE" height="2.3224" style="stroke:#EEEEEE;stroke-width:0.7741347905282332;" width="845.3552" x="0" y="141.7302"/><line style="stroke:#000000;stroke-width:0.7741347905282332;" x1="0" x2="845.3552" y1="141.7302" y2="141.7302"/><line style="stroke:#000000;stroke-width:0.7741347905282332;" x1="0" x2="845.3552" y1="144.0526" y2="144.0526"/><rect fill="#EEEEEE" height="17.9079" style="stroke:#000000;stroke-width:1.5482695810564664;" width="67.3497" x="389.0027" y="133.5503"/><text fill="#000000" font-family="sans-serif" font-size="10.0638" font-weight="bold" lengthAdjust="spacing" textLength="52.6412" x="393.6475" y="145.9883">更新palelt</text><rect height="30.2699" style="stroke:#000000;stroke-width:1.1612021857923498;fill:none;" width="223.725" x="448.224" y="159.1996"/><path d="M448.224,159.1996 L499.3169,159.1996 L499.3169,164.6186 L491.5756,172.3599 L448.224,172.3599 L448.224,159.1996 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5482695810564664;"/><text fill="#000000" font-family="sans-serif" font-size="10.0638" font-weight="bold" lengthAdjust="spacing" textLength="16.2568" x="458.2878" y="170.0893">ref</text><text fill="#000000" font-family="sans-serif" font-size="9.2896" lengthAdjust="spacing" textLength="217.5319" x="451.3206" y="184.0793">substrate-node-template/runtime/Cargo.toml</text><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="476.867" x2="509.3807" y1="209.6998" y2="209.6998"/><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="509.3807" x2="509.3807" y1="209.6998" y2="219.7636"/><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="477.6412" x2="509.3807" y1="219.7636" y2="219.7636"/><polygon fill="#181818" points="485.3825,216.667,477.6412,219.7636,485.3825,222.8601,482.286,219.7636" style="stroke:#181818;stroke-width:0.7741347905282332;"/><text fill="#000000" font-family="sans-serif" font-size="10.0638" font-weight="bold" lengthAdjust="spacing" textLength="17.8051" x="482.286" y="205.7781">2.1</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="122.3133" x="503.1876" y="205.7781">添加pallet-scheduler依赖.</text><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="476.867" x2="509.3807" y1="242.3163" y2="242.3163"/><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="509.3807" x2="509.3807" y1="242.3163" y2="252.38"/><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="477.6412" x2="509.3807" y1="252.38" y2="252.38"/><polygon fill="#181818" points="485.3825,249.2835,477.6412,252.38,485.3825,255.4766,482.286,252.38" style="stroke:#181818;stroke-width:0.7741347905282332;"/><text fill="#000000" font-family="sans-serif" font-size="10.0638" font-weight="bold" lengthAdjust="spacing" textLength="17.8051" x="482.286" y="238.3946">2.2</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="156.3752" x="503.1876" y="238.3946">feature添加pallet-scheduler/std.</text><rect height="30.2699" style="stroke:#000000;stroke-width:1.1612021857923498;fill:none;" width="212.1129" x="448.224" y="258.5731"/><path d="M448.224,258.5731 L499.3169,258.5731 L499.3169,263.9921 L491.5756,271.7334 L448.224,271.7334 L448.224,258.5731 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5482695810564664;"/><text fill="#000000" font-family="sans-serif" font-size="10.0638" font-weight="bold" lengthAdjust="spacing" textLength="16.2568" x="458.2878" y="269.4628">ref</text><text fill="#000000" font-family="sans-serif" font-size="9.2896" lengthAdjust="spacing" textLength="205.9199" x="451.3206" y="283.4528">substrate-node-template/runtime/src/lib.rs</text><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="476.867" x2="509.3807" y1="320.7882" y2="320.7882"/><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="509.3807" x2="509.3807" y1="320.7882" y2="330.8519"/><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="477.6412" x2="509.3807" y1="330.8519" y2="330.8519"/><polygon fill="#181818" points="485.3825,327.7554,477.6412,330.8519,485.3825,333.9484,482.286,330.8519" style="stroke:#181818;stroke-width:0.7741347905282332;"/><text fill="#000000" font-family="sans-serif" font-size="10.0638" font-weight="bold" lengthAdjust="spacing" textLength="17.8051" x="482.286" y="311.009">2.3</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="147.0856" x="503.1876" y="305.1516">Add the types required by the</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="79.7359" x="503.1876" y="316.8664">Scheduler pallet</text><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="476.867" x2="509.3807" y1="376.8343" y2="376.8343"/><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="509.3807" x2="509.3807" y1="376.8343" y2="386.8981"/><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="477.6412" x2="509.3807" y1="386.8981" y2="386.8981"/><polygon fill="#181818" points="485.3825,383.8015,477.6412,386.8981,485.3825,389.9946,482.286,386.8981" style="stroke:#181818;stroke-width:0.7741347905282332;"/><text fill="#000000" font-family="sans-serif" font-size="10.0638" font-weight="bold" lengthAdjust="spacing" textLength="17.8051" x="482.286" y="361.1978">2.4</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="136.2477" x="503.1876" y="349.4829">Add the implementation for</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="109.153" x="503.1876" y="361.1978">the Config trait for the</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="85.929" x="503.1876" y="372.9126">Scheduler pallet .</text><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="476.867" x2="509.3807" y1="421.1656" y2="421.1656"/><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="509.3807" x2="509.3807" y1="421.1656" y2="431.2294"/><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="477.6412" x2="509.3807" y1="431.2294" y2="431.2294"/><polygon fill="#181818" points="485.3825,428.1328,477.6412,431.2294,485.3825,434.3259,482.286,431.2294" style="stroke:#181818;stroke-width:0.7741347905282332;"/><text fill="#000000" font-family="sans-serif" font-size="10.0638" font-weight="bold" lengthAdjust="spacing" textLength="17.8051" x="482.286" y="411.3865">2.5</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="153.2787" x="503.1876" y="405.5291">Add the Scheduler pallet inside</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="151.7304" x="503.1876" y="417.2439">the construct_runtime! macro.</text><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="476.867" x2="509.3807" y1="465.4969" y2="465.4969"/><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="509.3807" x2="509.3807" y1="465.4969" y2="475.5607"/><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="477.6412" x2="509.3807" y1="475.5607" y2="475.5607"/><polygon fill="#181818" points="485.3825,472.4641,477.6412,475.5607,485.3825,478.6572,482.286,475.5607" style="stroke:#181818;stroke-width:0.7741347905282332;"/><text fill="#000000" font-family="sans-serif" font-size="10.0638" font-weight="bold" lengthAdjust="spacing" textLength="17.8051" x="482.286" y="455.7178">2.6</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="106.8306" x="503.1876" y="449.8604">Add the following trait</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="60.3825" x="503.1876" y="461.5752">dependency</text><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="476.867" x2="509.3807" y1="542.2633" y2="542.2633"/><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="509.3807" x2="509.3807" y1="542.2633" y2="552.327"/><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="477.6412" x2="509.3807" y1="552.327" y2="552.327"/><polygon fill="#181818" points="485.3825,549.2305,477.6412,552.327,485.3825,555.4236,482.286,552.327" style="stroke:#181818;stroke-width:0.7741347905282332;"/><text fill="#000000" font-family="sans-serif" font-size="10.0638" font-weight="bold" lengthAdjust="spacing" textLength="17.8051" x="482.286" y="532.4842">2.7</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="148.6339" x="503.1876" y="526.6267">Increment the spec_version in</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="129.2805" x="503.1876" y="538.3416">the RuntimeVersion struct</text><path d="M356.102,485.6244 L356.102,587.0361 L472.9964,587.0361 L472.9964,493.3658 L465.255,485.6244 L356.102,485.6244 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.3870673952641166;"/><path d="M465.255,485.6244 L465.255,493.3658 L472.9964,493.3658 L465.255,485.6244 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.3870673952641166;"/><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="100.6375" x="360.7468" y="498.8365">注意下列参数的意思：</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="60.3825" x="360.7468" y="510.5513">spec_name,</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="58.0601" x="360.7468" y="522.2662">impl_name,</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="91.3479" x="360.7468" y="533.981">authoring_version,</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="67.3497" x="360.7468" y="545.6959">spec_version,</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="65.0273" x="360.7468" y="557.4107">impl_version,</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="23.224" x="360.7468" y="569.1255">apis,</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="78.9617" x="360.7468" y="580.8404">traction_version</text><rect fill="#EEEEEE" height="2.3224" style="stroke:#EEEEEE;stroke-width:0.7741347905282332;" width="845.3552" x="0" y="606.8763"/><line style="stroke:#000000;stroke-width:0.7741347905282332;" x1="0" x2="845.3552" y1="606.8763" y2="606.8763"/><line style="stroke:#000000;stroke-width:0.7741347905282332;" x1="0" x2="845.3552" y1="609.1987" y2="609.1987"/><rect fill="#EEEEEE" height="17.9079" style="stroke:#000000;stroke-width:1.5482695810564664;" width="269.3989" x="287.9781" y="598.6965"/><text fill="#000000" font-family="sans-serif" font-size="10.0638" font-weight="bold" lengthAdjust="spacing" textLength="254.6903" x="292.623" y="611.1344">在第二个终端编译更新运行时，获取编译后的wasm文件</text><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="291.8488" x2="324.3625" y1="664.1351" y2="664.1351"/><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="324.3625" x2="324.3625" y1="664.1351" y2="674.1988"/><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="292.623" x2="324.3625" y1="674.1988" y2="674.1988"/><polygon fill="#181818" points="300.3643,671.1023,292.623,674.1988,300.3643,677.2954,297.2678,674.1988" style="stroke:#181818;stroke-width:0.7741347905282332;"/><text fill="#000000" font-family="sans-serif" font-size="10.0638" font-weight="bold" lengthAdjust="spacing" textLength="17.8051" x="297.2678" y="648.4985">3.1</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="140.8925" x="318.1694" y="636.7837">Build the updated runtime in</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="150.1821" x="318.1694" y="648.4985">the second terminal window or</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="16.2568" x="318.1694" y="660.2134">tab</text><path d="M3.8707,630.9259 L3.8707,673.5033 L287.9781,673.5033 L287.9781,638.6673 L280.2368,630.9259 L3.8707,630.9259 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.3870673952641166;"/><path d="M280.2368,630.9259 L280.2368,638.6673 L287.9781,638.6673 L280.2368,630.9259 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.3870673952641166;"/><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="168.7614" x="8.5155" y="644.138">without stopping the running node</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="232.2404" x="8.5155" y="655.8528">先检查：cargo check -p node-template-runtime</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="267.8506" x="8.5155" y="667.5677">再编译：cargo build --release -p node-template-runtim</text><rect fill="#EEEEEE" height="2.3224" style="stroke:#EEEEEE;stroke-width:0.7741347905282332;" width="845.3552" x="0" y="696.3131"/><line style="stroke:#000000;stroke-width:0.7741347905282332;" x1="0" x2="845.3552" y1="696.3131" y2="696.3131"/><line style="stroke:#000000;stroke-width:0.7741347905282332;" x1="0" x2="845.3552" y1="698.6355" y2="698.6355"/><rect fill="#EEEEEE" height="17.9079" style="stroke:#000000;stroke-width:1.5482695810564664;" width="267.0765" x="289.1393" y="688.1333"/><text fill="#000000" font-family="sans-serif" font-size="10.0638" font-weight="bold" lengthAdjust="spacing" textLength="252.3679" x="293.7842" y="700.5712">在波卡前端的extrinsics提交wasm文件升级runtime</text><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="664.9818" x2="697.4954" y1="753.5718" y2="753.5718"/><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="697.4954" x2="697.4954" y1="753.5718" y2="763.6356"/><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="665.7559" x2="697.4954" y1="763.6356" y2="763.6356"/><polygon fill="#181818" points="673.4973,760.539,665.7559,763.6356,673.4973,766.7321,670.4007,763.6356" style="stroke:#181818;stroke-width:0.7741347905282332;"/><text fill="#000000" font-family="sans-serif" font-size="10.0638" font-weight="bold" lengthAdjust="spacing" textLength="17.8051" x="670.4007" y="737.9353">4.1</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="140.1184" x="691.3024" y="726.2205">Connect to the local node to</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="136.2477" x="691.3024" y="737.9353">upgrade the runtime to use</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="106.0565" x="691.3024" y="749.6501">the new build artifact.</text><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="664.9818" x2="697.4954" y1="812.7659" y2="812.7659"/><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="697.4954" x2="697.4954" y1="812.7659" y2="822.8297"/><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="665.7559" x2="697.4954" y1="822.8297" y2="822.8297"/><polygon fill="#181818" points="673.4973,819.7331,665.7559,822.8297,673.4973,825.9262,670.4007,822.8297" style="stroke:#181818;stroke-width:0.7741347905282332;"/><text fill="#000000" font-family="sans-serif" font-size="10.0638" font-weight="bold" lengthAdjust="spacing" textLength="17.8051" x="670.4007" y="802.9868">4.2</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="132.377" x="691.3024" y="797.1294">Select the Alice account to</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="62.7049" x="691.3024" y="808.8442">submit a call</text><path d="M283.3333,773.6993 L283.3333,839.5008 L661.1111,839.5008 L661.1111,781.4407 L653.3698,773.6993 L283.3333,773.6993 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.3870673952641166;"/><path d="M653.3698,773.6993 L653.3698,781.4407 L661.1111,781.4407 L653.3698,773.6993 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.3870673952641166;"/><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="28.643" x="287.9781" y="786.9114">https:</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" font-style="italic" lengthAdjust="spacing" textLength="208.2423" x="316.6211" y="786.9114">polkadot.js.org/apps/#/extrinsics?rpc=ws:</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="74.3169" x="524.8634" y="786.9114">127.0.0.1:9944</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="162.5683" x="287.9781" y="798.6263">using the selected account: Alice</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="361.5209" x="287.9781" y="810.3411">submit the following extrinsic: sudo &gt; sudoUncheckedWeight(call, weight)</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="146.3115" x="287.9781" y="822.0559">call: system &gt; setCode(code)</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="109.9271" x="287.9781" y="833.7708">then toggle file upload</text><polygon fill="#181818" points="655.6922,865.3285,663.4335,868.425,655.6922,871.5216,658.7887,868.425" style="stroke:#181818;stroke-width:0.7741347905282332;"/><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="291.8488" x2="660.337" y1="868.425" y2="868.425"/><text fill="#000000" font-family="sans-serif" font-size="10.0638" font-weight="bold" lengthAdjust="spacing" textLength="17.8051" x="297.2678" y="864.5033">4.3</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="139.3443" x="318.1694" y="864.5033">编译生成的wasm文件用于上传</text><path d="M10.0638,847.7562 L10.0638,878.7216 L287.9781,878.7216 L287.9781,855.4976 L280.2368,847.7562 L10.0638,847.7562 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.3870673952641166;"/><path d="M280.2368,847.7562 L280.2368,855.4976 L287.9781,855.4976 L280.2368,847.7562 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.3870673952641166;"/><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="225.2732" x="14.7086" y="860.9683">target/release/wbuild/node-template-runtime/</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="261.6576" x="14.7086" y="872.6831">node_template_runtime.compact.compressed.wasm</text><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="664.9818" x2="697.4954" y1="934.3021" y2="934.3021"/><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="697.4954" x2="697.4954" y1="934.3021" y2="944.3658"/><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="665.7559" x2="697.4954" y1="944.3658" y2="944.3658"/><polygon fill="#181818" points="673.4973,941.2693,665.7559,944.3658,673.4973,947.4624,670.4007,944.3658" style="stroke:#181818;stroke-width:0.7741347905282332;"/><text fill="#000000" font-family="sans-serif" font-size="10.0638" font-weight="bold" lengthAdjust="spacing" textLength="17.8051" x="670.4007" y="912.8081">4.4</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="145.5373" x="691.3024" y="895.2359">Select file upload, then select</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="102.1858" x="691.3024" y="906.9507">or drag and drop the</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="136.2477" x="691.3024" y="918.6655">WebAssembly file that nyou</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="131.6029" x="691.3024" y="930.3804">generated for the runtime.</text><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="664.9818" x2="697.4954" y1="966.9185" y2="966.9185"/><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="697.4954" x2="697.4954" y1="966.9185" y2="976.9823"/><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="665.7559" x2="697.4954" y1="976.9823" y2="976.9823"/><polygon fill="#181818" points="673.4973,973.8858,665.7559,976.9823,673.4973,980.0788,670.4007,976.9823" style="stroke:#181818;stroke-width:0.7741347905282332;"/><text fill="#000000" font-family="sans-serif" font-size="10.0638" font-weight="bold" lengthAdjust="spacing" textLength="17.8051" x="670.4007" y="962.9968">4.5</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="124.6357" x="691.3024" y="962.9968">Click Submit Transaction.</text><rect fill="#EEEEEE" height="2.3224" style="stroke:#EEEEEE;stroke-width:0.7741347905282332;" width="845.3552" x="0" y="1004.954"/><line style="stroke:#000000;stroke-width:0.7741347905282332;" x1="0" x2="845.3552" y1="1004.954" y2="1004.954"/><line style="stroke:#000000;stroke-width:0.7741347905282332;" x1="0" x2="845.3552" y1="1007.2764" y2="1007.2764"/><rect fill="#EEEEEE" height="29.6228" style="stroke:#000000;stroke-width:1.5482695810564664;" width="308.8798" x="268.2377" y="990.9167"/><text fill="#000000" font-family="sans-serif" font-size="10.0638" font-weight="bold" lengthAdjust="spacing" textLength="298.0419" x="272.8825" y="1003.3547">现在runtime已经更新成功，节点模版包含Scheduler pallet。</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" font-weight="bold" lengthAdjust="spacing" textLength="267.8506" x="272.8825" y="1015.0695">可以使用the schedule函数进行自动更新spec_version</text><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="476.867" x2="509.3807" y1="1147.3645" y2="1147.3645"/><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="509.3807" x2="509.3807" y1="1147.3645" y2="1157.4283"/><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="477.6412" x2="509.3807" y1="1157.4283" y2="1157.4283"/><polygon fill="#181818" points="485.3825,1154.3317,477.6412,1157.4283,485.3825,1160.5248,482.286,1157.4283" style="stroke:#181818;stroke-width:0.7741347905282332;"/><text fill="#000000" font-family="sans-serif" font-size="10.0638" font-weight="bold" lengthAdjust="spacing" textLength="17.8051" x="482.286" y="1143.4428">5.1</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="102.1858" x="503.1876" y="1143.4428">update spec_version</text><path d="M134.6995,1032.1515 L134.6995,1262.0695 L472.9964,1262.0695 L472.9964,1039.8928 L465.255,1032.1515 L134.6995,1032.1515 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.3870673952641166;"/><path d="M465.255,1032.1515 L465.255,1039.8928 L472.9964,1039.8928 L465.255,1032.1515 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.3870673952641166;"/><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="82.8324" x="139.3443" y="1045.3636">runtime/src/lib.rs</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="282.5592" x="139.3443" y="1057.0784">pub const VERSION: RuntimeVersion = RuntimeVersion {</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="253.9162" x="142.4408" y="1068.7932">spec_name: create_runtime_str!("node-template"),</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="251.5938" x="142.4408" y="1080.5081">impl_name: create_runtime_str!("node-template"),</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="103.7341" x="142.4408" y="1092.2229">authoring_version: 1,</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="222.1767" x="142.4408" y="1103.9378">spec_version: 102,  // *Increment* this value.</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="77.4135" x="142.4408" y="1115.6526">impl_version: 1,</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="150.9563" x="142.4408" y="1127.3674">apis: RUNTIME_API_VERSIONS,</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="112.2495" x="142.4408" y="1139.0823">transaction_version: 1,</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="9.2896" x="139.3443" y="1150.7971">};</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="3.0965" x="139.3443" y="1162.5119"> </text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="3.0965" x="139.3443" y="1174.2268">/</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" font-weight="bold" lengthAdjust="spacing" textLength="33.2878" x="142.4408" y="1174.2268">* snip</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="8.5155" x="179.5993" y="1174.2268">*/</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="3.0965" x="139.3443" y="1185.9416"> </text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="98.3151" x="139.3443" y="1197.6565">parameter_types! {</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="318.9435" x="142.4408" y="1209.3713">pub const ExistentialDeposit: u128 = 1000;  // Update this value.</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="154.827" x="142.4408" y="1221.0861">pub const MaxLocks: u32 = 50;</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="6.1931" x="139.3443" y="1232.801">}</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="3.0965" x="139.3443" y="1244.5158"> </text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="3.0965" x="139.3443" y="1256.2306">/</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" font-weight="bold" lengthAdjust="spacing" textLength="33.2878" x="142.4408" y="1256.2306">* snip</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="8.5155" x="179.5993" y="1256.2306">*/</text><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="291.8488" x2="324.3625" y1="1309.2827" y2="1309.2827"/><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="324.3625" x2="324.3625" y1="1309.2827" y2="1319.3464"/><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="292.623" x2="324.3625" y1="1319.3464" y2="1319.3464"/><polygon fill="#181818" points="300.3643,1316.2499,292.623,1319.3464,300.3643,1322.443,297.2678,1319.3464" style="stroke:#181818;stroke-width:0.7741347905282332;"/><text fill="#000000" font-family="sans-serif" font-size="10.0638" font-weight="bold" lengthAdjust="spacing" textLength="17.8051" x="297.2678" y="1305.361">6.1</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="149.408" x="318.1694" y="1305.361">再次编译运行时，获取wasm文件</text><path d="M3.8707,1270.2161 L3.8707,1347.6296 L287.9781,1347.6296 L287.9781,1277.9574 L280.2368,1270.2161 L3.8707,1270.2161 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.3870673952641166;"/><path d="M280.2368,1270.2161 L280.2368,1277.9574 L287.9781,1277.9574 L280.2368,1270.2161 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.3870673952641166;"/><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="219.0801" x="8.5155" y="1283.4282">This will override any previous build artifacts!</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="225.2732" x="8.5155" y="1295.143">So if you want to have a copy on hand of your</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="144.7632" x="8.5155" y="1306.8578">last runtime Wasm build files,</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="192.7596" x="8.5155" y="1318.5727">be sure to copy them somewhere else.</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="232.2404" x="8.5155" y="1330.2875">先检查：cargo check -p node-template-runtime</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="267.8506" x="8.5155" y="1342.0023">再编译：cargo build --release -p node-template-runtim</text><polygon fill="#181818" points="655.6922,1365.3802,663.4335,1368.4768,655.6922,1371.5733,658.7887,1368.4768" style="stroke:#181818;stroke-width:0.7741347905282332;"/><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="291.8488" x2="660.337" y1="1368.4768" y2="1368.4768"/><text fill="#000000" font-family="sans-serif" font-size="10.0638" font-weight="bold" lengthAdjust="spacing" textLength="17.8051" x="297.2678" y="1364.5551">6.2</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="68.898" x="318.1694" y="1364.5551">提供wasm文件</text><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="664.9818" x2="697.4954" y1="1391.0295" y2="1391.0295"/><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="697.4954" x2="697.4954" y1="1391.0295" y2="1401.0933"/><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="665.7559" x2="697.4954" y1="1401.0933" y2="1401.0933"/><polygon fill="#181818" points="673.4973,1397.9967,665.7559,1401.0933,673.4973,1404.1898,670.4007,1401.0933" style="stroke:#181818;stroke-width:0.7741347905282332;"/><text fill="#000000" font-family="sans-serif" font-size="10.0638" font-weight="bold" lengthAdjust="spacing" textLength="17.8051" x="670.4007" y="1387.1078">6.3</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="100.6375" x="691.3024" y="1387.1078">打开对应功能上传文件</text><path d="M356.8761,1381.25 L356.8761,1400.6034 L661.1111,1400.6034 L661.1111,1388.9913 L653.3698,1381.25 L356.8761,1381.25 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.3870673952641166;"/><path d="M653.3698,1381.25 L653.3698,1388.9913 L661.1111,1388.9913 L653.3698,1381.25 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.3870673952641166;"/><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="28.643" x="361.5209" y="1394.4621">https:</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" font-style="italic" lengthAdjust="spacing" textLength="185.0182" x="390.1639" y="1394.4621">polkadot.js.org/apps/#/sudo?rpc=ws:</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="74.3169" x="575.1821" y="1394.4621">127.0.0.1:9944</text><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="664.9818" x2="697.4954" y1="1435.3608" y2="1435.3608"/><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="697.4954" x2="697.4954" y1="1435.3608" y2="1445.4246"/><line style="stroke:#181818;stroke-width:0.7741347905282332;" x1="665.7559" x2="697.4954" y1="1445.4246" y2="1445.4246"/><polygon fill="#181818" points="673.4973,1442.328,665.7559,1445.4246,673.4973,1448.5211,670.4007,1445.4246" style="stroke:#181818;stroke-width:0.7741347905282332;"/><text fill="#000000" font-family="sans-serif" font-size="10.0638" font-weight="bold" lengthAdjust="spacing" textLength="17.8051" x="670.4007" y="1425.5817">6.4</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="140.8925" x="691.3024" y="1419.7243">查看区块，等到达到指定条件，</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="40.255" x="691.3024" y="1431.4391">自动更新</text><path d="M339.8452,1419.7239 L339.8452,1439.0773 L661.1111,1439.0773 L661.1111,1427.4652 L653.3698,1419.7239 L339.8452,1419.7239 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.3870673952641166;"/><path d="M653.3698,1419.7239 L653.3698,1427.4652 L661.1111,1427.4652 L653.3698,1419.7239 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.3870673952641166;"/><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="28.643" x="344.49" y="1432.936">https:</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" font-style="italic" lengthAdjust="spacing" textLength="202.0492" x="373.133" y="1432.936">polkadot.js.org/apps/#/explorer?rpc=ws:</text><text fill="#000000" font-family="sans-serif" font-size="10.0638" lengthAdjust="spacing" textLength="74.3169" x="575.1821" y="1432.936">127.0.0.1:9944</text></g></svg></figure>
<h3 id="第一次更新运行时"><a class="header" href="#第一次更新运行时">第一次更新运行时</a></h3>
<ol>
<li>使用alice账户上传wasm文件
<img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/CleanShot%202022-07-24%20at%2018.28.35.png" alt="CleanShot 2022-07-24 at 18.28.35" /></li>
<li>node-template版本更新
<img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/image-20220724183043916.png" alt="image-20220724183043916" /></li>
<li>已经添加新的交易函数scheduler
<img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/CleanShot%202022-07-24%20at%2018.41.44.png" alt="CleanShot 2022-07-24 at 18.41.44" /></li>
</ol>
<h3 id="第二次上传文件设置自动执行条件"><a class="header" href="#第二次上传文件设置自动执行条件">第二次上传文件设置自动执行条件</a></h3>
<ol>
<li>使用scheduler函数
<img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/CleanShot%202022-07-24%20at%2018.47.40.png" alt="CleanShot 2022-07-24 at 18.47.40" /></li>
<li>达到条件自动触发
<img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/CleanShot%202022-07-24%20at%2018.49.14.png" alt="CleanShot 2022-07-24 at 18.49.14" /></li>
</ol>
<h1 id="work-with-pallets"><a class="header" href="#work-with-pallets">Work with pallets</a></h1>
<h2 id="文档代码更新问题"><a class="header" href="#文档代码更新问题">文档/代码更新问题</a></h2>
<pre><code class="language-admonisth warn title='substrate文档更新带来的问题'">由于目前substrate的源码和文档都在快速更新，所以可能出现一些未曾说过的问题。
比如链接找不到、目录里面不存在对应文章链接、编译时依赖包版本冲突。
这些都需要对文档的熟悉、对rust编程的熟悉才能轻松越过。
</code></pre>
<div id="admonition-排地雷" class="admonition note">
<div class="admonition-title">
<p>排地雷</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#admonition-排地雷"></a></p>
</div>
<div>
<p>由于官方文档和代码一直都在更新，可能会出现问题，这里就需要根据默认依赖的substrate分支进行更换</p>
<pre><code class="language-toml">[dependencies]
sp-std = { version = &quot;4.0.0-dev&quot;, default-features = false, git = &quot;https://github.com/paritytech/substrate.git&quot;, branch = &quot;polkadot-v0.9.24&quot; }
</code></pre>
<p>如上所示，对应的分支为：branch = “polkadot-v0.9.24”, 所以需要改成：</p>
<pre><code class="language-toml">[dependencies.pallet-nicks]
default-features = false
git = 'https://github.com/paritytech/substrate.git'
#tag = 'monthly-2021-10'
#tag = 'monthly-2022-04'
branch = &quot;polkadot-v0.9.24&quot;
version = '4.0.0-dev'
</code></pre>
<blockquote>
<p>详见: <a href="layer5_ecosystem/7_business/blockchain/substrate//layer2_design_abstract/6_module_manage/cargo_rustc.html#cargo-%E4%B8%8E-git-%E7%9A%84%E5%85%B3%E8%81%94">cargo 与 git</a></p>
</blockquote>
</div>
</div>
<h2 id="pallet前置rust知识"><a class="header" href="#pallet前置rust知识">Pallet前置Rust知识</a></h2>
<p><a id="Pallet-Preset"></a>Pallet-Preset</p>
<h2 id="add-a-pallet-to-the-runtime"><a class="header" href="#add-a-pallet-to-the-runtime">Add a pallet to the runtime</a></h2>
<blockquote>
<p>设置昵称：添加第一个Pallet到Runtime</p>
</blockquote>
<blockquote>
<p>substrate node template提供了一个最小的可工作的运行时，但是为了保持精炼，它并不包括Frame中的大多数的Pallet</p>
</blockquote>
<div id="admonition-官方教程地址" class="admonition info">
<div class="admonition-title">
<p>官方教程地址</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#admonition-官方教程地址"></a></p>
</div>
<div>
<p><a href="https://docs.substrate.io/tutorials/work-with-pallets/add-a-pallet/">Add a pallet to the runtime | Substrate_ Docs</a></p>
</div>
</div>
<p>接下来接着使用前面的node template</p>
<h3 id="runtime结构分析"><a class="header" href="#runtime结构分析">runtime结构分析</a></h3>
<pre><code class="language-shell">tree -L 2 runtime                                                                                               ─╯
runtime
├── Cargo.toml
├── build.rs
└── src
    └── lib.rs

1 directory, 3 files
</code></pre>
<h3 id="时序图-1"><a class="header" href="#时序图-1">时序图</a></h3>
<figure><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1382.1347px" preserveAspectRatio="none" style="width:850px;height:1382px;background:#FFFFFF;" version="1.1" viewBox="0 0 850 1382" width="850.6435px" zoomAndPan="magnify"><defs/><g><line style="stroke:#181818;stroke-width:0.6434519303557911;stroke-dasharray:5.0,5.0;" x1="50.1893" x2="50.1893" y1="102.8116" y2="1297.5208"/><line style="stroke:#181818;stroke-width:0.6434519303557911;stroke-dasharray:5.0,5.0;" x1="353.8986" x2="353.8986" y1="102.8116" y2="1297.5208"/><line style="stroke:#181818;stroke-width:0.6434519303557911;stroke-dasharray:5.0,5.0;" x1="598.4103" x2="598.4103" y1="102.8116" y2="1297.5208"/><rect fill="#E2E2F0" height="78.8229" rx="3.2173" ry="3.2173" style="stroke:#181818;stroke-width:0.6434519303557911;" width="87.5095" x="6.4345" y="22.7018"/><text fill="#000000" font-family="sans-serif" font-size="23.1643" font-weight="bold" lengthAdjust="spacing" textLength="69.4928" x="15.4428" y="53.2117">运行时</text><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="6.4345" x2="93.944" y1="65.1093" y2="65.1093"/><text fill="#000000" font-family="sans-serif" font-size="18.0167" lengthAdjust="spacing" textLength="54.05" x="23.1643" y="88.2673">运行时</text><rect fill="#E2E2F0" height="78.8229" rx="3.2173" ry="3.2173" style="stroke:#181818;stroke-width:0.6434519303557911;" width="87.5095" x="6.4345" y="1296.2339"/><text fill="#000000" font-family="sans-serif" font-size="23.1643" font-weight="bold" lengthAdjust="spacing" textLength="69.4928" x="15.4428" y="1326.7438">运行时</text><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="6.4345" x2="93.944" y1="1338.6414" y2="1338.6414"/><text fill="#000000" font-family="sans-serif" font-size="18.0167" lengthAdjust="spacing" textLength="54.05" x="23.1643" y="1361.7994">运行时</text><rect fill="#E2E2F0" height="78.8229" rx="3.2173" ry="3.2173" style="stroke:#181818;stroke-width:0.6434519303557911;" width="144.1332" x="281.8319" y="22.7018"/><text fill="#000000" font-family="sans-serif" font-size="23.1643" font-weight="bold" lengthAdjust="spacing" textLength="46.3285" x="330.7343" y="53.2117">终端</text><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="281.8319" x2="425.9652" y1="65.1093" y2="65.1093"/><text fill="#000000" font-family="sans-serif" font-size="18.0167" lengthAdjust="spacing" textLength="126.1166" x="290.8403" y="88.2673">用于检查和编译</text><rect fill="#E2E2F0" height="78.8229" rx="3.2173" ry="3.2173" style="stroke:#181818;stroke-width:0.6434519303557911;" width="144.1332" x="281.8319" y="1296.2339"/><text fill="#000000" font-family="sans-serif" font-size="23.1643" font-weight="bold" lengthAdjust="spacing" textLength="46.3285" x="330.7343" y="1326.7438">终端</text><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="281.8319" x2="425.9652" y1="1338.6414" y2="1338.6414"/><text fill="#000000" font-family="sans-serif" font-size="18.0167" lengthAdjust="spacing" textLength="126.1166" x="290.8403" y="1361.7994">用于检查和编译</text><rect fill="#E2E2F0" height="78.8229" rx="3.2173" ry="3.2173" style="stroke:#181818;stroke-width:0.6434519303557911;" width="320.4391" x="438.8342" y="22.7018"/><text fill="#000000" font-family="sans-serif" font-size="23.1643" font-weight="bold" lengthAdjust="spacing" textLength="302.4224" x="447.8425" y="53.2117">Polkadot-JS application</text><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="438.8342" x2="759.2733" y1="65.1093" y2="65.1093"/><text fill="#000000" font-family="sans-serif" font-size="18.0167" lengthAdjust="spacing" textLength="72.0666" x="563.0204" y="88.2673">波卡前端</text><rect fill="#E2E2F0" height="78.8229" rx="3.2173" ry="3.2173" style="stroke:#181818;stroke-width:0.6434519303557911;" width="320.4391" x="438.8342" y="1296.2339"/><text fill="#000000" font-family="sans-serif" font-size="23.1643" font-weight="bold" lengthAdjust="spacing" textLength="302.4224" x="447.8425" y="1326.7438">Polkadot-JS application</text><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="438.8342" x2="759.2733" y1="1338.6414" y2="1338.6414"/><text fill="#000000" font-family="sans-serif" font-size="18.0167" lengthAdjust="spacing" textLength="72.0666" x="563.0204" y="1361.7994">波卡前端</text><rect fill="#EEEEEE" height="3.8607" style="stroke:#EEEEEE;stroke-width:1.2869038607115821;" width="842.2786" x="0" y="142.1476"/><line style="stroke:#000000;stroke-width:1.2869038607115821;" x1="0" x2="842.2786" y1="142.1476" y2="142.1476"/><line style="stroke:#000000;stroke-width:1.2869038607115821;" x1="0" x2="842.2786" y1="146.0083" y2="146.0083"/><rect fill="#EEEEEE" height="29.7697" style="stroke:#000000;stroke-width:2.5738077214231643;" width="167.2975" x="337.4905" y="128.5496"/><text fill="#000000" font-family="sans-serif" font-size="16.7298" font-weight="bold" lengthAdjust="spacing" textLength="142.8463" x="345.212" y="149.2262">添加pallet-nicks</text><rect height="50.32" style="stroke:#000000;stroke-width:1.9303557910673732;fill:none;" width="371.9152" x="2.5738" y="171.1884"/><path d="M2.5738,171.1884 L87.5095,171.1884 L87.5095,180.1967 L74.6404,193.0657 L2.5738,193.0657 L2.5738,171.1884 " fill="#EEEEEE" style="stroke:#000000;stroke-width:2.5738077214231643;"/><text fill="#000000" font-family="sans-serif" font-size="16.7298" font-weight="bold" lengthAdjust="spacing" textLength="27.025" x="19.3036" y="189.2911">ref</text><text fill="#000000" font-family="sans-serif" font-size="15.4428" lengthAdjust="spacing" textLength="361.62" x="7.7214" y="212.5478">substrate-node-template/runtime/Cargo.toml</text><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="50.1893" x2="104.2392" y1="255.1387" y2="255.1387"/><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="104.2392" x2="104.2392" y1="255.1387" y2="271.8685"/><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="51.4762" x2="104.2392" y1="271.8685" y2="271.8685"/><polygon fill="#181818" points="64.3452,266.7209,51.4762,271.8685,64.3452,277.0161,59.1976,271.8685" style="stroke:#181818;stroke-width:1.2869038607115821;"/><text fill="#000000" font-family="sans-serif" font-size="16.7298" lengthAdjust="spacing" textLength="204.6177" x="59.1976" y="248.6194">添加pallet依赖pallet-nicks</text><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="50.1893" x2="104.2392" y1="309.3596" y2="309.3596"/><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="104.2392" x2="104.2392" y1="309.3596" y2="326.0894"/><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="51.4762" x2="104.2392" y1="326.0894" y2="326.0894"/><polygon fill="#181818" points="64.3452,320.9418,51.4762,326.0894,64.3452,331.237,59.1976,326.0894" style="stroke:#181818;stroke-width:1.2869038607115821;"/><text fill="#000000" font-family="sans-serif" font-size="16.7298" lengthAdjust="spacing" textLength="230.3558" x="59.1976" y="302.8403">添加pallet-nicks/std features</text><polygon fill="#181818" points="338.4557,338.9584,351.3248,344.106,338.4557,349.2536,343.6033,344.106" style="stroke:#181818;stroke-width:1.2869038607115821;"/><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="50.1893" x2="346.1771" y1="344.106" y2="344.106"/><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="353.8986" x2="407.9485" y1="381.5972" y2="381.5972"/><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="407.9485" x2="407.9485" y1="381.5972" y2="398.3269"/><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="355.1855" x2="407.9485" y1="398.3269" y2="398.3269"/><polygon fill="#181818" points="368.0545,393.1793,355.1855,398.3269,368.0545,403.4745,362.9069,398.3269" style="stroke:#181818;stroke-width:1.2869038607115821;"/><text fill="#000000" font-family="sans-serif" font-size="16.7298" lengthAdjust="spacing" textLength="99.0916" x="362.9069" y="375.0778">cargo check</text><polygon fill="#181818" points="64.3452,411.1959,51.4762,416.3436,64.3452,421.4912,59.1976,416.3436" style="stroke:#181818;stroke-width:1.2869038607115821;"/><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="56.6238" x2="352.6117" y1="416.3436" y2="416.3436"/><rect height="50.32" style="stroke:#000000;stroke-width:1.9303557910673732;fill:none;" width="352.6117" x="2.5738" y="426.6388"/><path d="M2.5738,426.6388 L87.5095,426.6388 L87.5095,435.6471 L74.6404,448.5162 L2.5738,448.5162 L2.5738,426.6388 " fill="#EEEEEE" style="stroke:#000000;stroke-width:2.5738077214231643;"/><text fill="#000000" font-family="sans-serif" font-size="16.7298" font-weight="bold" lengthAdjust="spacing" textLength="27.025" x="19.3036" y="444.7415">ref</text><text fill="#000000" font-family="sans-serif" font-size="15.4428" lengthAdjust="spacing" textLength="342.3164" x="7.7214" y="467.9982">substrate-node-template/runtime/src/lib.rs</text><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="50.1893" x2="104.2392" y1="510.5892" y2="510.5892"/><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="104.2392" x2="104.2392" y1="510.5892" y2="527.3189"/><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="51.4762" x2="104.2392" y1="527.3189" y2="527.3189"/><polygon fill="#181818" points="64.3452,522.1713,51.4762,527.3189,64.3452,532.4665,59.1976,527.3189" style="stroke:#181818;stroke-width:1.2869038607115821;"/><text fill="#000000" font-family="sans-serif" font-size="16.7298" lengthAdjust="spacing" textLength="236.7903" x="59.1976" y="504.0698">impl-实现新增pallet对应的功能</text><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="50.1893" x2="104.2392" y1="564.81" y2="564.81"/><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="104.2392" x2="104.2392" y1="564.81" y2="581.5398"/><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="51.4762" x2="104.2392" y1="581.5398" y2="581.5398"/><polygon fill="#181818" points="64.3452,576.3922,51.4762,581.5398,64.3452,586.6874,59.1976,581.5398" style="stroke:#181818;stroke-width:1.2869038607115821;"/><text fill="#000000" font-family="sans-serif" font-size="16.7298" lengthAdjust="spacing" textLength="285.6927" x="59.1976" y="558.2907">construct_runtime!宏添加新增pallet</text><polygon fill="#181818" points="338.4557,594.4088,351.3248,599.5564,338.4557,604.7041,343.6033,599.5564" style="stroke:#181818;stroke-width:1.2869038607115821;"/><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="50.1893" x2="346.1771" y1="599.5564" y2="599.5564"/><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="353.8986" x2="407.9485" y1="637.0476" y2="637.0476"/><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="407.9485" x2="407.9485" y1="637.0476" y2="653.7773"/><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="355.1855" x2="407.9485" y1="653.7773" y2="653.7773"/><polygon fill="#181818" points="368.0545,648.6297,355.1855,653.7773,368.0545,658.9249,362.9069,653.7773" style="stroke:#181818;stroke-width:1.2869038607115821;"/><text fill="#000000" font-family="sans-serif" font-size="16.7298" lengthAdjust="spacing" textLength="99.0916" x="362.9069" y="630.5282">cargo check</text><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="353.8986" x2="407.9485" y1="691.2685" y2="691.2685"/><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="407.9485" x2="407.9485" y1="691.2685" y2="707.9982"/><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="355.1855" x2="407.9485" y1="707.9982" y2="707.9982"/><polygon fill="#181818" points="368.0545,702.8506,355.1855,707.9982,368.0545,713.1458,362.9069,707.9982" style="stroke:#181818;stroke-width:1.2869038607115821;"/><text fill="#000000" font-family="sans-serif" font-size="16.7298" lengthAdjust="spacing" textLength="168.5844" x="362.9069" y="684.7491">cargo build --release</text><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="353.8986" x2="407.9485" y1="745.4893" y2="745.4893"/><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="407.9485" x2="407.9485" y1="745.4893" y2="762.2191"/><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="355.1855" x2="407.9485" y1="762.2191" y2="762.2191"/><polygon fill="#181818" points="368.0545,757.0715,355.1855,762.2191,368.0545,767.3667,362.9069,762.2191" style="stroke:#181818;stroke-width:1.2869038607115821;"/><text fill="#000000" font-family="sans-serif" font-size="16.7298" lengthAdjust="spacing" textLength="117.1083" x="362.9069" y="738.97">start the node</text><polygon fill="#181818" points="583.6109,775.0881,596.4799,780.2357,583.6109,785.3834,588.7585,780.2357" style="stroke:#181818;stroke-width:1.2869038607115821;"/><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="353.8986" x2="591.3323" y1="780.2357" y2="780.2357"/><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="599.0537" x2="653.1037" y1="817.7269" y2="817.7269"/><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="653.1037" x2="653.1037" y1="817.7269" y2="834.4566"/><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="600.3407" x2="653.1037" y1="834.4566" y2="834.4566"/><polygon fill="#181818" points="613.2097,829.309,600.3407,834.4566,613.2097,839.6042,608.0621,834.4566" style="stroke:#181818;stroke-width:1.2869038607115821;"/><text fill="#000000" font-family="sans-serif" font-size="16.7298" lengthAdjust="spacing" textLength="184.0273" x="608.0621" y="811.2075">切换连接到本地测试网络</text><rect height="50.32" style="stroke:#000000;stroke-width:1.9303557910673732;fill:none;" width="328.1605" x="434.9735" y="844.7518"/><path d="M434.9735,844.7518 L519.9092,844.7518 L519.9092,853.7602 L507.0401,866.6292 L434.9735,866.6292 L434.9735,844.7518 " fill="#EEEEEE" style="stroke:#000000;stroke-width:2.5738077214231643;"/><text fill="#000000" font-family="sans-serif" font-size="16.7298" font-weight="bold" lengthAdjust="spacing" textLength="27.025" x="451.7033" y="862.8546">ref</text><text fill="#000000" font-family="sans-serif" font-size="15.4428" lengthAdjust="spacing" textLength="214.9129" x="470.3634" y="886.1112">其实pallet的源码都是单独一个</text><a href="https://github.com/paritytech/substrate/blob/master/frame/nicks/src/lib.rs" target="_top" title="https://github.com/paritytech/substrate/blob/master/frame/nicks/src/lib.rs" xlink:actuate="onRequest" xlink:href="https://github.com/paritytech/substrate/blob/master/frame/nicks/src/lib.rs" xlink:show="new" xlink:title="https://github.com/paritytech/substrate/blob/master/frame/nicks/src/lib.rs" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="15.4428" lengthAdjust="spacing" text-decoration="underline" textLength="42.4678" x="685.2763" y="886.1112">crate</text></a><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="599.0537" x2="653.1037" y1="1011.8332" y2="1011.8332"/><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="653.1037" x2="653.1037" y1="1011.8332" y2="1028.5629"/><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="600.3407" x2="653.1037" y1="1028.5629" y2="1028.5629"/><polygon fill="#181818" points="613.2097,1023.4153,600.3407,1028.5629,613.2097,1033.7106,608.0621,1028.5629" style="stroke:#181818;stroke-width:1.2869038607115821;"/><text fill="#000000" font-family="sans-serif" font-size="16.7298" lengthAdjust="spacing" textLength="128.6904" x="608.0621" y="1005.3138">测试新增pallet的</text><a href="https://github.com/paritytech/substrate/blob/master/frame/nicks/src/lib.rs#L137-L157" target="_top" title="https://github.com/paritytech/substrate/blob/master/frame/nicks/src/lib.rs#L137-L157" xlink:actuate="onRequest" xlink:href="https://github.com/paritytech/substrate/blob/master/frame/nicks/src/lib.rs#L137-L157" xlink:show="new" xlink:title="https://github.com/paritytech/substrate/blob/master/frame/nicks/src/lib.rs#L137-L157" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="16.7298" lengthAdjust="spacing" text-decoration="underline" textLength="75.9273" x="736.7525" y="1005.3138">setName</text></a><path d="M118.3952,907.9408 L118.3952,1115.1324 L591.9758,1115.1324 L591.9758,920.8099 L579.1067,907.9408 L118.3952,907.9408 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.6434519303557911;"/><path d="M579.1067,907.9408 L579.1067,920.8099 L591.9758,920.8099 L579.1067,907.9408 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.6434519303557911;"/><text fill="#000000" font-family="sans-serif" font-size="16.7298" lengthAdjust="spacing" textLength="82.3618" x="126.1166" y="929.9043">[package]</text><text fill="#000000" font-family="sans-serif" font-size="16.7298" lengthAdjust="spacing" textLength="177.5927" x="126.1166" y="949.3788">name = "pallet-nicks"</text><text fill="#000000" font-family="sans-serif" font-size="16.7298" lengthAdjust="spacing" textLength="173.732" x="126.1166" y="968.8532">version = "4.0.0-dev"</text><text fill="#000000" font-family="sans-serif" font-size="16.7298" lengthAdjust="spacing" textLength="438.8342" x="126.1166" y="988.3277">authors = ["Parity Technologies &lt;admin@parity.io&gt;"]</text><text fill="#000000" font-family="sans-serif" font-size="16.7298" lengthAdjust="spacing" textLength="133.838" x="126.1166" y="1007.8022">edition = "2021"</text><text fill="#000000" font-family="sans-serif" font-size="16.7298" lengthAdjust="spacing" textLength="187.888" x="126.1166" y="1027.2767">license = "Apache-2.0"</text><text fill="#000000" font-family="sans-serif" font-size="16.7298" lengthAdjust="spacing" textLength="281.8319" x="126.1166" y="1046.7511">homepage = "https://substrate.io"</text><text fill="#000000" font-family="sans-serif" font-size="16.7298" lengthAdjust="spacing" textLength="446.5556" x="126.1166" y="1066.2256">repository = "https://github.com/paritytech/substrate/"</text><text fill="#000000" font-family="sans-serif" font-size="16.7298" lengthAdjust="spacing" textLength="414.383" x="126.1166" y="1085.7001">description = "FRAME pallet for nick management"</text><text fill="#000000" font-family="sans-serif" font-size="16.7298" lengthAdjust="spacing" textLength="203.3308" x="126.1166" y="1105.1746">readme = "README.md"</text><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="599.0537" x2="653.1037" y1="1149.185" y2="1149.185"/><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="653.1037" x2="653.1037" y1="1149.185" y2="1165.9148"/><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="600.3407" x2="653.1037" y1="1165.9148" y2="1165.9148"/><polygon fill="#181818" points="613.2097,1160.7672,600.3407,1165.9148,613.2097,1171.0624,608.0621,1165.9148" style="stroke:#181818;stroke-width:1.2869038607115821;"/><text fill="#000000" font-family="sans-serif" font-size="16.7298" lengthAdjust="spacing" textLength="128.6904" x="608.0621" y="1142.6657">测试新增pallet的</text><a href="https://github.com/paritytech/substrate/blob/master/frame/nicks/src/lib.rs#L110-L113" target="_top" title="https://github.com/paritytech/substrate/blob/master/frame/nicks/src/lib.rs#L110-L113" xlink:actuate="onRequest" xlink:href="https://github.com/paritytech/substrate/blob/master/frame/nicks/src/lib.rs#L110-L113" xlink:show="new" xlink:title="https://github.com/paritytech/substrate/blob/master/frame/nicks/src/lib.rs#L110-L113" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="16.7298" lengthAdjust="spacing" text-decoration="underline" textLength="63.0583" x="736.7525" y="1142.6657">nameof</text></a><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="599.0537" x2="653.1037" y1="1203.4059" y2="1203.4059"/><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="653.1037" x2="653.1037" y1="1203.4059" y2="1220.1357"/><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="600.3407" x2="653.1037" y1="1220.1357" y2="1220.1357"/><polygon fill="#181818" points="613.2097,1214.9881,600.3407,1220.1357,613.2097,1225.2833,608.0621,1220.1357" style="stroke:#181818;stroke-width:1.2869038607115821;"/><text fill="#000000" font-family="sans-serif" font-size="16.7298" lengthAdjust="spacing" textLength="128.6904" x="608.0621" y="1196.8866">测试新增pallet的</text><a href="https://github.com/paritytech/substrate/blob/master/frame/nicks/src/lib.rs#L159-L180" target="_top" title="https://github.com/paritytech/substrate/blob/master/frame/nicks/src/lib.rs#L159-L180" xlink:actuate="onRequest" xlink:href="https://github.com/paritytech/substrate/blob/master/frame/nicks/src/lib.rs#L159-L180" xlink:show="new" xlink:title="https://github.com/paritytech/substrate/blob/master/frame/nicks/src/lib.rs#L159-L180" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="16.7298" lengthAdjust="spacing" text-decoration="underline" textLength="96.5178" x="736.7525" y="1196.8866">clear_name</text></a><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="599.0537" x2="653.1037" y1="1257.6268" y2="1257.6268"/><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="653.1037" x2="653.1037" y1="1257.6268" y2="1274.3565"/><line style="stroke:#181818;stroke-width:1.2869038607115821;" x1="600.3407" x2="653.1037" y1="1274.3565" y2="1274.3565"/><polygon fill="#181818" points="613.2097,1269.2089,600.3407,1274.3565,613.2097,1279.5042,608.0621,1274.3565" style="stroke:#181818;stroke-width:1.2869038607115821;"/><text fill="#000000" font-family="sans-serif" font-size="16.7298" lengthAdjust="spacing" textLength="128.6904" x="608.0621" y="1251.1074">测试新增pallet的</text><a href="https://github.com/paritytech/substrate/blob/master/frame/nicks/src/lib.rs#L182-L211" target="_top" title="https://github.com/paritytech/substrate/blob/master/frame/nicks/src/lib.rs#L182-L211" xlink:actuate="onRequest" xlink:href="https://github.com/paritytech/substrate/blob/master/frame/nicks/src/lib.rs#L182-L211" xlink:show="new" xlink:title="https://github.com/paritytech/substrate/blob/master/frame/nicks/src/lib.rs#L182-L211" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="16.7298" lengthAdjust="spacing" text-decoration="underline" textLength="77.2142" x="736.7525" y="1251.1074">kill_name</text></a><rect height="14.9804" style="stroke:#00000000;stroke-width:1.2869038607115821;fill:none;" width="95.2309" x="745.7608" y="6.4345"/><text fill="#888888" font-family="sans-serif" font-size="12.869" lengthAdjust="spacing" textLength="95.2309" x="745.7608" y="18.3799">add pallet-nicks</text></g></svg></figure>
<h2 id="specify-the-origin-for-a-call"><a class="header" href="#specify-the-origin-for-a-call">Specify the origin for a call</a></h2>
<blockquote>
<p>此小节接着上节内容进行修改，主要是强化权限</p>
</blockquote>
<ul>
<li><a href="https://docs.substrate.io/tutorials/work-with-pallets/specify-the-origin-for-a-call/">Specify the origin for a call | Substrate_ Docs</a></li>
</ul>
<h4 id="为帐户设置昵称"><a class="header" href="#为帐户设置昵称">为帐户设置昵称</a></h4>
<ul>
<li>检查帐户选择列表以验证当前选择了 Alice 帐户。</li>
<li>在 Pallet Interactor 组件中，确认选择了 Extrinsic。</li>
<li>从可调用的托盘列表中选择nicks。</li>
<li>选择 <strong>settName</strong> 作为要从 nicks palette 调用的函数。</li>
<li>键入一个长于 MinNickLength（8 个字符）且不长于 MaxNickLength（32 个字符）的名称。</li>
<li>单击Signed以执行该功能。</li>
</ul>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/CleanShot%202022-07-03%20at%2010.51.26.png" alt="CleanShot 2022-07-03 at 10.51.26" /></p>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/CleanShot%202022-07-03%20at%2010.54.34.png" alt="CleanShot 2022-07-03 at 10.54.34" /></p>
<h4 id="使用nicks-pallet查询账户信息"><a class="header" href="#使用nicks-pallet查询账户信息">使用Nicks pallet查询账户信息</a></h4>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/CleanShot%202022-07-03%20at%2011.00.08.png" alt="CleanShot 2022-07-03 at 11.00.08" /></p>
<ul>
<li>
<p>按图所示进行设置，查询，复制Alice的地址进行查询会返回一个元组，里面的两个值分别指：</p>
<ul>
<li>Alice 帐户的十六进制编码昵称。</li>
<li>为保护昵称而从 Alice 的账户中保留的金额。</li>
</ul>
</li>
</ul>
<blockquote>
<p>如果使用Bob的地址，会返回None，因为没有给他设置昵称。</p>
</blockquote>
<h3 id="可能出现的问题"><a class="header" href="#可能出现的问题">可能出现的问题</a></h3>
<ul>
<li><a href="https://github.com/substrate-developer-hub/pallet-did/issues/9">Conflicts when adding pallet to substrate-node-template · Issue #9 · substrate-developer-hub/pallet-did</a></li>
<li><a href="https://substrate.stackexchange.com/questions/2774/error-failed-to-select-a-version-for-parity-util-mem">substrate node template - “error: failed to select a version for <code>parity-util-mem</code>” - Substrate and Polkadot Stack Exchange</a></li>
</ul>
<blockquote>
<p><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#substrate%E5%AE%98%E6%96%B9%E6%95%99%E7%A8%8B%E6%A2%B3%E7%90%86%E4%B8%8E%E7%BB%83%E4%B9%A0">返回顶部</a></p>
</blockquote>
<blockquote>
<p>指定调用源头unsigned, signed or sudo</p>
</blockquote>
<ul>
<li><a href="https://docs.substrate.io/tutorials/work-with-pallets/specify-origin/">Specify the origin for a call | Substrate_ Docs</a></li>
</ul>
<blockquote>
<p>前面已经介绍用Alice的地址来设置并查询nickname(setName)，里面还有其他函数(killName、forceName、clearName)这里将会进行调用验证</p>
</blockquote>
<h3 id="signed与sudo有不同权限"><a class="header" href="#signed与sudo有不同权限">signed与sudo有不同权限。</a></h3>
<p>点击Sudo按钮将会发出一个 Sudid 事件以通知节点参与者 Root 源发送了一个呼叫。 但是，内部调度会因 DispatchError 而失败（Sudo 按钮的 sudo 函数是“外部”调度）。</p>
<blockquote>
<p>特别是，这是 DispatchError::Module 变体的一个实例，它会提供两个元数据：一个索引号和一个错误号。</p>
</blockquote>
<ul>
<li>索引号与产生错误的pallet有关；它对应于construct_runtime!中pallet的索引（位置）！。</li>
<li>错误编号与该托盘的错误枚举中相关变体的索引相对应。</li>
</ul>
<blockquote>
<p>使用这些数字查找托盘错误时，请记住索引是从零开始。</p>
</blockquote>
<p>比如：</p>
<ul>
<li>索引为 9（第十个托盘），对应nicks,</li>
<li>错误为 2（第三个错误）,
对应<a href="https://github.com/paritytech/substrate/blob/master/frame/nicks/src/lib.rs#L99-L108">substrate源码</a>中定义的第三个错误</li>
</ul>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/// Error for the nicks pallet.
#[pallet::error]
pub enum Error&lt;T&gt; {
    /// A name is too short.    
    TooShort,
    /// A name is too long.
    TooLong,
    /// An account isn't named.
    Unnamed,
}
<span class="boring">}
</span></code></pre></pre>
<ul>
<li>取决于您的construct_runtime中尼克斯托盘的位置！宏，您可能会看到不同的索引编号。不管 index 的值如何，你应该看到错误值是 2，它对应于 Nick 的 Pallet 的 Error 枚举的第三个变体，Unnamed
变体。这应该不足为奇，因为 Bob 尚未保留昵称，因此无法清除！</li>
</ul>
<h2 id="configure-the-contracts-pallet"><a class="header" href="#configure-the-contracts-pallet">Configure the contracts pallet</a></h2>
<figure><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1159.0432px" preserveAspectRatio="none" style="width:850px;height:1159px;background:#FFFFFF;" version="1.1" viewBox="0 0 850 1159" width="850.5247px" zoomAndPan="magnify"><defs/><g><line style="stroke:#181818;stroke-width:0.2623456790123457;stroke-dasharray:5.0,5.0;" x1="359.4136" x2="359.4136" y1="41.9179" y2="1124.5898"/><line style="stroke:#181818;stroke-width:0.2623456790123457;stroke-dasharray:5.0,5.0;" x1="501.0802" x2="501.0802" y1="41.9179" y2="1124.5898"/><line style="stroke:#181818;stroke-width:0.2623456790123457;stroke-dasharray:5.0,5.0;" x1="609.6914" x2="609.6914" y1="41.9179" y2="1124.5898"/><line style="stroke:#181818;stroke-width:0.2623456790123457;stroke-dasharray:5.0,5.0;" x1="764.213" x2="764.213" y1="41.9179" y2="1124.5898"/><rect fill="#E2E2F0" height="32.1373" rx="1.3117" ry="1.3117" style="stroke:#181818;stroke-width:0.2623456790123457;" width="35.679" x="341.5741" y="9.2559"/><text fill="#000000" font-family="sans-serif" font-size="9.4444" font-weight="bold" lengthAdjust="spacing" textLength="28.3333" x="345.2469" y="21.6953">运行时</text><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="341.5741" x2="377.2531" y1="26.5461" y2="26.5461"/><text fill="#000000" font-family="sans-serif" font-size="7.3457" lengthAdjust="spacing" textLength="27.8086" x="345.5093" y="35.988">runtime</text><rect fill="#E2E2F0" height="32.1373" rx="1.3117" ry="1.3117" style="stroke:#181818;stroke-width:0.2623456790123457;" width="35.679" x="341.5741" y="1124.0652"/><text fill="#000000" font-family="sans-serif" font-size="9.4444" font-weight="bold" lengthAdjust="spacing" textLength="28.3333" x="345.2469" y="1136.5045">运行时</text><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="341.5741" x2="377.2531" y1="1141.3554" y2="1141.3554"/><text fill="#000000" font-family="sans-serif" font-size="7.3457" lengthAdjust="spacing" textLength="27.8086" x="345.5093" y="1150.7973">runtime</text><rect fill="#E2E2F0" height="32.1373" rx="1.3117" ry="1.3117" style="stroke:#181818;stroke-width:0.2623456790123457;" width="58.7654" x="471.6975" y="9.2559"/><text fill="#000000" font-family="sans-serif" font-size="9.4444" font-weight="bold" lengthAdjust="spacing" textLength="18.8889" x="491.6358" y="21.6953">终端</text><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="471.6975" x2="530.463" y1="26.5461" y2="26.5461"/><text fill="#000000" font-family="sans-serif" font-size="7.3457" lengthAdjust="spacing" textLength="51.4198" x="475.3704" y="35.988">用于检查和编译</text><rect fill="#E2E2F0" height="32.1373" rx="1.3117" ry="1.3117" style="stroke:#181818;stroke-width:0.2623456790123457;" width="58.7654" x="471.6975" y="1124.0652"/><text fill="#000000" font-family="sans-serif" font-size="9.4444" font-weight="bold" lengthAdjust="spacing" textLength="18.8889" x="491.6358" y="1136.5045">终端</text><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="471.6975" x2="530.463" y1="1141.3554" y2="1141.3554"/><text fill="#000000" font-family="sans-serif" font-size="7.3457" lengthAdjust="spacing" textLength="51.4198" x="475.3704" y="1150.7973">用于检查和编译</text><rect fill="#E2E2F0" height="32.1373" rx="1.3117" ry="1.3117" style="stroke:#181818;stroke-width:0.2623456790123457;" width="26.2346" x="596.5741" y="9.2559"/><text fill="#000000" font-family="sans-serif" font-size="9.4444" font-weight="bold" lengthAdjust="spacing" textLength="18.8889" x="600.2469" y="21.6953">节点</text><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="596.5741" x2="622.8086" y1="26.5461" y2="26.5461"/><text fill="#000000" font-family="sans-serif" font-size="7.3457" lengthAdjust="spacing" textLength="18.8889" x="600.2469" y="35.988">node</text><rect fill="#E2E2F0" height="32.1373" rx="1.3117" ry="1.3117" style="stroke:#181818;stroke-width:0.2623456790123457;" width="26.2346" x="596.5741" y="1124.0652"/><text fill="#000000" font-family="sans-serif" font-size="9.4444" font-weight="bold" lengthAdjust="spacing" textLength="18.8889" x="600.2469" y="1136.5045">节点</text><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="596.5741" x2="622.8086" y1="1141.3554" y2="1141.3554"/><text fill="#000000" font-family="sans-serif" font-size="7.3457" lengthAdjust="spacing" textLength="18.8889" x="600.2469" y="1150.7973">node</text><rect fill="#E2E2F0" height="32.1373" rx="1.3117" ry="1.3117" style="stroke:#181818;stroke-width:0.2623456790123457;" width="130.6481" x="699.1512" y="9.2559"/><text fill="#000000" font-family="sans-serif" font-size="9.4444" font-weight="bold" lengthAdjust="spacing" textLength="123.3025" x="702.8241" y="21.6953">Polkadot-JS application</text><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="699.1512" x2="829.7994" y1="26.5461" y2="26.5461"/><text fill="#000000" font-family="sans-serif" font-size="7.3457" lengthAdjust="spacing" textLength="29.3827" x="749.784" y="35.988">波卡前端</text><rect fill="#E2E2F0" height="32.1373" rx="1.3117" ry="1.3117" style="stroke:#181818;stroke-width:0.2623456790123457;" width="130.6481" x="699.1512" y="1124.0652"/><text fill="#000000" font-family="sans-serif" font-size="9.4444" font-weight="bold" lengthAdjust="spacing" textLength="123.3025" x="702.8241" y="1136.5045">Polkadot-JS application</text><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="699.1512" x2="829.7994" y1="1141.3554" y2="1141.3554"/><text fill="#000000" font-family="sans-serif" font-size="7.3457" lengthAdjust="spacing" textLength="29.3827" x="749.784" y="1150.7973">波卡前端</text><rect fill="#EEEEEE" height="1.5741" style="stroke:#EEEEEE;stroke-width:0.5246913580246914;" width="846.8519" x="0" y="57.9558"/><line style="stroke:#000000;stroke-width:0.5246913580246914;" x1="0" x2="846.8519" y1="57.9558" y2="57.9558"/><line style="stroke:#000000;stroke-width:0.5246913580246914;" x1="0" x2="846.8519" y1="59.5299" y2="59.5299"/><rect fill="#EEEEEE" height="12.1376" style="stroke:#000000;stroke-width:1.0493827160493827;" width="98.1173" x="374.3673" y="52.4117"/><text fill="#000000" font-family="sans-serif" font-size="6.821" font-weight="bold" lengthAdjust="spacing" textLength="88.1481" x="377.5154" y="60.8419">添加pallet-contracts依赖</text><rect height="20.5163" style="stroke:#000000;stroke-width:0.787037037037037;fill:none;" width="151.6358" x="340" y="69.7962"/><path d="M340,69.7962 L374.6296,69.7962 L374.6296,73.4691 L369.3827,78.716 L340,78.716 L340,69.7962 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0493827160493827;"/><text fill="#000000" font-family="sans-serif" font-size="6.821" font-weight="bold" lengthAdjust="spacing" textLength="11.0185" x="346.821" y="77.177">ref</text><text fill="#000000" font-family="sans-serif" font-size="6.2963" lengthAdjust="spacing" textLength="147.4383" x="342.0988" y="86.6591">substrate-node-template/runtime/Cargo.toml</text><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="359.4136" x2="381.4506" y1="104.0242" y2="104.0242"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="381.4506" x2="381.4506" y1="104.0242" y2="110.8451"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="359.9383" x2="381.4506" y1="110.8451" y2="110.8451"/><polygon fill="#181818" points="365.1852,108.7464,359.9383,110.8451,365.1852,112.9439,363.0864,110.8451" style="stroke:#181818;stroke-width:0.5246913580246914;"/><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="98.1173" x="363.0864" y="101.3661">添加pallet依赖pallet-contracts</text><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="359.4136" x2="381.4506" y1="126.1309" y2="126.1309"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="381.4506" x2="381.4506" y1="126.1309" y2="132.9519"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="359.9383" x2="381.4506" y1="132.9519" y2="132.9519"/><polygon fill="#181818" points="365.1852,130.8531,359.9383,132.9519,365.1852,135.0506,363.0864,132.9519" style="stroke:#181818;stroke-width:0.5246913580246914;"/><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="133.2716" x="363.0864" y="123.4728">添加pallet依赖pallet-contracts-primitives</text><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="359.4136" x2="381.4506" y1="156.1777" y2="156.1777"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="381.4506" x2="381.4506" y1="156.1777" y2="162.9986"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="359.9383" x2="381.4506" y1="162.9986" y2="162.9986"/><polygon fill="#181818" points="365.1852,160.8999,359.9383,162.9986,365.1852,165.0974,363.0864,162.9986" style="stroke:#181818;stroke-width:0.5246913580246914;"/><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="42.5" x="363.0864" y="145.5796">std features:</text><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="76.6049" x="363.0864" y="153.5196">添加上述两个pallet的std</text><path d="M245.5556,141.6093 L245.5556,162.5969 L356.7901,162.5969 L356.7901,146.8562 L351.5432,141.6093 L245.5556,141.6093 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2623456790123457;"/><path d="M351.5432,141.6093 L351.5432,146.8562 L356.7901,146.8562 L351.5432,141.6093 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2623456790123457;"/><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="65.0617" x="248.7037" y="150.5641">pallet-contracts/std</text><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="100.216" x="248.7037" y="158.5042">pallet-contracts-primitives/std</text><polygon fill="#181818" points="494.784,168.2456,500.0309,170.3443,494.784,172.4431,496.8827,170.3443" style="stroke:#181818;stroke-width:0.5246913580246914;"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="359.4136" x2="497.9321" y1="170.3443" y2="170.3443"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="501.0802" x2="523.1173" y1="185.6301" y2="185.6301"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="523.1173" x2="523.1173" y1="185.6301" y2="192.4511"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="501.6049" x2="523.1173" y1="192.4511" y2="192.4511"/><polygon fill="#181818" points="506.8519,190.3523,501.6049,192.4511,506.8519,194.5498,504.7531,192.4511" style="stroke:#181818;stroke-width:0.5246913580246914;"/><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="40.4012" x="504.7531" y="182.972">cargo check</text><rect fill="#EEEEEE" height="1.5741" style="stroke:#EEEEEE;stroke-width:0.5246913580246914;" width="846.8519" x="0" y="207.4396"/><line style="stroke:#000000;stroke-width:0.5246913580246914;" x1="0" x2="846.8519" y1="207.4396" y2="207.4396"/><line style="stroke:#000000;stroke-width:0.5246913580246914;" x1="0" x2="846.8519" y1="209.0137" y2="209.0137"/><rect fill="#EEEEEE" height="12.1376" style="stroke:#000000;stroke-width:1.0493827160493827;" width="53.5185" x="396.6667" y="201.8955"/><text fill="#000000" font-family="sans-serif" font-size="6.821" font-weight="bold" lengthAdjust="spacing" textLength="43.5494" x="399.8148" y="210.3257">实现配置trait</text><polygon fill="#181818" points="365.1852,220.3294,359.9383,222.4281,365.1852,224.5269,363.0864,222.4281" style="stroke:#181818;stroke-width:0.5246913580246914;"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="362.037" x2="500.5556" y1="222.4281" y2="222.4281"/><rect height="20.5163" style="stroke:#000000;stroke-width:0.787037037037037;fill:none;" width="143.7654" x="340" y="226.6257"/><path d="M340,226.6257 L374.6296,226.6257 L374.6296,230.2985 L369.3827,235.5454 L340,235.5454 L340,226.6257 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0493827160493827;"/><text fill="#000000" font-family="sans-serif" font-size="6.821" font-weight="bold" lengthAdjust="spacing" textLength="11.0185" x="346.821" y="234.0065">ref</text><text fill="#000000" font-family="sans-serif" font-size="6.2963" lengthAdjust="spacing" textLength="139.5679" x="342.0988" y="243.4886">substrate-node-template/runtime/src/lib.rs</text><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="359.4136" x2="381.4506" y1="260.8536" y2="260.8536"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="381.4506" x2="381.4506" y1="260.8536" y2="267.6746"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="359.9383" x2="381.4506" y1="267.6746" y2="267.6746"/><polygon fill="#181818" points="365.1852,265.5758,359.9383,267.6746,365.1852,269.7733,363.0864,267.6746" style="stroke:#181818;stroke-width:0.5246913580246914;"/><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="91.821" x="363.0864" y="258.1955">更新pub use frame_support</text><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="359.4136" x2="381.4506" y1="282.9603" y2="282.9603"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="381.4506" x2="381.4506" y1="282.9603" y2="289.7813"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="359.9383" x2="381.4506" y1="289.7813" y2="289.7813"/><polygon fill="#181818" points="365.1852,287.6825,359.9383,289.7813,365.1852,291.8801,363.0864,289.7813" style="stroke:#181818;stroke-width:0.5246913580246914;"/><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="13.642" x="363.0864" y="280.3023">引入</text><path d="M123.3025,276.332 L123.3025,289.4493 L356.7901,289.4493 L356.7901,281.5789 L351.5432,276.332 L123.3025,276.332 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2623456790123457;"/><path d="M351.5432,276.332 L351.5432,281.5789 L356.7901,281.5789 L351.5432,276.332 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2623456790123457;"/><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="222.4691" x="126.4506" y="285.2868">use pallet_contracts::DefaultContractAccessWeight; // Add this line</text><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="359.4136" x2="381.4506" y1="366.7511" y2="366.7511"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="381.4506" x2="381.4506" y1="366.7511" y2="373.572"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="359.9383" x2="381.4506" y1="373.572" y2="373.572"/><polygon fill="#181818" points="365.1852,371.4733,359.9383,373.572,365.1852,375.6708,363.0864,373.572" style="stroke:#181818;stroke-width:0.5246913580246914;"/><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="100.216" x="363.0864" y="364.093">添加pallet-contracts用到的参数</text><path d="M48.2716,296.6023 L48.2716,436.6949 L356.7901,436.6949 L356.7901,301.8492 L351.5432,296.6023 L48.2716,296.6023 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2623456790123457;"/><path d="M351.5432,296.6023 L351.5432,301.8492 L356.7901,301.8492 L351.5432,296.6023 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2623456790123457;"/><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="65.5864" x="51.4198" y="305.5571">/* After this block */</text><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="137.9938" x="51.4198" y="313.4972">// Time is measured by number of blocks.</text><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="297.5" x="51.4198" y="321.4372">pub const MINUTES: BlockNumber = 60_000 / (MILLISECS_PER_BLOCK as BlockNumber);</text><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="167.9012" x="51.4198" y="329.3773">pub const HOURS: BlockNumber = MINUTES * 60;</text><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="155.8333" x="51.4198" y="337.3174">pub const DAYS: BlockNumber = HOURS * 24;</text><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="2.0988" x="51.4198" y="345.2574"> </text><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="62.4383" x="51.4198" y="353.1975">/* Add this block */</text><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="77.6543" x="51.4198" y="361.1375">// Contracts price units.</text><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="170" x="51.4198" y="369.0776">pub const MILLICENTS: Balance = 1_000_000_000;</text><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="167.9012" x="51.4198" y="377.0176">pub const CENTS: Balance = 1_000 * MILLICENTS;</text><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="152.6852" x="51.4198" y="384.9577">pub const DOLLARS: Balance = 100 * CENTS;</text><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="2.0988" x="51.4198" y="392.8978"> </text><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="179.4444" x="51.4198" y="400.8378">const fn deposit(items: u32, bytes: u32) -&gt; Balance {</text><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="219.321" x="51.4198" y="408.7779">items as Balance * 15 * CENTS + (bytes as Balance) * 6 * CENTS</text><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="4.1975" x="51.4198" y="416.7179">}</text><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="245.5556" x="51.4198" y="424.658">const AVERAGE_ON_INITIALIZE_RATIO: Perbill = Perbill::from_percent(10);</text><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="2.0988" x="51.4198" y="432.598">/</text><text fill="#000000" font-family="sans-serif" font-size="6.821" font-weight="bold" lengthAdjust="spacing" textLength="72.9321" x="53.5185" y="432.598">* End Added Block</text><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="5.7716" x="129.0741" y="432.598">*/</text><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="359.4136" x2="381.4506" y1="450.5418" y2="450.5418"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="381.4506" x2="381.4506" y1="450.5418" y2="457.3628"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="359.9383" x2="381.4506" y1="457.3628" y2="457.3628"/><polygon fill="#181818" points="365.1852,455.264,359.9383,457.3628,365.1852,459.4616,363.0864,457.3628" style="stroke:#181818;stroke-width:0.5246913580246914;"/><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="121.7284" x="363.0864" y="447.8838">parameter_types!添加用到的参数类型</text><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="359.4136" x2="381.4506" y1="472.6485" y2="472.6485"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="381.4506" x2="381.4506" y1="472.6485" y2="479.4695"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="359.9383" x2="381.4506" y1="479.4695" y2="479.4695"/><polygon fill="#181818" points="365.1852,477.3708,359.9383,479.4695,365.1852,481.5683,363.0864,479.4695" style="stroke:#181818;stroke-width:0.5246913580246914;"/><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="96.5432" x="363.0864" y="469.9905">impl-实现新增pallet对应的功能</text><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="359.4136" x2="381.4506" y1="494.7553" y2="494.7553"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="381.4506" x2="381.4506" y1="494.7553" y2="501.5762"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="359.9383" x2="381.4506" y1="501.5762" y2="501.5762"/><polygon fill="#181818" points="365.1852,499.4775,359.9383,501.5762,365.1852,503.675,363.0864,501.5762" style="stroke:#181818;stroke-width:0.5246913580246914;"/><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="116.4815" x="363.0864" y="492.0972">construct_runtime!宏添加新增pallet</text><polygon fill="#181818" points="494.784,506.8232,500.0309,508.9219,494.784,511.0207,496.8827,508.9219" style="stroke:#181818;stroke-width:0.5246913580246914;"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="359.4136" x2="497.9321" y1="508.9219" y2="508.9219"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="501.0802" x2="523.1173" y1="524.2077" y2="524.2077"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="523.1173" x2="523.1173" y1="524.2077" y2="531.0286"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="501.6049" x2="523.1173" y1="531.0286" y2="531.0286"/><polygon fill="#181818" points="506.8519,528.9299,501.6049,531.0286,506.8519,533.1274,504.7531,531.0286" style="stroke:#181818;stroke-width:0.5246913580246914;"/><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="40.4012" x="504.7531" y="521.5496">cargo check</text><polygon fill="#181818" points="365.1852,536.2756,359.9383,538.3743,365.1852,540.4731,363.0864,538.3743" style="stroke:#181818;stroke-width:0.5246913580246914;"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="362.037" x2="500.5556" y1="538.3743" y2="538.3743"/><rect fill="#EEEEEE" height="1.5741" style="stroke:#EEEEEE;stroke-width:0.5246913580246914;" width="846.8519" x="0" y="553.3629"/><line style="stroke:#000000;stroke-width:0.5246913580246914;" x1="0" x2="846.8519" y1="553.3629" y2="553.3629"/><line style="stroke:#000000;stroke-width:0.5246913580246914;" x1="0" x2="846.8519" y1="554.9369" y2="554.9369"/><rect fill="#EEEEEE" height="12.1376" style="stroke:#000000;stroke-width:1.0493827160493827;" width="63.4877" x="391.6821" y="547.8188"/><text fill="#000000" font-family="sans-serif" font-size="6.821" font-weight="bold" lengthAdjust="spacing" textLength="53.5185" x="394.8302" y="556.2489">对外暴露合约API</text><rect height="20.5163" style="stroke:#000000;stroke-width:0.787037037037037;fill:none;" width="151.6358" x="340" y="565.2033"/><path d="M340,565.2033 L374.6296,565.2033 L374.6296,568.8761 L369.3827,574.123 L340,574.123 L340,565.2033 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0493827160493827;"/><text fill="#000000" font-family="sans-serif" font-size="6.821" font-weight="bold" lengthAdjust="spacing" textLength="11.0185" x="346.821" y="572.584">ref</text><text fill="#000000" font-family="sans-serif" font-size="6.2963" lengthAdjust="spacing" textLength="147.4383" x="342.0988" y="582.0662">substrate-node-template/runtime/Cargo.toml</text><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="359.4136" x2="381.4506" y1="599.4312" y2="599.4312"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="381.4506" x2="381.4506" y1="599.4312" y2="606.2522"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="359.9383" x2="381.4506" y1="606.2522" y2="606.2522"/><polygon fill="#181818" points="365.1852,604.1534,359.9383,606.2522,365.1852,608.3509,363.0864,606.2522" style="stroke:#181818;stroke-width:0.5246913580246914;"/><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="134.321" x="363.0864" y="596.7731">添加依赖pallet-contracts-rpc-runtime-api</text><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="359.4136" x2="381.4506" y1="621.5379" y2="621.5379"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="381.4506" x2="381.4506" y1="621.5379" y2="628.3589"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="359.9383" x2="381.4506" y1="628.3589" y2="628.3589"/><polygon fill="#181818" points="365.1852,626.2601,359.9383,628.3589,365.1852,630.4577,363.0864,628.3589" style="stroke:#181818;stroke-width:0.5246913580246914;"/><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="50.3704" x="363.0864" y="618.8799">添加std feature</text><rect height="20.5163" style="stroke:#000000;stroke-width:0.787037037037037;fill:none;" width="143.7654" x="340" y="632.5564"/><path d="M340,632.5564 L374.6296,632.5564 L374.6296,636.2293 L369.3827,641.4762 L340,641.4762 L340,632.5564 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0493827160493827;"/><text fill="#000000" font-family="sans-serif" font-size="6.821" font-weight="bold" lengthAdjust="spacing" textLength="11.0185" x="346.821" y="639.9372">ref</text><text fill="#000000" font-family="sans-serif" font-size="6.2963" lengthAdjust="spacing" textLength="139.5679" x="342.0988" y="649.4193">substrate-node-template/runtime/src/lib.rs</text><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="359.4136" x2="381.4506" y1="666.7843" y2="666.7843"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="381.4506" x2="381.4506" y1="666.7843" y2="673.6053"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="359.9383" x2="381.4506" y1="673.6053" y2="673.6053"/><polygon fill="#181818" points="365.1852,671.5066,359.9383,673.6053,365.1852,675.7041,363.0864,673.6053" style="stroke:#181818;stroke-width:0.5246913580246914;"/><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="27.284" x="363.0864" y="664.1263">添加常量</text><path d="M181.0185,660.156 L181.0185,673.2733 L356.7901,673.2733 L356.7901,665.4029 L351.5432,660.156 L181.0185,660.156 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2623456790123457;"/><path d="M351.5432,660.156 L351.5432,665.4029 L356.7901,665.4029 L351.5432,660.156 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2623456790123457;"/><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="164.7531" x="184.1667" y="669.1109">const CONTRACTS_DEBUG_OUTPUT: bool = true;</text><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="359.4136" x2="381.4506" y1="730.7249" y2="730.7249"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="381.4506" x2="381.4506" y1="730.7249" y2="737.5459"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="359.9383" x2="381.4506" y1="737.5459" y2="737.5459"/><polygon fill="#181818" points="365.1852,735.4472,359.9383,737.5459,365.1852,739.6447,363.0864,737.5459" style="stroke:#181818;stroke-width:0.5246913580246914;"/><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="110.1852" x="363.0864" y="728.0669">实现运行时api,impl_runtime_apis!</text><path d="M2.6235,680.4263 L2.6235,780.6424 L356.7901,780.6424 L356.7901,685.6732 L351.5432,680.4263 L2.6235,680.4263 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2623456790123457;"/><path d="M351.5432,680.4263 L351.5432,685.6732 L356.7901,685.6732 L351.5432,680.4263 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2623456790123457;"/><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="2.0988" x="5.7716" y="689.3812">/</text><text fill="#000000" font-family="sans-serif" font-size="6.821" font-weight="bold" lengthAdjust="spacing" textLength="62.4383" x="7.8704" y="689.3812">* Add this block</text><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="5.7716" x="72.9321" y="689.3812">*/</text><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="343.1481" x="5.7716" y="697.3212">impl pallet_contracts_rpc_runtime_api::ContractsApi&lt;Block, AccountId, Balance, BlockNumber, Hash&gt;</text><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="38.8272" x="7.8704" y="705.2613">for Runtime</text><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="4.1975" x="7.8704" y="713.2013">{</text><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="251.3272" x="9.9691" y="721.1414">fn call(...) -&gt; pallet_contracts_primitives::ContractExecResult&lt;Balance&gt; {}</text><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="2.0988" x="5.7716" y="729.0814"> </text><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="333.179" x="9.9691" y="737.0215">fn instantiate(...) -&gt; pallet_contracts_primitives::ContractInstantiateResult&lt;AccountId, Balance&gt; {}</text><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="2.0988" x="5.7716" y="744.9616"> </text><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="300.6481" x="9.9691" y="752.9016">fn upload_code(...) -&gt; pallet_contracts_primitives::CodeUploadResult&lt;Hash, Balance&gt; {}</text><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="2.0988" x="5.7716" y="760.8417"> </text><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="236.6358" x="9.9691" y="768.7817">fn get_storage(...) -&gt; pallet_contracts_primitives::GetStorageResult {}</text><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="4.1975" x="9.9691" y="776.7218">}</text><polygon fill="#181818" points="494.784,784.6267,500.0309,786.7255,494.784,788.8243,496.8827,786.7255" style="stroke:#181818;stroke-width:0.5246913580246914;"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="359.4136" x2="497.9321" y1="786.7255" y2="786.7255"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="501.0802" x2="523.1173" y1="802.0112" y2="802.0112"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="523.1173" x2="523.1173" y1="802.0112" y2="808.8322"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="501.6049" x2="523.1173" y1="808.8322" y2="808.8322"/><polygon fill="#181818" points="506.8519,806.7335,501.6049,808.8322,506.8519,810.931,504.7531,808.8322" style="stroke:#181818;stroke-width:0.5246913580246914;"/><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="40.4012" x="504.7531" y="799.3532">cargo check</text><rect fill="#EEEEEE" height="1.5741" style="stroke:#EEEEEE;stroke-width:0.5246913580246914;" width="846.8519" x="0" y="823.8208"/><line style="stroke:#000000;stroke-width:0.5246913580246914;" x1="0" x2="846.8519" y1="823.8208" y2="823.8208"/><line style="stroke:#000000;stroke-width:0.5246913580246914;" x1="0" x2="846.8519" y1="825.3948" y2="825.3948"/><rect fill="#EEEEEE" height="12.1376" style="stroke:#000000;stroke-width:1.0493827160493827;" width="100.7407" x="373.0556" y="818.2767"/><text fill="#000000" font-family="sans-serif" font-size="6.821" font-weight="bold" lengthAdjust="spacing" textLength="90.7716" x="376.2037" y="826.7068">更新节点，添加对应RPC功能</text><polygon fill="#181818" points="603.3951,836.7106,608.642,838.8093,603.3951,840.9081,605.4938,838.8093" style="stroke:#181818;stroke-width:0.5246913580246914;"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="501.0802" x2="606.5432" y1="838.8093" y2="838.8093"/><rect height="20.5163" style="stroke:#000000;stroke-width:0.787037037037037;fill:none;" width="143.2407" x="595" y="843.0068"/><path d="M595,843.0068 L629.6296,843.0068 L629.6296,846.6797 L624.3827,851.9266 L595,851.9266 L595,843.0068 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0493827160493827;"/><text fill="#000000" font-family="sans-serif" font-size="6.821" font-weight="bold" lengthAdjust="spacing" textLength="11.0185" x="601.821" y="850.3876">ref</text><text fill="#000000" font-family="sans-serif" font-size="6.2963" lengthAdjust="spacing" textLength="139.0432" x="597.0988" y="859.8697">substrate-node-template/node/Cargo.toml</text><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="609.6914" x2="631.7284" y1="877.2348" y2="877.2348"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="631.7284" x2="631.7284" y1="877.2348" y2="884.0557"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="610.216" x2="631.7284" y1="884.0557" y2="884.0557"/><polygon fill="#181818" points="615.463,881.957,610.216,884.0557,615.463,886.1545,613.3642,884.0557" style="stroke:#181818;stroke-width:0.5246913580246914;"/><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="147.4383" x="613.3642" y="874.5767">更新依赖pallet-contracts\pallet-contracts-rpc</text><rect height="20.5163" style="stroke:#000000;stroke-width:0.787037037037037;fill:none;" width="138.5185" x="595" y="888.2533"/><path d="M595,888.2533 L629.6296,888.2533 L629.6296,891.9261 L624.3827,897.173 L595,897.173 L595,888.2533 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0493827160493827;"/><text fill="#000000" font-family="sans-serif" font-size="6.821" font-weight="bold" lengthAdjust="spacing" textLength="11.0185" x="601.821" y="895.6341">ref</text><text fill="#000000" font-family="sans-serif" font-size="6.2963" lengthAdjust="spacing" textLength="134.321" x="597.0988" y="905.1162">substrate-node-template/node/src/rpc.rs</text><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="609.6914" x2="631.7284" y1="938.3613" y2="938.3613"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="631.7284" x2="631.7284" y1="938.3613" y2="945.1823"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="610.216" x2="631.7284" y1="945.1823" y2="945.1823"/><polygon fill="#181818" points="615.463,943.0835,610.216,945.1823,615.463,947.2811,613.3642,945.1823" style="stroke:#181818;stroke-width:0.5246913580246914;"/><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="25.7099" x="613.3642" y="919.8231">更新use</text><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="97.5926" x="613.3642" y="927.7632">node_template_runtime::{...,</text><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="70.8333" x="613.3642" y="935.7033">Hash, BlockNumber}</text><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="609.6914" x2="631.7284" y1="960.468" y2="960.468"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="631.7284" x2="631.7284" y1="960.468" y2="967.289"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="610.216" x2="631.7284" y1="967.289" y2="967.289"/><polygon fill="#181818" points="615.463,965.1902,610.216,967.289,615.463,969.3878,613.3642,967.289" style="stroke:#181818;stroke-width:0.5246913580246914;"/><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="25.7099" x="613.3642" y="957.81">添加use</text><path d="M397.716,953.8397 L397.716,966.957 L607.0679,966.957 L607.0679,959.0866 L601.821,953.8397 L397.716,953.8397 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2623456790123457;"/><path d="M601.821,953.8397 L601.821,959.0866 L607.0679,959.0866 L601.821,953.8397 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2623456790123457;"/><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="198.3333" x="400.8642" y="962.7946">use pallet_contracts_rpc::{Contracts, ContractsApiServer};</text><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="609.6914" x2="631.7284" y1="982.5747" y2="982.5747"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="631.7284" x2="631.7284" y1="982.5747" y2="989.3957"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="610.216" x2="631.7284" y1="989.3957" y2="989.3957"/><polygon fill="#181818" points="615.463,987.297,610.216,989.3957,615.463,991.4945,613.3642,989.3957" style="stroke:#181818;stroke-width:0.5246913580246914;"/><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="95.4938" x="613.3642" y="979.9167">create_full函数中添加RPC扩展</text><polygon fill="#181818" points="506.8519,994.6427,501.6049,996.7414,506.8519,998.8402,504.7531,996.7414" style="stroke:#181818;stroke-width:0.5246913580246914;"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="503.7037" x2="609.1667" y1="996.7414" y2="996.7414"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="501.0802" x2="523.1173" y1="1012.0272" y2="1012.0272"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="523.1173" x2="523.1173" y1="1012.0272" y2="1018.8481"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="501.6049" x2="523.1173" y1="1018.8481" y2="1018.8481"/><polygon fill="#181818" points="506.8519,1016.7494,501.6049,1018.8481,506.8519,1020.9469,504.7531,1018.8481" style="stroke:#181818;stroke-width:0.5246913580246914;"/><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="101.2654" x="504.7531" y="1009.3691">cargo check -p node-template</text><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="501.0802" x2="523.1173" y1="1034.1339" y2="1034.1339"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="523.1173" x2="523.1173" y1="1034.1339" y2="1040.9549"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="501.6049" x2="523.1173" y1="1040.9549" y2="1040.9549"/><polygon fill="#181818" points="506.8519,1038.8561,501.6049,1040.9549,506.8519,1043.0536,504.7531,1040.9549" style="stroke:#181818;stroke-width:0.5246913580246914;"/><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="68.7346" x="504.7531" y="1031.4758">cargo build --release</text><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="501.0802" x2="523.1173" y1="1056.2406" y2="1056.2406"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="523.1173" x2="523.1173" y1="1056.2406" y2="1063.0616"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="501.6049" x2="523.1173" y1="1063.0616" y2="1063.0616"/><polygon fill="#181818" points="506.8519,1060.9628,501.6049,1063.0616,506.8519,1065.1603,504.7531,1063.0616" style="stroke:#181818;stroke-width:0.5246913580246914;"/><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="47.7469" x="504.7531" y="1053.5826">start the node</text><polygon fill="#181818" points="758.179,1068.3085,763.4259,1070.4073,758.179,1072.506,760.2778,1070.4073" style="stroke:#181818;stroke-width:0.5246913580246914;"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="501.0802" x2="761.3272" y1="1070.4073" y2="1070.4073"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="764.4753" x2="786.5123" y1="1085.693" y2="1085.693"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="786.5123" x2="786.5123" y1="1085.693" y2="1092.514"/><line style="stroke:#181818;stroke-width:0.5246913580246914;" x1="765" x2="786.5123" y1="1092.514" y2="1092.514"/><polygon fill="#181818" points="770.2469,1090.4152,765,1092.514,770.2469,1094.6128,768.1481,1092.514" style="stroke:#181818;stroke-width:0.5246913580246914;"/><text fill="#000000" font-family="sans-serif" font-size="6.821" lengthAdjust="spacing" textLength="75.0309" x="768.1481" y="1083.035">切换连接到本地测试网络</text><rect fill="#EEEEEE" height="1.5741" style="stroke:#EEEEEE;stroke-width:0.5246913580246914;" width="846.8519" x="0" y="1107.5025"/><line style="stroke:#000000;stroke-width:0.5246913580246914;" x1="0" x2="846.8519" y1="1107.5025" y2="1107.5025"/><line style="stroke:#000000;stroke-width:0.5246913580246914;" x1="0" x2="846.8519" y1="1109.0766" y2="1109.0766"/><rect fill="#EEEEEE" height="12.1376" style="stroke:#000000;stroke-width:1.0493827160493827;" width="222.9938" x="311.929" y="1101.9584"/><text fill="#000000" font-family="sans-serif" font-size="6.821" font-weight="bold" lengthAdjust="spacing" textLength="213.0247" x="315.0772" y="1110.3886">至此已经将合约pallet添加完成，要想进一步，还需要学习如何写合约</text><rect height="6.1077" style="stroke:#00000000;stroke-width:0.5246913580246914;fill:none;" width="50.3704" x="795.9568" y="2.6235"/><text fill="#888888" font-family="sans-serif" font-size="5.2469" lengthAdjust="spacing" textLength="50.3704" x="795.9568" y="7.4938">add pallet-contracts</text></g></svg></figure>
<h2 id="use-macros-in-a-custom-pallet"><a class="header" href="#use-macros-in-a-custom-pallet">Use macros in a custom pallet</a></h2>
<blockquote>
<p><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#substrate%E5%AE%98%E6%96%B9%E6%95%99%E7%A8%8B%E6%A2%B3%E7%90%86%E4%B8%8E%E7%BB%83%E4%B9%A0">返回顶部</a></p>
</blockquote>
<div id="admonition-这一节干货较多" class="admonition info">
<div class="admonition-title">
<p>这一节干货较多</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#admonition-这一节干货较多"></a></p>
</div>
<div>
<ol>
<li>了解Substrate Runtime development： <a href="https://docs.substrate.io/main-docs/fundamentals/runtime-intro/">Runtime development | Substrate_ Docs</a></li>
<li>尤其要理解FRAME和pallets的关系。</li>
<li>掌握自定义pallet的步骤，其实已经准备好模版：substrate-node-template/pallets/template</li>
<li>更多详细内容：<a href="https://docs.substrate.io/reference/how-to-guides/#pallet-design">how-to-guides: pallet-design</a></li>
</ol>
</div>
</div>
<h3 id="pallet组成"><a class="header" href="#pallet组成">Pallet组成</a></h3>
<div id="admonition-pallet基础模版" class="admonition info">
<div class="admonition-title">
<p>pallet基础模版</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#admonition-pallet基础模版"></a></p>
</div>
<div>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// 1. Imports and Dependencies
pub use pallet::*;

#[frame_support::pallet]
pub mod pallet {
    use frame_support::pallet_prelude::*;
    use frame_system::pallet_prelude::*;

    // 2. Declaration of the Pallet type
    // This is a placeholder to implement traits and methods.
    #[pallet::pallet]
    #[pallet::generate_store(pub (super) trait Store)]
    pub struct Pallet&lt;T&gt;(_);

    // 3. Runtime Configuration Trait
    // All types and constants go here.
    // Use #[pallet::constant] and #[pallet::extra_constants]
    // to pass in values to metadata.
    #[pallet::config]
    pub trait Config: frame_system::Config { ... }

    // 4. Runtime Storage
    // Use to declare storage items.
<span class="boring">    [pallet::storage]
</span><span class="boring">    [pallet::getter(fn something)]
</span>    pub MyStorage&lt;T: Config&gt; = StorageValue&lt;_, u32&gt;;

    // 5. Runtime Events
    // Can stringify event types to metadata.
    #[pallet::event]
    #[pallet::generate_deposit(pub (super) fn deposit_event)]
    pub enum Event&lt;T: Config&gt; {...
}

// 6. Hooks
// Define some logic that should be executed
// regularly in some context, for e.g. on_initialize.
#[pallet::hooks]
impl&lt;T: Config&gt; Hooks&lt;BlockNumberFor&lt;T&gt;&gt; for Pallet&lt;T&gt; { ... }

// 7. Extrinsics
// Functions that are callable from outside the runtime.
#[pallet::call]
impl&lt;T: Config&gt; Pallet&lt;T&gt; { ... }

}
<span class="boring">}
</span></code></pre></pre>
</div>
</div>
<figure><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="922px" preserveAspectRatio="none" style="width:756px;height:922px;background:#FFFFFF;" version="1.1" viewBox="0 0 756 922" width="756px" zoomAndPan="magnify"><defs/><g><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="113" x="10" y="442.2266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="20" y="465.2217">Pallet基本格式</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="267" x="173" y="20"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="247" x="183" y="42.9951">1. 依赖：Imports and Dependencies</text><path d="M123,460.375 L133,460.375 C148,460.375 148,38.1484 163,38.1484 L173,38.1484 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="299" x="173" y="76.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="279" x="183" y="99.292">2. 类型声明: Declaration of the Pallet type</text><path d="M123,460.375 L133,460.375 C148,460.375 148,94.4453 163,94.4453 L173,94.4453 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="78" x="173" y="245.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58" x="183" y="268.1826">Runtime</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="309" x="301" y="132.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="289" x="311" y="155.5889">3. 运行时配置：Runtime Configuration Trait</text><path d="M251,263.3359 L261,263.3359 C276,263.3359 276,150.7422 291,150.7422 L301,150.7422 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="232" x="301" y="273.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="212" x="311" y="296.3311">4. 运行时存储: Runtime Storage</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="116" x="583" y="188.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="593" y="211.8857">Storage Value</text><path d="M533,291.4844 L543,291.4844 C558,291.4844 558,207.0391 573,207.0391 L583,207.0391 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="107" x="583" y="245.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="593" y="268.1826">Storage Map</text><path d="M533,291.4844 L543,291.4844 C558,291.4844 558,263.3359 573,263.3359 L583,263.3359 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="161" x="583" y="301.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="141" x="593" y="324.4795">Storage Double Map</text><path d="M533,291.4844 L543,291.4844 C558,291.4844 558,319.6328 573,319.6328 L583,319.6328 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="121" x="583" y="357.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="593" y="380.7764">Storage N Map</text><path d="M533,291.4844 L543,291.4844 C558,291.4844 558,375.9297 573,375.9297 L583,375.9297 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M251,263.3359 L261,263.3359 C276,263.3359 276,291.4844 291,291.4844 L301,291.4844 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="225" x="301" y="329.6328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="205" x="311" y="352.6279">5. 运行时事件: Runtime Events</text><path d="M251,263.3359 L261,263.3359 C276,263.3359 276,347.7813 291,347.7813 L301,347.7813 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M123,460.375 L133,460.375 C148,460.375 148,263.3359 163,263.3359 L173,263.3359 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="198" x="173" y="611.1172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="178" x="183" y="634.1123">6. 生命周期钩子函数-Hooks</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="67" x="421" y="470.375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="431" y="493.3701">normal</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="99" x="538" y="414.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="548" y="437.0732">on_initialize</text><path d="M488,488.5234 L498,488.5234 C513,488.5234 513,432.2266 528,432.2266 L538,432.2266 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="69" x="538" y="470.375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49" x="548" y="493.3701">on_idle</text><path d="M488,488.5234 L498,488.5234 C513,488.5234 513,488.5234 528,488.5234 L538,488.5234 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="92" x="538" y="526.6719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="548" y="549.667">on_finalize</text><path d="M488,488.5234 L498,488.5234 C513,488.5234 513,544.8203 528,544.8203 L538,544.8203 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M371,629.2656 L381,629.2656 C396,629.2656 396,488.5234 411,488.5234 L421,488.5234 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="78" x="421" y="639.2656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58" x="431" y="662.2607">upgrade</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="108" x="549" y="582.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="559" y="605.9639">pre_upgrade</text><path d="M499,657.4141 L509,657.4141 C524,657.4141 524,601.1172 539,601.1172 L549,601.1172 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="163" x="549" y="639.2656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="143" x="559" y="662.2607">on_runtime_upgrade</text><path d="M499,657.4141 L509,657.4141 C524,657.4141 524,657.4141 539,657.4141 L549,657.4141 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="116" x="549" y="695.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="559" y="718.5576">post_upgrade</text><path d="M499,657.4141 L509,657.4141 C524,657.4141 524,713.7109 539,713.7109 L549,713.7109 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M371,629.2656 L381,629.2656 C396,629.2656 396,657.4141 411,657.4141 L421,657.4141 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="128" x="421" y="751.8594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="431" y="774.8545">offchain_worker</text><path d="M371,629.2656 L381,629.2656 C396,629.2656 396,770.0078 411,770.0078 L421,770.0078 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="109" x="421" y="808.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="431" y="831.1514">integrity_test</text><path d="M371,629.2656 L381,629.2656 C396,629.2656 396,826.3047 411,826.3047 L421,826.3047 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M123,460.375 L133,460.375 C148,460.375 148,629.2656 163,629.2656 L173,629.2656 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="209" x="173" y="864.4531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="189" x="183" y="887.4482">7. Extrinsics: 对外提供的功能</text><path d="M123,460.375 L133,460.375 C148,460.375 148,882.6016 163,882.6016 L173,882.6016 " fill="none" style="stroke:#181818;stroke-width:1.0;"/></g></svg></figure>
<h3 id="时序图-2"><a class="header" href="#时序图-2">时序图</a></h3>
<figure><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1084.1605px" preserveAspectRatio="none" style="width:850px;height:1084px;background:#FFFFFF;" version="1.1" viewBox="0 0 850 1084" width="850.2526px" zoomAndPan="magnify"><defs/><g><line style="stroke:#181818;stroke-width:0.2526002971768202;stroke-dasharray:5.0,5.0;" x1="347.578" x2="347.578" y1="40.3608" y2="1050.9238"/><line style="stroke:#181818;stroke-width:0.2526002971768202;stroke-dasharray:5.0,5.0;" x1="438.5141" x2="438.5141" y1="40.3608" y2="1050.9238"/><line style="stroke:#181818;stroke-width:0.2526002971768202;stroke-dasharray:5.0,5.0;" x1="587.8009" x2="587.8009" y1="40.3608" y2="1050.9238"/><line style="stroke:#181818;stroke-width:0.2526002971768202;stroke-dasharray:5.0,5.0;" x1="673.1798" x2="673.1798" y1="40.3608" y2="1050.9238"/><line style="stroke:#181818;stroke-width:0.2526002971768202;stroke-dasharray:5.0,5.0;" x1="770.1783" x2="770.1783" y1="40.3608" y2="1050.9238"/><rect fill="#E2E2F0" height="30.9435" rx="1.263" ry="1.263" style="stroke:#181818;stroke-width:0.2526002971768202;" width="76.2853" x="309.688" y="8.9121"/><text fill="#000000" font-family="sans-serif" font-size="9.0936" font-weight="bold" lengthAdjust="spacing" textLength="29.3016" x="333.1798" y="20.8894">pallet</text><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="309.688" x2="385.9733" y1="25.56" y2="25.56"/><text fill="#000000" font-family="sans-serif" font-size="7.0728" lengthAdjust="spacing" textLength="69.2125" x="313.2244" y="34.6511">pallets/template/src</text><rect fill="#E2E2F0" height="30.9435" rx="1.263" ry="1.263" style="stroke:#181818;stroke-width:0.2526002971768202;" width="76.2853" x="309.688" y="1050.4186"/><text fill="#000000" font-family="sans-serif" font-size="9.0936" font-weight="bold" lengthAdjust="spacing" textLength="29.3016" x="333.1798" y="1062.3959">pallet</text><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="309.688" x2="385.9733" y1="1067.0665" y2="1067.0665"/><text fill="#000000" font-family="sans-serif" font-size="7.0728" lengthAdjust="spacing" textLength="69.2125" x="313.2244" y="1076.1577">pallets/template/src</text><rect fill="#E2E2F0" height="30.9435" rx="1.263" ry="1.263" style="stroke:#181818;stroke-width:0.2526002971768202;" width="94.9777" x="391.0253" y="8.9121"/><text fill="#000000" font-family="sans-serif" font-size="9.0936" font-weight="bold" lengthAdjust="spacing" textLength="26.2704" x="425.3789" y="20.8894">lib.rs</text><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="391.0253" x2="486.003" y1="25.56" y2="25.56"/><text fill="#000000" font-family="sans-serif" font-size="7.0728" lengthAdjust="spacing" textLength="87.9049" x="394.5617" y="34.6511">pallets/template/src/lib.rs</text><rect fill="#E2E2F0" height="30.9435" rx="1.263" ry="1.263" style="stroke:#181818;stroke-width:0.2526002971768202;" width="94.9777" x="391.0253" y="1050.4186"/><text fill="#000000" font-family="sans-serif" font-size="9.0936" font-weight="bold" lengthAdjust="spacing" textLength="26.2704" x="425.3789" y="1062.3959">lib.rs</text><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="391.0253" x2="486.003" y1="1067.0665" y2="1067.0665"/><text fill="#000000" font-family="sans-serif" font-size="7.0728" lengthAdjust="spacing" textLength="87.9049" x="394.5617" y="1076.1577">pallets/template/src/lib.rs</text><rect fill="#E2E2F0" height="30.9435" rx="1.263" ry="1.263" style="stroke:#181818;stroke-width:0.2526002971768202;" width="103.5661" x="536.2704" y="8.9121"/><text fill="#000000" font-family="sans-serif" font-size="9.0936" font-weight="bold" lengthAdjust="spacing" textLength="56.0773" x="560.0149" y="20.8894">Cargo.toml</text><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="536.2704" x2="639.8366" y1="25.56" y2="25.56"/><text fill="#000000" font-family="sans-serif" font-size="7.0728" lengthAdjust="spacing" textLength="96.4933" x="539.8068" y="34.6511">pallets/template/Cargo.toml</text><rect fill="#E2E2F0" height="30.9435" rx="1.263" ry="1.263" style="stroke:#181818;stroke-width:0.2526002971768202;" width="103.5661" x="536.2704" y="1050.4186"/><text fill="#000000" font-family="sans-serif" font-size="9.0936" font-weight="bold" lengthAdjust="spacing" textLength="56.0773" x="560.0149" y="1062.3959">Cargo.toml</text><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="536.2704" x2="639.8366" y1="1067.0665" y2="1067.0665"/><text fill="#000000" font-family="sans-serif" font-size="7.0728" lengthAdjust="spacing" textLength="96.4933" x="539.8068" y="1076.1577">pallets/template/Cargo.toml</text><rect fill="#E2E2F0" height="30.9435" rx="1.263" ry="1.263" style="stroke:#181818;stroke-width:0.2526002971768202;" width="56.5825" x="644.8886" y="8.9121"/><text fill="#000000" font-family="sans-serif" font-size="9.0936" font-weight="bold" lengthAdjust="spacing" textLength="18.1872" x="664.0862" y="20.8894">终端</text><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="644.8886" x2="701.471" y1="25.56" y2="25.56"/><text fill="#000000" font-family="sans-serif" font-size="7.0728" lengthAdjust="spacing" textLength="49.5097" x="648.425" y="34.6511">用于检查和编译</text><rect fill="#E2E2F0" height="30.9435" rx="1.263" ry="1.263" style="stroke:#181818;stroke-width:0.2526002971768202;" width="56.5825" x="644.8886" y="1050.4186"/><text fill="#000000" font-family="sans-serif" font-size="9.0936" font-weight="bold" lengthAdjust="spacing" textLength="18.1872" x="664.0862" y="1062.3959">终端</text><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="644.8886" x2="701.471" y1="1067.0665" y2="1067.0665"/><text fill="#000000" font-family="sans-serif" font-size="7.0728" lengthAdjust="spacing" textLength="49.5097" x="648.425" y="1076.1577">用于检查和编译</text><rect fill="#E2E2F0" height="30.9435" rx="1.263" ry="1.263" style="stroke:#181818;stroke-width:0.2526002971768202;" width="127.3105" x="706.523" y="8.9121"/><text fill="#000000" font-family="sans-serif" font-size="9.0936" font-weight="bold" lengthAdjust="spacing" textLength="36.3744" x="751.9911" y="20.8894">本地前端</text><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="706.523" x2="833.8336" y1="25.56" y2="25.56"/><text fill="#000000" font-family="sans-serif" font-size="7.0728" lengthAdjust="spacing" textLength="120.2377" x="710.0594" y="34.6511">不使用pkjs，因为要添加新的前端模块</text><rect fill="#E2E2F0" height="30.9435" rx="1.263" ry="1.263" style="stroke:#181818;stroke-width:0.2526002971768202;" width="127.3105" x="706.523" y="1050.4186"/><text fill="#000000" font-family="sans-serif" font-size="9.0936" font-weight="bold" lengthAdjust="spacing" textLength="36.3744" x="751.9911" y="1062.3959">本地前端</text><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="706.523" x2="833.8336" y1="1067.0665" y2="1067.0665"/><text fill="#000000" font-family="sans-serif" font-size="7.0728" lengthAdjust="spacing" textLength="120.2377" x="710.0594" y="1076.1577">不使用pkjs，因为要添加新的前端模块</text><rect fill="#EEEEEE" height="1.5156" style="stroke:#EEEEEE;stroke-width:0.5052005943536404;" width="846.9688" x="0" y="55.803"/><line style="stroke:#000000;stroke-width:0.5052005943536404;" x1="0" x2="846.9688" y1="55.803" y2="55.803"/><line style="stroke:#000000;stroke-width:0.5052005943536404;" x1="0" x2="846.9688" y1="57.3186" y2="57.3186"/><rect fill="#EEEEEE" height="11.6867" style="stroke:#000000;stroke-width:1.0104011887072808;" width="62.1397" x="392.4146" y="50.4648"/><text fill="#000000" font-family="sans-serif" font-size="6.5676" font-weight="bold" lengthAdjust="spacing" textLength="52.5409" x="395.4458" y="58.5818">一、准备全新模版</text><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="347.8306" x2="369.049" y1="83.7567" y2="83.7567"/><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="369.049" x2="369.049" y1="83.7567" y2="90.3243"/><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="348.3358" x2="369.049" y1="90.3243" y2="90.3243"/><polygon fill="#181818" points="353.3878,88.3035,348.3358,90.3243,353.3878,92.3451,351.367,90.3243" style="stroke:#181818;stroke-width:0.5052005943536404;"/><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="39.4056" x="351.367" y="81.1974">移除其他文件</text><path d="M280.3863,69.7295 L280.3863,97.5156 L345.052,97.5156 L345.052,74.7815 L340,69.7295 L280.3863,69.7295 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2526002971768202;"/><path d="M340,69.7295 L340,74.7815 L345.052,74.7815 L340,69.7295 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2526002971768202;"/><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="54.0565" x="283.4175" y="78.3517">benchmarking.rs</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="25.7652" x="283.4175" y="85.9968">mock.rs</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="24.2496" x="283.4175" y="93.6419">tests.rs</text><rect height="19.7541" style="stroke:#000000;stroke-width:0.7578008915304606;fill:none;" width="165.7058" x="389.5097" y="100.2428"/><path d="M389.5097,100.2428 L422.8529,100.2428 L422.8529,103.7793 L417.8009,108.8313 L389.5097,108.8313 L389.5097,100.2428 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0104011887072808;"/><text fill="#000000" font-family="sans-serif" font-size="6.5676" font-weight="bold" lengthAdjust="spacing" textLength="10.6092" x="396.0773" y="107.3495">ref</text><text fill="#000000" font-family="sans-serif" font-size="6.0624" lengthAdjust="spacing" textLength="161.6642" x="391.5305" y="116.4793">substrate-node-template/pallets/template/src/lib.rs</text><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="347.8306" x2="369.049" y1="133.1993" y2="133.1993"/><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="369.049" x2="369.049" y1="133.1993" y2="139.7669"/><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="348.3358" x2="369.049" y1="139.7669" y2="139.7669"/><polygon fill="#181818" points="353.3878,137.7461,348.3358,139.7669,353.3878,141.7877,351.367,139.7669" style="stroke:#181818;stroke-width:0.5052005943536404;"/><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="39.4056" x="351.367" y="130.64">删除所有内容</text><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="438.5141" x2="459.7325" y1="154.4848" y2="154.4848"/><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="459.7325" x2="459.7325" y1="154.4848" y2="161.0524"/><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="439.0193" x2="459.7325" y1="161.0524" y2="161.0524"/><polygon fill="#181818" points="444.0713,159.0316,439.0193,161.0524,444.0713,163.0732,442.0505,161.0524" style="stroke:#181818;stroke-width:0.5052005943536404;"/><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="142.4666" x="442.0505" y="151.9255">添加std本地构建和wasm构建no_std所需要的宏</text><path d="M290.4903,148.1027 L290.4903,160.7327 L435.9881,160.7327 L435.9881,153.1547 L430.9361,148.1027 L290.4903,148.1027 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2526002971768202;"/><path d="M430.9361,148.1027 L430.9361,153.1547 L435.9881,153.1547 L430.9361,148.1027 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2526002971768202;"/><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="6.0624" x="293.5215" y="156.7249">1.</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="126.8053" x="301.6048" y="156.7249">![cfg_attr(not(feature = "std"), no_std)]</text><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="438.5141" x2="459.7325" y1="250.4532" y2="250.4532"/><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="459.7325" x2="459.7325" y1="250.4532" y2="257.0208"/><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="439.0193" x2="459.7325" y1="257.0208" y2="257.0208"/><polygon fill="#181818" points="444.0713,255,439.0193,257.0208,444.0713,259.0416,442.0505,257.0208" style="stroke:#181818;stroke-width:0.5052005943536404;"/><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="99.0193" x="442.0505" y="247.8939">把一个lib所需的基本结构复制进去</text><path d="M160.6538,167.62 L160.6538,332.8206 L435.9881,332.8206 L435.9881,172.672 L430.9361,167.62 L160.6538,167.62 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2526002971768202;"/><path d="M430.9361,167.62 L430.9361,172.672 L435.9881,172.672 L430.9361,167.62 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2526002971768202;"/><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="264.7251" x="163.685" y="176.2422">// Re-export pallet items so that they can be accessed from the crate namespace.</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="55.0669" x="163.685" y="183.8873">pub use pallet::*;</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="2.0208" x="163.685" y="191.5324"> </text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="81.8425" x="163.685" y="199.1776">/#[frame_support::pallet]</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="54.5617" x="163.685" y="206.8227">pub mod pallet {</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="120.2377" x="179.8514" y="214.4678">use frame_support::pallet_prelude::*;</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="119.2273" x="179.8514" y="222.1129">use frame_system::pallet_prelude::*;</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="205.6166" x="179.8514" y="229.758">use sp_std::vec::Vec; // Step 3.1 will include this in `Cargo.toml`</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="2.0208" x="163.685" y="237.4031"> </text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="186.419" x="179.8514" y="245.0482">#[pallet::config]  // &lt;-- Step 2. code block will replace this.</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="187.4294" x="179.8514" y="252.6933">#[pallet::event]   // &lt;-- Step 3. code block will replace this.</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="184.9034" x="179.8514" y="260.3384">#[pallet::error]   // &lt;-- Step 4. code block will replace this.</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="50.0149" x="179.8514" y="267.9835">#[pallet::pallet]</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="157.1174" x="179.8514" y="275.6286">#[pallet::generate_store(pub(super) trait Store)]</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="77.8009" x="179.8514" y="283.2737">pub struct Pallet&lt;T&gt;(_);</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="2.0208" x="163.685" y="290.9188"> </text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="189.9554" x="179.8514" y="298.5639">#[pallet::storage] // &lt;-- Step 5. code block will replace this.</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="51.5305" x="179.8514" y="306.209">#[pallet::hooks]</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="209.153" x="179.8514" y="313.8541">impl&lt;T: Config&gt; Hooks&lt;BlockNumberFor&lt;T&gt;&gt; for Pallet&lt;T&gt; {}</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="179.8514" x="179.8514" y="321.4992">#[pallet::call]   // &lt;-- Step 6. code block will replace this.</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="4.0416" x="163.685" y="329.1444">}</text><rect fill="#EEEEEE" height="1.5156" style="stroke:#EEEEEE;stroke-width:0.5052005943536404;" width="846.9688" x="0" y="346.1354"/><line style="stroke:#000000;stroke-width:0.5052005943536404;" x1="0" x2="846.9688" y1="346.1354" y2="346.1354"/><line style="stroke:#000000;stroke-width:0.5052005943536404;" x1="0" x2="846.9688" y1="347.651" y2="347.651"/><rect fill="#EEEEEE" height="11.6867" style="stroke:#000000;stroke-width:1.0104011887072808;" width="56.0773" x="395.4458" y="340.7973"/><text fill="#000000" font-family="sans-serif" font-size="6.5676" font-weight="bold" lengthAdjust="spacing" textLength="46.4785" x="398.477" y="348.9143">event config</text><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="438.5141" x2="459.7325" y1="385.5569" y2="385.5569"/><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="459.7325" x2="459.7325" y1="385.5569" y2="392.1245"/><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="439.0193" x2="459.7325" y1="392.1245" y2="392.1245"/><polygon fill="#181818" points="444.0713,390.1037,439.0193,392.1245,444.0713,394.1453,442.0505,392.1245" style="stroke:#181818;stroke-width:0.5052005943536404;"/><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="80.8321" x="442.0505" y="382.9976">Replace the #[lib::config]</text><path d="M130.847,360.062 L130.847,410.582 L435.9881,410.582 L435.9881,365.114 L430.9361,360.062 L130.847,360.062 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2526002971768202;"/><path d="M430.9361,360.062 L430.9361,365.114 L435.9881,365.114 L430.9361,360.062 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2526002971768202;"/><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="268.7667" x="133.8782" y="368.6842">/// Configure the pallet by specifying the parameters and types on which it depends.</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="6.0624" x="133.8782" y="376.3293">1.</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="45.9733" x="141.9614" y="376.3293">[pallet::config]</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="130.3418" x="133.8782" y="383.9744">pub trait Config: frame_system::Config {</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="277.8603" x="150.0446" y="391.6195">/// Because this pallet emits events, it depends on the runtime's definition of an event.</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="278.3655" x="150.0446" y="399.2646">type Event: From&lt;Event&lt;Self&gt;&gt; + IsType&lt;&lt;Self as frame_system::Config&gt;::Event&gt;;</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="4.0416" x="133.8782" y="406.9097">}</text><rect fill="#EEEEEE" height="1.5156" style="stroke:#EEEEEE;stroke-width:0.5052005943536404;" width="846.9688" x="0" y="423.9008"/><line style="stroke:#000000;stroke-width:0.5052005943536404;" x1="0" x2="846.9688" y1="423.9008" y2="423.9008"/><line style="stroke:#000000;stroke-width:0.5052005943536404;" x1="0" x2="846.9688" y1="425.4164" y2="425.4164"/><rect fill="#EEEEEE" height="11.6867" style="stroke:#000000;stroke-width:1.0104011887072808;" width="49.0045" x="398.9822" y="418.5626"/><text fill="#000000" font-family="sans-serif" font-size="6.5676" font-weight="bold" lengthAdjust="spacing" textLength="39.4056" x="402.0134" y="426.6796">event impl</text><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="438.5141" x2="459.7325" y1="478.6124" y2="478.6124"/><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="459.7325" x2="459.7325" y1="478.6124" y2="485.18"/><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="439.0193" x2="459.7325" y1="485.18" y2="485.18"/><polygon fill="#181818" points="444.0713,483.1592,439.0193,485.18,444.0713,487.2008,442.0505,485.18" style="stroke:#181818;stroke-width:0.5052005943536404;"/><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="45.9733" x="442.0505" y="476.0531">实现配置的事件</text><path d="M111.1441,437.8274 L111.1441,519.1647 L435.9881,519.1647 L435.9881,442.8794 L430.9361,437.8274 L111.1441,437.8274 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2526002971768202;"/><path d="M430.9361,437.8274 L430.9361,442.8794 L435.9881,442.8794 L430.9361,437.8274 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2526002971768202;"/><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="232.8975" x="114.1753" y="446.4496">// Pallets use events to inform users when important changes are made.</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="314.2348" x="114.1753" y="454.0947">// Event documentation should end with an array that provides descriptive names for parameters.</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="6.0624" x="114.1753" y="461.7398">1.</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="44.9629" x="122.2585" y="461.7398">[pallet::event]</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="6.0624" x="114.1753" y="469.3849">2.</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="179.3462" x="122.2585" y="469.3849">[pallet::generate_deposit(pub(super) fn deposit_event)]</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="98.0089" x="114.1753" y="477.03">pub enum Event&lt;T: Config&gt; {</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="199.049" x="130.3418" y="484.6751">/// Event emitted when a proof has been claimed. [who, claim]</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="125.7949" x="130.3418" y="492.3202">ClaimCreated(T::AccountId, Vec&lt;u8&gt;),</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="218.7519" x="130.3418" y="499.9653">/// Event emitted when a claim is revoked by the owner. [who, claim]</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="127.3105" x="130.3418" y="507.6104">ClaimRevoked(T::AccountId, Vec&lt;u8&gt;),</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="4.0416" x="114.1753" y="515.2555">}</text><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="588.0535" x2="609.2719" y1="565.1675" y2="565.1675"/><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="609.2719" x2="609.2719" y1="565.1675" y2="571.7351"/><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="588.5587" x2="609.2719" y1="571.7351" y2="571.7351"/><polygon fill="#181818" points="593.6107,569.7143,588.5587,571.7351,593.6107,573.7559,591.5899,571.7351" style="stroke:#181818;stroke-width:0.5052005943536404;"/><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="26.2704" x="591.5899" y="562.6082">添加依赖</text><path d="M323.3284,524.3824 L323.3284,605.7197 L585.5275,605.7197 L585.5275,529.4344 L580.4755,524.3824 L323.3284,524.3824 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2526002971768202;"/><path d="M580.4755,524.3824 L580.4755,529.4344 L585.5275,529.4344 L580.4755,524.3824 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2526002971768202;"/><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="72.2437" x="326.3596" y="533.0046">[dependencies.sp-std]</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="76.2853" x="326.3596" y="540.6497">default-features = false</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="157.1174" x="326.3596" y="548.2948">git = 'https://github.com/paritytech/substrate.git'</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="251.5899" x="326.3596" y="555.94">branch = 'polkadot-v0.9.26'  # Must *match* the rest of your Substrate deps!</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="2.0208" x="326.3596" y="563.5851"> </text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="31.8276" x="326.3596" y="571.2302">[features]</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="50.0149" x="326.3596" y="578.8753">default = ['std']</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="22.2288" x="326.3596" y="586.5204">std = [</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="5.5572" x="332.422" y="594.1655">#</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" text-decoration="line-through" textLength="13.1352" x="342.0208" y="594.1655">snip</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="2.526" x="326.3596" y="601.8106">]</text><rect fill="#EEEEEE" height="1.5156" style="stroke:#EEEEEE;stroke-width:0.5052005943536404;" width="846.9688" x="0" y="618.8017"/><line style="stroke:#000000;stroke-width:0.5052005943536404;" x1="0" x2="846.9688" y1="618.8017" y2="618.8017"/><line style="stroke:#000000;stroke-width:0.5052005943536404;" x1="0" x2="846.9688" y1="620.3173" y2="620.3173"/><rect fill="#EEEEEE" height="11.6867" style="stroke:#000000;stroke-width:1.0104011887072808;" width="27.786" x="409.5914" y="613.4635"/><text fill="#000000" font-family="sans-serif" font-size="6.5676" font-weight="bold" lengthAdjust="spacing" textLength="18.1872" x="412.6226" y="621.5805">error</text><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="438.5141" x2="459.7325" y1="669.6908" y2="669.6908"/><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="459.7325" x2="459.7325" y1="669.6908" y2="676.2584"/><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="439.0193" x2="459.7325" y1="676.2584" y2="676.2584"/><polygon fill="#181818" points="444.0713,674.2376,439.0193,676.2584,444.0713,678.2792,442.0505,676.2584" style="stroke:#181818;stroke-width:0.5052005943536404;"/><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="87.9049" x="442.0505" y="667.1314">Replace the #[pallet::error]</text><path d="M191.471,632.7282 L191.471,706.4875 L435.9881,706.4875 L435.9881,637.7802 L430.9361,632.7282 L191.471,632.7282 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2526002971768202;"/><path d="M430.9361,632.7282 L430.9361,637.7802 L435.9881,637.7802 L430.9361,632.7282 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2526002971768202;"/><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="6.0624" x="194.5022" y="641.3504">1.</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="42.4368" x="202.5854" y="641.3504">[pallet::error]</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="71.2333" x="194.5022" y="648.9955">pub enum Error&lt;T&gt; {</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="125.2897" x="210.6686" y="656.6406">/// The proof has already been claimed.</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="69.2125" x="210.6686" y="664.2857">ProofAlreadyClaimed,</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="167.7266" x="210.6686" y="671.9309">/// The proof does not exist, so it cannot be revoked.</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="43.9525" x="210.6686" y="679.576">NoSuchProof,</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="217.7415" x="210.6686" y="687.2211">/// The proof is claimed by another account, so caller can't revoke it.</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="50.5201" x="210.6686" y="694.8662">NotProofOwner,</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="4.0416" x="194.5022" y="702.5113">}</text><rect fill="#EEEEEE" height="1.5156" style="stroke:#EEEEEE;stroke-width:0.5052005943536404;" width="846.9688" x="0" y="719.5023"/><line style="stroke:#000000;stroke-width:0.5052005943536404;" x1="0" x2="846.9688" y1="719.5023" y2="719.5023"/><line style="stroke:#000000;stroke-width:0.5052005943536404;" x1="0" x2="846.9688" y1="721.0179" y2="721.0179"/><rect fill="#EEEEEE" height="11.6867" style="stroke:#000000;stroke-width:1.0104011887072808;" width="38.3952" x="404.2868" y="714.1642"/><text fill="#000000" font-family="sans-serif" font-size="6.5676" font-weight="bold" lengthAdjust="spacing" textLength="28.7964" x="407.318" y="722.2812">storage</text><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="438.5141" x2="459.7325" y1="743.6336" y2="743.6336"/><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="459.7325" x2="459.7325" y1="743.6336" y2="750.2012"/><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="439.0193" x2="459.7325" y1="750.2012" y2="750.2012"/><polygon fill="#181818" points="444.0713,748.1804,439.0193,750.2012,444.0713,752.222,442.0505,750.2012" style="stroke:#181818;stroke-width:0.5052005943536404;"/><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="96.9985" x="442.0505" y="741.0743">Replace the #[pallet::storage]</text><path d="M2.526,733.4289 L2.526,753.6369 L435.9881,753.6369 L435.9881,738.4809 L430.9361,733.4289 L2.526,733.4289 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2526002971768202;"/><path d="M430.9361,733.4289 L430.9361,738.4809 L435.9881,738.4809 L430.9361,733.4289 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2526002971768202;"/><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="6.0624" x="5.5572" y="742.0511">1.</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="51.5305" x="13.6404" y="742.0511">[pallet::storage]</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="422.8529" x="5.5572" y="749.6962">pub(super) type Proofs&lt;T: Config&gt; = StorageMap&lt;_, Blake2_128Concat, Vec&lt;u8&gt;, (T::AccountId, T::BlockNumber), ValueQuery&gt;;</text><rect fill="#EEEEEE" height="1.5156" style="stroke:#EEEEEE;stroke-width:0.5052005943536404;" width="846.9688" x="0" y="766.6873"/><line style="stroke:#000000;stroke-width:0.5052005943536404;" x1="0" x2="846.9688" y1="766.6873" y2="766.6873"/><line style="stroke:#000000;stroke-width:0.5052005943536404;" x1="0" x2="846.9688" y1="768.2029" y2="768.2029"/><rect fill="#EEEEEE" height="11.6867" style="stroke:#000000;stroke-width:1.0104011887072808;" width="22.2288" x="412.37" y="761.3491"/><text fill="#000000" font-family="sans-serif" font-size="6.5676" font-weight="bold" lengthAdjust="spacing" textLength="12.63" x="415.4012" y="769.4661">call</text><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="438.5141" x2="459.7325" y1="848.1568" y2="848.1568"/><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="459.7325" x2="459.7325" y1="848.1568" y2="854.7244"/><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="439.0193" x2="459.7325" y1="854.7244" y2="854.7244"/><polygon fill="#181818" points="444.0713,852.7036,439.0193,854.7244,444.0713,856.7452,442.0505,854.7244" style="stroke:#181818;stroke-width:0.5052005943536404;"/><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="82.8529" x="442.0505" y="845.5975">Replace the #[pallet::call]</text><path d="M125.7949,780.6139 L125.7949,915.5024 L435.9881,915.5024 L435.9881,785.6659 L430.9361,780.6139 L125.7949,780.6139 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2526002971768202;"/><path d="M430.9361,780.6139 L430.9361,785.6659 L435.9881,785.6659 L430.9361,780.6139 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2526002971768202;"/><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="285.9435" x="128.8262" y="789.2361">// Dispatchable functions allow users to interact with the pallet and invoke state changes.</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="281.9019" x="128.8262" y="796.8812">// These functions materialize as "extrinsics", which are often compared to transactions.</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="299.584" x="128.8262" y="804.5263">// Dispatchable functions must be annotated with a weight and must return a DispatchResult.</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="6.0624" x="128.8262" y="812.1714">1.</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="37.3848" x="136.9094" y="812.1714">[pallet::call]</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="92.9569" x="128.8262" y="819.8165">impl&lt;T: Config&gt; Pallet&lt;T&gt; {</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="77.8009" x="136.9094" y="827.4616">#[pallet::weight(1_000)]</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="66.1813" x="136.9094" y="835.1067">pub fn create_claim(</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="67.1917" x="144.9926" y="842.7518">origin: OriginFor&lt;T&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="54.0565" x="144.9926" y="850.3969">proof: Vec&lt;u8&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="78.8113" x="136.9094" y="858.042">) -&gt; DispatchResult {...}</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="2.0208" x="128.8262" y="865.6871"> </text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="81.8425" x="136.9094" y="873.3322">#[pallet::weight(10_000)]</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="67.1917" x="136.9094" y="880.9773">pub fn revoke_claim(</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="67.1917" x="144.9926" y="888.6224">origin: OriginFor&lt;T&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="54.0565" x="144.9926" y="896.2675">proof: Vec&lt;u8&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="78.8113" x="136.9094" y="903.9126">) -&gt; DispatchResult {...}</text><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="4.0416" x="128.8262" y="911.5578">}</text><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="673.1798" x2="694.3982" y1="928.835" y2="928.835"/><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="694.3982" x2="694.3982" y1="928.835" y2="935.4026"/><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="673.685" x2="694.3982" y1="935.4026" y2="935.4026"/><polygon fill="#181818" points="678.737,933.3818,673.685,935.4026,678.737,937.4234,676.7162,935.4026" style="stroke:#181818;stroke-width:0.5052005943536404;"/><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="38.9004" x="676.7162" y="926.2757">cargo check</text><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="673.1798" x2="694.3982" y1="950.1205" y2="950.1205"/><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="694.3982" x2="694.3982" y1="950.1205" y2="956.6881"/><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="673.685" x2="694.3982" y1="956.6881" y2="956.6881"/><polygon fill="#181818" points="678.737,954.6673,673.685,956.6881,678.737,958.7089,676.7162,956.6881" style="stroke:#181818;stroke-width:0.5052005943536404;"/><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="35.364" x="676.7162" y="947.5612">cargo build</text><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="673.1798" x2="694.3982" y1="971.406" y2="971.406"/><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="694.3982" x2="694.3982" y1="971.406" y2="977.9736"/><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="673.685" x2="694.3982" y1="977.9736" y2="977.9736"/><polygon fill="#181818" points="678.737,975.9528,673.685,977.9736,678.737,979.9944,676.7162,977.9736" style="stroke:#181818;stroke-width:0.5052005943536404;"/><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="33.3432" x="676.7162" y="968.8467">start node</text><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="770.1783" x2="791.3967" y1="992.6915" y2="992.6915"/><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="791.3967" x2="791.3967" y1="992.6915" y2="999.2591"/><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="770.6835" x2="791.3967" y1="999.2591" y2="999.2591"/><polygon fill="#181818" points="775.7355,997.2383,770.6835,999.2591,775.7355,1001.2799,773.7147,999.2591" style="stroke:#181818;stroke-width:0.5052005943536404;"/><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="69.7177" x="773.7147" y="990.1322">add react component</text><path d="M684.5468,986.3094 L684.5468,998.9395 L767.3997,998.9395 L767.3997,991.3614 L762.3477,986.3094 L684.5468,986.3094 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2526002971768202;"/><path d="M762.3477,986.3094 L762.3477,991.3614 L767.3997,991.3614 L762.3477,986.3094 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2526002971768202;"/><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="72.2437" x="687.578" y="994.9316">src/TemplateModule.js</text><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="770.1783" x2="791.3967" y1="1013.9771" y2="1013.9771"/><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="791.3967" x2="791.3967" y1="1013.9771" y2="1020.5447"/><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="770.6835" x2="791.3967" y1="1020.5447" y2="1020.5447"/><polygon fill="#181818" points="775.7355,1018.5239,770.6835,1020.5447,775.7355,1022.5655,773.7147,1020.5447" style="stroke:#181818;stroke-width:0.5052005943536404;"/><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="31.3224" x="773.7147" y="1011.4178">yarn start</text><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="770.1783" x2="791.3967" y1="1035.2626" y2="1035.2626"/><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="791.3967" x2="791.3967" y1="1035.2626" y2="1041.8302"/><line style="stroke:#181818;stroke-width:0.5052005943536404;" x1="770.6835" x2="791.3967" y1="1041.8302" y2="1041.8302"/><polygon fill="#181818" points="775.7355,1039.8094,770.6835,1041.8302,775.7355,1043.851,773.7147,1041.8302" style="stroke:#181818;stroke-width:0.5052005943536404;"/><text fill="#000000" font-family="sans-serif" font-size="6.5676" lengthAdjust="spacing" textLength="64.6657" x="773.7147" y="1032.7033">verify pallet function</text><rect height="5.8809" style="stroke:#00000000;stroke-width:0.5052005943536404;fill:none;" width="32.838" x="813.6256" y="2.526"/><text fill="#888888" font-family="sans-serif" font-size="5.052" lengthAdjust="spacing" textLength="32.838" x="813.6256" y="7.2154">custom pallet</text></g></svg></figure>
<h2 id="publish-custom-pallets"><a class="header" href="#publish-custom-pallets">Publish Custom pallets</a></h2>
<ul>
<li><a href="https://docs.substrate.io/tutorials/work-with-pallets/publish-custom-pallets/">Publish custom pallets | Substrate_ Docs</a></li>
</ul>
<h3 id="内置pallets"><a class="header" href="#内置pallets">内置pallets</a></h3>
<ul>
<li><a href="https://github.com/paritytech/substrate/tree/master/frame">substrate/frame at master · paritytech/substrate</a></li>
</ul>
<h3 id="发布pallets"><a class="header" href="#发布pallets">发布pallets</a></h3>
<div id="admonition-两种方法" class="admonition tip">
<div class="admonition-title">
<p>两种方法</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#admonition-两种方法"></a></p>
</div>
<div>
<ol>
<li>github发布</li>
<li>crates.io发布</li>
</ol>
<p>这两个方法其实就是rust的crate常见发布方式。</p>
<ul>
<li><a href="https://kuanhsiaokuo.github.io/programming_anatomy_in_rust/layer2_design_abstract/6_module_manage/module_system.html#%E6%95%B4%E7%90%86%E8%AF%B4%E4%B8%80%E4%B8%8Brust%E7%9A%84%E6%A8%A1%E5%9D%97%E7%B3%BB%E7%BB%9F">模块系统 - Programming Anatomy In Rust 🦀</a></li>
</ul>
</div>
</div>
<h1 id="develop-smart-contracts"><a class="header" href="#develop-smart-contracts">Develop smart contracts</a></h1>
<h2 id="prepare-your-first-contract"><a class="header" href="#prepare-your-first-contract">Prepare your first contract</a></h2>
<blockquote>
<p><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#substrate%E5%AE%98%E6%96%B9%E6%95%99%E7%A8%8B%E6%A2%B3%E7%90%86%E4%B8%8E%E7%BB%83%E4%B9%A0">返回顶部</a></p>
</blockquote>
<figure><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1305.6px" preserveAspectRatio="none" style="width:850px;height:1305px;background:#FFFFFF;" version="1.1" viewBox="0 0 850 1305" width="850.4px" zoomAndPan="magnify"><defs/><g><line style="stroke:#181818;stroke-width:0.4000000000000001;stroke-dasharray:5.0,5.0;" x1="351.2" x2="351.2" y1="79.875" y2="1227.2625"/><line style="stroke:#181818;stroke-width:0.4000000000000001;stroke-dasharray:5.0,5.0;" x1="522.8" x2="522.8" y1="79.875" y2="1227.2625"/><line style="stroke:#181818;stroke-width:0.4000000000000001;stroke-dasharray:5.0,5.0;" x1="687.6" x2="687.6" y1="79.875" y2="1227.2625"/><rect fill="#E2E2F0" height="75.075" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="144.8" x="279.2" y="4"/><text fill="#000000" font-family="sans-serif" font-size="14.4" font-weight="bold" lengthAdjust="spacing" textLength="28.8" x="337.2" y="22.9664">终端</text><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="279.2" x2="424" y1="30.3625" y2="30.3625"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="67.2" x="318" y="44.7586">更新工具链，</text><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="44.8" x="329.2" y="57.7961">下载安装</text><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="133.6" x="284.8" y="70.8336">Substrate contract code</text><rect fill="#E2E2F0" height="75.075" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="144.8" x="279.2" y="1226.4625"/><text fill="#000000" font-family="sans-serif" font-size="14.4" font-weight="bold" lengthAdjust="spacing" textLength="28.8" x="337.2" y="1245.4289">终端</text><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="279.2" x2="424" y1="1252.825" y2="1252.825"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="67.2" x="318" y="1267.2211">更新工具链，</text><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="44.8" x="329.2" y="1280.2586">下载安装</text><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="133.6" x="284.8" y="1293.2961">Substrate contract code</text><rect fill="#E2E2F0" height="49" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="108.8" x="468.4" y="30.075"/><text fill="#000000" font-family="sans-serif" font-size="14.4" font-weight="bold" lengthAdjust="spacing" textLength="86.4" x="479.6" y="49.0414">智能合约项目</text><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="468.4" x2="577.2" y1="56.4375" y2="56.4375"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="97.6" x="474" y="70.8336">flipper/Cargo.toml</text><rect fill="#E2E2F0" height="49" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="108.8" x="468.4" y="1226.4625"/><text fill="#000000" font-family="sans-serif" font-size="14.4" font-weight="bold" lengthAdjust="spacing" textLength="86.4" x="479.6" y="1245.4289">智能合约项目</text><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="468.4" x2="577.2" y1="1252.825" y2="1252.825"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="97.6" x="474" y="1267.2211">flipper/Cargo.toml</text><rect fill="#E2E2F0" height="49" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="204.8" x="585.2" y="30.075"/><text fill="#000000" font-family="sans-serif" font-size="14.4" font-weight="bold" lengthAdjust="spacing" textLength="193.6" x="590.8" y="49.0414">contracts-ui application</text><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="585.2" x2="790" y1="56.4375" y2="56.4375"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="92" x="641.6" y="70.8336">智能合约web app</text><rect fill="#E2E2F0" height="49" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="204.8" x="585.2" y="1226.4625"/><text fill="#000000" font-family="sans-serif" font-size="14.4" font-weight="bold" lengthAdjust="spacing" textLength="193.6" x="590.8" y="1245.4289">contracts-ui application</text><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="585.2" x2="790" y1="1252.825" y2="1252.825"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="92" x="641.6" y="1267.2211">智能合约web app</text><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="351.6" x2="385.2" y1="108.0344" y2="108.0344"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="385.2" x2="385.2" y1="108.0344" y2="118.4344"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="352.4" x2="385.2" y1="118.4344" y2="118.4344"/><polygon fill="#181818" points="360.4,115.2344,352.4,118.4344,360.4,121.6344,357.2,118.4344" style="stroke:#181818;stroke-width:0.8000000000000002;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="52" x="357.2" y="103.9816">更新工具链</text><path d="M4,91.875 L4,123.875 L348,123.875 L348,99.875 L340,91.875 L4,91.875 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.4000000000000001;"/><path d="M340,91.875 L340,99.875 L348,99.875 L340,91.875 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.4000000000000001;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="253.6" x="8.8" y="105.5285">rustup component add rust-src --toolchain nightly</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="327.2" x="8.8" y="117.6348">rustup target add wasm32-unknown-unknown --toolchain nightly</text><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="351.6" x2="385.2" y1="166.4063" y2="166.4063"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="385.2" x2="385.2" y1="166.4063" y2="176.8063"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="352.4" x2="385.2" y1="176.8063" y2="176.8063"/><polygon fill="#181818" points="360.4,173.6063,352.4,176.8063,360.4,180.0063,357.2,176.8063" style="stroke:#181818;stroke-width:0.8000000000000002;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="61.6" x="357.2" y="162.3535">cargo install</text><path d="M8.8,132.0875 L8.8,200.0875 L347.2,200.0875 L347.2,140.0875 L339.2,132.0875 L8.8,132.0875 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.4000000000000001;"/><path d="M339.2,132.0875 L339.2,140.0875 L347.2,140.0875 L339.2,132.0875 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.4000000000000001;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="142.4" x="13.6" y="145.741">cargo install contracts-node</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="321.6" x="13.6" y="157.8473">--git https://github.com/paritytech/substrate-contracts-node.git</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" text-decoration="line-through" textLength="87.2" x="13.6" y="169.9535">tag &lt;latest-tag&gt;</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="69.6" x="104" y="169.9535">force --locked</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="3.2" x="13.6" y="182.0598"> </text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="107.2" x="13.6" y="194.166">可以去这里查看标签号:</text><a href="https://github.com/paritytech/substrate-contracts-node/releases" target="_top" title="https://github.com/paritytech/substrate-contracts-node/releases" xlink:actuate="onRequest" xlink:href="https://github.com/paritytech/substrate-contracts-node/releases" xlink:show="new" xlink:title="https://github.com/paritytech/substrate-contracts-node/releases" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" text-decoration="underline" textLength="122.4" x="124" y="194.166">substrate contract code</text></a><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="351.6" x2="385.2" y1="248.9906" y2="248.9906"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="385.2" x2="385.2" y1="248.9906" y2="259.3906"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="352.4" x2="385.2" y1="259.3906" y2="259.3906"/><polygon fill="#181818" points="360.4,256.1906,352.4,259.3906,360.4,262.5906,357.2,259.3906" style="stroke:#181818;stroke-width:0.8000000000000002;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="52" x="357.2" y="244.9379">安装相关包</text><path d="M153.6,208.6188 L153.6,288.6188 L347.2,288.6188 L347.2,216.6188 L339.2,208.6188 L153.6,208.6188 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.4000000000000001;"/><path d="M339.2,208.6188 L339.2,216.6188 L347.2,216.6188 L339.2,208.6188 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.4000000000000001;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="154.4" x="158.4" y="222.2723">linux: sudo apt install binaryen</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="132.8" x="158.4" y="234.3785">mac: brew install binaryen</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="3.2" x="158.4" y="246.4848"> </text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="112.8" x="158.4" y="258.591">cargo install dylint-link</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="176.8" x="158.4" y="270.6973">cargo install cargo-contract --force</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="107.2" x="158.4" y="282.8035">cargo contract --help</text><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="351.6" x2="385.2" y1="337.6281" y2="337.6281"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="385.2" x2="385.2" y1="337.6281" y2="348.0281"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="352.4" x2="385.2" y1="348.0281" y2="348.0281"/><polygon fill="#181818" points="360.4,344.8281,352.4,348.0281,360.4,351.2281,357.2,348.0281" style="stroke:#181818;stroke-width:0.8000000000000002;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="83.2" x="357.2" y="333.5754">新建智能合约项目</text><path d="M34.4,297.2563 L34.4,377.2563 L347.2,377.2563 L347.2,305.2563 L339.2,297.2563 L34.4,297.2563 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.4000000000000001;"/><path d="M339.2,297.2563 L339.2,305.2563 L347.2,305.2563 L339.2,297.2563 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.4000000000000001;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="132" x="39.2" y="310.9098">cargo contract new flipper</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="49.6" x="39.2" y="323.016">cd flipper/</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="24" x="39.2" y="335.1223">ls -al</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="284" x="39.2" y="347.2285">-rwxr-xr-x   1 dev-doc  staff   285 Mar  4 14:49 .gitignore</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="296" x="39.2" y="359.3348">-rwxr-xr-x   1 dev-doc  staff  1023 Mar  4 14:49 Cargo.toml</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="263.2" x="39.2" y="371.441">-rwxr-xr-x   1 dev-doc  staff  2262 Mar  4 14:49 lib.rs</text><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="522.8" x2="556.4" y1="450.4781" y2="450.4781"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="556.4" x2="556.4" y1="450.4781" y2="460.8781"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="523.6" x2="556.4" y1="460.8781" y2="460.8781"/><polygon fill="#181818" points="531.6,457.6781,523.6,460.8781,531.6,464.0781,528.4,460.8781" style="stroke:#181818;stroke-width:0.8000000000000002;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="106.4" x="528.4" y="446.4254">修改scale和scale-info</text><path d="M325.6,385.8938 L325.6,514.6938 L518.4,514.6938 L518.4,393.8938 L510.4,385.8938 L325.6,385.8938 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.4000000000000001;"/><path d="M510.4,385.8938 L510.4,393.8938 L518.4,393.8938 L510.4,385.8938 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.4000000000000001;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="48" x="330.4" y="399.5473">scale = {</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="163.2" x="343.2" y="411.6535">package = "parity-scale-codec",</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="69.6" x="343.2" y="423.7598">version = "3",</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="124" x="343.2" y="435.866">default-features = false,</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="114.4" x="343.2" y="447.9723">features = ["derive"] }</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="70.4" x="330.4" y="460.0785">scale-info = {</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="69.6" x="343.2" y="472.1848">version = "2",</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="124" x="343.2" y="484.291">default-features = false,</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="108" x="343.2" y="496.3973">features = ["derive"],</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="86.4" x="343.2" y="508.5035">optional = true }</text><rect fill="#EEEEEE" height="2.4" style="stroke:#EEEEEE;stroke-width:0.8000000000000002;" width="845.2" x="0" y="535.4094"/><line style="stroke:#000000;stroke-width:0.8000000000000002;" x1="0" x2="845.2" y1="535.4094" y2="535.4094"/><line style="stroke:#000000;stroke-width:0.8000000000000002;" x1="0" x2="845.2" y1="537.8094" y2="537.8094"/><rect fill="#EEEEEE" height="18.5063" style="stroke:#000000;stroke-width:1.6000000000000003;" width="162.4" x="341.4" y="526.9563"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="147.2" x="346.2" y="539.8098">Test the default contract</text><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="351.6" x2="385.2" y1="570.3688" y2="570.3688"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="385.2" x2="385.2" y1="570.3688" y2="580.7688"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="352.4" x2="385.2" y1="580.7688" y2="580.7688"/><polygon fill="#181818" points="360.4,577.5688,352.4,580.7688,360.4,583.9688,357.2,580.7688" style="stroke:#181818;stroke-width:0.8000000000000002;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="97.6" x="357.2" y="566.316">cargo +nightly test</text><rect fill="#EEEEEE" height="2.4" style="stroke:#EEEEEE;stroke-width:0.8000000000000002;" width="845.2" x="0" y="603.6219"/><line style="stroke:#000000;stroke-width:0.8000000000000002;" x1="0" x2="845.2" y1="603.6219" y2="603.6219"/><line style="stroke:#000000;stroke-width:0.8000000000000002;" x1="0" x2="845.2" y1="606.0219" y2="606.0219"/><rect fill="#EEEEEE" height="18.5063" style="stroke:#000000;stroke-width:1.6000000000000003;" width="120.8" x="362.2" y="595.1688"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="105.6" x="367" y="608.0223">Build the contract</text><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="351.6" x2="385.2" y1="726.5781" y2="726.5781"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="385.2" x2="385.2" y1="726.5781" y2="736.9781"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="352.4" x2="385.2" y1="736.9781" y2="736.9781"/><polygon fill="#181818" points="360.4,733.7781,352.4,736.9781,360.4,740.1781,357.2,736.9781" style="stroke:#181818;stroke-width:0.8000000000000002;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="147.2" x="357.2" y="722.5254">cargo +nightly contract build</text><path d="M38.4,625.675 L38.4,827.275 L347.2,827.275 L347.2,633.675 L339.2,625.675 L38.4,625.675 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.4000000000000001;"/><path d="M339.2,625.675 L339.2,633.675 L347.2,633.675 L339.2,625.675 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.4000000000000001;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="126.4" x="43.2" y="639.3285">此命令为 Flipper 项目构建:</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="163.2" x="43.2" y="651.4348">1. 一个 WebAssembly 二进制文件</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="262.4" x="43.2" y="663.541">2. 一个包含合约应用程序二进制接口 (ABI) 的元数据文件</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="189.6" x="43.2" y="675.6473">3. 一个用于部署合约的 .contract 文件。</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="3.2" x="43.2" y="687.7535"> </text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="226.4" x="43.2" y="699.8598">target/ink 目录中的 metadata.json 文件描述了</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="187.2" x="43.2" y="711.966">你可以用来与这个合约交互的所有接口。</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="124.8" x="43.2" y="724.0723">该文件包含几个重要部分：</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="272.8" x="43.2" y="736.1785">1. 规范部分包括有关可以调用的函数（如构造函数和消息）</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="220.8" x="43.2" y="748.2848">2. 发出的事件以及可以显示的任何文档的信息。</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="3.2" x="43.2" y="760.391"> </text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="135.2" x="43.2" y="772.4973">本节还包括一个选择器字段，</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="168.8" x="43.2" y="784.6035">该字段包含函数名称的 4 字节散列，</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="166.4" x="43.2" y="796.7098">用于将合约调用路由到正确的函数。</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="292" x="43.2" y="808.816">storage 部分定义了合约管理的所有存储项以及如何访问它们。</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="292" x="43.2" y="820.9223">类型部分提供了整个 JSON 其余部分中使用的自定义数据类型。</text><rect fill="#EEEEEE" height="2.4" style="stroke:#EEEEEE;stroke-width:0.8000000000000002;" width="845.2" x="0" y="847.8281"/><line style="stroke:#000000;stroke-width:0.8000000000000002;" x1="0" x2="845.2" y1="847.8281" y2="847.8281"/><line style="stroke:#000000;stroke-width:0.8000000000000002;" x1="0" x2="845.2" y1="850.2281" y2="850.2281"/><rect fill="#EEEEEE" height="18.5063" style="stroke:#000000;stroke-width:1.6000000000000003;" width="260" x="292.6" y="839.375"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="244.8" x="297.4" y="852.2285">Start the Substrate smart contracts node</text><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="351.6" x2="385.2" y1="882.7875" y2="882.7875"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="385.2" x2="385.2" y1="882.7875" y2="893.1875"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="352.4" x2="385.2" y1="893.1875" y2="893.1875"/><polygon fill="#181818" points="360.4,889.9875,352.4,893.1875,360.4,896.3875,357.2,893.1875" style="stroke:#181818;stroke-width:0.8000000000000002;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="160" x="357.2" y="878.7348">substrate-contracts-node --dev</text><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="687.6" x2="721.2" y1="916.4938" y2="916.4938"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="721.2" x2="721.2" y1="916.4938" y2="926.8938"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="688.4" x2="721.2" y1="926.8938" y2="926.8938"/><polygon fill="#181818" points="696.4,923.6938,688.4,926.8938,696.4,930.0938,693.2,926.8938" style="stroke:#181818;stroke-width:0.8000000000000002;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="92" x="693.2" y="912.441">Select Local Node</text><rect fill="#EEEEEE" height="2.4" style="stroke:#EEEEEE;stroke-width:0.8000000000000002;" width="845.2" x="0" y="949.7469"/><line style="stroke:#000000;stroke-width:0.8000000000000002;" x1="0" x2="845.2" y1="949.7469" y2="949.7469"/><line style="stroke:#000000;stroke-width:0.8000000000000002;" x1="0" x2="845.2" y1="952.1469" y2="952.1469"/><rect fill="#EEEEEE" height="18.5063" style="stroke:#000000;stroke-width:1.6000000000000003;" width="132" x="356.6" y="941.2938"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="116.8" x="361.4" y="954.1473">Deploy the contract</text><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="687.6" x2="721.2" y1="996.8125" y2="996.8125"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="721.2" x2="721.2" y1="996.8125" y2="1007.2125"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="688.4" x2="721.2" y1="1007.2125" y2="1007.2125"/><polygon fill="#181818" points="696.4,1004.0125,688.4,1007.2125,696.4,1010.4125,693.2,1007.2125" style="stroke:#181818;stroke-width:0.8000000000000002;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="143.2" x="693.2" y="980.6535">Add New Contract &amp; Upload</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="98.4" x="693.2" y="992.7598">New Contract Code</text><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="687.6" x2="721.2" y1="1054.7313" y2="1054.7313"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="721.2" x2="721.2" y1="1054.7313" y2="1065.1313"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="688.4" x2="721.2" y1="1065.1313" y2="1065.1313"/><polygon fill="#181818" points="696.4,1061.9313,688.4,1065.1313,696.4,1068.3313,693.2,1065.1313" style="stroke:#181818;stroke-width:0.8000000000000002;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="137.6" x="693.2" y="1026.466">Select an account, such as</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="90.4" x="693.2" y="1038.5723">alice, and uplodat</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="76.8" x="693.2" y="1050.6785">flipper.contract</text><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="687.6" x2="721.2" y1="1100.5438" y2="1100.5438"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="721.2" x2="721.2" y1="1100.5438" y2="1110.9438"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="688.4" x2="721.2" y1="1110.9438" y2="1110.9438"/><polygon fill="#181818" points="696.4,1107.7438,688.4,1110.9438,696.4,1114.1438,693.2,1110.9438" style="stroke:#181818;stroke-width:0.8000000000000002;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="131.2" x="693.2" y="1084.3848">create an instance on the</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="53.6" x="693.2" y="1096.491">blockchain</text><rect fill="#EEEEEE" height="2.4" style="stroke:#EEEEEE;stroke-width:0.8000000000000002;" width="845.2" x="0" y="1133.7969"/><line style="stroke:#000000;stroke-width:0.8000000000000002;" x1="0" x2="845.2" y1="1133.7969" y2="1133.7969"/><line style="stroke:#000000;stroke-width:0.8000000000000002;" x1="0" x2="845.2" y1="1136.1969" y2="1136.1969"/><rect fill="#EEEEEE" height="18.5063" style="stroke:#000000;stroke-width:1.6000000000000003;" width="124" x="360.6" y="1125.3438"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="108.8" x="365.4" y="1138.1973">Try smart contract</text><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="687.6" x2="721.2" y1="1168.7563" y2="1168.7563"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="721.2" x2="721.2" y1="1168.7563" y2="1179.1563"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="688.4" x2="721.2" y1="1179.1563" y2="1179.1563"/><polygon fill="#181818" points="696.4,1175.9563,688.4,1179.1563,696.4,1182.3563,693.2,1179.1563" style="stroke:#181818;stroke-width:0.8000000000000002;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="112" x="693.2" y="1164.7035">test the get() function</text><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="687.6" x2="721.2" y1="1202.4625" y2="1202.4625"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="721.2" x2="721.2" y1="1202.4625" y2="1212.8625"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="688.4" x2="721.2" y1="1212.8625" y2="1212.8625"/><polygon fill="#181818" points="696.4,1209.6625,688.4,1212.8625,696.4,1216.0625,693.2,1212.8625" style="stroke:#181818;stroke-width:0.8000000000000002;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="109.6" x="693.2" y="1198.4098">test the flip() function</text></g></svg></figure>
<h2 id="develop-a-smart-contract"><a class="header" href="#develop-a-smart-contract">Develop a smart contract</a></h2>
<blockquote>
<p><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#substrate%E5%AE%98%E6%96%B9%E6%95%99%E7%A8%8B%E6%A2%B3%E7%90%86%E4%B8%8E%E7%BB%83%E4%B9%A0">返回顶部</a></p>
</blockquote>
<figure><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="2101.3784px" preserveAspectRatio="none" style="width:850px;height:2101px;background:#FFFFFF;" version="1.1" viewBox="0 0 850 2101" width="850.3779px" zoomAndPan="magnify"><defs/><g><line style="stroke:#181818;stroke-width:0.377945753668297;stroke-dasharray:5.0,5.0;" x1="249.4442" x2="249.4442" y1="75.471" y2="2027.2833"/><line style="stroke:#181818;stroke-width:0.377945753668297;stroke-dasharray:5.0,5.0;" x1="411.205" x2="411.205" y1="75.471" y2="2027.2833"/><line style="stroke:#181818;stroke-width:0.377945753668297;stroke-dasharray:5.0,5.0;" x1="573.3437" x2="573.3437" y1="75.471" y2="2027.2833"/><line style="stroke:#181818;stroke-width:0.377945753668297;stroke-dasharray:5.0,5.0;" x1="744.9311" x2="744.9311" y1="75.471" y2="2027.2833"/><rect fill="#E2E2F0" height="70.9357" rx="1.8897" ry="1.8897" style="stroke:#181818;stroke-width:0.377945753668297;" width="136.8164" x="181.414" y="3.7795"/><text fill="#000000" font-family="sans-serif" font-size="13.606" font-weight="bold" lengthAdjust="spacing" textLength="27.2121" x="236.2161" y="21.7001">终端</text><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="181.414" x2="318.2303" y1="28.6884" y2="28.6884"/><text fill="#000000" font-family="sans-serif" font-size="10.5825" lengthAdjust="spacing" textLength="63.4949" x="218.0747" y="42.2908">更新工具链，</text><text fill="#000000" font-family="sans-serif" font-size="10.5825" lengthAdjust="spacing" textLength="42.3299" x="228.6572" y="54.6095">下载安装</text><text fill="#000000" font-family="sans-serif" font-size="10.5825" lengthAdjust="spacing" textLength="126.2339" x="186.7052" y="66.9281">Substrate contract code</text><rect fill="#E2E2F0" height="70.9357" rx="1.8897" ry="1.8897" style="stroke:#181818;stroke-width:0.377945753668297;" width="136.8164" x="181.414" y="2026.5274"/><text fill="#000000" font-family="sans-serif" font-size="13.606" font-weight="bold" lengthAdjust="spacing" textLength="27.2121" x="236.2161" y="2044.4481">终端</text><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="181.414" x2="318.2303" y1="2051.4364" y2="2051.4364"/><text fill="#000000" font-family="sans-serif" font-size="10.5825" lengthAdjust="spacing" textLength="63.4949" x="218.0747" y="2065.0388">更新工具链，</text><text fill="#000000" font-family="sans-serif" font-size="10.5825" lengthAdjust="spacing" textLength="42.3299" x="228.6572" y="2077.3574">下载安装</text><text fill="#000000" font-family="sans-serif" font-size="10.5825" lengthAdjust="spacing" textLength="126.2339" x="186.7052" y="2089.6761">Substrate contract code</text><rect fill="#E2E2F0" height="46.2984" rx="1.8897" ry="1.8897" style="stroke:#181818;stroke-width:0.377945753668297;" width="102.0454" x="360.5602" y="28.4168"/><text fill="#000000" font-family="sans-serif" font-size="13.606" font-weight="bold" lengthAdjust="spacing" textLength="39.3064" x="391.9297" y="46.3375">lib.rs</text><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="360.5602" x2="462.6056" y1="53.3258" y2="53.3258"/><text fill="#000000" font-family="sans-serif" font-size="10.5825" lengthAdjust="spacing" textLength="91.4629" x="365.8515" y="66.9281">incrementer/lib.rs</text><rect fill="#E2E2F0" height="46.2984" rx="1.8897" ry="1.8897" style="stroke:#181818;stroke-width:0.377945753668297;" width="102.0454" x="360.5602" y="2026.5274"/><text fill="#000000" font-family="sans-serif" font-size="13.606" font-weight="bold" lengthAdjust="spacing" textLength="39.3064" x="391.9297" y="2044.4481">lib.rs</text><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="360.5602" x2="462.6056" y1="2051.4364" y2="2051.4364"/><text fill="#000000" font-family="sans-serif" font-size="10.5825" lengthAdjust="spacing" textLength="91.4629" x="365.8515" y="2065.0388">incrementer/lib.rs</text><rect fill="#E2E2F0" height="46.2984" rx="1.8897" ry="1.8897" style="stroke:#181818;stroke-width:0.377945753668297;" width="134.5487" x="506.0694" y="28.4168"/><text fill="#000000" font-family="sans-serif" font-size="13.606" font-weight="bold" lengthAdjust="spacing" textLength="83.904" x="531.3917" y="46.3375">Cargo.toml</text><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="506.0694" x2="640.6181" y1="53.3258" y2="53.3258"/><text fill="#000000" font-family="sans-serif" font-size="10.5825" lengthAdjust="spacing" textLength="123.9662" x="511.3606" y="66.9281">incrementer/Cargo.toml</text><rect fill="#E2E2F0" height="46.2984" rx="1.8897" ry="1.8897" style="stroke:#181818;stroke-width:0.377945753668297;" width="134.5487" x="506.0694" y="2026.5274"/><text fill="#000000" font-family="sans-serif" font-size="13.606" font-weight="bold" lengthAdjust="spacing" textLength="83.904" x="531.3917" y="2044.4481">Cargo.toml</text><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="506.0694" x2="640.6181" y1="2051.4364" y2="2051.4364"/><text fill="#000000" font-family="sans-serif" font-size="10.5825" lengthAdjust="spacing" textLength="123.9662" x="511.3606" y="2065.0388">incrementer/Cargo.toml</text><rect fill="#E2E2F0" height="46.2984" rx="1.8897" ry="1.8897" style="stroke:#181818;stroke-width:0.377945753668297;" width="193.5082" x="648.177" y="28.4168"/><text fill="#000000" font-family="sans-serif" font-size="13.606" font-weight="bold" lengthAdjust="spacing" textLength="182.9257" x="653.4682" y="46.3375">contracts-ui application</text><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="648.177" x2="841.6852" y1="53.3258" y2="53.3258"/><text fill="#000000" font-family="sans-serif" font-size="10.5825" lengthAdjust="spacing" textLength="86.9275" x="701.4673" y="66.9281">智能合约web app</text><rect fill="#E2E2F0" height="46.2984" rx="1.8897" ry="1.8897" style="stroke:#181818;stroke-width:0.377945753668297;" width="193.5082" x="648.177" y="2026.5274"/><text fill="#000000" font-family="sans-serif" font-size="13.606" font-weight="bold" lengthAdjust="spacing" textLength="182.9257" x="653.4682" y="2044.4481">contracts-ui application</text><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="648.177" x2="841.6852" y1="2051.4364" y2="2051.4364"/><text fill="#000000" font-family="sans-serif" font-size="10.5825" lengthAdjust="spacing" textLength="86.9275" x="701.4673" y="2065.0388">智能合约web app</text><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="249.8221" x2="281.5696" y1="102.0778" y2="102.0778"/><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="281.5696" x2="281.5696" y1="102.0778" y2="111.9044"/><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="250.578" x2="281.5696" y1="111.9044" y2="111.9044"/><polygon fill="#181818" points="258.1369,108.8809,250.578,111.9044,258.1369,114.928,255.1134,111.9044" style="stroke:#181818;stroke-width:0.755891507336594;"/><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="56.6919" x="255.1134" y="98.2485">create &amp; cd</text><path d="M75.5892,86.8094 L75.5892,117.0451 L245.6647,117.0451 L245.6647,94.3683 L238.1058,86.8094 L75.5892,86.8094 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.377945753668297;"/><path d="M238.1058,86.8094 L238.1058,94.3683 L245.6647,94.3683 L238.1058,86.8094 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.377945753668297;"/><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="154.2019" x="80.1245" y="99.7101">cargo contract new incrementer</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="76.345" x="80.1245" y="111.1489">cd incrementer/</text><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="411.5829" x2="443.3304" y1="148.4382" y2="148.4382"/><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="443.3304" x2="443.3304" y1="148.4382" y2="158.2648"/><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="412.3388" x2="443.3304" y1="158.2648" y2="158.2648"/><polygon fill="#181818" points="419.8977,155.2412,412.3388,158.2648,419.8977,161.2884,416.8742,158.2648" style="stroke:#181818;stroke-width:0.755891507336594;"/><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="34.0151" x="416.8742" y="133.1701">update</text><a href="https://github.com/substrate-developer-hub/substrate-contracts-workshop/blob/master/1/assets/1.1-finished-code.rs" target="_top" title="https://github.com/substrate-developer-hub/substrate-contracts-workshop/blob/master/1/assets/1.1-finished-code.rs" xlink:actuate="onRequest" xlink:href="https://github.com/substrate-developer-hub/substrate-contracts-workshop/blob/master/1/assets/1.1-finished-code.rs" xlink:show="new" xlink:title="https://github.com/substrate-developer-hub/substrate-contracts-workshop/blob/master/1/assets/1.1-finished-code.rs" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" text-decoration="underline" textLength="94.4864" x="453.9129" y="133.1701">incrementer source</text></a><a href="https://github.com/substrate-developer-hub/substrate-contracts-workshop/blob/master/1/assets/1.1-finished-code.rs" target="_top" title="https://github.com/substrate-developer-hub/substrate-contracts-workshop/blob/master/1/assets/1.1-finished-code.rs" xlink:actuate="onRequest" xlink:href="https://github.com/substrate-developer-hub/substrate-contracts-workshop/blob/master/1/assets/1.1-finished-code.rs" xlink:show="new" xlink:title="https://github.com/substrate-developer-hub/substrate-contracts-workshop/blob/master/1/assets/1.1-finished-code.rs" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" text-decoration="underline" textLength="23.4326" x="416.8742" y="144.6089">code</text></a><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="573.3437" x2="605.0912" y1="234.8342" y2="234.8342"/><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="605.0912" x2="605.0912" y1="234.8342" y2="244.6608"/><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="574.0996" x2="605.0912" y1="244.6608" y2="244.6608"/><polygon fill="#181818" points="581.6585,241.6373,574.0996,244.6608,581.6585,247.6844,578.6349,244.6608" style="stroke:#181818;stroke-width:0.755891507336594;"/><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="130.7692" x="578.6349" y="231.0049">modify scale and scale-info</text><path d="M387.0165,168.0914 L387.0165,301.1283 L569.1863,301.1283 L569.1863,175.6503 L561.6274,168.0914 L387.0165,168.0914 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.377945753668297;"/><path d="M561.6274,168.0914 L561.6274,175.6503 L569.1863,175.6503 L561.6274,168.0914 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.377945753668297;"/><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="45.3535" x="391.5518" y="180.9921">scale = {</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="154.2019" x="403.6461" y="192.4309">package = "parity-scale-codec",</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="65.7626" x="403.6461" y="203.8696">version = "3",</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="117.1632" x="403.6461" y="215.3084">default-features = false,</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="99.0218" x="403.6461" y="226.7472">features = ["derive"]</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="6.0471" x="403.6461" y="238.1859">}</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="66.5185" x="391.5518" y="249.6247">scale-info = {</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="65.7626" x="403.6461" y="261.0634">version = "2",</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="117.1632" x="403.6461" y="272.5022">default-features = false,</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="102.0454" x="403.6461" y="283.941">features = ["derive"],</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="81.6363" x="403.6461" y="295.3797">optional = true }</text><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="249.8221" x2="281.5696" y1="324.304" y2="324.304"/><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="281.5696" x2="281.5696" y1="324.304" y2="334.1306"/><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="250.578" x2="281.5696" y1="334.1306" y2="334.1306"/><polygon fill="#181818" points="258.1369,331.1071,250.578,334.1306,258.1369,337.1542,255.1134,334.1306" style="stroke:#181818;stroke-width:0.755891507336594;"/><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="55.936" x="255.1134" y="320.4747">test &amp; build</text><path d="M90.707,309.0356 L90.707,339.2713 L245.6647,339.2713 L245.6647,316.5945 L238.1058,309.0356 L90.707,309.0356 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.377945753668297;"/><path d="M238.1058,309.0356 L238.1058,316.5945 L245.6647,316.5945 L238.1058,309.0356 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.377945753668297;"/><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="92.2188" x="95.2423" y="321.9363">cargo +nightly test</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="139.084" x="95.2423" y="333.3751">cargo +nightly contract build</text><rect fill="#EEEEEE" height="2.2677" style="stroke:#EEEEEE;stroke-width:0.755891507336594;" width="845.4647" x="0" y="358.7975"/><line style="stroke:#000000;stroke-width:0.755891507336594;" x1="0" x2="845.4647" y1="358.7975" y2="358.7975"/><line style="stroke:#000000;stroke-width:0.755891507336594;" x1="0" x2="845.4647" y1="361.0652" y2="361.0652"/><rect fill="#EEEEEE" height="17.4859" style="stroke:#000000;stroke-width:1.511783014673188;" width="123.2103" x="361.1272" y="350.8104"/><text fill="#000000" font-family="sans-serif" font-size="9.8266" font-weight="bold" lengthAdjust="spacing" textLength="108.8484" x="365.6625" y="362.9553">store simple values</text><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="411.5829" x2="443.3304" y1="423.5" y2="423.5"/><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="443.3304" x2="443.3304" y1="423.5" y2="433.3266"/><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="412.3388" x2="443.3304" y1="433.3266" y2="433.3266"/><polygon fill="#181818" points="419.8977,430.3031,412.3388,433.3266,419.8977,436.3502,416.8742,433.3266" style="stroke:#181818;stroke-width:0.755891507336594;"/><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="111.1161" x="416.8742" y="419.6707">update #[ink(storage)]</text><path d="M275.1445,379.6347 L275.1445,466.5622 L407.4255,466.5622 L407.4255,387.1936 L399.8666,379.6347 L275.1445,379.6347 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.377945753668297;"/><path d="M399.8666,379.6347 L399.8666,387.1936 L407.4255,387.1936 L399.8666,379.6347 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.377945753668297;"/><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="9.0707" x="279.6799" y="392.5354">1.</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="65.7626" x="291.7741" y="392.5354">[ink(storage)]</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="116.4073" x="279.6799" y="403.9742">pub struct MyContract {</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="68.0302" x="303.8684" y="415.4129">// Store a bool</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="70.2979" x="303.8684" y="426.8517">my_bool: bool,</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="85.4157" x="303.8684" y="438.2905">// Store a number</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="85.4157" x="303.8684" y="449.7292">my_number: u32,</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="6.0471" x="279.6799" y="461.168">}</text><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="411.5829" x2="443.3304" y1="575.883" y2="575.883"/><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="443.3304" x2="443.3304" y1="575.883" y2="585.7096"/><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="412.3388" x2="443.3304" y1="585.7096" y2="585.7096"/><polygon fill="#181818" points="419.8977,582.6861,412.3388,585.7096,419.8977,588.7332,416.8742,585.7096" style="stroke:#181818;stroke-width:0.755891507336594;"/><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="89.9511" x="416.8742" y="560.615">supported types &amp;</text><a href="https://github.com/paritytech/parity-scale-codec" target="_top" title="https://github.com/paritytech/parity-scale-codec" xlink:actuate="onRequest" xlink:href="https://github.com/paritytech/parity-scale-codec" xlink:show="new" xlink:title="https://github.com/paritytech/parity-scale-codec" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" text-decoration="underline" textLength="55.1801" x="509.8488" y="560.615">parity scale</text></a><a href="https://github.com/paritytech/parity-scale-codec" target="_top" title="https://github.com/paritytech/parity-scale-codec" xlink:actuate="onRequest" xlink:href="https://github.com/paritytech/parity-scale-codec" xlink:show="new" xlink:title="https://github.com/paritytech/parity-scale-codec" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" text-decoration="underline" textLength="28.7239" x="416.8742" y="572.0537">codec</text></a><path d="M156.4695,474.8239 L156.4695,665.3085 L407.4255,665.3085 L407.4255,482.3828 L399.8666,474.8239 L156.4695,474.8239 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.377945753668297;"/><path d="M399.8666,474.8239 L399.8666,482.3828 L407.4255,482.3828 L399.8666,474.8239 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.377945753668297;"/><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="196.5318" x="161.0049" y="487.7246">// We are importing the default ink! types</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="93.7305" x="161.0049" y="499.1634">use ink_lang as ink;</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="3.0236" x="161.0049" y="510.6021"> </text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="9.0707" x="161.0049" y="522.0409">1.</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="67.2743" x="173.0992" y="522.0409">[ink::contract]</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="89.1952" x="161.0049" y="533.4797">mod MyContract {</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="3.0236" x="161.0049" y="544.9184"> </text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="210.8937" x="185.1934" y="556.3572">// Our struct will use those default ink! types</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="74.0774" x="185.1934" y="567.796">#[ink(storage)]</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="116.4073" x="185.1934" y="579.2347">pub struct MyContract {</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="116.4073" x="209.3819" y="590.6735">// Store some AccountId</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="115.6514" x="209.3819" y="602.1122">my_account: AccountId,</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="107.3366" x="209.3819" y="613.551">// Store some Balance</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="105.8248" x="209.3819" y="624.9898">my_balance: Balance,</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="6.0471" x="185.1934" y="636.4285">}</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="8.3148" x="185.1934" y="647.8673">/*</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" text-decoration="line-through" textLength="19.6532" x="196.5318" y="647.8673">snip</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="8.3148" x="219.2085" y="647.8673">*/</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="6.0471" x="161.0049" y="659.3061">}</text><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="411.5829" x2="443.3304" y1="854.0924" y2="854.0924"/><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="443.3304" x2="443.3304" y1="854.0924" y2="863.919"/><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="412.3388" x2="443.3304" y1="863.919" y2="863.919"/><polygon fill="#181818" points="419.8977,860.8955,412.3388,863.919,419.8977,866.9426,416.8742,863.919" style="stroke:#181818;stroke-width:0.755891507336594;"/><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="76.345" x="416.8742" y="850.2632">add contructors</text><path d="M3.7795,672.9619 L3.7795,1035.034 L408.1814,1035.034 L408.1814,680.5209 L400.6225,672.9619 L3.7795,672.9619 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.377945753668297;"/><path d="M400.6225,672.9619 L400.6225,680.5209 L408.1814,680.5209 L400.6225,672.9619 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.377945753668297;"/><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="93.7305" x="8.3148" y="685.8627">use ink_lang as ink;</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="3.0236" x="8.3148" y="697.3014"> </text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="9.0707" x="8.3148" y="708.7402">1.</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="67.2743" x="20.4091" y="708.7402">[ink::contract]</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="89.1952" x="8.3148" y="720.179">mod mycontract {</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="3.0236" x="8.3148" y="731.6177"> </text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="74.0774" x="32.5033" y="743.0565">#[ink(storage)]</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="116.4073" x="32.5033" y="754.4952">pub struct MyContract {</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="65.0067" x="56.6919" y="765.934">number: u32,</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="6.0471" x="32.5033" y="777.3728">}</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="3.0236" x="8.3148" y="788.8115"> </text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="87.6834" x="32.5033" y="800.2503">impl MyContract {</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="340.1512" x="56.6919" y="811.6891">/// Constructor that initializes the `u32` value to the given `init_value`.</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="92.2188" x="56.6919" y="823.1278">#[ink(constructor)]</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="174.6109" x="56.6919" y="834.5666">pub fn new(init_value: u32) -&gt; Self {</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="27.2121" x="80.8804" y="846.0054">Self {</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="92.2188" x="105.0689" y="857.4441">number: init_value,</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="6.0471" x="80.8804" y="868.8829">}</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="6.0471" x="56.6919" y="880.3217">}</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="3.0236" x="8.3148" y="891.7604"> </text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="320.498" x="56.6919" y="903.1992">/// Constructor that initializes the `u32` value to the `u32` default.</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="9.0707" x="56.6919" y="914.638">///</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="247.9324" x="56.6919" y="926.0767">/// Constructors can delegate to other constructors.</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="92.2188" x="56.6919" y="937.5155">#[ink(constructor)]</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="119.4309" x="56.6919" y="948.9542">pub fn default() -&gt; Self {</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="27.2121" x="80.8804" y="960.393">Self {</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="128.5016" x="105.0689" y="971.8318">number: Default::default(),</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="6.0471" x="80.8804" y="983.2705">}</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="6.0471" x="56.6919" y="994.7093">}</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="8.3148" x="32.5033" y="1006.1481">/*</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" text-decoration="line-through" textLength="19.6532" x="43.8417" y="1006.1481">snip</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="8.3148" x="66.5185" y="1006.1481">*/</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="6.0471" x="32.5033" y="1017.5868">}</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="6.0471" x="8.3148" y="1029.0256">}</text><rect fill="#EEEEEE" height="2.2677" style="stroke:#EEEEEE;stroke-width:0.755891507336594;" width="845.4647" x="0" y="1054.448"/><line style="stroke:#000000;stroke-width:0.755891507336594;" x1="0" x2="845.4647" y1="1054.448" y2="1054.448"/><line style="stroke:#000000;stroke-width:0.755891507336594;" x1="0" x2="845.4647" y1="1056.7157" y2="1056.7157"/><rect fill="#EEEEEE" height="17.4859" style="stroke:#000000;stroke-width:1.511783014673188;" width="140.5958" x="352.4344" y="1046.4609"/><text fill="#000000" font-family="sans-serif" font-size="9.8266" font-weight="bold" lengthAdjust="spacing" textLength="126.2339" x="356.9698" y="1058.6058">update smart contract</text><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="411.5829" x2="443.3304" y1="1107.7118" y2="1107.7118"/><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="443.3304" x2="443.3304" y1="1107.7118" y2="1117.5384"/><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="412.3388" x2="443.3304" y1="1117.5384" y2="1117.5384"/><polygon fill="#181818" points="419.8977,1114.5148,412.3388,1117.5384,419.8977,1120.5619,416.8742,1117.5384" style="stroke:#181818;stroke-width:0.755891507336594;"/><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="95.9982" x="416.8742" y="1092.4437">replace the Storage</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="55.1801" x="416.8742" y="1103.8825">Declaration</text><path d="M271.3651,1075.2852 L271.3651,1128.1976 L407.4255,1128.1976 L407.4255,1082.8441 L399.8666,1075.2852 L271.3651,1075.2852 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.377945753668297;"/><path d="M399.8666,1075.2852 L399.8666,1082.8441 L407.4255,1082.8441 L399.8666,1075.2852 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.377945753668297;"/><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="9.0707" x="275.9004" y="1088.1859">1.</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="65.7626" x="287.9947" y="1088.1859">[ink(storage)]</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="120.1867" x="275.9004" y="1099.6247">pub struct Incrementer {</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="49.1329" x="284.9711" y="1111.0634">value: i32,</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="6.0471" x="275.9004" y="1122.5022">}</text><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="411.5829" x2="443.3304" y1="1191.4622" y2="1191.4622"/><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="443.3304" x2="443.3304" y1="1191.4622" y2="1201.2888"/><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="412.3388" x2="443.3304" y1="1201.2888" y2="1201.2888"/><polygon fill="#181818" points="419.8977,1198.2652,412.3388,1201.2888,419.8977,1204.3123,416.8742,1201.2888" style="stroke:#181818;stroke-width:0.755891507336594;"/><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="113.3837" x="416.8742" y="1176.1941">modify the incrementer</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="55.1801" x="416.8742" y="1187.6329">constructor</text><path d="M217.6968,1136.1581 L217.6968,1235.1799 L407.4255,1235.1799 L407.4255,1143.717 L399.8666,1136.1581 L217.6968,1136.1581 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.377945753668297;"/><path d="M399.8666,1136.1581 L399.8666,1143.717 L407.4255,1143.717 L399.8666,1136.1581 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.377945753668297;"/><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="91.4629" x="222.2321" y="1149.0588">impl Incrementer {</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="92.2188" x="225.2557" y="1160.4976">#[ink(constructor)]</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="170.8315" x="225.2557" y="1171.9363">pub fn new(init_value: i32) -&gt; Self {</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="27.2121" x="243.3971" y="1183.3751">Self {</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="80.1245" x="249.4442" y="1194.8139">value: init_value,</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="6.0471" x="243.3971" y="1206.2526">}</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="6.0471" x="225.2557" y="1217.6914">}</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="6.0471" x="222.2321" y="1229.1302">}</text><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="411.5829" x2="443.3304" y1="1280.932" y2="1280.932"/><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="443.3304" x2="443.3304" y1="1280.932" y2="1290.7586"/><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="412.3388" x2="443.3304" y1="1290.7586" y2="1290.7586"/><polygon fill="#181818" points="419.8977,1287.735,412.3388,1290.7586,419.8977,1293.7821,416.8742,1290.7586" style="stroke:#181818;stroke-width:0.755891507336594;"/><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="123.2103" x="416.8742" y="1277.1027">add a second constructor</text><path d="M272.1209,1242.786 L272.1209,1318.3752 L407.4255,1318.3752 L407.4255,1250.3449 L399.8666,1242.786 L272.1209,1242.786 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.377945753668297;"/><path d="M399.8666,1242.786 L399.8666,1250.3449 L407.4255,1250.3449 L399.8666,1242.786 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.377945753668297;"/><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="9.0707" x="276.6563" y="1255.6868">1.</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="83.904" x="288.7506" y="1255.6868">[ink(constructor)]</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="119.4309" x="276.6563" y="1267.1255">pub fn default() -&gt; Self {</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="27.2121" x="285.727" y="1278.5643">Self {</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="40.8181" x="297.8213" y="1290.003">value: 0,</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="6.0471" x="285.727" y="1301.4418">}</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="6.0471" x="276.6563" y="1312.8806">}</text><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="249.8221" x2="281.5696" y1="1338.7311" y2="1338.7311"/><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="281.5696" x2="281.5696" y1="1338.7311" y2="1348.5577"/><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="250.578" x2="281.5696" y1="1348.5577" y2="1348.5577"/><polygon fill="#181818" points="258.1369,1345.5341,250.578,1348.5577,258.1369,1351.5813,255.1134,1348.5577" style="stroke:#181818;stroke-width:0.755891507336594;"/><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="92.2188" x="255.1134" y="1334.9018">cargo +nightly test</text><rect fill="#EEEEEE" height="2.2677" style="stroke:#EEEEEE;stroke-width:0.755891507336594;" width="845.4647" x="0" y="1370.1508"/><line style="stroke:#000000;stroke-width:0.755891507336594;" x1="0" x2="845.4647" y1="1370.1508" y2="1370.1508"/><line style="stroke:#000000;stroke-width:0.755891507336594;" x1="0" x2="845.4647" y1="1372.4185" y2="1372.4185"/><rect fill="#EEEEEE" height="17.4859" style="stroke:#000000;stroke-width:1.511783014673188;" width="224.4998" x="310.4824" y="1362.1637"/><text fill="#000000" font-family="sans-serif" font-size="9.8266" font-weight="bold" lengthAdjust="spacing" textLength="210.1378" x="315.0178" y="1374.3086">add a function to get a storage value</text><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="411.5829" x2="443.3304" y1="1429.134" y2="1429.134"/><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="443.3304" x2="443.3304" y1="1429.134" y2="1438.9605"/><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="412.3388" x2="443.3304" y1="1438.9605" y2="1438.9605"/><polygon fill="#181818" points="419.8977,1435.937,412.3388,1438.9605,419.8977,1441.9841,416.8742,1438.9605" style="stroke:#181818;stroke-width:0.755891507336594;"/><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="136.0605" x="416.8742" y="1413.8659">use #[link(message)] to get</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="44.5976" x="416.8742" y="1425.3047">message</text><path d="M268.3415,1390.988 L268.3415,1455.2388 L407.4255,1455.2388 L407.4255,1398.5469 L399.8666,1390.988 L268.3415,1390.988 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.377945753668297;"/><path d="M399.8666,1390.988 L399.8666,1398.5469 L407.4255,1398.5469 L399.8666,1390.988 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.377945753668297;"/><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="9.0707" x="272.8768" y="1403.8887">1.</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="73.3215" x="284.9711" y="1403.8887">[ink(message)]</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="123.2103" x="272.8768" y="1415.3275">pub fn get(&amp;self) -&gt; i32 {</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="45.3535" x="281.9475" y="1426.7663">self.value</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="6.0471" x="281.9475" y="1438.205">}</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="6.0471" x="272.8768" y="1449.6438">}</text><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="411.5829" x2="443.3304" y1="1490.0068" y2="1490.0068"/><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="443.3304" x2="443.3304" y1="1490.0068" y2="1499.8334"/><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="412.3388" x2="443.3304" y1="1499.8334" y2="1499.8334"/><polygon fill="#181818" points="419.8977,1496.8099,412.3388,1499.8334,419.8977,1502.857,416.8742,1499.8334" style="stroke:#181818;stroke-width:0.755891507336594;"/><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="66.5185" x="416.8742" y="1486.1776">add test code</text><path d="M204.0907,1463.2997 L204.0907,1516.2121 L407.4255,1516.2121 L407.4255,1470.8586 L399.8666,1463.2997 L204.0907,1463.2997 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.377945753668297;"/><path d="M399.8666,1463.2997 L399.8666,1470.8586 L407.4255,1470.8586 L399.8666,1463.2997 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.377945753668297;"/><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="94.4864" x="208.6261" y="1476.2004">fn default_works() {</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="178.3904" x="217.6968" y="1487.6391">let contract = Incrementer::default();</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="140.5958" x="217.6968" y="1499.0779">assert_eq!(contract.get(), 0);</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="6.0471" x="208.6261" y="1510.5167">}</text><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="249.8221" x2="281.5696" y1="1536.3672" y2="1536.3672"/><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="281.5696" x2="281.5696" y1="1536.3672" y2="1546.1938"/><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="250.578" x2="281.5696" y1="1546.1938" y2="1546.1938"/><polygon fill="#181818" points="258.1369,1543.1702,250.578,1546.1938,258.1369,1549.2174,255.1134,1546.1938" style="stroke:#181818;stroke-width:0.755891507336594;"/><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="92.2188" x="255.1134" y="1532.5379">cargo +nightly test</text><rect fill="#EEEEEE" height="2.2677" style="stroke:#EEEEEE;stroke-width:0.755891507336594;" width="845.4647" x="0" y="1567.7869"/><line style="stroke:#000000;stroke-width:0.755891507336594;" x1="0" x2="845.4647" y1="1567.7869" y2="1567.7869"/><line style="stroke:#000000;stroke-width:0.755891507336594;" x1="0" x2="845.4647" y1="1570.0546" y2="1570.0546"/><rect fill="#EEEEEE" height="17.4859" style="stroke:#000000;stroke-width:1.511783014673188;" width="255.4913" x="294.9867" y="1559.7998"/><text fill="#000000" font-family="sans-serif" font-size="9.8266" font-weight="bold" lengthAdjust="spacing" textLength="241.1294" x="299.522" y="1571.9447">add a function to modify the storage value</text><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="411.5829" x2="443.3304" y1="1626.7701" y2="1626.7701"/><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="443.3304" x2="443.3304" y1="1626.7701" y2="1636.5966"/><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="412.3388" x2="443.3304" y1="1636.5966" y2="1636.5966"/><polygon fill="#181818" points="419.8977,1633.5731,412.3388,1636.5966,419.8977,1639.6202,416.8742,1636.5966" style="stroke:#181818;stroke-width:0.755891507336594;"/><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="87.6834" x="416.8742" y="1611.502">add inc function in</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="81.6363" x="416.8742" y="1622.9408">#[ink(message)]</text><path d="M242.6412,1588.6241 L242.6412,1652.8749 L407.4255,1652.8749 L407.4255,1596.183 L399.8666,1588.6241 L242.6412,1588.6241 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.377945753668297;"/><path d="M399.8666,1588.6241 L399.8666,1596.183 L407.4255,1596.183 L399.8666,1588.6241 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.377945753668297;"/><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="9.0707" x="247.1765" y="1601.5248">1.</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="73.3215" x="259.2708" y="1601.5248">[ink(message)]</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="148.9106" x="247.1765" y="1612.9636">pub fn inc(&amp;mut self, by: i32) {</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="82.3922" x="256.2472" y="1624.4024">self.value += by;</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="6.0471" x="256.2472" y="1635.8411">}</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="6.0471" x="247.1765" y="1647.2799">}</text><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="411.5829" x2="443.3304" y1="1716.2399" y2="1716.2399"/><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="443.3304" x2="443.3304" y1="1716.2399" y2="1726.0664"/><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="412.3388" x2="443.3304" y1="1726.0664" y2="1726.0664"/><polygon fill="#181818" points="419.8977,1723.0429,412.3388,1726.0664,419.8977,1729.09,416.8742,1726.0664" style="stroke:#181818;stroke-width:0.755891507336594;"/><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="66.5185" x="416.8742" y="1712.4106">add test code</text><path d="M171.5874,1660.9358 L171.5874,1771.2959 L407.4255,1771.2959 L407.4255,1668.4947 L399.8666,1660.9358 L171.5874,1660.9358 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.377945753668297;"/><path d="M399.8666,1660.9358 L399.8666,1668.4947 L407.4255,1668.4947 L399.8666,1660.9358 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.377945753668297;"/><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="9.0707" x="176.1227" y="1673.8365">1.</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="46.1094" x="188.217" y="1673.8365">[ink::test]</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="67.2743" x="185.1934" y="1685.2752">fn it_works() {</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="198.7995" x="197.2877" y="1696.714">let mut contract = Incrementer::new(42);</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="146.643" x="197.2877" y="1708.1528">assert_eq!(contract.get(), 42);</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="73.3215" x="197.2877" y="1719.5915">contract.inc(5);</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="146.643" x="197.2877" y="1731.0303">assert_eq!(contract.get(), 47);</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="83.1481" x="197.2877" y="1742.4691">contract.inc(-50);</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="144.3753" x="197.2877" y="1753.9078">assert_eq!(contract.get(), -3);</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="6.0471" x="176.1227" y="1765.3466">}</text><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="249.8221" x2="281.5696" y1="1791.1971" y2="1791.1971"/><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="281.5696" x2="281.5696" y1="1791.1971" y2="1801.0237"/><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="250.578" x2="281.5696" y1="1801.0237" y2="1801.0237"/><polygon fill="#181818" points="258.1369,1798.0002,250.578,1801.0237,258.1369,1804.0473,255.1134,1801.0237" style="stroke:#181818;stroke-width:0.755891507336594;"/><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="92.2188" x="255.1134" y="1787.3678">cargo +nightly test</text><rect fill="#EEEEEE" height="2.2677" style="stroke:#EEEEEE;stroke-width:0.755891507336594;" width="845.4647" x="0" y="1822.6168"/><line style="stroke:#000000;stroke-width:0.755891507336594;" x1="0" x2="845.4647" y1="1822.6168" y2="1822.6168"/><line style="stroke:#000000;stroke-width:0.755891507336594;" x1="0" x2="845.4647" y1="1824.8845" y2="1824.8845"/><rect fill="#EEEEEE" height="17.4859" style="stroke:#000000;stroke-width:1.511783014673188;" width="99.7777" x="372.8435" y="1814.6298"/><text fill="#000000" font-family="sans-serif" font-size="9.8266" font-weight="bold" lengthAdjust="spacing" textLength="85.4157" x="377.3788" y="1826.7746">build wasm file</text><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="249.8221" x2="281.5696" y1="1855.6487" y2="1855.6487"/><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="281.5696" x2="281.5696" y1="1855.6487" y2="1865.4753"/><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="250.578" x2="281.5696" y1="1865.4753" y2="1865.4753"/><polygon fill="#181818" points="258.1369,1862.4517,250.578,1865.4753,258.1369,1868.4988,255.1134,1865.4753" style="stroke:#181818;stroke-width:0.755891507336594;"/><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="139.084" x="255.1134" y="1851.8194">cargo +nightly contract build</text><rect fill="#EEEEEE" height="2.2677" style="stroke:#EEEEEE;stroke-width:0.755891507336594;" width="845.4647" x="0" y="1887.0684"/><line style="stroke:#000000;stroke-width:0.755891507336594;" x1="0" x2="845.4647" y1="1887.0684" y2="1887.0684"/><line style="stroke:#000000;stroke-width:0.755891507336594;" x1="0" x2="845.4647" y1="1889.3361" y2="1889.3361"/><rect fill="#EEEEEE" height="17.4859" style="stroke:#000000;stroke-width:1.511783014673188;" width="210.8937" x="317.2855" y="1879.0813"/><text fill="#000000" font-family="sans-serif" font-size="9.8266" font-weight="bold" lengthAdjust="spacing" textLength="196.5318" x="321.8208" y="1891.2262">deploy and test the smart contract</text><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="249.8221" x2="281.5696" y1="1920.1003" y2="1920.1003"/><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="281.5696" x2="281.5696" y1="1920.1003" y2="1929.9268"/><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="250.578" x2="281.5696" y1="1929.9268" y2="1929.9268"/><polygon fill="#181818" points="258.1369,1926.9033,250.578,1929.9268,258.1369,1932.9504,255.1134,1929.9268" style="stroke:#181818;stroke-width:0.755891507336594;"/><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="151.1783" x="255.1134" y="1916.271">substrate-contracts-node --dev</text><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="744.9311" x2="776.6785" y1="1977.8994" y2="1977.8994"/><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="776.6785" x2="776.6785" y1="1977.8994" y2="1987.726"/><line style="stroke:#181818;stroke-width:0.755891507336594;" x1="745.687" x2="776.6785" y1="1987.726" y2="1987.726"/><polygon fill="#181818" points="753.2459,1984.7024,745.687,1987.726,753.2459,1990.7495,750.2223,1987.726" style="stroke:#181818;stroke-width:0.755891507336594;"/><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="83.1481" x="750.2223" y="1974.0701">add new contract</text><path d="M384.7488,1939.7534 L384.7488,2015.3426 L740.7737,2015.3426 L740.7737,1947.3123 L733.2148,1939.7534 L384.7488,1939.7534 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.377945753668297;"/><path d="M733.2148,1939.7534 L733.2148,1947.3123 L740.7737,1947.3123 L733.2148,1939.7534 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.377945753668297;"/><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="340.1512" x="389.2841" y="1952.6542">Open the Contracts UI and verify that it is connected to the local node.</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="114.8955" x="389.2841" y="1964.0929">Click Add New Contract.</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="157.9813" x="389.2841" y="1975.5317">Click Upload New Contract Code.</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="250.956" x="389.2841" y="1986.9704">Select the incrementer.contract file, then click Next.</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="137.5723" x="389.2841" y="1998.4092">Click Upload and Instantiate.</text><text fill="#000000" font-family="sans-serif" font-size="9.8266" lengthAdjust="spacing" textLength="325.7892" x="389.2841" y="2009.848">Explore and interact with the smart contract using the Contracts UI.</text></g></svg></figure>
<h2 id="use-maps-for-storing-values"><a class="header" href="#use-maps-for-storing-values">Use maps for storing values</a></h2>
<blockquote>
<p><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#substrate%E5%AE%98%E6%96%B9%E6%95%99%E7%A8%8B%E6%A2%B3%E7%90%86%E4%B8%8E%E7%BB%83%E4%B9%A0">返回顶部</a></p>
</blockquote>
<figure><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="2651.8362px" preserveAspectRatio="none" style="width:850px;height:2651px;background:#FFFFFF;" version="1.1" viewBox="0 0 850 2651" width="850.5117px" zoomAndPan="magnify"><defs/><g><line style="stroke:#181818;stroke-width:0.5117399157134257;stroke-dasharray:5.0,5.0;" x1="497.4112" x2="497.4112" y1="102.1881" y2="2551.6472"/><line style="stroke:#181818;stroke-width:0.5117399157134257;stroke-dasharray:5.0,5.0;" x1="704.1541" x2="704.1541" y1="102.1881" y2="2551.6472"/><rect fill="#E2E2F0" height="62.6881" rx="2.5587" ry="2.5587" style="stroke:#181818;stroke-width:0.5117399157134257;" width="138.1698" x="428.838" y="38.4764"/><text fill="#000000" font-family="sans-serif" font-size="18.4226" font-weight="bold" lengthAdjust="spacing" textLength="53.221" x="471.3125" y="62.7411">lib.rs</text><line style="stroke:#181818;stroke-width:1.0234798314268514;" x1="428.838" x2="567.0078" y1="72.2033" y2="72.2033"/><text fill="#000000" font-family="sans-serif" font-size="14.3287" lengthAdjust="spacing" textLength="123.8411" x="436.0024" y="90.6209">incrementer/lib.rs</text><rect fill="#E2E2F0" height="62.6881" rx="2.5587" ry="2.5587" style="stroke:#181818;stroke-width:0.5117399157134257;" width="138.1698" x="428.838" y="2550.6237"/><text fill="#000000" font-family="sans-serif" font-size="18.4226" font-weight="bold" lengthAdjust="spacing" textLength="53.221" x="471.3125" y="2574.8884">lib.rs</text><line style="stroke:#181818;stroke-width:1.0234798314268514;" x1="428.838" x2="567.0078" y1="2584.3505" y2="2584.3505"/><text fill="#000000" font-family="sans-serif" font-size="14.3287" lengthAdjust="spacing" textLength="123.8411" x="436.0024" y="2602.7682">incrementer/lib.rs</text><rect fill="#E2E2F0" height="96.0472" rx="2.5587" ry="2.5587" style="stroke:#181818;stroke-width:0.5117399157134257;" width="185.2498" x="612.0409" y="5.1174"/><text fill="#000000" font-family="sans-serif" font-size="18.4226" font-weight="bold" lengthAdjust="spacing" textLength="36.8453" x="686.2432" y="29.3821">终端</text><line style="stroke:#181818;stroke-width:1.0234798314268514;" x1="612.0409" x2="797.2908" y1="38.8443" y2="38.8443"/><text fill="#000000" font-family="sans-serif" font-size="14.3287" lengthAdjust="spacing" textLength="85.9723" x="661.6797" y="57.2619">更新工具链，</text><text fill="#000000" font-family="sans-serif" font-size="14.3287" lengthAdjust="spacing" textLength="57.3149" x="676.0084" y="73.9414">下载安装</text><text fill="#000000" font-family="sans-serif" font-size="14.3287" lengthAdjust="spacing" textLength="170.9211" x="619.2053" y="90.6209">Substrate contract code</text><rect fill="#E2E2F0" height="96.0472" rx="2.5587" ry="2.5587" style="stroke:#181818;stroke-width:0.5117399157134257;" width="185.2498" x="612.0409" y="2550.6237"/><text fill="#000000" font-family="sans-serif" font-size="18.4226" font-weight="bold" lengthAdjust="spacing" textLength="36.8453" x="686.2432" y="2574.8884">终端</text><line style="stroke:#181818;stroke-width:1.0234798314268514;" x1="612.0409" x2="797.2908" y1="2584.3505" y2="2584.3505"/><text fill="#000000" font-family="sans-serif" font-size="14.3287" lengthAdjust="spacing" textLength="85.9723" x="661.6797" y="2602.7682">更新工具链，</text><text fill="#000000" font-family="sans-serif" font-size="14.3287" lengthAdjust="spacing" textLength="57.3149" x="676.0084" y="2619.4477">下载安装</text><text fill="#000000" font-family="sans-serif" font-size="14.3287" lengthAdjust="spacing" textLength="170.9211" x="619.2053" y="2636.1272">Substrate contract code</text><rect fill="#EEEEEE" height="3.0704" style="stroke:#EEEEEE;stroke-width:1.0234798314268514;" width="843.8591" x="0" y="133.4722"/><line style="stroke:#000000;stroke-width:1.0234798314268514;" x1="0" x2="843.8591" y1="133.4722" y2="133.4722"/><line style="stroke:#000000;stroke-width:1.0234798314268514;" x1="0" x2="843.8591" y1="136.5426" y2="136.5426"/><rect fill="#EEEEEE" height="23.676" style="stroke:#000000;stroke-width:2.046959662853703;" width="168.8742" x="337.4925" y="122.6577"/><text fill="#000000" font-family="sans-serif" font-size="13.3052" font-weight="bold" lengthAdjust="spacing" textLength="149.4281" x="343.6334" y="139.1018">initialize a mapping</text><line style="stroke:#181818;stroke-width:1.0234798314268514;" x1="497.9229" x2="540.9091" y1="461.1456" y2="461.1456"/><line style="stroke:#181818;stroke-width:1.0234798314268514;" x1="540.9091" x2="540.9091" y1="461.1456" y2="474.4509"/><line style="stroke:#181818;stroke-width:1.0234798314268514;" x1="498.9464" x2="540.9091" y1="474.4509" y2="474.4509"/><polygon fill="#181818" points="509.1812,470.3569,498.9464,474.4509,509.1812,478.5448,505.0873,474.4509" style="stroke:#181818;stroke-width:1.0234798314268514;"/><path d="M5.1174,161.6858 L5.1174,775.7737 L493.3173,775.7737 L493.3173,171.9206 L483.0825,161.6858 L5.1174,161.6858 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5117399157134257;"/><path d="M483.0825,161.6858 L483.0825,171.9206 L493.3173,171.9206 L483.0825,161.6858 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5117399157134257;"/><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="12.2818" x="11.2583" y="179.1534">1.</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="256.8934" x="27.634" y="179.1534">![cfg_attr(not(feature = "std"), no_std)]</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="4.0939" x="11.2583" y="194.6416"> </text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="126.9115" x="11.2583" y="210.1297">use ink_lang as ink;</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="4.0939" x="11.2583" y="225.6178"> </text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="12.2818" x="11.2583" y="241.106">2.</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="91.0897" x="27.634" y="241.106">[ink::contract]</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="120.7706" x="11.2583" y="256.5941">mod mycontract {</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="256.8934" x="27.634" y="272.0822">use ink_storage::traits::SpreadAllocate;</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="4.0939" x="11.2583" y="287.5703"> </text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="100.301" x="27.634" y="303.0585">#[ink(storage)]</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="170.9211" x="27.634" y="318.5466">#[derive(SpreadAllocate)]</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="157.6159" x="27.634" y="334.0347">pub struct MyContract {</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="290.6683" x="44.0096" y="349.5229">// Store a mapping from AccountIds to a u32</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="300.9031" x="44.0096" y="365.011">map: ink_storage::Mapping&lt;AccountId, u32&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="8.1878" x="27.634" y="380.4991">}</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="4.0939" x="11.2583" y="395.9872"> </text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="118.7237" x="27.634" y="411.4754">impl MyContract {</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="124.8645" x="44.0096" y="426.9635">#[ink(constructor)]</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="211.8603" x="44.0096" y="442.4516">pub fn new(count: u32) -&gt; Self {</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="295.7857" x="60.3853" y="457.9398">// This call is required to correctly initialize the</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="171.9446" x="60.3853" y="473.4279">// Mapping of the contract.</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="364.3588" x="60.3853" y="488.916">ink_lang::utils::initialize_contract(|contract: &amp;mut Self| {</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="194.4612" x="76.761" y="504.4041">let caller = Self::env().caller();</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="245.6352" x="76.761" y="519.8923">contract.map.insert(&amp;caller, &amp;count);</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="13.3052" x="60.3853" y="535.3804">})</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="8.1878" x="44.0096" y="550.8685">}</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="4.0939" x="11.2583" y="566.3567"> </text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="124.8645" x="44.0096" y="581.8448">#[ink(constructor)]</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="161.7098" x="44.0096" y="597.3329">pub fn default() -&gt; Self {</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="255.87" x="60.3853" y="612.821">ink_lang::utils::initialize_contract(|_| {})</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="8.1878" x="44.0096" y="628.3092">}</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="4.0939" x="11.2583" y="643.7973"> </text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="433.9554" x="44.0096" y="659.2854">// Get the number associated with the caller's AccountId, if it exists</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="110.5358" x="44.0096" y="674.7736">#[ink(message)]</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="171.9446" x="44.0096" y="690.2617">pub fn get(&amp;self) -&gt; u32 {</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="194.4612" x="60.3853" y="705.7498">let caller = Self::env().caller();</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="272.2456" x="60.3853" y="721.2379">self.map.get(&amp;caller).unwrap_or_default()</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="8.1878" x="44.0096" y="736.7261">}</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="8.1878" x="27.634" y="752.2142">}</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="8.1878" x="11.2583" y="767.7023">}</text><rect fill="#EEEEEE" height="3.0704" style="stroke:#EEEEEE;stroke-width:1.0234798314268514;" width="843.8591" x="0" y="802.1243"/><line style="stroke:#000000;stroke-width:1.0234798314268514;" x1="0" x2="843.8591" y1="802.1243" y2="802.1243"/><line style="stroke:#000000;stroke-width:1.0234798314268514;" x1="0" x2="843.8591" y1="805.1948" y2="805.1948"/><rect fill="#EEEEEE" height="23.676" style="stroke:#000000;stroke-width:2.046959662853703;" width="243.5882" x="300.1355" y="791.3098"/><text fill="#000000" font-family="sans-serif" font-size="13.3052" font-weight="bold" lengthAdjust="spacing" textLength="224.1421" x="306.2763" y="807.754">identifying the contract caller</text><line style="stroke:#181818;stroke-width:1.0234798314268514;" x1="497.9229" x2="540.9091" y1="1013.6368" y2="1013.6368"/><line style="stroke:#181818;stroke-width:1.0234798314268514;" x1="540.9091" x2="540.9091" y1="1013.6368" y2="1026.9421"/><line style="stroke:#181818;stroke-width:1.0234798314268514;" x1="498.9464" x2="540.9091" y1="1026.9421" y2="1026.9421"/><polygon fill="#181818" points="509.1812,1022.8482,498.9464,1026.9421,509.1812,1031.036,505.0873,1026.9421" style="stroke:#181818;stroke-width:1.0234798314268514;"/><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="157.6159" x="505.0873" y="1008.452">using the contract caller</text><path d="M172.9681,830.338 L172.9681,1196.7438 L492.2938,1196.7438 L492.2938,840.5728 L482.059,830.338 L172.9681,830.338 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5117399157134257;"/><path d="M482.059,830.338 L482.059,840.5728 L492.2938,840.5728 L482.059,830.338 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5117399157134257;"/><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="12.2818" x="179.109" y="847.8056">1.</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="256.8934" x="195.4846" y="847.8056">![cfg_attr(not(feature = "std"), no_std)]</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="4.0939" x="179.109" y="863.2937"> </text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="126.9115" x="179.109" y="878.7819">use ink_lang as ink;</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="4.0939" x="179.109" y="894.27"> </text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="12.2818" x="179.109" y="909.7581">2.</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="91.0897" x="195.4846" y="909.7581">[ink::contract]</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="120.7706" x="179.109" y="925.2463">mod mycontract {</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="4.0939" x="179.109" y="940.7344"> </text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="100.301" x="211.8603" y="956.2225">#[ink(storage)]</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="157.6159" x="211.8603" y="971.7106">pub struct MyContract {</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="161.7098" x="244.6117" y="987.1988">// Store a contract owner</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="115.6532" x="244.6117" y="1002.6869">owner: AccountId,</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="8.1878" x="211.8603" y="1018.175">}</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="4.0939" x="179.109" y="1033.6632"> </text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="118.7237" x="211.8603" y="1049.1513">impl MyContract {</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="124.8645" x="244.6117" y="1064.6394">#[ink(constructor)]</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="142.2637" x="244.6117" y="1080.1275">pub fn new() -&gt; Self {</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="36.8453" x="277.363" y="1095.6157">Self {</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="166.8272" x="310.1144" y="1111.1038">owner: Self::env().caller();</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="8.1878" x="277.363" y="1126.5919">}</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="8.1878" x="244.6117" y="1142.0801">}</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="11.2583" x="244.6117" y="1157.5682">/*</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" text-decoration="line-through" textLength="26.6105" x="259.9639" y="1157.5682">snip</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="11.2583" x="290.6683" y="1157.5682">*/</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="8.1878" x="211.8603" y="1173.0563">}</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="8.1878" x="179.109" y="1188.5444">}</text><rect fill="#EEEEEE" height="3.0704" style="stroke:#EEEEEE;stroke-width:1.0234798314268514;" width="843.8591" x="0" y="1222.9664"/><line style="stroke:#000000;stroke-width:1.0234798314268514;" x1="0" x2="843.8591" y1="1222.9664" y2="1222.9664"/><line style="stroke:#000000;stroke-width:1.0234798314268514;" x1="0" x2="843.8591" y1="1226.0369" y2="1226.0369"/><rect fill="#EEEEEE" height="23.676" style="stroke:#000000;stroke-width:2.046959662853703;" width="288.6213" x="277.6189" y="1212.1519"/><text fill="#000000" font-family="sans-serif" font-size="13.3052" font-weight="bold" lengthAdjust="spacing" textLength="269.1752" x="283.7598" y="1228.5961">add mapping to the smart contract</text><line style="stroke:#181818;stroke-width:1.0234798314268514;" x1="497.9229" x2="540.9091" y1="1302.8299" y2="1302.8299"/><line style="stroke:#181818;stroke-width:1.0234798314268514;" x1="540.9091" x2="540.9091" y1="1302.8299" y2="1316.1351"/><line style="stroke:#181818;stroke-width:1.0234798314268514;" x1="498.9464" x2="540.9091" y1="1316.1351" y2="1316.1351"/><polygon fill="#181818" points="509.1812,1312.0412,498.9464,1316.1351,509.1812,1320.229,505.0873,1316.1351" style="stroke:#181818;stroke-width:1.0234798314268514;"/><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="42.9862" x="505.0873" y="1297.645">import</text><path d="M201.6255,1251.1801 L201.6255,1353.5281 L492.2938,1353.5281 L492.2938,1261.4149 L482.059,1251.1801 L201.6255,1251.1801 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5117399157134257;"/><path d="M482.059,1251.1801 L482.059,1261.4149 L492.2938,1261.4149 L482.059,1251.1801 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5117399157134257;"/><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="12.2818" x="207.7664" y="1268.6477">1.</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="85.9723" x="224.1421" y="1268.6477">[ink::contract</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="125.888" x="207.7664" y="1284.1359">mod incrementer {</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="256.8934" x="220.0482" y="1299.624">use ink_storage::traits::SpreadAllocate;</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="4.0939" x="207.7664" y="1315.1121"> </text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="100.301" x="220.0482" y="1330.6002">#[ink(storage)]</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="170.9211" x="220.0482" y="1346.0884">#[derive(SpreadAllocate)]</text><line style="stroke:#181818;stroke-width:1.0234798314268514;" x1="497.9229" x2="540.9091" y1="1400.7401" y2="1400.7401"/><line style="stroke:#181818;stroke-width:1.0234798314268514;" x1="540.9091" x2="540.9091" y1="1400.7401" y2="1414.0453"/><line style="stroke:#181818;stroke-width:1.0234798314268514;" x1="498.9464" x2="540.9091" y1="1414.0453" y2="1414.0453"/><polygon fill="#181818" points="509.1812,1409.9514,498.9464,1414.0453,509.1812,1418.1393,505.0873,1414.0453" style="stroke:#181818;stroke-width:1.0234798314268514;"/><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="112.5828" x="505.0873" y="1395.5552">add mapping key</text><path d="M129.9819,1364.5785 L129.9819,1436.2221 L492.2938,1436.2221 L492.2938,1374.8133 L482.059,1364.5785 L129.9819,1364.5785 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5117399157134257;"/><path d="M482.059,1364.5785 L482.059,1374.8133 L492.2938,1374.8133 L482.059,1364.5785 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5117399157134257;"/><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="162.7333" x="136.1228" y="1382.0461">pub struct Incrementer {</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="66.5262" x="148.4046" y="1397.5342">value: i32,</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="328.537" x="148.4046" y="1413.0224">my_value: ink_storage::Mapping&lt;AccountId, i32&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="8.1878" x="136.1228" y="1428.5105">}</text><line style="stroke:#181818;stroke-width:1.0234798314268514;" x1="497.9229" x2="540.9091" y1="1521.8825" y2="1521.8825"/><line style="stroke:#181818;stroke-width:1.0234798314268514;" x1="540.9091" x2="540.9091" y1="1521.8825" y2="1535.1878"/><line style="stroke:#181818;stroke-width:1.0234798314268514;" x1="498.9464" x2="540.9091" y1="1535.1878" y2="1535.1878"/><polygon fill="#181818" points="509.1812,1531.0938,498.9464,1535.1878,509.1812,1539.2817,505.0873,1535.1878" style="stroke:#181818;stroke-width:1.0234798314268514;"/><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="188.3203" x="505.0873" y="1501.2095">set an initial value in the new</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="52.1975" x="505.0873" y="1516.6977">function</text><path d="M94.1601,1447.0006 L94.1601,1581.0764 L492.2938,1581.0764 L492.2938,1457.2354 L482.059,1447.0006 L94.1601,1447.0006 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5117399157134257;"/><path d="M482.059,1447.0006 L482.059,1457.2354 L492.2938,1457.2354 L482.059,1447.0006 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5117399157134257;"/><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="12.2818" x="100.301" y="1464.4682">1.</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="113.6063" x="116.6767" y="1464.4682">[ink(constructor)]</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="231.3064" x="100.301" y="1479.9563">pub fn new(init_value: i32) -&gt; Self {</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="364.3588" x="112.5828" y="1495.4445">ink_lang::utils::initialize_contract(|contract: &amp;mut Self| {</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="178.0855" x="128.9585" y="1510.9326">contract.value = init_value;</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="194.4612" x="128.9585" y="1526.4207">let caller = Self::env().caller();</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="249.7291" x="128.9585" y="1541.9088">contract.my_value.insert(&amp;caller, &amp;0);</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="13.3052" x="112.5828" y="1557.397">})</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="8.1878" x="100.301" y="1572.8851">}</text><line style="stroke:#181818;stroke-width:1.0234798314268514;" x1="497.9229" x2="540.9091" y1="1650.769" y2="1650.769"/><line style="stroke:#181818;stroke-width:1.0234798314268514;" x1="540.9091" x2="540.9091" y1="1650.769" y2="1664.0743"/><line style="stroke:#181818;stroke-width:1.0234798314268514;" x1="498.9464" x2="540.9091" y1="1664.0743" y2="1664.0743"/><polygon fill="#181818" points="509.1812,1659.9803,498.9464,1664.0743,509.1812,1668.1682,505.0873,1664.0743" style="stroke:#181818;stroke-width:1.0234798314268514;"/><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="158.6394" x="505.0873" y="1630.096">set an initial value in the</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="101.3245" x="505.0873" y="1645.5842">default function</text><path d="M94.1601,1591.3752 L94.1601,1693.7232 L492.2938,1693.7232 L492.2938,1601.61 L482.059,1591.3752 L94.1601,1591.3752 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5117399157134257;"/><path d="M482.059,1591.3752 L482.059,1601.61 L492.2938,1601.61 L482.059,1591.3752 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5117399157134257;"/><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="12.2818" x="100.301" y="1608.8428">1.</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="113.6063" x="116.6767" y="1608.8428">[ink(constructor)]</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="161.7098" x="100.301" y="1624.331">pub fn default() -&gt; Self {</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="364.3588" x="112.5828" y="1639.8191">ink_lang::utils::initialize_contract(|contract: &amp;mut Self| {</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="227.2125" x="128.9585" y="1655.3072">contract.value = Default::default();</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="13.3052" x="112.5828" y="1670.7953">})</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="8.1878" x="100.301" y="1686.2835">}</text><line style="stroke:#181818;stroke-width:1.0234798314268514;" x1="497.9229" x2="540.9091" y1="1740.9352" y2="1740.9352"/><line style="stroke:#181818;stroke-width:1.0234798314268514;" x1="540.9091" x2="540.9091" y1="1740.9352" y2="1754.2404"/><line style="stroke:#181818;stroke-width:1.0234798314268514;" x1="498.9464" x2="540.9091" y1="1754.2404" y2="1754.2404"/><polygon fill="#181818" points="509.1812,1750.1465,498.9464,1754.2404,509.1812,1758.3344,505.0873,1754.2404" style="stroke:#181818;stroke-width:1.0234798314268514;"/><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="106.4419" x="505.0873" y="1735.7503">add get function</text><path d="M78.8079,1704.7736 L78.8079,1776.4172 L492.2938,1776.4172 L492.2938,1715.0084 L482.059,1704.7736 L78.8079,1704.7736 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5117399157134257;"/><path d="M482.059,1704.7736 L482.059,1715.0084 L492.2938,1715.0084 L482.059,1704.7736 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5117399157134257;"/><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="12.2818" x="84.9488" y="1722.2412">1.</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="99.2775" x="101.3245" y="1722.2412">[ink(message)]</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="206.7429" x="84.9488" y="1737.7293">pub fn get_mine(&amp;self) -&gt; i32 {</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="379.711" x="97.2306" y="1753.2175">self.my_value.get(&amp;self.env().caller()).unwrap_or_default()</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="8.1878" x="84.9488" y="1768.7056">}</text><line style="stroke:#181818;stroke-width:1.0234798314268514;" x1="497.9229" x2="540.9091" y1="1838.8454" y2="1838.8454"/><line style="stroke:#181818;stroke-width:1.0234798314268514;" x1="540.9091" x2="540.9091" y1="1838.8454" y2="1852.1507"/><line style="stroke:#181818;stroke-width:1.0234798314268514;" x1="498.9464" x2="540.9091" y1="1852.1507" y2="1852.1507"/><polygon fill="#181818" points="509.1812,1848.0568,498.9464,1852.1507,509.1812,1856.2446,505.0873,1852.1507" style="stroke:#181818;stroke-width:1.0234798314268514;"/><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="90.0662" x="505.0873" y="1833.6606">add test code</text><path d="M220.0482,1787.1957 L220.0482,1889.5437 L492.2938,1889.5437 L492.2938,1797.4305 L482.059,1787.1957 L220.0482,1787.1957 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5117399157134257;"/><path d="M482.059,1787.1957 L482.059,1797.4305 L492.2938,1797.4305 L482.059,1787.1957 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5117399157134257;"/><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="12.2818" x="226.189" y="1804.6633">1.</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="62.4323" x="242.5647" y="1804.6633">[ink::test]</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="145.3341" x="226.189" y="1820.1514">fn my_value_works() {</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="238.4708" x="238.4708" y="1835.6396">let contract = Incrementer::new(11);</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="198.5551" x="238.4708" y="1851.1277">assert_eq!(contract.get(), 11);</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="230.283" x="238.4708" y="1866.6158">assert_eq!(contract.get_mine(), 0);</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="8.1878" x="226.189" y="1882.1039">}</text><line style="stroke:#181818;stroke-width:1.0234798314268514;" x1="704.6659" x2="747.652" y1="1917.1057" y2="1917.1057"/><line style="stroke:#181818;stroke-width:1.0234798314268514;" x1="747.652" x2="747.652" y1="1917.1057" y2="1930.4109"/><line style="stroke:#181818;stroke-width:1.0234798314268514;" x1="705.6893" x2="747.652" y1="1930.4109" y2="1930.4109"/><polygon fill="#181818" points="715.9241,1926.317,705.6893,1930.4109,715.9241,1934.5048,711.8302,1930.4109" style="stroke:#181818;stroke-width:1.0234798314268514;"/><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="124.8645" x="711.8302" y="1911.9208">cargo +nightly test</text><rect fill="#EEEEEE" height="3.0704" style="stroke:#EEEEEE;stroke-width:1.0234798314268514;" width="843.8591" x="0" y="1959.648"/><line style="stroke:#000000;stroke-width:1.0234798314268514;" x1="0" x2="843.8591" y1="1959.648" y2="1959.648"/><line style="stroke:#000000;stroke-width:1.0234798314268514;" x1="0" x2="843.8591" y1="1962.7185" y2="1962.7185"/><rect fill="#EEEEEE" height="23.676" style="stroke:#000000;stroke-width:2.046959662853703;" width="267.1282" x="288.3654" y="1948.8335"/><text fill="#000000" font-family="sans-serif" font-size="13.3052" font-weight="bold" lengthAdjust="spacing" textLength="247.6821" x="294.5063" y="1965.2777">insert, update, or remove values</text><line style="stroke:#181818;stroke-width:1.0234798314268514;" x1="497.9229" x2="540.9091" y1="2039.5114" y2="2039.5114"/><line style="stroke:#181818;stroke-width:1.0234798314268514;" x1="540.9091" x2="540.9091" y1="2039.5114" y2="2052.8167"/><line style="stroke:#181818;stroke-width:1.0234798314268514;" x1="498.9464" x2="540.9091" y1="2052.8167" y2="2052.8167"/><polygon fill="#181818" points="509.1812,2048.7228,498.9464,2052.8167,509.1812,2056.9106,505.0873,2052.8167" style="stroke:#181818;stroke-width:1.0234798314268514;"/><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="121.7941" x="505.0873" y="2034.3266">add insert function</text><path d="M152.4985,1987.8617 L152.4985,2090.2097 L492.2938,2090.2097 L492.2938,1998.0965 L482.059,1987.8617 L152.4985,1987.8617 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5117399157134257;"/><path d="M482.059,1987.8617 L482.059,1998.0965 L492.2938,1998.0965 L482.059,1987.8617 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5117399157134257;"/><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="12.2818" x="158.6394" y="2005.3293">1.</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="99.2775" x="175.0151" y="2005.3293">[ink(message)]</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="241.5412" x="158.6394" y="2020.8174">pub fn inc_mine(&amp;mut self, by: i32) {</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="188.3203" x="170.9211" y="2036.3056">let caller = self.env().caller();</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="204.696" x="170.9211" y="2051.7937">let my_value = self.get_mine();</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="306.0205" x="170.9211" y="2067.2818">self.my_value.insert(caller, &amp;(my_value + by));</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="8.1878" x="158.6394" y="2082.77">}</text><line style="stroke:#181818;stroke-width:1.0234798314268514;" x1="497.9229" x2="540.9091" y1="2183.8861" y2="2183.8861"/><line style="stroke:#181818;stroke-width:1.0234798314268514;" x1="540.9091" x2="540.9091" y1="2183.8861" y2="2197.1913"/><line style="stroke:#181818;stroke-width:1.0234798314268514;" x1="498.9464" x2="540.9091" y1="2197.1913" y2="2197.1913"/><polygon fill="#181818" points="509.1812,2193.0974,498.9464,2197.1913,509.1812,2201.2852,505.0873,2197.1913" style="stroke:#181818;stroke-width:1.0234798314268514;"/><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="152.4985" x="505.0873" y="2163.2131">add test code for insert</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="52.1975" x="505.0873" y="2178.7012">function</text><path d="M189.3438,2101.2601 L189.3438,2250.6881 L492.2938,2250.6881 L492.2938,2111.4949 L482.059,2101.2601 L189.3438,2101.2601 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5117399157134257;"/><path d="M482.059,2101.2601 L482.059,2111.4949 L492.2938,2111.4949 L482.059,2101.2601 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5117399157134257;"/><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="12.2818" x="195.4846" y="2118.7277">1.</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="62.4323" x="211.8603" y="2118.7277">[ink::test]</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="141.2402" x="195.4846" y="2134.2158">fn inc_mine_works() {</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="269.1752" x="207.7664" y="2149.7039">let mut contract = Incrementer::new(11);</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="230.283" x="207.7664" y="2165.1921">assert_eq!(contract.get_mine(), 0);</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="139.1933" x="207.7664" y="2180.6802">contract.inc_mine(5);</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="230.283" x="207.7664" y="2196.1683">assert_eq!(contract.get_mine(), 5);</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="139.1933" x="207.7664" y="2211.6565">contract.inc_mine(5);</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="238.4708" x="207.7664" y="2227.1446">assert_eq!(contract.get_mine(), 10);</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="8.1878" x="195.4846" y="2242.6327">}</text><line style="stroke:#181818;stroke-width:1.0234798314268514;" x1="497.9229" x2="540.9091" y1="2297.2844" y2="2297.2844"/><line style="stroke:#181818;stroke-width:1.0234798314268514;" x1="540.9091" x2="540.9091" y1="2297.2844" y2="2310.5897"/><line style="stroke:#181818;stroke-width:1.0234798314268514;" x1="498.9464" x2="540.9091" y1="2310.5897" y2="2310.5897"/><polygon fill="#181818" points="509.1812,2306.4958,498.9464,2310.5897,509.1812,2314.6836,505.0873,2310.5897" style="stroke:#181818;stroke-width:1.0234798314268514;"/><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="135.0993" x="505.0873" y="2292.0996">add remove function</text><path d="M184.2264,2261.1228 L184.2264,2332.7664 L492.2938,2332.7664 L492.2938,2271.3576 L482.059,2261.1228 L184.2264,2261.1228 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5117399157134257;"/><path d="M482.059,2261.1228 L482.059,2271.3576 L492.2938,2271.3576 L482.059,2261.1228 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5117399157134257;"/><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="12.2818" x="190.3672" y="2278.5904">1.</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="99.2775" x="206.7429" y="2278.5904">[ink(message)]</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="191.3907" x="190.3672" y="2294.0786">pub fn remove_mine(&amp;self) {</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="274.2926" x="202.649" y="2309.5667">self.my_value.remove(&amp;self.env().caller())</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="8.1878" x="190.3672" y="2325.0548">}</text><line style="stroke:#181818;stroke-width:1.0234798314268514;" x1="497.9229" x2="540.9091" y1="2426.1709" y2="2426.1709"/><line style="stroke:#181818;stroke-width:1.0234798314268514;" x1="540.9091" x2="540.9091" y1="2426.1709" y2="2439.4762"/><line style="stroke:#181818;stroke-width:1.0234798314268514;" x1="498.9464" x2="540.9091" y1="2439.4762" y2="2439.4762"/><polygon fill="#181818" points="509.1812,2435.3823,498.9464,2439.4762,509.1812,2443.5701,505.0873,2439.4762" style="stroke:#181818;stroke-width:1.0234798314268514;"/><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="165.8037" x="505.0873" y="2405.4979">add test code for remove</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="52.1975" x="505.0873" y="2420.9861">function</text><path d="M189.3438,2343.5449 L189.3438,2492.973 L492.2938,2492.973 L492.2938,2353.7797 L482.059,2343.5449 L189.3438,2343.5449 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5117399157134257;"/><path d="M482.059,2343.5449 L482.059,2353.7797 L492.2938,2353.7797 L482.059,2343.5449 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5117399157134257;"/><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="12.2818" x="195.4846" y="2361.0126">1.</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="62.4323" x="211.8603" y="2361.0126">[ink::test]</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="172.9681" x="195.4846" y="2376.5007">fn remove_mine_works() {</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="269.1752" x="207.7664" y="2391.9888">let mut contract = Incrementer::new(11);</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="230.283" x="207.7664" y="2407.4769">assert_eq!(contract.get_mine(), 0);</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="139.1933" x="207.7664" y="2422.9651">contract.inc_mine(5);</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="230.283" x="207.7664" y="2438.4532">assert_eq!(contract.get_mine(), 5);</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="162.7333" x="207.7664" y="2453.9413">contract.remove_mine();</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="230.283" x="207.7664" y="2469.4294">assert_eq!(contract.get_mine(), 0);</text><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="8.1878" x="195.4846" y="2484.9176">}</text><line style="stroke:#181818;stroke-width:1.0234798314268514;" x1="704.6659" x2="747.652" y1="2519.9193" y2="2519.9193"/><line style="stroke:#181818;stroke-width:1.0234798314268514;" x1="747.652" x2="747.652" y1="2519.9193" y2="2533.2245"/><line style="stroke:#181818;stroke-width:1.0234798314268514;" x1="705.6893" x2="747.652" y1="2533.2245" y2="2533.2245"/><polygon fill="#181818" points="715.9241,2529.1306,705.6893,2533.2245,715.9241,2537.3184,711.8302,2533.2245" style="stroke:#181818;stroke-width:1.0234798314268514;"/><text fill="#000000" font-family="sans-serif" font-size="13.3052" lengthAdjust="spacing" textLength="124.8645" x="711.8302" y="2514.7344">cargo +nightly test</text></g></svg></figure>
<h2 id="buid-a-token-contract"><a class="header" href="#buid-a-token-contract">Buid a token contract</a></h2>
<blockquote>
<p><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#substrate%E5%AE%98%E6%96%B9%E6%95%99%E7%A8%8B%E6%A2%B3%E7%90%86%E4%B8%8E%E7%BB%83%E4%B9%A0">返回顶部</a></p>
</blockquote>
<figure><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="2102.9586px" preserveAspectRatio="none" style="width:850px;height:2102px;background:#FFFFFF;" version="1.1" viewBox="0 0 850 2102" width="850.2959px" zoomAndPan="magnify"><defs/><g><line style="stroke:#181818;stroke-width:0.2958579881656805;stroke-dasharray:5.0,5.0;" x1="365.0888" x2="365.0888" y1="59.0791" y2="2044.6283"/><line style="stroke:#181818;stroke-width:0.2958579881656805;stroke-dasharray:5.0,5.0;" x1="487.8698" x2="487.8698" y1="59.0791" y2="2044.6283"/><line style="stroke:#181818;stroke-width:0.2958579881656805;stroke-dasharray:5.0,5.0;" x1="586.6864" x2="586.6864" y1="59.0791" y2="2044.6283"/><line style="stroke:#181818;stroke-width:0.2958579881656805;stroke-dasharray:5.0,5.0;" x1="722.1893" x2="722.1893" y1="59.0791" y2="2044.6283"/><rect fill="#E2E2F0" height="36.2426" rx="1.4793" ry="1.4793" style="stroke:#181818;stroke-width:0.2958579881656805;" width="53.8462" x="338.4615" y="22.2448"/><text fill="#000000" font-family="sans-serif" font-size="10.6509" font-weight="bold" lengthAdjust="spacing" textLength="30.7692" x="350" y="36.2732">lib.rs</text><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="338.4615" x2="392.3077" y1="41.7437" y2="41.7437"/><text fill="#000000" font-family="sans-serif" font-size="8.284" lengthAdjust="spacing" textLength="45.5621" x="342.6036" y="52.3917">erc20/lib.rs</text><rect fill="#E2E2F0" height="36.2426" rx="1.4793" ry="1.4793" style="stroke:#181818;stroke-width:0.2958579881656805;" width="53.8462" x="338.4615" y="2044.0366"/><text fill="#000000" font-family="sans-serif" font-size="10.6509" font-weight="bold" lengthAdjust="spacing" textLength="30.7692" x="350" y="2058.065">lib.rs</text><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="338.4615" x2="392.3077" y1="2063.5355" y2="2063.5355"/><text fill="#000000" font-family="sans-serif" font-size="8.284" lengthAdjust="spacing" textLength="45.5621" x="342.6036" y="2074.1835">erc20/lib.rs</text><rect fill="#E2E2F0" height="36.2426" rx="1.4793" ry="1.4793" style="stroke:#181818;stroke-width:0.2958579881656805;" width="79.2899" x="448.2249" y="22.2448"/><text fill="#000000" font-family="sans-serif" font-size="10.6509" font-weight="bold" lengthAdjust="spacing" textLength="65.6805" x="455.0296" y="36.2732">Cargo.toml</text><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="448.2249" x2="527.5148" y1="41.7437" y2="41.7437"/><text fill="#000000" font-family="sans-serif" font-size="8.284" lengthAdjust="spacing" textLength="71.0059" x="452.3669" y="52.3917">erc20/Cargo.toml</text><rect fill="#E2E2F0" height="36.2426" rx="1.4793" ry="1.4793" style="stroke:#181818;stroke-width:0.2958579881656805;" width="79.2899" x="448.2249" y="2044.0366"/><text fill="#000000" font-family="sans-serif" font-size="10.6509" font-weight="bold" lengthAdjust="spacing" textLength="65.6805" x="455.0296" y="2058.065">Cargo.toml</text><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="448.2249" x2="527.5148" y1="2063.5355" y2="2063.5355"/><text fill="#000000" font-family="sans-serif" font-size="8.284" lengthAdjust="spacing" textLength="71.0059" x="452.3669" y="2074.1835">erc20/Cargo.toml</text><rect fill="#E2E2F0" height="55.5288" rx="1.4793" ry="1.4793" style="stroke:#181818;stroke-width:0.2958579881656805;" width="107.1006" x="533.432" y="2.9586"/><text fill="#000000" font-family="sans-serif" font-size="10.6509" font-weight="bold" lengthAdjust="spacing" textLength="21.3018" x="576.3314" y="16.987">终端</text><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="533.432" x2="640.5325" y1="22.4575" y2="22.4575"/><text fill="#000000" font-family="sans-serif" font-size="8.284" lengthAdjust="spacing" textLength="49.7041" x="562.1302" y="33.1055">更新工具链，</text><text fill="#000000" font-family="sans-serif" font-size="8.284" lengthAdjust="spacing" textLength="33.1361" x="570.4142" y="42.7486">下载安装</text><text fill="#000000" font-family="sans-serif" font-size="8.284" lengthAdjust="spacing" textLength="98.8166" x="537.574" y="52.3917">Substrate contract code</text><rect fill="#E2E2F0" height="55.5288" rx="1.4793" ry="1.4793" style="stroke:#181818;stroke-width:0.2958579881656805;" width="107.1006" x="533.432" y="2044.0366"/><text fill="#000000" font-family="sans-serif" font-size="10.6509" font-weight="bold" lengthAdjust="spacing" textLength="21.3018" x="576.3314" y="2058.065">终端</text><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="533.432" x2="640.5325" y1="2063.5355" y2="2063.5355"/><text fill="#000000" font-family="sans-serif" font-size="8.284" lengthAdjust="spacing" textLength="49.7041" x="562.1302" y="2074.1835">更新工具链，</text><text fill="#000000" font-family="sans-serif" font-size="8.284" lengthAdjust="spacing" textLength="33.1361" x="570.4142" y="2083.8266">下载安装</text><text fill="#000000" font-family="sans-serif" font-size="8.284" lengthAdjust="spacing" textLength="98.8166" x="537.574" y="2093.4697">Substrate contract code</text><rect fill="#E2E2F0" height="36.2426" rx="1.4793" ry="1.4793" style="stroke:#181818;stroke-width:0.2958579881656805;" width="151.4793" x="646.4497" y="22.2448"/><text fill="#000000" font-family="sans-serif" font-size="10.6509" font-weight="bold" lengthAdjust="spacing" textLength="143.1953" x="650.5917" y="36.2732">contracts-ui application</text><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="646.4497" x2="797.929" y1="41.7437" y2="41.7437"/><text fill="#000000" font-family="sans-serif" font-size="8.284" lengthAdjust="spacing" textLength="68.0473" x="688.1657" y="52.3917">智能合约web app</text><rect fill="#E2E2F0" height="36.2426" rx="1.4793" ry="1.4793" style="stroke:#181818;stroke-width:0.2958579881656805;" width="151.4793" x="646.4497" y="2044.0366"/><text fill="#000000" font-family="sans-serif" font-size="10.6509" font-weight="bold" lengthAdjust="spacing" textLength="143.1953" x="650.5917" y="2058.065">contracts-ui application</text><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="646.4497" x2="797.929" y1="2063.5355" y2="2063.5355"/><text fill="#000000" font-family="sans-serif" font-size="8.284" lengthAdjust="spacing" textLength="68.0473" x="688.1657" y="2074.1835">智能合约web app</text><rect fill="#EEEEEE" height="1.7751" style="stroke:#EEEEEE;stroke-width:0.591715976331361;" width="846.4497" x="0" y="77.1658"/><line style="stroke:#000000;stroke-width:0.591715976331361;" x1="0" x2="846.4497" y1="77.1658" y2="77.1658"/><line style="stroke:#000000;stroke-width:0.591715976331361;" x1="0" x2="846.4497" y1="78.9409" y2="78.9409"/><rect fill="#EEEEEE" height="13.6881" style="stroke:#000000;stroke-width:1.183431952662722;" width="175.7396" x="335.355" y="70.9135"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" font-weight="bold" lengthAdjust="spacing" textLength="164.497" x="338.9053" y="80.4205">build an ERC-20 token smart contract</text><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="586.9822" x2="611.8343" y1="105.4295" y2="105.4295"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="611.8343" x2="611.8343" y1="105.4295" y2="113.1218"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="587.574" x2="611.8343" y1="113.1218" y2="113.1218"/><polygon fill="#181818" points="593.4911,110.7549,587.574,113.1218,593.4911,115.4886,591.1243,113.1218" style="stroke:#181818;stroke-width:0.591715976331361;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="44.3787" x="591.1243" y="102.4319">create &amp; cd</text><path d="M437.8698,93.4773 L437.8698,117.1459 L584.0237,117.1459 L584.0237,99.3944 L578.1065,93.4773 L437.8698,93.4773 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2958579881656805;"/><path d="M578.1065,93.4773 L578.1065,99.3944 L584.0237,99.3944 L578.1065,93.4773 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2958579881656805;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="72.1893" x="441.4201" y="103.576">cargo contract new</text><a href="https://docs.substrate.io/assets/tutorials/ink-workshop/erc-template-lib-0.rs/?mode=dark" target="_top" title="https://docs.substrate.io/assets/tutorials/ink-workshop/erc-template-lib-0.rs/?mode=dark" xlink:actuate="onRequest" xlink:href="https://docs.substrate.io/assets/tutorials/ink-workshop/erc-template-lib-0.rs/?mode=dark" xlink:show="new" xlink:title="https://docs.substrate.io/assets/tutorials/ink-workshop/erc-template-lib-0.rs/?mode=dark" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" text-decoration="underline" textLength="59.1716" x="515.9763" y="103.576">new erc20 code</text></a><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="34.9112" x="441.4201" y="112.5303">cd erc20/</text><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="365.3846" x2="390.2367" y1="141.7206" y2="141.7206"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="390.2367" x2="390.2367" y1="141.7206" y2="149.4129"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="365.9763" x2="390.2367" y1="149.4129" y2="149.4129"/><polygon fill="#181818" points="371.8935,147.046,365.9763,149.4129,371.8935,151.7798,369.5266,149.4129" style="stroke:#181818;stroke-width:0.591715976331361;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="101.7751" x="369.5266" y="129.7687">replace the default src with</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="14.7929" x="369.5266" y="138.723">new</text><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="487.8698" x2="512.7219" y1="204.8747" y2="204.8747"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="512.7219" x2="512.7219" y1="204.8747" y2="212.567"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="488.4615" x2="512.7219" y1="212.567" y2="212.567"/><polygon fill="#181818" points="494.3787,210.2002,488.4615,212.567,494.3787,214.9339,492.0118,212.567" style="stroke:#181818;stroke-width:0.591715976331361;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="86.3905" x="492.0118" y="201.8771">modify [dependencies]</text><path d="M342.0118,157.1052 L342.0118,252.3715 L484.6154,252.3715 L484.6154,163.0224 L478.6982,157.1052 L342.0118,157.1052 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2958579881656805;"/><path d="M478.6982,157.1052 L478.6982,163.0224 L484.6154,163.0224 L478.6982,157.1052 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2958579881656805;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="35.503" x="345.5621" y="167.204">scale = {</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="120.7101" x="355.0296" y="176.1583">package = "parity-scale-codec",</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="51.4793" x="355.0296" y="185.1126">version = "3",</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="91.716" x="355.0296" y="194.0669">default-features = false,</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="84.6154" x="357.3964" y="203.0213">features = ["derive"] }</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="52.071" x="345.5621" y="211.9756">scale-info = {</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="51.4793" x="355.0296" y="220.9299">version = "2",</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="91.716" x="355.0296" y="229.8843">default-features = false,</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="79.8817" x="355.0296" y="238.8386">features = ["derive"],</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="63.9053" x="355.0296" y="247.7929">optional = true }</text><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="586.9822" x2="611.8343" y1="268.0288" y2="268.0288"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="611.8343" x2="611.8343" y1="268.0288" y2="275.7212"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="587.574" x2="611.8343" y1="275.7212" y2="275.7212"/><polygon fill="#181818" points="593.4911,273.3543,587.574,275.7212,593.4911,278.088,591.1243,275.7212" style="stroke:#181818;stroke-width:0.591715976331361;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="72.1893" x="591.1243" y="265.0313">cargo +nightly test</text><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="586.9822" x2="611.8343" y1="292.9595" y2="292.9595"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="611.8343" x2="611.8343" y1="292.9595" y2="300.6518"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="587.574" x2="611.8343" y1="300.6518" y2="300.6518"/><polygon fill="#181818" points="593.4911,298.2849,587.574,300.6518,593.4911,303.0187,591.1243,300.6518" style="stroke:#181818;stroke-width:0.591715976331361;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="108.8757" x="591.1243" y="289.9619">cargo +nightly contract build</text><rect fill="#EEEEEE" height="1.7751" style="stroke:#EEEEEE;stroke-width:0.591715976331361;" width="846.4497" x="0" y="317.555"/><line style="stroke:#000000;stroke-width:0.591715976331361;" x1="0" x2="846.4497" y1="317.555" y2="317.555"/><line style="stroke:#000000;stroke-width:0.591715976331361;" x1="0" x2="846.4497" y1="319.3302" y2="319.3302"/><rect fill="#EEEEEE" height="13.6881" style="stroke:#000000;stroke-width:1.183431952662722;" width="161.5385" x="342.4556" y="311.3027"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" font-weight="bold" lengthAdjust="spacing" textLength="150.2959" x="346.0059" y="320.8097">Upload an instantiate the contract</text><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="722.1893" x2="747.0414" y1="352.3669" y2="352.3669"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="747.0414" x2="747.0414" y1="352.3669" y2="360.0592"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="722.7811" x2="747.0414" y1="360.0592" y2="360.0592"/><polygon fill="#181818" points="728.6982,357.6923,722.7811,360.0592,728.6982,362.426,726.3314,360.0592" style="stroke:#181818;stroke-width:0.591715976331361;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="113.6095" x="726.3314" y="340.415">connect &amp; upload contract file</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="95.858" x="726.3314" y="349.3693">and sequence operations</text><rect fill="#EEEEEE" height="1.7751" style="stroke:#EEEEEE;stroke-width:0.591715976331361;" width="846.4497" x="0" y="376.9624"/><line style="stroke:#000000;stroke-width:0.591715976331361;" x1="0" x2="846.4497" y1="376.9624" y2="376.9624"/><line style="stroke:#000000;stroke-width:0.591715976331361;" x1="0" x2="846.4497" y1="378.7375" y2="378.7375"/><rect fill="#EEEEEE" height="13.6881" style="stroke:#000000;stroke-width:1.183431952662722;" width="79.8817" x="383.284" y="370.7101"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" font-weight="bold" lengthAdjust="spacing" textLength="68.6391" x="386.8343" y="380.2171">Transfer tokens</text><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="365.3846" x2="390.2367" y1="427.6119" y2="427.6119"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="390.2367" x2="390.2367" y1="427.6119" y2="435.3042"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="365.9763" x2="390.2367" y1="435.3042" y2="435.3042"/><polygon fill="#181818" points="371.8935,432.9373,365.9763,435.3042,371.8935,437.671,369.5266,435.3042" style="stroke:#181818;stroke-width:0.591715976331361;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="79.2899" x="369.5266" y="424.6143">add Error declaration</text><path d="M113.6095,393.2739 L113.6095,461.3212 L362.1302,461.3212 L362.1302,399.191 L356.213,393.2739 L113.6095,393.2739 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2958579881656805;"/><path d="M356.213,393.2739 L356.213,399.191 L362.1302,399.191 L356.213,393.2739 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2958579881656805;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="108.284" x="117.1598" y="403.3726">/// Specify ERC-20 error type.</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="7.1006" x="117.1598" y="412.3269">1.</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="226.6272" x="126.6272" y="412.3269">[derive(Debug, PartialEq, Eq, scale::Encode, scale::Decode)]</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="7.1006" x="117.1598" y="421.2813">2.</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="204.142" x="126.6272" y="421.2813">[cfg_attr(feature = "std", derive(scale_info::TypeInfo))]</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="66.2722" x="117.1598" y="430.2356">pub enum Error {</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="175.7396" x="117.1598" y="439.1899">/// Return if the balance cannot fulfill a request.</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="72.7811" x="124.2604" y="448.1442">InsufficientBalance,</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="4.7337" x="117.1598" y="457.0986">}</text><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="365.3846" x2="390.2367" y1="479.7407" y2="479.7407"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="390.2367" x2="390.2367" y1="479.7407" y2="487.433"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="365.9763" x2="390.2367" y1="487.433" y2="487.433"/><polygon fill="#181818" points="371.8935,485.0661,365.9763,487.433,371.8935,489.7998,369.5266,487.433" style="stroke:#181818;stroke-width:0.591715976331361;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="95.858" x="369.5266" y="476.7431">add an Result return type</text><path d="M149.7041,467.7885 L149.7041,491.4571 L362.1302,491.4571 L362.1302,473.7056 L356.213,467.7885 L149.7041,467.7885 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2958579881656805;"/><path d="M356.213,467.7885 L356.213,473.7056 L362.1302,473.7056 L356.213,467.7885 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2958579881656805;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="126.0355" x="153.2544" y="477.8872">/// Specify the ERC-20 result type.</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="200" x="153.2544" y="486.8415">pub type Result&lt;T&gt; = core::result::Result&lt;T, Error&gt;;</text><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="365.3846" x2="390.2367" y1="522.9151" y2="522.9151"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="390.2367" x2="390.2367" y1="522.9151" y2="530.6074"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="365.9763" x2="390.2367" y1="530.6074" y2="530.6074"/><polygon fill="#181818" points="371.8935,528.2406,365.9763,530.6074,371.8935,532.9743,369.5266,530.6074" style="stroke:#181818;stroke-width:0.591715976331361;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="66.8639" x="369.5266" y="519.9175">add the transfer()</text><path d="M73.3728,497.5314 L73.3728,547.8273 L362.1302,547.8273 L362.1302,503.4486 L356.213,497.5314 L73.3728,497.5314 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2958579881656805;"/><path d="M356.213,497.5314 L356.213,503.4486 L362.1302,503.4486 L356.213,497.5314 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2958579881656805;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="7.1006" x="76.9231" y="507.6302">1.</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="57.3964" x="86.3905" y="507.6302">[ink(message)]</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="276.3314" x="76.9231" y="516.5845">pub fn transfer(&amp;mut self, to: AccountId, value: Balance) -&gt; Result&lt;()&gt; {</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="106.5089" x="84.0237" y="525.5388">let from = self.env().caller();</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="152.6627" x="84.0237" y="534.4932">self.transfer_from_to(&amp;from, &amp;to, value)</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="4.7337" x="76.9231" y="543.4475">}</text><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="365.3846" x2="390.2367" y1="628.7699" y2="628.7699"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="390.2367" x2="390.2367" y1="628.7699" y2="636.4622"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="365.9763" x2="390.2367" y1="636.4622" y2="636.4622"/><polygon fill="#181818" points="371.8935,634.0953,365.9763,636.4622,371.8935,638.829,369.5266,636.4622" style="stroke:#181818;stroke-width:0.591715976331361;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="85.7988" x="369.5266" y="625.7723">add transfer_from_to()</text><path d="M144.9704,554.1374 L144.9704,703.2498 L362.1302,703.2498 L362.1302,560.0545 L356.213,554.1374 L144.9704,554.1374 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2958579881656805;"/><path d="M356.213,554.1374 L356.213,560.0545 L362.1302,560.0545 L356.213,554.1374 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2958579881656805;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="75.7396" x="148.5207" y="564.2361">fn transfer_from_to(</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="39.645" x="155.6213" y="573.1905">&amp;mut self,</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="68.6391" x="155.6213" y="582.1448">from: &amp;AccountId,</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="58.5799" x="155.6213" y="591.0991">to: &amp;AccountId,</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="57.3964" x="155.6213" y="600.0535">value: Balance,</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="66.2722" x="148.5207" y="609.0078">) -&gt; Result&lt;()&gt; {</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="176.9231" x="157.9882" y="617.9621">let from_balance = self.balance_of_impl(from);</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="96.4497" x="157.9882" y="626.9164">if from_balance &lt; value {</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="135.503" x="167.4556" y="635.8708">return Err(Error::InsufficientBalance)</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="4.7337" x="157.9882" y="644.8251">}</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="2.3669" x="148.5207" y="653.7794"> </text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="195.2663" x="157.9882" y="662.7337">self.balances.insert(from, &amp;(from_balance - value));</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="156.8047" x="157.9882" y="671.6881">let to_balance = self.balance_of_impl(to);</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="178.6982" x="157.9882" y="680.6424">self.balances.insert(to, &amp;(to_balance + value));</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="21.8935" x="157.9882" y="689.5967">Ok(())</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="4.7337" x="148.5207" y="698.551">}</text><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="365.3846" x2="390.2367" y1="730.1475" y2="730.1475"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="390.2367" x2="390.2367" y1="730.1475" y2="737.8398"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="365.9763" x2="390.2367" y1="737.8398" y2="737.8398"/><polygon fill="#181818" points="371.8935,735.4729,365.9763,737.8398,371.8935,740.2066,369.5266,737.8398" style="stroke:#181818;stroke-width:0.591715976331361;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="77.5148" x="369.5266" y="727.1499">add balance_of_impl</text><path d="M126.6272,709.2409 L126.6272,750.6611 L362.1302,750.6611 L362.1302,715.1581 L356.213,709.2409 L126.6272,709.2409 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2958579881656805;"/><path d="M356.213,709.2409 L356.213,715.1581 L362.1302,715.1581 L356.213,709.2409 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2958579881656805;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="7.1006" x="130.1775" y="719.3397">1.</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="25.4438" x="139.645" y="719.3397">[inline]</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="223.0769" x="130.1775" y="728.294">fn balance_of_impl(&amp;self, owner: &amp;AccountId) -&gt; Balance {</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="169.8225" x="137.2781" y="737.2483">self.balances.get(owner).unwrap_or_default()</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="4.7337" x="130.1775" y="746.2027">}</text><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="586.9822" x2="611.8343" y1="766.4386" y2="766.4386"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="611.8343" x2="611.8343" y1="766.4386" y2="774.1309"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="587.574" x2="611.8343" y1="774.1309" y2="774.1309"/><polygon fill="#181818" points="593.4911,771.7641,587.574,774.1309,593.4911,776.4978,591.1243,774.1309" style="stroke:#181818;stroke-width:0.591715976331361;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="74.5562" x="591.1243" y="763.441">cargo + nightly test</text><rect fill="#EEEEEE" height="1.7751" style="stroke:#EEEEEE;stroke-width:0.591715976331361;" width="846.4497" x="0" y="791.0341"/><line style="stroke:#000000;stroke-width:0.591715976331361;" x1="0" x2="846.4497" y1="791.0341" y2="791.0341"/><line style="stroke:#000000;stroke-width:0.591715976331361;" x1="0" x2="846.4497" y1="792.8093" y2="792.8093"/><rect fill="#EEEEEE" height="13.6881" style="stroke:#000000;stroke-width:1.183431952662722;" width="71.0059" x="387.7219" y="784.7818"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" font-weight="bold" lengthAdjust="spacing" textLength="59.7633" x="391.2722" y="794.2888">create events</text><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="365.3846" x2="390.2367" y1="846.1608" y2="846.1608"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="390.2367" x2="390.2367" y1="846.1608" y2="853.8531"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="365.9763" x2="390.2367" y1="853.8531" y2="853.8531"/><polygon fill="#181818" points="371.8935,851.4862,365.9763,853.8531,371.8935,856.22,369.5266,853.8531" style="stroke:#181818;stroke-width:0.591715976331361;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="76.9231" x="369.5266" y="843.1632">add a transfer event</text><path d="M242.6036,807.3456 L242.6036,884.8604 L362.1302,884.8604 L362.1302,813.2628 L356.213,807.3456 L242.6036,807.3456 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2958579881656805;"/><path d="M356.213,807.3456 L356.213,813.2628 L362.1302,813.2628 L356.213,807.3456 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2958579881656805;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="7.1006" x="246.1538" y="817.4444">1.</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="43.787" x="255.6213" y="817.4444">[ink(event)]</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="78.6982" x="246.1538" y="826.3987">pub struct Transfer {</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="47.3373" x="253.2544" y="835.353">#[ink(topic)]</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="100" x="253.2544" y="844.3073">from: Option&lt;AccountId&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="47.3373" x="253.2544" y="853.2617">#[ink(topic)]</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="89.9408" x="253.2544" y="862.216">to: Option&lt;AccountId&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="57.3964" x="253.2544" y="871.1703">value: Balance,</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="4.7337" x="248.5207" y="880.1246">}</text><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="365.3846" x2="390.2367" y1="938.584" y2="938.584"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="390.2367" x2="390.2367" y1="938.584" y2="946.2763"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="365.9763" x2="390.2367" y1="946.2763" y2="946.2763"/><polygon fill="#181818" points="371.8935,943.9095,365.9763,946.2763,371.8935,948.6432,369.5266,946.2763" style="stroke:#181818;stroke-width:0.591715976331361;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="114.2012" x="369.5266" y="935.5865">emit the event in new function</text><path d="M172.1893,890.8145 L172.1893,986.0808 L362.1302,986.0808 L362.1302,896.7317 L356.213,890.8145 L172.1893,890.8145 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2958579881656805;"/><path d="M356.213,890.8145 L356.213,896.7317 L362.1302,896.7317 L356.213,890.8145 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2958579881656805;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="177.5148" x="175.7396" y="900.9133">fn new_init(&amp;mut self, initial_supply: Balance) {</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="112.426" x="182.8402" y="909.8676">let caller = Self::env().caller();</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="166.8639" x="182.8402" y="918.8219">self.balances.insert(&amp;caller, &amp;initial_supply);</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="122.4852" x="182.8402" y="927.7763">self.total_supply = initial_supply;</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="124.2604" x="182.8402" y="936.7306">Self::env().emit_event(Transfer {</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="44.9704" x="192.3077" y="945.6849">from: None,</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="63.3136" x="192.3077" y="954.6392">to: Some(caller),</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="75.1479" x="192.3077" y="963.5936">value: initial_supply,</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="10.0592" x="187.574" y="972.5479">});</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="4.7337" x="182.8402" y="981.5022">}</text><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="365.3846" x2="390.2367" y1="1035.4845" y2="1035.4845"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="390.2367" x2="390.2367" y1="1035.4845" y2="1043.1768"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="365.9763" x2="390.2367" y1="1043.1768" y2="1043.1768"/><polygon fill="#181818" points="371.8935,1040.8099,365.9763,1043.1768,371.8935,1045.5436,369.5266,1043.1768" style="stroke:#181818;stroke-width:0.591715976331361;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="69.2308" x="369.5266" y="1023.5326">emit the eventh in</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="95.858" x="369.5266" y="1032.4869">transfer_from_to function</text><path d="M154.4379,992.1921 L154.4379,1069.7069 L362.1302,1069.7069 L362.1302,998.1093 L356.213,992.1921 L154.4379,992.1921 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2958579881656805;"/><path d="M356.213,992.1921 L356.213,998.1093 L362.1302,998.1093 L356.213,992.1921 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2958579881656805;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="195.2663" x="157.9882" y="1002.2909">self.balances.insert(from, &amp;(from_balance - value));</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="156.8047" x="157.9882" y="1011.2452">let to_balance = self.balance_of_impl(to);</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="178.6982" x="157.9882" y="1020.1995">self.balances.insert(to, &amp;(to_balance + value));</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="120.7101" x="157.9882" y="1029.1539">self.env().emit_event(Transfer {</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="75.1479" x="165.0888" y="1038.1082">from: Some(*from),</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="55.0296" x="165.0888" y="1047.0625">to: Some(*to),</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="22.4852" x="165.0888" y="1056.0168">value,</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="10.0592" x="157.9882" y="1064.9712">});</text><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="365.3846" x2="390.2367" y1="1114.4762" y2="1114.4762"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="390.2367" x2="390.2367" y1="1114.4762" y2="1122.1685"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="365.9763" x2="390.2367" y1="1122.1685" y2="1122.1685"/><polygon fill="#181818" points="371.8935,1119.8017,365.9763,1122.1685,371.8935,1124.5354,369.5266,1122.1685" style="stroke:#181818;stroke-width:0.591715976331361;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="100.5917" x="369.5266" y="1102.5243">add test code for transfers</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="25.4438" x="369.5266" y="1111.4787">tokens</text><path d="M88.7574,1075.6611 L88.7574,1143.7084 L362.1302,1143.7084 L362.1302,1081.5782 L356.213,1075.6611 L88.7574,1075.6611 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2958579881656805;"/><path d="M356.213,1075.6611 L356.213,1081.5782 L362.1302,1081.5782 L356.213,1075.6611 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2958579881656805;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="7.1006" x="92.3077" y="1085.7598">1.</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="36.0947" x="101.7751" y="1085.7598">[ink::test]</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="77.5148" x="92.3077" y="1094.7141">fn transfer_works() {</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="125.4438" x="99.4083" y="1103.6685">let mut erc20 = Erc20::new(100);</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="227.8107" x="99.4083" y="1112.6228">assert_eq!(erc20.balance_of(AccountId::from([0x0; 32])), 0);</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="253.8462" x="99.4083" y="1121.5771">assert_eq!(erc20.transfer((AccountId::from([0x0; 32])), 10), Ok(()));</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="232.5444" x="99.4083" y="1130.5314">assert_eq!(erc20.balance_of(AccountId::from([0x0; 32])), 10);</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="4.7337" x="92.3077" y="1139.4858">}</text><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="586.9822" x2="611.8343" y1="1159.7217" y2="1159.7217"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="611.8343" x2="611.8343" y1="1159.7217" y2="1167.414"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="587.574" x2="611.8343" y1="1167.414" y2="1167.414"/><polygon fill="#181818" points="593.4911,1165.0472,587.574,1167.414,593.4911,1169.7809,591.1243,1167.414" style="stroke:#181818;stroke-width:0.591715976331361;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="72.1893" x="591.1243" y="1156.7241">cargo +nightly test</text><rect fill="#EEEEEE" height="1.7751" style="stroke:#EEEEEE;stroke-width:0.591715976331361;" width="846.4497" x="0" y="1184.3172"/><line style="stroke:#000000;stroke-width:0.591715976331361;" x1="0" x2="846.4497" y1="1184.3172" y2="1184.3172"/><line style="stroke:#000000;stroke-width:0.591715976331361;" x1="0" x2="846.4497" y1="1186.0924" y2="1186.0924"/><rect fill="#EEEEEE" height="13.6881" style="stroke:#000000;stroke-width:1.183431952662722;" width="133.1361" x="356.6568" y="1178.0649"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" font-weight="bold" lengthAdjust="spacing" textLength="121.8935" x="360.2071" y="1187.5719">enable third-party transfers</text><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="365.3846" x2="390.2367" y1="1239.4439" y2="1239.4439"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="390.2367" x2="390.2367" y1="1239.4439" y2="1247.1362"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="365.9763" x2="390.2367" y1="1247.1362" y2="1247.1362"/><polygon fill="#181818" points="371.8935,1244.7693,365.9763,1247.1362,371.8935,1249.5031,369.5266,1247.1362" style="stroke:#181818;stroke-width:0.591715976331361;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="101.1834" x="369.5266" y="1236.4463">declare the approval event</text><path d="M265.0888,1200.6287 L265.0888,1278.1435 L362.1302,1278.1435 L362.1302,1206.5459 L356.213,1200.6287 L265.0888,1200.6287 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2958579881656805;"/><path d="M356.213,1200.6287 L356.213,1206.5459 L362.1302,1206.5459 L356.213,1200.6287 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2958579881656805;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="7.1006" x="268.6391" y="1210.7275">1.</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="43.787" x="278.1065" y="1210.7275">[ink(event)]</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="81.0651" x="268.6391" y="1219.6818">pub struct Approval {</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="47.3373" x="278.1065" y="1228.6361">#[ink(topic)]</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="66.8639" x="278.1065" y="1237.5904">owner: AccountId,</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="47.3373" x="278.1065" y="1246.5448">#[ink(topic)]</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="75.1479" x="278.1065" y="1255.4991">spender: AccountId,</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="57.3964" x="278.1065" y="1264.4534">value: Balance,</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="4.7337" x="268.6391" y="1273.4077">}</text><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="365.3846" x2="390.2367" y1="1313.9585" y2="1313.9585"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="390.2367" x2="390.2367" y1="1313.9585" y2="1321.6508"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="365.9763" x2="390.2367" y1="1321.6508" y2="1321.6508"/><polygon fill="#181818" points="371.8935,1319.2839,365.9763,1321.6508,371.8935,1324.0177,369.5266,1321.6508" style="stroke:#181818;stroke-width:0.591715976331361;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="91.1243" x="369.5266" y="1310.9609">add an Error declaration</text><path d="M113.6095,1284.0976 L113.6095,1343.2692 L362.1302,1343.2692 L362.1302,1290.0148 L356.213,1284.0976 L113.6095,1284.0976 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2958579881656805;"/><path d="M356.213,1284.0976 L356.213,1290.0148 L362.1302,1290.0148 L356.213,1284.0976 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2958579881656805;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="7.1006" x="117.1598" y="1294.1964">1.</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="226.6272" x="126.6272" y="1294.1964">[derive(Debug, PartialEq, Eq, scale::Encode, scale::Decode)]</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="7.1006" x="117.1598" y="1303.1507">2.</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="204.142" x="126.6272" y="1303.1507">[cfg_attr(feature = "std", derive(scale_info::TypeInfo))]</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="66.2722" x="117.1598" y="1312.105">pub enum Error {</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="72.7811" x="124.2604" y="1321.0594">InsufficientBalance,</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="79.8817" x="124.2604" y="1330.0137">InsufficientAllowance,</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="4.7337" x="117.1598" y="1338.968">}</text><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="365.3846" x2="390.2367" y1="1359.204" y2="1359.204"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="390.2367" x2="390.2367" y1="1359.204" y2="1366.8963"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="365.9763" x2="390.2367" y1="1366.8963" y2="1366.8963"/><polygon fill="#181818" points="371.8935,1364.5294,365.9763,1366.8963,371.8935,1369.2631,369.5266,1366.8963" style="stroke:#181818;stroke-width:0.591715976331361;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="95.858" x="369.5266" y="1356.2064">add the storage mapping</text><path d="M136.6864,1351.7289 L136.6864,1366.5218 L362.1302,1366.5218 L362.1302,1357.6461 L356.213,1351.7289 L136.6864,1351.7289 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2958579881656805;"/><path d="M356.213,1351.7289 L356.213,1357.6461 L362.1302,1357.6461 L356.213,1351.7289 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2958579881656805;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="213.0178" x="140.2367" y="1361.8277">allowances: Mapping&lt;(AccountId, AccountId), Balance&gt;,</text><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="365.3846" x2="390.2367" y1="1426.8352" y2="1426.8352"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="390.2367" x2="390.2367" y1="1426.8352" y2="1434.5276"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="365.9763" x2="390.2367" y1="1434.5276" y2="1434.5276"/><polygon fill="#181818" points="371.8935,1432.1607,365.9763,1434.5276,371.8935,1436.8944,369.5266,1434.5276" style="stroke:#181818;stroke-width:0.591715976331361;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="68.0473" x="369.5266" y="1423.8377">add the approve()</text><path d="M49.1124,1374.5886 L49.1124,1478.7306 L362.1302,1478.7306 L362.1302,1380.5057 L356.213,1374.5886 L49.1124,1374.5886 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2958579881656805;"/><path d="M356.213,1374.5886 L356.213,1380.5057 L362.1302,1380.5057 L356.213,1374.5886 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2958579881656805;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="7.1006" x="52.6627" y="1384.6873">1.</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="57.3964" x="62.1302" y="1384.6873">[ink(message)]</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="300.5917" x="52.6627" y="1393.6417">pub fn approve(&amp;mut self, spender: AccountId, value: Balance) -&gt; Result&lt;()&gt; {</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="111.2426" x="59.7633" y="1402.596">let owner = self.env().caller();</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="196.4497" x="59.7633" y="1411.5503">self.allowances.insert((&amp;owner, &amp;spender), &amp;value);</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="123.0769" x="59.7633" y="1420.5046">self.env().emit_event(Approval {</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="24.8521" x="64.497" y="1429.459">owner,</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="33.1361" x="64.497" y="1438.4133">spender,</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="22.4852" x="64.497" y="1447.3676">value,</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="10.0592" x="59.7633" y="1456.3219">});</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="21.8935" x="59.7633" y="1465.2763">Ok(())</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="4.7337" x="52.6627" y="1474.2306">}</text><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="365.3846" x2="390.2367" y1="1505.827" y2="1505.827"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="390.2367" x2="390.2367" y1="1505.827" y2="1513.5193"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="365.9763" x2="390.2367" y1="1513.5193" y2="1513.5193"/><polygon fill="#181818" points="371.8935,1511.1525,365.9763,1513.5193,371.8935,1515.8862,369.5266,1513.5193" style="stroke:#181818;stroke-width:0.591715976331361;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="73.9645" x="369.5266" y="1502.8294">add the allowance()</text><path d="M63.3136,1484.9205 L63.3136,1526.3406 L362.1302,1526.3406 L362.1302,1490.8376 L356.213,1484.9205 L63.3136,1484.9205 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2958579881656805;"/><path d="M356.213,1484.9205 L356.213,1490.8376 L362.1302,1490.8376 L356.213,1484.9205 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2958579881656805;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="7.1006" x="66.8639" y="1495.0192">1.</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="57.3964" x="76.3314" y="1495.0192">[ink(message)]</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="286.3905" x="66.8639" y="1503.9736">pub fn allowance(&amp;self, owner: AccountId, spender: AccountId) -&gt; Balance {</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="149.1124" x="73.9645" y="1512.9279">self.allowance_impl(&amp;owner, &amp;spender)</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="4.7337" x="66.8639" y="1521.8822">}</text><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="365.3846" x2="390.2367" y1="1553.4786" y2="1553.4786"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="390.2367" x2="390.2367" y1="1553.4786" y2="1561.171"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="365.9763" x2="390.2367" y1="1561.171" y2="1561.171"/><polygon fill="#181818" points="371.8935,1558.8041,365.9763,1561.171,371.8935,1563.5378,369.5266,1561.171" style="stroke:#181818;stroke-width:0.591715976331361;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="94.0828" x="369.5266" y="1550.4811">add the allowance_impl()</text><path d="M46.7456,1532.5721 L46.7456,1573.9922 L362.1302,1573.9922 L362.1302,1538.4893 L356.213,1532.5721 L46.7456,1532.5721 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2958579881656805;"/><path d="M356.213,1532.5721 L356.213,1538.4893 L362.1302,1538.4893 L356.213,1532.5721 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2958579881656805;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="7.1006" x="50.2959" y="1542.6709">1.</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="25.4438" x="59.7633" y="1542.6709">[inline]</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="302.9586" x="50.2959" y="1551.6252">fn allowance_impl(&amp;self, owner: &amp;AccountId, spender: &amp;AccountId) -&gt; Balance {</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="218.3432" x="57.3964" y="1560.5795">self.allowances.get((owner, spender)).unwrap_or_default()</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="4.7337" x="50.2959" y="1569.5339">}</text><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="365.3846" x2="390.2367" y1="1650.3791" y2="1650.3791"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="390.2367" x2="390.2367" y1="1650.3791" y2="1658.0714"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="365.9763" x2="390.2367" y1="1658.0714" y2="1658.0714"/><polygon fill="#181818" points="371.8935,1655.7045,365.9763,1658.0714,371.8935,1660.4382,369.5266,1658.0714" style="stroke:#181818;stroke-width:0.591715976331361;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="103.5503" x="369.5266" y="1647.3815">add test for the allowance()</text><path d="M2.9586,1580.2237 L2.9586,1719.8687 L362.7219,1719.8687 L362.7219,1586.1409 L356.8047,1580.2237 L2.9586,1580.2237 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2958579881656805;"/><path d="M356.8047,1580.2237 L356.8047,1586.1409 L362.7219,1586.1409 L356.8047,1580.2237 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2958579881656805;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="7.1006" x="6.5089" y="1590.3225">1.</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="36.0947" x="15.9763" y="1590.3225">[ink::test]</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="88.7574" x="6.5089" y="1599.2768">fn allowances_works() {</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="135.503" x="6.5089" y="1608.2312">let mut contract = Erc20::new(100);</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="247.3373" x="6.5089" y="1617.1855">assert_eq!(contract.balance_of(AccountId::from([0x1; 32])), 100);</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="191.1243" x="6.5089" y="1626.1398">contract.approve(AccountId::from([0x1; 32]), 200);</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="347.3373" x="6.5089" y="1635.0941">assert_eq!(contract.allowance(AccountId::from([0x1; 32]), AccountId::from([0x1; 32])), 200);</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="2.3669" x="6.5089" y="1644.0485"> </text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="311.2426" x="6.5089" y="1653.0028">contract.transfer_from(AccountId::from([0x1; 32]), AccountId::from([0x0; 32]), 50);</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="242.6036" x="6.5089" y="1661.9571">assert_eq!(contract.balance_of(AccountId::from([0x0; 32])), 50);</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="347.3373" x="6.5089" y="1670.9114">assert_eq!(contract.allowance(AccountId::from([0x1; 32]), AccountId::from([0x1; 32])), 150);</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="2.3669" x="6.5089" y="1679.8658"> </text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="315.9763" x="6.5089" y="1688.8201">contract.transfer_from(AccountId::from([0x1; 32]), AccountId::from([0x0; 32]), 100);</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="242.6036" x="6.5089" y="1697.7744">assert_eq!(contract.balance_of(AccountId::from([0x0; 32])), 50);</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="347.3373" x="6.5089" y="1706.7287">assert_eq!(contract.allowance(AccountId::from([0x1; 32]), AccountId::from([0x1; 32])), 150);</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="4.7337" x="6.5089" y="1715.6831">}</text><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="365.3846" x2="390.2367" y1="1814.4369" y2="1814.4369"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="390.2367" x2="390.2367" y1="1814.4369" y2="1822.1293"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="365.9763" x2="390.2367" y1="1822.1293" y2="1822.1293"/><polygon fill="#181818" points="371.8935,1819.7624,365.9763,1822.1293,371.8935,1824.4961,369.5266,1822.1293" style="stroke:#181818;stroke-width:0.591715976331361;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="88.7574" x="369.5266" y="1811.4394">add the transfer_from()</text><path d="M68.6391,1726.373 L68.6391,1902.1126 L362.1302,1902.1126 L362.1302,1732.2901 L356.213,1726.373 L68.6391,1726.373 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2958579881656805;"/><path d="M356.213,1726.373 L356.213,1732.2901 L362.1302,1732.2901 L356.213,1726.373 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2958579881656805;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="281.0651" x="72.1893" y="1736.4717">/// Transfers tokens on the behalf of the `from` account to the `to account</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="7.1006" x="72.1893" y="1745.426">1.</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="57.3964" x="81.6568" y="1745.426">[ink(message)]</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="80.4734" x="72.1893" y="1754.3804">pub fn transfer_from(</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="39.645" x="81.6568" y="1763.3347">&amp;mut self,</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="62.1302" x="81.6568" y="1772.289">from: AccountId,</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="52.071" x="81.6568" y="1781.2434">to: AccountId,</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="57.3964" x="81.6568" y="1790.1977">value: Balance,</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="66.2722" x="72.1893" y="1799.152">) -&gt; Result&lt;()&gt; {</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="108.8757" x="81.6568" y="1808.1063">let caller = self.env().caller();</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="195.858" x="81.6568" y="1817.0607">let allowance = self.allowance_impl(&amp;from, &amp;caller);</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="81.6568" x="81.6568" y="1826.015">if allowance &lt; value {</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="142.6036" x="91.1243" y="1834.9693">return Err(Error::InsufficientAllowance)</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="4.7337" x="81.6568" y="1843.9236">}</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="159.1716" x="81.6568" y="1852.878">self.transfer_from_to(&amp;from, &amp;to, value)?;</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="56.213" x="81.6568" y="1861.8323">self.allowances</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="175.1479" x="91.1243" y="1870.7866">.insert((&amp;from, &amp;caller), &amp;(allowance - value));</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="21.8935" x="81.6568" y="1879.741">Ok(())</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="4.7337" x="81.6568" y="1888.6953">}</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="4.7337" x="72.1893" y="1897.6496">}</text><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="365.3846" x2="390.2367" y1="1951.6318" y2="1951.6318"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="390.2367" x2="390.2367" y1="1951.6318" y2="1959.3241"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="365.9763" x2="390.2367" y1="1959.3241" y2="1959.3241"/><polygon fill="#181818" points="371.8935,1956.9573,365.9763,1959.3241,371.8935,1961.691,369.5266,1959.3241" style="stroke:#181818;stroke-width:0.591715976331361;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="79.2899" x="369.5266" y="1939.6799">add test code for the</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="57.3964" x="369.5266" y="1948.6343">transfer_from()</text><path d="M38.4615,1908.3395 L38.4615,1985.8543 L362.1302,1985.8543 L362.1302,1914.2567 L356.213,1908.3395 L38.4615,1908.3395 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2958579881656805;"/><path d="M356.213,1908.3395 L356.213,1914.2567 L362.1302,1914.2567 L356.213,1908.3395 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.2958579881656805;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="7.1006" x="42.0118" y="1918.4383">1.</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="36.0947" x="51.4793" y="1918.4383">[ink::test]</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="99.4083" x="42.0118" y="1927.3926">fn transfer_from_works() {</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="135.503" x="42.0118" y="1936.3469">let mut contract = Erc20::new(100);</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="247.3373" x="42.0118" y="1945.3012">assert_eq!(contract.balance_of(AccountId::from([0x1; 32])), 100);</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="186.3905" x="42.0118" y="1954.2556">contract.approve(AccountId::from([0x1; 32]), 20);</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="311.2426" x="42.0118" y="1963.2099">contract.transfer_from(AccountId::from([0x1; 32]), AccountId::from([0x0; 32]), 10);</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="242.6036" x="42.0118" y="1972.1642">assert_eq!(contract.balance_of(AccountId::from([0x0; 32])), 10);</text><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="4.7337" x="42.0118" y="1981.1185">}</text><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="586.9822" x2="611.8343" y1="2001.3545" y2="2001.3545"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="611.8343" x2="611.8343" y1="2001.3545" y2="2009.0468"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="587.574" x2="611.8343" y1="2009.0468" y2="2009.0468"/><polygon fill="#181818" points="593.4911,2006.6799,587.574,2009.0468,593.4911,2011.4136,591.1243,2009.0468" style="stroke:#181818;stroke-width:0.591715976331361;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="72.1893" x="591.1243" y="1998.3569">cargo +nightly test</text><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="586.9822" x2="611.8343" y1="2026.2851" y2="2026.2851"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="611.8343" x2="611.8343" y1="2026.2851" y2="2033.9774"/><line style="stroke:#181818;stroke-width:0.591715976331361;" x1="587.574" x2="611.8343" y1="2033.9774" y2="2033.9774"/><polygon fill="#181818" points="593.4911,2031.6106,587.574,2033.9774,593.4911,2036.3443,591.1243,2033.9774" style="stroke:#181818;stroke-width:0.591715976331361;"/><text fill="#000000" font-family="sans-serif" font-size="7.6923" lengthAdjust="spacing" textLength="108.8757" x="591.1243" y="2023.2875">cargo +nightly contract build</text></g></svg></figure>
<h2 id="troubleshoot-smart-contracts"><a class="header" href="#troubleshoot-smart-contracts">Troubleshoot smart contracts</a></h2>
<blockquote>
<p><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#substrate%E5%AE%98%E6%96%B9%E6%95%99%E7%A8%8B%E6%A2%B3%E7%90%86%E4%B8%8E%E7%BB%83%E4%B9%A0">返回顶部</a></p>
</blockquote>
<h1 id="connect-with-other-chains"><a class="header" href="#connect-with-other-chains">Connect with other chains</a></h1>
<h2 id="start-a-local-relay-chain"><a class="header" href="#start-a-local-relay-chain">Start a local relay chain</a></h2>
<blockquote>
<p><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#substrate%E5%AE%98%E6%96%B9%E6%95%99%E7%A8%8B%E6%A2%B3%E7%90%86%E4%B8%8E%E7%BB%83%E4%B9%A0">返回顶部</a></p>
</blockquote>
<h3 id="波卡架构"><a class="header" href="#波卡架构">波卡架构</a></h3>
<ul>
<li><a href="https://wiki.polkadot.network/docs/learn-architecture">Architecture · Polkadot Wiki</a></li>
</ul>
<h3 id="parachains"><a class="header" href="#parachains">parachains</a></h3>
<ul>
<li><a href="https://wiki.polkadot.network/docs/learn-parachains">Parachains · Polkadot Wiki</a></li>
</ul>
<h3 id="注意版本匹配"><a class="header" href="#注意版本匹配">注意版本匹配</a></h3>
<blockquote>
<p>您必须使用本教程中规定的确切版本。</p>
</blockquote>
<p>平行链与它们连接的中继链代码库紧密耦合，因为它们共享许多共同的依赖关系。
在处理整个 Substrate 文档中的任何示例时，请务必将相应版本的 Polkadot
与任何其他软件一起使用。您必须与中继链升级保持同步，您的平行链才能继续成
功运行。如果你不跟上中继链升级，你的网络很可能会停止生产区块。</p>
<h3 id="时序图-3"><a class="header" href="#时序图-3">时序图</a></h3>
<figure><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="610.0724px" preserveAspectRatio="none" style="width:851px;height:610px;background:#FFFFFF;" version="1.1" viewBox="0 0 851 610" width="851.0253px" zoomAndPan="magnify"><defs/><g><line style="stroke:#181818;stroke-width:0.5126658624849216;stroke-dasharray:5.0,5.0;" x1="571.1098" x2="571.1098" y1="85.6633" y2="526.0673"/><line style="stroke:#181818;stroke-width:0.5126658624849216;stroke-dasharray:5.0,5.0;" x1="736.1882" x2="736.1882" y1="85.6633" y2="526.0673"/><rect fill="#E2E2F0" height="46.0919" rx="2.5633" ry="2.5633" style="stroke:#181818;stroke-width:0.5126658624849216;" width="51.2666" x="545.4765" y="38.5461"/><text fill="#000000" font-family="sans-serif" font-size="18.456" font-weight="bold" lengthAdjust="spacing" textLength="36.9119" x="552.6538" y="62.8546">终端</text><line style="stroke:#181818;stroke-width:1.0253317249698433;" x1="545.4765" x2="596.7431" y1="72.3339" y2="72.3339"/><rect fill="#E2E2F0" height="46.0919" rx="2.5633" ry="2.5633" style="stroke:#181818;stroke-width:0.5126658624849216;" width="51.2666" x="545.4765" y="525.0419"/><text fill="#000000" font-family="sans-serif" font-size="18.456" font-weight="bold" lengthAdjust="spacing" textLength="36.9119" x="552.6538" y="549.3505">终端</text><line style="stroke:#181818;stroke-width:1.0253317249698433;" x1="545.4765" x2="596.7431" y1="558.8298" y2="558.8298"/><rect fill="#E2E2F0" height="79.5113" rx="2.5633" ry="2.5633" style="stroke:#181818;stroke-width:0.5126658624849216;" width="172.2557" x="650.0603" y="5.1267"/><text fill="#000000" font-family="sans-serif" font-size="18.456" font-weight="bold" lengthAdjust="spacing" textLength="92.2799" x="690.0483" y="29.4352">链规范文件</text><line style="stroke:#181818;stroke-width:1.0253317249698433;" x1="650.0603" x2="822.316" y1="38.9145" y2="38.9145"/><text fill="#000000" font-family="sans-serif" font-size="14.3546" lengthAdjust="spacing" textLength="157.9011" x="657.2376" y="57.3655">Plain/Raw rococo-local</text><text fill="#000000" font-family="sans-serif" font-size="14.3546" lengthAdjust="spacing" textLength="113.8118" x="679.2823" y="74.0752">relay chain spec</text><rect fill="#E2E2F0" height="79.5113" rx="2.5633" ry="2.5633" style="stroke:#181818;stroke-width:0.5126658624849216;" width="172.2557" x="650.0603" y="525.0419"/><text fill="#000000" font-family="sans-serif" font-size="18.456" font-weight="bold" lengthAdjust="spacing" textLength="92.2799" x="690.0483" y="549.3505">链规范文件</text><line style="stroke:#181818;stroke-width:1.0253317249698433;" x1="650.0603" x2="822.316" y1="558.8298" y2="558.8298"/><text fill="#000000" font-family="sans-serif" font-size="14.3546" lengthAdjust="spacing" textLength="157.9011" x="657.2376" y="577.2808">Plain/Raw rococo-local</text><text fill="#000000" font-family="sans-serif" font-size="14.3546" lengthAdjust="spacing" textLength="113.8118" x="679.2823" y="593.9905">relay chain spec</text><rect fill="#EEEEEE" height="3.076" style="stroke:#EEEEEE;stroke-width:1.0253317249698433;" width="843.848" x="0" y="117.004"/><line style="stroke:#000000;stroke-width:1.0253317249698433;" x1="0" x2="843.848" y1="117.004" y2="117.004"/><line style="stroke:#000000;stroke-width:1.0253317249698433;" x1="0" x2="843.848" y1="120.08" y2="120.08"/><rect fill="#EEEEEE" height="23.7188" style="stroke:#000000;stroke-width:2.0506634499396865;" width="217.3703" x="313.2388" y="106.1699"/><text fill="#000000" font-family="sans-serif" font-size="13.3293" font-weight="bold" lengthAdjust="spacing" textLength="197.889" x="319.3908" y="122.6438">Build the relay chain node</text><line style="stroke:#181818;stroke-width:1.0253317249698433;" x1="571.1098" x2="614.1737" y1="243.5603" y2="243.5603"/><line style="stroke:#181818;stroke-width:1.0253317249698433;" x1="614.1737" x2="614.1737" y1="243.5603" y2="256.8897"/><line style="stroke:#181818;stroke-width:1.0253317249698433;" x1="572.1351" x2="614.1737" y1="256.8897" y2="256.8897"/><polygon fill="#181818" points="582.3884,252.7883,572.1351,256.8897,582.3884,260.991,578.2871,256.8897" style="stroke:#181818;stroke-width:1.0253317249698433;"/><text fill="#000000" font-family="sans-serif" font-size="13.3293" lengthAdjust="spacing" textLength="126.1158" x="578.2871" y="238.3661">git clone &amp; compile</text><path d="M5.1267,145.2687 L5.1267,341.107 L565.9831,341.107 L565.9831,155.522 L555.7298,145.2687 L5.1267,145.2687 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5126658624849216;"/><path d="M555.7298,145.2687 L555.7298,155.522 L565.9831,155.522 L555.7298,145.2687 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5126658624849216;"/><text fill="#000000" font-family="sans-serif" font-size="13.3293" lengthAdjust="spacing" textLength="12.304" x="11.2786" y="162.7679">1.</text><text fill="#000000" font-family="sans-serif" font-size="13.3293" lengthAdjust="spacing" textLength="331.1821" x="27.684" y="162.7679">Clone the Polkadot Repository, with correct version</text><text fill="#000000" font-family="sans-serif" font-size="13.3293" lengthAdjust="spacing" textLength="55.3679" x="11.2786" y="178.2841">git clone</text><text fill="#000000" font-family="sans-serif" font-size="13.3293" lengthAdjust="spacing" text-decoration="line-through" textLength="50.2413" x="70.7479" y="178.2841">depth 1</text><text fill="#000000" font-family="sans-serif" font-size="13.3293" lengthAdjust="spacing" textLength="425.5127" x="125.0905" y="178.2841">branch release-v0.9.26 https://github.com/paritytech/polkadot.git</text><text fill="#000000" font-family="sans-serif" font-size="13.3293" lengthAdjust="spacing" textLength="4.1013" x="11.2786" y="193.8002"> </text><text fill="#000000" font-family="sans-serif" font-size="13.3293" lengthAdjust="spacing" textLength="12.304" x="11.2786" y="209.3164">2.</text><text fill="#000000" font-family="sans-serif" font-size="13.3293" lengthAdjust="spacing" textLength="218.3957" x="27.684" y="209.3164">Switch into the Polkadot directory</text><text fill="#000000" font-family="sans-serif" font-size="13.3293" lengthAdjust="spacing" textLength="75.8745" x="11.2786" y="224.8325">cd polkadot</text><text fill="#000000" font-family="sans-serif" font-size="13.3293" lengthAdjust="spacing" textLength="4.1013" x="11.2786" y="240.3487"> </text><text fill="#000000" font-family="sans-serif" font-size="13.3293" lengthAdjust="spacing" textLength="12.304" x="11.2786" y="255.8648">3.</text><text fill="#000000" font-family="sans-serif" font-size="13.3293" lengthAdjust="spacing" textLength="171.2304" x="27.684" y="255.8648">Build the relay chain Node</text><text fill="#000000" font-family="sans-serif" font-size="13.3293" lengthAdjust="spacing" textLength="12.304" x="11.2786" y="271.381">4.</text><text fill="#000000" font-family="sans-serif" font-size="13.3293" lengthAdjust="spacing" textLength="390.6514" x="27.684" y="271.381">Compiling the node can take 15 to 60 minuets to complete.</text><text fill="#000000" font-family="sans-serif" font-size="13.3293" lengthAdjust="spacing" textLength="63.5706" x="11.2786" y="286.8971">cargo b -r</text><text fill="#000000" font-family="sans-serif" font-size="13.3293" lengthAdjust="spacing" textLength="4.1013" x="11.2786" y="302.4133"> </text><text fill="#000000" font-family="sans-serif" font-size="13.3293" lengthAdjust="spacing" textLength="12.304" x="11.2786" y="317.9294">5.</text><text fill="#000000" font-family="sans-serif" font-size="13.3293" lengthAdjust="spacing" textLength="422.4367" x="27.684" y="317.9294">Check if the help page prints to ensure the node is built correctly</text><text fill="#000000" font-family="sans-serif" font-size="13.3293" lengthAdjust="spacing" textLength="203.0157" x="11.2786" y="333.4456">./target/release/polkadot --help</text><line style="stroke:#181818;stroke-width:1.0253317249698433;" x1="736.1882" x2="779.2521" y1="388.1962" y2="388.1962"/><line style="stroke:#181818;stroke-width:1.0253317249698433;" x1="779.2521" x2="779.2521" y1="388.1962" y2="401.5255"/><line style="stroke:#181818;stroke-width:1.0253317249698433;" x1="737.2135" x2="779.2521" y1="401.5255" y2="401.5255"/><polygon fill="#181818" points="747.4668,397.4242,737.2135,401.5255,747.4668,405.6268,743.3655,401.5255" style="stroke:#181818;stroke-width:1.0253317249698433;"/><text fill="#000000" font-family="sans-serif" font-size="13.3293" lengthAdjust="spacing" textLength="93.3052" x="743.3655" y="383.002">准备链规范文件</text><path d="M469.6019,351.9691 L469.6019,423.7424 L731.0615,423.7424 L731.0615,362.2225 L720.8082,351.9691 L469.6019,351.9691 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5126658624849216;"/><path d="M720.8082,351.9691 L720.8082,362.2225 L731.0615,362.2225 L720.8082,351.9691 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5126658624849216;"/><a href="https://github.com/substrate-developer-hub/substrate-docs/blob/main/static/assets/tutorials/cumulus/chain-specs/rococo-custom-2-plain.json" target="_top" title="https://github.com/substrate-developer-hub/substrate-docs/blob/main/static/assets/tutorials/cumulus/chain-specs/rococo-custom-2-plain.json" xlink:actuate="onRequest" xlink:href="https://github.com/substrate-developer-hub/substrate-docs/blob/main/static/assets/tutorials/cumulus/chain-specs/rococo-custom-2-plain.json" xlink:show="new" xlink:title="https://github.com/substrate-developer-hub/substrate-docs/blob/main/static/assets/tutorials/cumulus/chain-specs/rococo-custom-2-plain.json" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13.3293" lengthAdjust="spacing" text-decoration="underline" textLength="223.5223" x="475.7539" y="369.4684">Plain rococo-local relay chain spec</text></a><a href="https://github.com/substrate-developer-hub/substrate-docs/blob/main/static/assets/tutorials/cumulus/chain-specs/rococo-custom-2-raw.json" target="_top" title="https://github.com/substrate-developer-hub/substrate-docs/blob/main/static/assets/tutorials/cumulus/chain-specs/rococo-custom-2-raw.json" xlink:actuate="onRequest" xlink:href="https://github.com/substrate-developer-hub/substrate-docs/blob/main/static/assets/tutorials/cumulus/chain-specs/rococo-custom-2-raw.json" xlink:show="new" xlink:title="https://github.com/substrate-developer-hub/substrate-docs/blob/main/static/assets/tutorials/cumulus/chain-specs/rococo-custom-2-raw.json" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13.3293" lengthAdjust="spacing" text-decoration="underline" textLength="218.3957" x="475.7539" y="384.9845">Raw rococo-local relay chain spec</text></a><text fill="#000000" font-family="sans-serif" font-size="13.3293" lengthAdjust="spacing" textLength="239.9276" x="475.7539" y="400.5007">注意：文件比较大，直接复制比较麻烦。</text><text fill="#000000" font-family="sans-serif" font-size="13.3293" lengthAdjust="spacing" textLength="188.661" x="475.7539" y="416.0168">可以git clone到本地后复制过来</text><line style="stroke:#181818;stroke-width:1.0253317249698433;" x1="571.1098" x2="614.1737" y1="451.0819" y2="451.0819"/><line style="stroke:#181818;stroke-width:1.0253317249698433;" x1="614.1737" x2="614.1737" y1="451.0819" y2="464.4112"/><line style="stroke:#181818;stroke-width:1.0253317249698433;" x1="572.1351" x2="614.1737" y1="464.4112" y2="464.4112"/><polygon fill="#181818" points="582.3884,460.3099,572.1351,464.4112,582.3884,468.5125,578.2871,464.4112" style="stroke:#181818;stroke-width:1.0253317249698433;"/><text fill="#000000" font-family="sans-serif" font-size="13.3293" lengthAdjust="spacing" textLength="150.7238" x="578.2871" y="445.8876">start the alice validator</text><line style="stroke:#181818;stroke-width:1.0253317249698433;" x1="571.1098" x2="614.1737" y1="494.282" y2="494.282"/><line style="stroke:#181818;stroke-width:1.0253317249698433;" x1="614.1737" x2="614.1737" y1="494.282" y2="507.6113"/><line style="stroke:#181818;stroke-width:1.0253317249698433;" x1="572.1351" x2="614.1737" y1="507.6113" y2="507.6113"/><polygon fill="#181818" points="582.3884,503.51,572.1351,507.6113,582.3884,511.7126,578.2871,507.6113" style="stroke:#181818;stroke-width:1.0253317249698433;"/><text fill="#000000" font-family="sans-serif" font-size="13.3293" lengthAdjust="spacing" textLength="145.5971" x="578.2871" y="489.0877">start the bob validator</text></g></svg></figure>
<h2 id="connect-a-local-parachain"><a class="header" href="#connect-a-local-parachain">Connect a local parachain</a></h2>
<blockquote>
<p><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#substrate%E5%AE%98%E6%96%B9%E6%95%99%E7%A8%8B%E6%A2%B3%E7%90%86%E4%B8%8E%E7%BB%83%E4%B9%A0">返回顶部</a></p>
</blockquote>
<h3 id="common-good-parachains"><a class="header" href="#common-good-parachains">Common Good Parachains</a></h3>
<ul>
<li><a href="https://wiki.polkadot.network/docs/learn-common-goods">Common Good Parachains · Polkadot Wiki</a></li>
</ul>
<h3 id="conver-a-solo-chain"><a class="header" href="#conver-a-solo-chain">Conver a solo chain</a></h3>
<ul>
<li><a href="https://docs.substrate.io/reference/how-to-guides/parachains/convert-a-solo-chain/">Convert a solo chain | Substrate_ Docs</a></li>
</ul>
<h3 id="parachain-slots-autcion"><a class="header" href="#parachain-slots-autcion">Parachain Slots Autcion</a></h3>
<ul>
<li><a href="https://wiki.polkadot.network/docs/learn-auction">Parachain Slots Auction · Polkadot Wiki</a></li>
</ul>
<h3 id="跨链用到的信息格式"><a class="header" href="#跨链用到的信息格式">跨链用到的信息格式</a></h3>
<ul>
<li><a href="https://wiki.polkadot.network/docs/learn-crosschain">Cross-Consensus Message Format (XCM) · Polkadot Wiki</a></li>
</ul>
<h3 id="时序图-4"><a class="header" href="#时序图-4">时序图</a></h3>
<figure><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1310.6115px" preserveAspectRatio="none" style="width:850px;height:1310px;background:#FFFFFF;" version="1.1" viewBox="0 0 850 1310" width="850.275px" zoomAndPan="magnify"><defs/><g><rect fill="#ADD8E6" height="114.4697" style="stroke:#000000;stroke-width:0.8249757360077645;" width="446.5869" x="296.4413" y="878.8226"/><rect fill="#FFC0CB" height="44.1104" style="stroke:none;stroke-width:0.5499838240051763;" width="446.5869" x="296.4413" y="949.1818"/><line style="stroke:#181818;stroke-width:0.27499191200258816;stroke-dasharray:5.0,5.0;" x1="339.34" x2="339.34" y1="45.9494" y2="1265.7104"/><line style="stroke:#181818;stroke-width:0.27499191200258816;stroke-dasharray:5.0,5.0;" x1="453.7367" x2="453.7367" y1="45.9494" y2="1265.7104"/><line style="stroke:#181818;stroke-width:0.27499191200258816;stroke-dasharray:5.0,5.0;" x1="573.6331" x2="573.6331" y1="45.9494" y2="1265.7104"/><line style="stroke:#181818;stroke-width:0.27499191200258816;stroke-dasharray:5.0,5.0;" x1="740.5532" x2="740.5532" y1="45.9494" y2="1265.7104"/><rect fill="#E2E2F0" height="24.7235" rx="1.375" ry="1.375" style="stroke:#181818;stroke-width:0.27499191200258816;" width="27.4992" x="325.5904" y="20.676"/><text fill="#000000" font-family="sans-serif" font-size="9.8997" font-weight="bold" lengthAdjust="spacing" textLength="19.7994" x="329.4403" y="33.715">终端</text><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="325.5904" x2="353.0896" y1="38.7996" y2="38.7996"/><rect fill="#E2E2F0" height="24.7235" rx="1.375" ry="1.375" style="stroke:#181818;stroke-width:0.27499191200258816;" width="27.4992" x="325.5904" y="1265.1604"/><text fill="#000000" font-family="sans-serif" font-size="9.8997" font-weight="bold" lengthAdjust="spacing" textLength="19.7994" x="329.4403" y="1278.1995">终端</text><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="325.5904" x2="353.0896" y1="1283.2841" y2="1283.2841"/><rect fill="#E2E2F0" height="42.6495" rx="1.375" ry="1.375" style="stroke:#181818;stroke-width:0.27499191200258816;" width="92.3973" x="407.538" y="2.7499"/><text fill="#000000" font-family="sans-serif" font-size="9.8997" font-weight="bold" lengthAdjust="spacing" textLength="49.4985" x="428.9874" y="15.7889">链规范文件</text><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="407.538" x2="499.9353" y1="20.8736" y2="20.8736"/><text fill="#000000" font-family="sans-serif" font-size="7.6998" lengthAdjust="spacing" textLength="84.6975" x="411.3879" y="30.7706">Plain/Raw rococo-local</text><text fill="#000000" font-family="sans-serif" font-size="7.6998" lengthAdjust="spacing" textLength="61.0482" x="423.2126" y="39.7336">relay chain spec</text><rect fill="#E2E2F0" height="42.6495" rx="1.375" ry="1.375" style="stroke:#181818;stroke-width:0.27499191200258816;" width="92.3973" x="407.538" y="1265.1604"/><text fill="#000000" font-family="sans-serif" font-size="9.8997" font-weight="bold" lengthAdjust="spacing" textLength="49.4985" x="428.9874" y="1278.1995">链规范文件</text><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="407.538" x2="499.9353" y1="1283.2841" y2="1283.2841"/><text fill="#000000" font-family="sans-serif" font-size="7.6998" lengthAdjust="spacing" textLength="84.6975" x="411.3879" y="1293.1812">Plain/Raw rococo-local</text><text fill="#000000" font-family="sans-serif" font-size="7.6998" lengthAdjust="spacing" textLength="61.0482" x="423.2126" y="1302.1442">relay chain spec</text><rect fill="#E2E2F0" height="33.6865" rx="1.375" ry="1.375" style="stroke:#181818;stroke-width:0.27499191200258816;" width="136.946" x="505.4351" y="11.7129"/><text fill="#000000" font-family="sans-serif" font-size="9.8997" font-weight="bold" lengthAdjust="spacing" textLength="129.2462" x="509.285" y="24.752">Polkadot-JS application</text><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="505.4351" x2="642.3811" y1="29.8366" y2="29.8366"/><text fill="#000000" font-family="sans-serif" font-size="7.6998" lengthAdjust="spacing" textLength="30.7991" x="558.5086" y="39.7336">波卡前端</text><rect fill="#E2E2F0" height="33.6865" rx="1.375" ry="1.375" style="stroke:#181818;stroke-width:0.27499191200258816;" width="136.946" x="505.4351" y="1265.1604"/><text fill="#000000" font-family="sans-serif" font-size="9.8997" font-weight="bold" lengthAdjust="spacing" textLength="129.2462" x="509.285" y="1278.1995">Polkadot-JS application</text><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="505.4351" x2="642.3811" y1="1283.2841" y2="1283.2841"/><text fill="#000000" font-family="sans-serif" font-size="7.6998" lengthAdjust="spacing" textLength="30.7991" x="558.5086" y="1293.1812">波卡前端</text><rect fill="#E2E2F0" height="33.6865" rx="1.375" ry="1.375" style="stroke:#181818;stroke-width:0.27499191200258816;" width="147.3957" x="666.8554" y="11.7129"/><text fill="#000000" font-family="sans-serif" font-size="9.8997" font-weight="bold" lengthAdjust="spacing" textLength="139.6959" x="670.7053" y="24.752">Polkadot-JS application 2</text><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="666.8554" x2="814.2511" y1="29.8366" y2="29.8366"/><text fill="#000000" font-family="sans-serif" font-size="7.6998" lengthAdjust="spacing" textLength="117.1466" x="681.9799" y="39.7336">波卡前端2, 验证平行链的实际使用</text><rect fill="#E2E2F0" height="33.6865" rx="1.375" ry="1.375" style="stroke:#181818;stroke-width:0.27499191200258816;" width="147.3957" x="666.8554" y="1265.1604"/><text fill="#000000" font-family="sans-serif" font-size="9.8997" font-weight="bold" lengthAdjust="spacing" textLength="139.6959" x="670.7053" y="1278.1995">Polkadot-JS application 2</text><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="666.8554" x2="814.2511" y1="1283.2841" y2="1283.2841"/><text fill="#000000" font-family="sans-serif" font-size="7.6998" lengthAdjust="spacing" textLength="117.1466" x="681.9799" y="1293.1812">波卡前端2, 验证平行链的实际使用</text><rect fill="#EEEEEE" height="1.65" style="stroke:#EEEEEE;stroke-width:0.5499838240051763;" width="846.7001" x="0" y="62.7605"/><line style="stroke:#000000;stroke-width:0.5499838240051763;" x1="0" x2="846.7001" y1="62.7605" y2="62.7605"/><line style="stroke:#000000;stroke-width:0.5499838240051763;" x1="0" x2="846.7001" y1="64.4104" y2="64.4104"/><rect fill="#EEEEEE" height="12.7227" style="stroke:#000000;stroke-width:1.0999676480103526;" width="129.2462" x="358.7269" y="56.9491"/><text fill="#000000" font-family="sans-serif" font-size="7.1498" font-weight="bold" lengthAdjust="spacing" textLength="118.7965" x="362.0269" y="65.7856">build the parachain template</text><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="339.34" x2="362.4393" y1="130.6448" y2="130.6448"/><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="362.4393" x2="362.4393" y1="130.6448" y2="137.7946"/><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="339.89" x2="362.4393" y1="137.7946" y2="137.7946"/><polygon fill="#181818" points="345.3898,135.5946,339.89,137.7946,345.3898,139.9945,343.1899,137.7946" style="stroke:#181818;stroke-width:0.5499838240051763;"/><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="45.6487" x="343.1899" y="127.8586">clone &amp; build</text><path d="M2.7499,77.9215 L2.7499,182.9684 L336.5901,182.9684 L336.5901,83.4214 L331.0903,77.9215 L2.7499,77.9215 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.27499191200258816;"/><path d="M331.0903,77.9215 L331.0903,83.4214 L336.5901,83.4214 L331.0903,77.9215 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.27499191200258816;"/><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="6.5998" x="6.0498" y="87.3081">1.</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="221.0935" x="14.8496" y="87.3081">Clone the parachain template with the correct Polkadot version</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="29.6991" x="6.0498" y="95.6309">git clone</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="32.449" x="6.0498" y="103.9537">--depth 1</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="29.6991" x="6.0498" y="112.2765">--branch</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="322.2905" x="6.0498" y="120.5993">polkadot-v0.9.26 https://github.com/substrate-developer-hub/substrate-parachain-template</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="2.1999" x="6.0498" y="128.9221"> </text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="6.5998" x="6.0498" y="137.2449">2.</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="155.6454" x="14.8496" y="137.2449">Switch into the parachain template directory</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="116.0466" x="6.0498" y="145.5677">cd substrate-parachain-template</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="2.1999" x="6.0498" y="153.8905"> </text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="6.5998" x="6.0498" y="162.2133">3.</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="129.7962" x="14.8496" y="162.2133">Build the parachain template collator</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="6.5998" x="6.0498" y="170.5361">4.</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="162.7952" x="14.8496" y="170.5361">Compiling the node can take 15 to 60 minuets</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="34.099" x="6.0498" y="178.8589">cargo b -r</text><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="573.9081" x2="597.0074" y1="197.6676" y2="197.6676"/><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="597.0074" x2="597.0074" y1="197.6676" y2="204.8174"/><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="574.4581" x2="597.0074" y1="204.8174" y2="204.8174"/><polygon fill="#181818" points="579.9579,202.6175,574.4581,204.8174,579.9579,207.0173,577.758,204.8174" style="stroke:#181818;stroke-width:0.5499838240051763;"/><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="58.2983" x="577.758" y="194.8815">reserve a paraID</text><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="339.34" x2="362.4393" y1="235.5606" y2="235.5606"/><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="362.4393" x2="362.4393" y1="235.5606" y2="242.7104"/><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="339.89" x2="362.4393" y1="242.7104" y2="242.7104"/><polygon fill="#181818" points="345.3898,240.5105,339.89,242.7104,345.3898,244.9104,343.1899,242.7104" style="stroke:#181818;stroke-width:0.5499838240051763;"/><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="75.8978" x="343.1899" y="232.7745">generate a plain spec</text><path d="M10.9997,211.9672 L10.9997,258.7158 L336.5901,258.7158 L336.5901,217.467 L331.0903,211.9672 L10.9997,211.9672 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.27499191200258816;"/><path d="M331.0903,211.9672 L331.0903,217.467 L336.5901,217.467 L331.0903,211.9672 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.27499191200258816;"/><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="6.5998" x="14.2996" y="221.3537">1.</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="305.241" x="23.0993" y="221.3537">Assumes that `rococo-local` is in `node/chan_spec.rs` as the relay you registered with</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="119.3465" x="14.2996" y="229.6765">./target/release/parachain-collator</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="35.7489" x="14.2996" y="237.9993">build-spec</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="93.4973" x="14.2996" y="246.3221">--disable-default-bootnode</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="123.7464" x="14.2996" y="254.6449">&gt; rococo-local-parachain-plain.json</text><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="453.7367" x2="476.836" y1="296.4971" y2="296.4971"/><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="476.836" x2="476.836" y1="296.4971" y2="303.6469"/><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="454.2866" x2="476.836" y1="303.6469" y2="303.6469"/><polygon fill="#181818" points="459.7865,301.447,454.2866,303.6469,459.7865,305.8469,457.5865,303.6469" style="stroke:#181818;stroke-width:0.5499838240051763;"/><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="109.9968" x="457.5865" y="293.711">set the correct reserved ParaID</text><path d="M241.9929,264.5809 L241.9929,327.829 L450.9867,327.829 L450.9867,270.0807 L445.4869,264.5809 L241.9929,264.5809 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.27499191200258816;"/><path d="M445.4869,264.5809 L445.4869,270.0807 L450.9867,270.0807 L445.4869,264.5809 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.27499191200258816;"/><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="4.3999" x="245.2928" y="273.9674">//</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" text-decoration="line-through" textLength="14.2996" x="251.8926" y="273.9674">snip</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="171.595" x="245.2928" y="282.2902">"para_id": 2000, // &lt;--- your already registered ID</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="4.3999" x="245.2928" y="290.613">//</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" text-decoration="line-through" textLength="14.2996" x="251.8926" y="290.613">snip</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="61.5982" x="254.0925" y="298.9358">"parachainInfo": {</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="184.2446" x="258.4924" y="307.2586">"parachainId": 2000 // &lt;--- your already registered ID</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="6.5998" x="254.0925" y="315.5814">},</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="4.3999" x="245.2928" y="323.9042">//</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" text-decoration="line-through" textLength="14.2996" x="251.8926" y="323.9042">snip</text><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="339.34" x2="362.4393" y1="361.595" y2="361.595"/><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="362.4393" x2="362.4393" y1="361.595" y2="368.7448"/><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="339.89" x2="362.4393" y1="368.7448" y2="368.7448"/><polygon fill="#181818" points="345.3898,366.5449,339.89,368.7448,345.3898,370.9448,343.1899,368.7448" style="stroke:#181818;stroke-width:0.5499838240051763;"/><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="92.3973" x="343.1899" y="358.8089">generate a raw chain spec</text><path d="M183.1446,333.8402 L183.1446,388.8386 L336.5901,388.8386 L336.5901,339.34 L331.0903,333.8402 L183.1446,333.8402 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.27499191200258816;"/><path d="M331.0903,333.8402 L331.0903,339.34 L336.5901,339.34 L331.0903,333.8402 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.27499191200258816;"/><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="119.3465" x="186.4445" y="343.2267">./target/release/parachain-collator</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="35.7489" x="186.4445" y="351.5495">build-spec</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="141.8958" x="186.4445" y="359.8723">--chain rococo-local-parachain-plain.json</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="17.5995" x="186.4445" y="368.1951">--raw</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="93.4973" x="186.4445" y="376.5179">--disable-default-bootnode</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="139.6959" x="186.4445" y="384.8407">&gt; rococo-local-parachain-2000-raw.json</text><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="573.9081" x2="597.0074" y1="411.9723" y2="411.9723"/><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="597.0074" x2="597.0074" y1="411.9723" y2="419.122"/><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="574.4581" x2="597.0074" y1="419.122" y2="419.122"/><polygon fill="#181818" points="579.9579,416.9221,574.4581,419.122,579.9579,421.322,577.758,419.122" style="stroke:#181818;stroke-width:0.5499838240051763;"/><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="100.0971" x="577.758" y="400.8633">Save and distribute your raw</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="16.4995" x="577.758" y="409.1861">spec</text><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="339.34" x2="362.4393" y1="454.0267" y2="454.0267"/><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="362.4393" x2="362.4393" y1="454.0267" y2="461.1765"/><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="339.89" x2="362.4393" y1="461.1765" y2="461.1765"/><polygon fill="#181818" points="345.3898,458.9765,339.89,461.1765,345.3898,463.3764,343.1899,461.1765" style="stroke:#181818;stroke-width:0.5499838240051763;"/><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="76.4478" x="343.1899" y="442.9177">Obtain Wasm runtime</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="63.7981" x="343.1899" y="451.2405">validation function</text><path d="M193.5943,426.2718 L193.5943,473.0205 L336.5901,473.0205 L336.5901,431.7717 L331.0903,426.2718 L193.5943,426.2718 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.27499191200258816;"/><path d="M331.0903,426.2718 L331.0903,431.7717 L336.5901,431.7717 L331.0903,426.2718 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.27499191200258816;"/><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="119.3465" x="196.8942" y="435.6584">./target/release/parachain-collator</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="75.3478" x="196.8942" y="443.9812">export-genesis-wasm</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="24.1993" x="196.8942" y="452.304">--chain</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="131.4461" x="196.8942" y="460.6268">rococo-local-parachain-2000-raw.json</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="67.648" x="196.8942" y="468.9496">&gt; para-2000-wasm</text><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="339.34" x2="362.4393" y1="498.3176" y2="498.3176"/><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="362.4393" x2="362.4393" y1="498.3176" y2="505.4674"/><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="339.89" x2="362.4393" y1="505.4674" y2="505.4674"/><polygon fill="#181818" points="345.3898,503.2674,339.89,505.4674,345.3898,507.6673,343.1899,505.4674" style="stroke:#181818;stroke-width:0.5499838240051763;"/><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="93.4973" x="343.1899" y="487.2086">convert the solo chain to a</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="34.649" x="343.1899" y="495.5314">parachain</text><path d="M24.7493,478.8855 L24.7493,509.1346 L336.5901,509.1346 L336.5901,484.3854 L331.0903,478.8855 L24.7493,478.8855 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.27499191200258816;"/><path d="M331.0903,478.8855 L331.0903,484.3854 L336.5901,484.3854 L331.0903,478.8855 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.27499191200258816;"/><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="300.2912" x="28.0492" y="488.272">此运行时和状态仅适用于平行链的创世块。您不能将具有任何先前状态的平行链连接到中继链。</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="283.7917" x="28.0492" y="496.5948">所有平行链必须从中继链上的区块 0 开始。之后可能推出迁移基于 Substrate 构建的单链</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="128.6962" x="28.0492" y="504.9176">的区块历史，但短期内不会计划此功能。</text><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="339.34" x2="362.4393" y1="542.6085" y2="542.6085"/><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="362.4393" x2="362.4393" y1="542.6085" y2="549.7582"/><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="339.89" x2="362.4393" y1="549.7582" y2="549.7582"/><polygon fill="#181818" points="345.3898,547.5583,339.89,549.7582,345.3898,551.9582,343.1899,549.7582" style="stroke:#181818;stroke-width:0.5499838240051763;"/><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="104.4969" x="343.1899" y="531.4995">generate a parachain genesis</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="18.1495" x="343.1899" y="539.8223">state</text><path d="M193.5943,514.8536 L193.5943,561.6022 L336.5901,561.6022 L336.5901,520.3534 L331.0903,514.8536 L193.5943,514.8536 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.27499191200258816;"/><path d="M331.0903,514.8536 L331.0903,520.3534 L336.5901,520.3534 L331.0903,514.8536 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.27499191200258816;"/><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="119.3465" x="196.8942" y="524.2401">./target/release/parachain-collator</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="73.1478" x="196.8942" y="532.5629">export-genesis-state</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="24.1993" x="196.8942" y="540.8857">--chain</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="131.4461" x="196.8942" y="549.2085">rococo-local-parachain-2000-raw.json</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="74.2478" x="196.8942" y="557.5313">&gt; para-2000-genesis</text><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="339.34" x2="362.4393" y1="713.9778" y2="713.9778"/><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="362.4393" x2="362.4393" y1="713.9778" y2="721.1276"/><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="339.89" x2="362.4393" y1="721.1276" y2="721.1276"/><polygon fill="#181818" points="345.3898,718.9277,339.89,721.1276,345.3898,723.3276,343.1899,721.1276" style="stroke:#181818;stroke-width:0.5499838240051763;"/><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="70.9479" x="343.1899" y="711.1917">start a collator node</text><path d="M167.1951,590.2358 L167.1951,699.6825 L336.5901,699.6825 L336.5901,595.7356 L331.0903,590.2358 L167.1951,590.2358 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.27499191200258816;"/><path d="M331.0903,590.2358 L331.0903,595.7356 L336.5901,595.7356 L331.0903,590.2358 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.27499191200258816;"/><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="119.3465" x="170.495" y="599.6223">./target/release/parachain-collator</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="21.4494" x="170.495" y="607.9451">--alice</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="31.3491" x="170.495" y="616.2679">--collator</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="59.3983" x="170.495" y="624.5907">--force-authoring</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="157.8454" x="170.495" y="632.9135">--chain rococo-local-parachain-2000-raw.json</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="114.9466" x="170.495" y="641.2363">--base-path /tmp/parachain/alice</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="43.9987" x="170.495" y="649.5591">--port 40333</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="51.1485" x="170.495" y="657.8819">--ws-port 8844</text><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="167.7451" x2="336.0401" y1="659.5681" y2="659.5681"/><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="62.1482" x="170.495" y="668.4046">--execution wasm</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="130.3462" x="170.495" y="676.7274">--chain &lt;relay chain raw chain spec&gt;</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="43.9987" x="170.495" y="685.0502">--port 30343</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="51.1485" x="170.495" y="693.373">--ws-port 9977</text><path d="M420.7376,567.4673 L420.7376,722.5627 L696.8295,722.5627 L696.8295,572.9671 L691.3297,567.4673 L420.7376,567.4673 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.27499191200258816;"/><path d="M691.3297,567.4673 L691.3297,572.9671 L696.8295,572.9671 L691.3297,567.4673 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.27499191200258816;"/><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="102.297" x="424.0375" y="576.8538">关于这个命令，首先要注意的是:</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="195.7942" x="424.0375" y="585.1766">在单独的 -- 之前传递了几个参数，在它之后传递了更多参数。</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="197.4442" x="424.0375" y="593.4994">平行链collator包含实际的收集人节点以及嵌入式中继链节点。</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="109.4468" x="424.0375" y="601.8222">1. -- 之前的参数是针对整理者的，</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="145.1957" x="424.0375" y="610.145">2. -- 之后的参数是针对嵌入式中继链节点的。</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="2.1999" x="424.0375" y="618.4678"> </text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="240.3429" x="424.0375" y="626.7906">如果为第二条平行链再次执行这些指令，请记住更改collator-specific的值。</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="216.6936" x="424.0375" y="635.1134">必须使用相同的中继链规范文件，但要绑定到的第二个平行链收集器.</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="132.5461" x="424.0375" y="643.4362">使用不同的 ParaID、基本路径和端口号。</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="264.5422" x="424.0375" y="651.759">目前没有嵌入中继链节点的平行链节点无法运行，但预计最后也会实现非收集节点。</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="2.1999" x="424.0375" y="660.0818"> </text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="257.3924" x="424.0375" y="668.4046">执行命令后应该看到收集人节点作为独立节点运行，并且其中继节点作为对等节点</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="114.3966" x="424.0375" y="676.7274">与已经运行的中继链验证节点连接。</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="2.1999" x="424.0375" y="685.0502"> </text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="257.3924" x="424.0375" y="693.373">请注意，如果没有看到嵌入式中继链与本地中继链节点对等，请尝试禁用防火墙或</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="141.8958" x="424.0375" y="701.6958">添加带有中继节点地址的 bootnodes 参数。</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="2.1999" x="424.0375" y="710.0186"> </text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="250.2426" x="424.0375" y="718.3414">此时还没有开始授权平行链区块。当收集人实际在中继链上注册时，才会开始。</text><rect fill="#EEEEEE" height="1.65" style="stroke:#EEEEEE;stroke-width:0.5499838240051763;" width="846.7001" x="0" y="736.8387"/><line style="stroke:#000000;stroke-width:0.5499838240051763;" x1="0" x2="846.7001" y1="736.8387" y2="736.8387"/><line style="stroke:#000000;stroke-width:0.5499838240051763;" x1="0" x2="846.7001" y1="738.4886" y2="738.4886"/><rect fill="#EEEEEE" height="12.7227" style="stroke:#000000;stroke-width:1.0999676480103526;" width="102.847" x="371.9266" y="731.0273"/><text fill="#000000" font-family="sans-serif" font-size="7.1498" font-weight="bold" lengthAdjust="spacing" textLength="92.3973" x="375.2265" y="739.8639">Parachain Registration</text><path d="M457.0366,751.9998 L457.0366,848.7969 L690.2297,848.7969 L690.2297,757.4996 L684.7299,751.9998 L457.0366,751.9998 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.27499191200258816;"/><path d="M684.7299,751.9998 L684.7299,757.4996 L690.2297,757.4996 L684.7299,751.9998 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.27499191200258816;"/><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="128.6962" x="460.3365" y="761.3863">有几种方法可以将平行链注册到中继链。</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="123.1964" x="460.3365" y="769.7091">1. 对于测试，使用 sudo 是最常见的。</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="207.3439" x="460.3365" y="778.0319">我们已经启动了中继链，并且我们的平行链整理器已经准备就绪。</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="207.3439" x="460.3365" y="786.3547">现在我们必须在中继链上注册平行链。在生产网络中，这通常通过</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="193.5943" x="460.3365" y="794.6775">平行链拍卖(parachain auctions)来完成。但是对于本教程，</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="100.0971" x="460.3365" y="803.0003">我们将使用 sudo 调用来完成。</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="2.1999" x="460.3365" y="811.3231"> </text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="37.3989" x="460.3365" y="819.6459">2. 注册交易</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="187.5445" x="460.3365" y="827.9687">交易可以通过 Polkadot-JS Apps UI 在中继链节点上提交。</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="221.6435" x="460.3365" y="836.2915">有多种选择可以解决这个问题，我们可以选择以下任何一种。请注意，</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="218.3436" x="460.3365" y="844.6143">此处的所有选项都取决于保留的 paraID - 因此请务必先执行此操作。</text><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="573.9081" x2="597.0074" y1="863.423" y2="863.423"/><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="597.0074" x2="597.0074" y1="863.423" y2="870.5728"/><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="574.4581" x2="597.0074" y1="870.5728" y2="870.5728"/><polygon fill="#181818" points="579.9579,868.3729,574.4581,870.5728,579.9579,872.7728,577.758,870.5728" style="stroke:#181818;stroke-width:0.5499838240051763;"/><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="84.6975" x="577.758" y="860.6369">Registration Transaction</text><path d="M296.4413,878.8226 L331.6402,878.8226 L331.6402,882.7455 L326.1404,888.2454 L296.4413,888.2454 L296.4413,878.8226 " fill="#FFD700" style="stroke:#000000;stroke-width:0.8249757360077645;"/><rect fill="none" height="114.4697" style="stroke:#000000;stroke-width:0.8249757360077645;" width="446.5869" x="296.4413" y="878.8226"/><text fill="#000000" font-family="sans-serif" font-size="7.1498" font-weight="bold" lengthAdjust="spacing" textLength="10.4497" x="304.691" y="886.0092">alt</text><text fill="#000000" font-family="sans-serif" font-size="6.0498" font-weight="bold" lengthAdjust="spacing" textLength="32.449" x="339.89" y="885.5381">[option1]</text><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="573.9081" x2="597.0074" y1="918.7501" y2="918.7501"/><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="597.0074" x2="597.0074" y1="918.7501" y2="925.8999"/><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="574.4581" x2="597.0074" y1="925.8999" y2="925.8999"/><polygon fill="#181818" points="579.9579,923.7,574.4581,925.8999,579.9579,928.0999,577.758,925.8999" style="stroke:#181818;stroke-width:0.5499838240051763;"/><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="158.9453" x="577.758" y="915.964">paraSudoWrapper.sudoScheduleParaInitialize</text><path d="M301.9411,890.9953 L301.9411,945.9937 L570.8832,945.9937 L570.8832,896.4951 L565.3834,890.9953 L301.9411,890.9953 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.27499191200258816;"/><path d="M565.3834,890.9953 L565.3834,896.4951 L570.8832,896.4951 L565.3834,890.9953 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.27499191200258816;"/><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="232.6432" x="305.241" y="900.3818">此选项完全绕过插槽租赁机制，从下一个中继链会话开始为保留的 paraID</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="200.1941" x="305.241" y="908.7046">加入平行链或平行线程。这是进行测试的最简单和最快的方法。</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="2.1999" x="305.241" y="917.0274"> </text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="257.3924" x="305.241" y="925.3502">但请注意，平行链将这些注册平行链所需的文件包含在链规范中设置的详细信息，</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="199.0941" x="305.241" y="933.673">这些详细信息必须明确针对正确的中继链并使用正确的 ParaID.</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="217.7936" x="305.241" y="941.9958">在这种情况下，是 rococo（而不是本教程中使用的 rococo-local） .</text><line style="stroke:#000000;stroke-width:0.5499838240051763;stroke-dasharray:2.0,2.0;" x1="296.4413" x2="743.0281" y1="949.7318" y2="949.7318"/><text fill="#000000" font-family="sans-serif" font-size="6.0498" font-weight="bold" lengthAdjust="spacing" textLength="32.449" x="299.1912" y="955.3474">[option2]</text><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="573.9081" x2="597.0074" y1="975.3448" y2="975.3448"/><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="597.0074" x2="597.0074" y1="975.3448" y2="982.4945"/><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="574.4581" x2="597.0074" y1="982.4945" y2="982.4945"/><polygon fill="#181818" points="579.9579,980.2946,574.4581,982.4945,579.9579,984.6945,577.758,982.4945" style="stroke:#181818;stroke-width:0.5499838240051763;"/><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="57.1983" x="577.758" y="972.5586">slots.forceLease</text><path d="M337.6901,960.0741 L337.6901,990.3232 L570.8832,990.3232 L570.8832,965.5739 L565.3834,960.0741 L337.6901,960.0741 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.27499191200258816;"/><path d="M565.3834,960.0741 L565.3834,965.5739 L570.8832,965.5739 L565.3834,960.0741 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.27499191200258816;"/><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="221.6435" x="340.99" y="969.4606">这是生产中使用的更正式的注册流程（除了使用 sudo 强制槽租用）：</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="146.8457" x="340.99" y="977.7834">使用保留它的同一帐户注册您的保留 paraID，</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="218.3436" x="340.99" y="986.1062">或者使用 sudo 和 registrar.forceRegister 交易操作，如果你希望。</text><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="339.34" x2="362.4393" y1="1015.1627" y2="1015.1627"/><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="362.4393" x2="362.4393" y1="1015.1627" y2="1022.3125"/><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="339.89" x2="362.4393" y1="1022.3125" y2="1022.3125"/><polygon fill="#181818" points="345.3898,1020.1126,339.89,1022.3125,345.3898,1024.5124,343.1899,1022.3125" style="stroke:#181818;stroke-width:0.5499838240051763;"/><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="57.7483" x="343.1899" y="1012.3765">block production</text><path d="M142.4458,999.8921 L142.4458,1030.1412 L336.5901,1030.1412 L336.5901,1005.3919 L331.0903,999.8921 L142.4458,999.8921 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.27499191200258816;"/><path d="M331.0903,999.8921 L331.0903,1005.3919 L336.5901,1005.3919 L331.0903,999.8921 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.27499191200258816;"/><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="182.5946" x="145.7457" y="1009.2786">The collator should start producing parachain blocks</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="171.045" x="145.7457" y="1017.6014">(aka collating) once the registration is successful</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="132.5461" x="145.7457" y="1025.9242">and the next relay chain epoch begin!</text><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="573.9081" x2="597.0074" y1="1055.2922" y2="1055.2922"/><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="597.0074" x2="597.0074" y1="1055.2922" y2="1062.442"/><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="574.4581" x2="597.0074" y1="1062.442" y2="1062.442"/><polygon fill="#181818" points="579.9579,1060.2421,574.4581,1062.442,579.9579,1064.6419,577.758,1062.442" style="stroke:#181818;stroke-width:0.5499838240051763;"/><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="72.5979" x="577.758" y="1052.506">see block finalization</text><path d="M301.9411,1035.8602 L301.9411,1074.359 L570.8832,1074.359 L570.8832,1041.36 L565.3834,1035.8602 L301.9411,1035.8602 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.27499191200258816;"/><path d="M565.3834,1035.8602 L565.3834,1041.36 L570.8832,1041.36 L565.3834,1035.8602 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.27499191200258816;"/><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="135.846" x="305.241" y="1045.2467">中继链跟踪每个平行链的最新块（头部）。</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="2.1999" x="305.241" y="1053.5695"> </text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="257.3924" x="305.241" y="1061.8923">当一个中继链区块最终确定时，每个已完成验证过程的平行链区块也将最终确定。</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="191.9444" x="305.241" y="1070.2151">这就是 Polkadot 为其平行链实现池化、共享安全性的方式！</text><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="740.5532" x2="763.6525" y1="1099.5831" y2="1099.5831"/><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="763.6525" x2="763.6525" y1="1099.5831" y2="1106.7329"/><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="741.1032" x2="763.6525" y1="1106.7329" y2="1106.7329"/><polygon fill="#181818" points="746.603,1104.5329,741.1032,1106.7329,746.603,1108.9328,744.4031,1106.7329" style="stroke:#181818;stroke-width:0.5499838240051763;"/><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="98.4471" x="744.4031" y="1096.7969">Connecting with the Apps UI</text><path d="M472.9861,1080.151 L472.9861,1118.6499 L737.5283,1118.6499 L737.5283,1085.6509 L732.0285,1080.151 L472.9861,1080.151 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.27499191200258816;"/><path d="M732.0285,1080.151 L732.0285,1085.6509 L737.5283,1085.6509 L732.0285,1080.151 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.27499191200258816;"/><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="252.9926" x="476.286" y="1089.5376">我们已经将 Apps UI 连接到中继链节点。现在我们还可以连接到平行链收集器。</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="247.4927" x="476.286" y="1097.8604">在新的浏览器窗口中打开另一个应用程序 UI 实例，并将其连接到适当的端点。</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="2.1999" x="476.286" y="1106.1832"> </text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="221.6435" x="476.286" y="1114.506">如果您到目前为止已经按照本教程进行操作，则可以连接到平行链节点</text><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="740.5532" x2="763.6525" y1="1148.0354" y2="1148.0354"/><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="763.6525" x2="763.6525" y1="1148.0354" y2="1155.1852"/><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="741.1032" x2="763.6525" y1="1155.1852" y2="1155.1852"/><polygon fill="#181818" points="746.603,1152.9852,741.1032,1155.1852,746.603,1157.3851,744.4031,1155.1852" style="stroke:#181818;stroke-width:0.5499838240051763;"/><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="60.4982" x="744.4031" y="1145.2492">Submit extrinsics</text><path d="M482.8858,1124.4419 L482.8858,1171.1906 L737.5283,1171.1906 L737.5283,1129.9418 L732.0285,1124.4419 L482.8858,1124.4419 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.27499191200258816;"/><path d="M732.0285,1124.4419 L732.0285,1129.9418 L737.5283,1129.9418 L732.0285,1124.4419 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.27499191200258816;"/><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="2.1999" x="486.1857" y="1133.8284"> </text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="185.8945" x="486.1857" y="1142.1512">您可以进行一些简单的代币转账，以确保平行链正常运行。</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="2.1999" x="486.1857" y="1150.474"> </text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="243.0929" x="486.1857" y="1158.7969">您还可以通过转到外部页面，选择系统托盘并注释外部来进行一些链上注释。</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="164.4452" x="486.1857" y="1167.1197">如果交易按预期进行，你就有了一个有效的平行链。</text><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="339.34" x2="362.4393" y1="1248.6609" y2="1248.6609"/><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="362.4393" x2="362.4393" y1="1248.6609" y2="1255.8107"/><line style="stroke:#181818;stroke-width:0.5499838240051763;" x1="339.89" x2="362.4393" y1="1255.8107" y2="1255.8107"/><polygon fill="#181818" points="345.3898,1253.6108,339.89,1255.8107,345.3898,1258.0107,343.1899,1255.8107" style="stroke:#181818;stroke-width:0.5499838240051763;"/><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="28.5992" x="343.1899" y="1245.8748">链条清洗</text><path d="M146.2957,1177.0556 L146.2957,1257.3533 L336.5901,1257.3533 L336.5901,1182.5555 L331.0903,1177.0556 L146.2957,1177.0556 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.27499191200258816;"/><path d="M331.0903,1177.0556 L331.0903,1182.5555 L336.5901,1182.5555 L331.0903,1177.0556 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.27499191200258816;"/><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="6.5998" x="149.5956" y="1186.4421">1.</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="71.4979" x="158.3953" y="1186.4421">Purge the collator(s)</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="119.3465" x="149.5956" y="1194.7649">./target/release/parachain-collator</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="41.7988" x="149.5956" y="1203.0877">purge-chain</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="166.6451" x="149.5956" y="1211.4105">--base-path &lt;your collator DB path set above&gt;</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="2.1999" x="149.5956" y="1219.7333"> </text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="6.5998" x="149.5956" y="1228.0561">2.</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="75.8978" x="158.3953" y="1228.0561">Purge the validator(s)</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="30.2491" x="149.5956" y="1236.3789">polkadot</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="41.7988" x="149.5956" y="1244.7017">purge-chain</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="178.7447" x="149.5956" y="1253.0245">--base-path &lt;your relay chain DB path set above&gt;</text><path d="M378.3889,1189.5398 L378.3889,1244.5382 L532.9343,1244.5382 L532.9343,1195.0397 L527.4345,1189.5398 L378.3889,1189.5398 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.27499191200258816;"/><path d="M527.4345,1189.5398 L527.4345,1195.0397 L532.9343,1195.0397 L527.4345,1189.5398 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.27499191200258816;"/><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="142.9958" x="381.6888" y="1198.9263">收集者节点是平行链区块链数据的唯一归宿，</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="121.5464" x="381.6888" y="1207.2491">因为整个平行链网络上只有一个节点。</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="100.0971" x="381.6888" y="1215.5719">中继链仅存储平行链标头信息。</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="2.1999" x="381.6888" y="1223.8947"> </text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="135.846" x="381.6888" y="1232.2175">如果平行链数据丢失，您将无法恢复该链。</text><text fill="#000000" font-family="sans-serif" font-size="7.1498" lengthAdjust="spacing" textLength="128.6962" x="381.6888" y="1240.5403">但是，在测试中，您可能需要从头开始。</text></g></svg></figure>
<h2 id="connect-to-rococo-testnet"><a class="header" href="#connect-to-rococo-testnet">Connect to Rococo testnet</a></h2>
<blockquote>
<p><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#substrate%E5%AE%98%E6%96%B9%E6%95%99%E7%A8%8B%E6%A2%B3%E7%90%86%E4%B8%8E%E7%BB%83%E4%B9%A0">返回顶部</a></p>
</blockquote>
<h3 id="substrate预置账户和密钥"><a class="header" href="#substrate预置账户和密钥">substrate预置账户和密钥</a></h3>
<ul>
<li><a href="https://docs.substrate.io/reference/command-line-tools/subkey/#predefined-accounts-and-keys">subkey | Substrate_ Docs</a></li>
</ul>
<h3 id="wallets"><a class="header" href="#wallets">wallets</a></h3>
<ul>
<li><a href="https://wiki.polkadot.network/docs/build-wallets">Wallets · Polkadot Wiki</a></li>
</ul>
<h3 id="polkadot-jsextension"><a class="header" href="#polkadot-jsextension">polkadot-js/extension</a></h3>
<ul>
<li><a href="https://github.com/polkadot-js/extension">polkadot-js/extension: Simple browser extension for managing Polkadot and Substrate network accounts in a browser. Allows the signing of extrinsics using these accounts. Also provides a simple interface for compliant extensions for dapps.</a></li>
</ul>
<h3 id="ss58地址格式"><a class="header" href="#ss58地址格式">SS58地址格式</a></h3>
<ul>
<li><a href="https://docs.substrate.io/reference/glossary/#ss58-address-format">Glossary | Substrate_ Docs</a></li>
</ul>
<h3 id="rococo-faucet-martic-channel"><a class="header" href="#rococo-faucet-martic-channel">Rococo faucet martic channel</a></h3>
<ul>
<li><a href="https://matrix.to/#/#rococo-faucet:matrix.org">You’re invited to talk on Matrix</a></li>
</ul>
<h3 id="时序图-5"><a class="header" href="#时序图-5">时序图</a></h3>
<figure><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1728px" preserveAspectRatio="none" style="width:1268px;height:1728px;background:#FFFFFF;" version="1.1" viewBox="0 0 1268 1728" width="1268px" zoomAndPan="magnify"><defs/><g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="303" x2="303" y1="81.2969" y2="1647.5234"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="458" x2="458" y1="81.2969" y2="1647.5234"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="671" x2="671" y1="81.2969" y2="1647.5234"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="971" x2="971" y1="81.2969" y2="1647.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="285" y="77.9951">user</text><ellipse cx="303.5" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M303.5,21.5 L303.5,48.5 M290.5,29.5 L316.5,29.5 M303.5,48.5 L290.5,63.5 M303.5,48.5 L316.5,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="285" y="1659.5186">user</text><ellipse cx="303.5" cy="1671.3203" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M303.5,1679.3203 L303.5,1706.3203 M290.5,1687.3203 L316.5,1687.3203 M303.5,1706.3203 L290.5,1721.3203 M303.5,1706.3203 L316.5,1721.3203 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="61.25" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="252" x="332" y="19.0469"/><text fill="#000000" font-family="sans-serif" font-size="18" font-weight="bold" lengthAdjust="spacing" textLength="238" x="339" y="42.7549">Polkadot-JS Rococo app</text><line style="stroke:#181818;stroke-width:1.0;" x1="332" x2="584" y1="52" y2="52"/><a href="https://polkadot.js.org/apps/?rpc=wss%3A%2F%2Frococo-rpc.polkadot.io#/explorer" target="_top" title="https://polkadot.js.org/apps/?rpc=wss%3A%2F%2Frococo-rpc.polkadot.io#/explorer" xlink:actuate="onRequest" xlink:href="https://polkadot.js.org/apps/?rpc=wss%3A%2F%2Frococo-rpc.polkadot.io#/explorer" xlink:show="new" xlink:title="https://polkadot.js.org/apps/?rpc=wss%3A%2F%2Frococo-rpc.polkadot.io#/explorer" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="98" x="409" y="69.9951">波卡洛可可前端</text></a><rect fill="#E2E2F0" height="61.25" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="252" x="332" y="1646.5234"/><text fill="#000000" font-family="sans-serif" font-size="18" font-weight="bold" lengthAdjust="spacing" textLength="238" x="339" y="1670.2314">Polkadot-JS Rococo app</text><line style="stroke:#181818;stroke-width:1.0;" x1="332" x2="584" y1="1679.4766" y2="1679.4766"/><a href="https://polkadot.js.org/apps/?rpc=wss%3A%2F%2Frococo-rpc.polkadot.io#/explorer" target="_top" title="https://polkadot.js.org/apps/?rpc=wss%3A%2F%2Frococo-rpc.polkadot.io#/explorer" xlink:actuate="onRequest" xlink:href="https://polkadot.js.org/apps/?rpc=wss%3A%2F%2Frococo-rpc.polkadot.io#/explorer" xlink:show="new" xlink:title="https://polkadot.js.org/apps/?rpc=wss%3A%2F%2Frococo-rpc.polkadot.io#/explorer" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="98" x="409" y="1697.4717">波卡洛可可前端</text></a><rect fill="#E2E2F0" height="61.25" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="154" x="594" y="19.0469"/><text fill="#000000" font-family="sans-serif" font-size="18" font-weight="bold" lengthAdjust="spacing" textLength="54" x="644" y="42.7549">浏览器</text><line style="stroke:#181818;stroke-width:1.0;" x1="594" x2="748" y1="52" y2="52"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="601" y="69.9951">浏览器做其他申请操作</text><rect fill="#E2E2F0" height="61.25" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="154" x="594" y="1646.5234"/><text fill="#000000" font-family="sans-serif" font-size="18" font-weight="bold" lengthAdjust="spacing" textLength="54" x="644" y="1670.2314">浏览器</text><line style="stroke:#181818;stroke-width:1.0;" x1="594" x2="748" y1="1679.4766" y2="1679.4766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="601" y="1697.4717">浏览器做其他申请操作</text><rect fill="#E2E2F0" height="61.25" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="112" x="915" y="19.0469"/><text fill="#000000" font-family="sans-serif" font-size="18" font-weight="bold" lengthAdjust="spacing" textLength="36" x="953" y="42.7549">终端</text><line style="stroke:#181818;stroke-width:1.0;" x1="915" x2="1027" y1="52" y2="52"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="922" y="69.9951">用于检查和编译</text><rect fill="#E2E2F0" height="61.25" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="112" x="915" y="1646.5234"/><text fill="#000000" font-family="sans-serif" font-size="18" font-weight="bold" lengthAdjust="spacing" textLength="36" x="953" y="1670.2314">终端</text><line style="stroke:#181818;stroke-width:1.0;" x1="915" x2="1027" y1="1679.4766" y2="1679.4766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="922" y="1697.4717">用于检查和编译</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1261" x="0" y="111.8633"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1261" y1="111.8633" y2="111.8633"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1261" y1="114.8633" y2="114.8633"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="130" x="565.5" y="101.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="111" x="571.5" y="117.3638">Set up a wallet</text><line style="stroke:#181818;stroke-width:1.0;" x1="671" x2="713" y1="155.5625" y2="155.5625"/><line style="stroke:#181818;stroke-width:1.0;" x1="713" x2="713" y1="155.5625" y2="168.5625"/><line style="stroke:#181818;stroke-width:1.0;" x1="672" x2="713" y1="168.5625" y2="168.5625"/><polygon fill="#181818" points="682,164.5625,672,168.5625,682,172.5625,678,168.5625" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="176" x="678" y="150.4966">connect &amp; have an account</text><line style="stroke:#181818;stroke-width:1.0;" x1="303.5" x2="345.5" y1="224.4609" y2="224.4609"/><line style="stroke:#181818;stroke-width:1.0;" x1="345.5" x2="345.5" y1="224.4609" y2="237.4609"/><line style="stroke:#181818;stroke-width:1.0;" x1="304.5" x2="345.5" y1="237.4609" y2="237.4609"/><polygon fill="#181818" points="314.5,233.4609,304.5,237.4609,314.5,241.4609,310.5,237.4609" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="310.5" y="219.395">backup &amp; make note</text><path d="M50,181.5625 L50,266.5625 L298,266.5625 L298,191.5625 L288,181.5625 L50,181.5625 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M288,181.5625 L288,191.5625 L298,191.5625 L288,181.5625 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="214" x="56" y="198.6294">Back up your secret seed phrase.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="56" y="213.7622"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="227" x="56" y="228.895">Make note of your accountID that is</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="225" x="56" y="244.0278">using the default 42 SS58 prefix for</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="56" y="259.1606">use with Rococo.</text><line style="stroke:#181818;stroke-width:1.0;" x1="671" x2="713" y1="293.3594" y2="293.3594"/><line style="stroke:#181818;stroke-width:1.0;" x1="713" x2="713" y1="293.3594" y2="306.3594"/><line style="stroke:#181818;stroke-width:1.0;" x1="672" x2="713" y1="306.3594" y2="306.3594"/><polygon fill="#181818" points="682,302.3594,672,306.3594,682,310.3594,678,306.3594" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="678" y="288.2935">acquire ROC in</text><a href="https://matrix.to/#/#rococo-faucet:matrix.org" target="_top" title="https://matrix.to/#/#rococo-faucet:matrix.org" xlink:actuate="onRequest" xlink:href="https://matrix.to/#/#rococo-faucet:matrix.org" xlink:show="new" xlink:title="https://matrix.to/#/#rococo-faucet:matrix.org" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="189" x="775" y="288.2935">Rococo faucet matrix channel</text></a><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1261" x="0" y="334.9258"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1261" y1="334.9258" y2="334.9258"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1261" y1="337.9258" y2="337.9258"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="143" x="559" y="324.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="124" x="565" y="340.4263">Acquire a ParaID</text><line style="stroke:#181818;stroke-width:1.0;" x1="458" x2="500" y1="432.1563" y2="432.1563"/><line style="stroke:#181818;stroke-width:1.0;" x1="500" x2="500" y1="432.1563" y2="445.1563"/><line style="stroke:#181818;stroke-width:1.0;" x1="459" x2="500" y1="445.1563" y2="445.1563"/><polygon fill="#181818" points="469,441.1563,459,445.1563,469,449.1563,465,445.1563" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160" x="465" y="411.9575">Network &gt;&gt; Parathreads</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="465" y="427.0903">Reserve a unique ParaID</text><path d="M322,392.7578 L322,417.7578 L453,417.7578 L453,402.7578 L443,392.7578 L322,392.7578 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M443,392.7578 L443,402.7578 L453,402.7578 L443,392.7578 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="328" y="409.8247">Make note of this</text><path d="M637,362.4922 L637,447.4922 L984,447.4922 L984,372.4922 L974,362.4922 L637,362.4922 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M974,362.4922 L974,372.4922 L984,372.4922 L974,362.4922 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="643" y="379.5591">请注意，在 Rococo 上，</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="643" y="394.6919">ParaID 编号 0-999 保留给</text><a href="https://wiki.polkadot.network/docs/learn-common-goods#system-level-chains" target="_top" title="https://wiki.polkadot.network/docs/learn-common-goods#system-level-chains" xlink:actuate="onRequest" xlink:href="https://wiki.polkadot.network/docs/learn-common-goods#system-level-chains" xlink:show="new" xlink:title="https://wiki.polkadot.network/docs/learn-common-goods#system-level-chains" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="65" x="799" y="394.6919">系统平行链</text></a><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="864" y="394.6919">,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="643" y="409.8247">而 1000-1999 保留给</text><a href="https://wiki.polkadot.network/docs/learn-common-goods#public-utility-chains" target="_top" title="https://wiki.polkadot.network/docs/learn-common-goods#public-utility-chains" xlink:actuate="onRequest" xlink:href="https://wiki.polkadot.network/docs/learn-common-goods#public-utility-chains" xlink:show="new" xlink:title="https://wiki.polkadot.network/docs/learn-common-goods#public-utility-chains" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="91" x="772" y="409.8247">公用工具平行链</text></a><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="863" y="409.8247">.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="643" y="424.9575"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="326" x="643" y="440.0903">只有尚未保留的 2000 及以上数字才能用于社区平行链。</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1261" x="0" y="473.7227"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1261" y1="473.7227" y2="473.7227"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1261" y1="476.7227" y2="476.7227"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="170" x="545.5" y="463.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="151" x="551.5" y="479.2231">generate file &amp; start</text><line style="stroke:#181818;stroke-width:1.0;" x1="971" x2="1013" y1="604.7188" y2="604.7188"/><line style="stroke:#181818;stroke-width:1.0;" x1="1013" x2="1013" y1="604.7188" y2="617.7188"/><line style="stroke:#181818;stroke-width:1.0;" x1="972" x2="1013" y1="617.7188" y2="617.7188"/><polygon fill="#181818" points="982,613.7188,972,617.7188,982,621.7188,978,617.7188" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="276" x="978" y="599.6528">generate parachain genesis and wasm files</text><path d="M595,501.2891 L595,707.2891 L966,707.2891 L966,511.2891 L956,501.2891 L595,501.2891 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M956,501.2891 L956,511.2891 L966,511.2891 L956,501.2891 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="208" x="601" y="518.356">注册平行链所需的文件必须明确指定</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="189" x="601" y="533.4888">正确的中继链和正确的 ParaID。</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="601" y="548.6216"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="190" x="601" y="563.7544">在本教程中，中继链是 rococo，</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="208" x="601" y="578.8872">而不是 Connect a local parachain</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172" x="601" y="594.02">教程中使用的 rococo-local。</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="601" y="609.1528"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="601" y="624.2856">配置您的链规范以使用：</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="601" y="639.4185">1. 你的Rococo ParaID。</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="315" x="601" y="654.5513">2. 您的整理者节点的开发密钥和帐户的独特替代方案。</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="350" x="601" y="669.6841">虽然 Alice 和此类帐户可以使用，但您绝对不应该使用它们！</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="237" x="601" y="684.8169">3. 为洛可可生成适当的平行链创世状态。</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="274" x="601" y="699.9497">4. 为 Rococo 生成平行链运行时 Wasm blob。</text><line style="stroke:#181818;stroke-width:1.0;" x1="971" x2="1013" y1="806.3125" y2="806.3125"/><line style="stroke:#181818;stroke-width:1.0;" x1="1013" x2="1013" y1="806.3125" y2="819.3125"/><line style="stroke:#181818;stroke-width:1.0;" x1="972" x2="1013" y1="819.3125" y2="819.3125"/><polygon fill="#181818" points="982,815.3125,972,819.3125,982,823.3125,978,819.3125" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="978" y="801.2466">start your collator</text><path d="M622,718.0156 L622,894.0156 L966,894.0156 L966,728.0156 L956,718.0156 L622,718.0156 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M956,718.0156 L956,728.0156 L966,728.0156 L956,718.0156 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="299" x="628" y="735.0825">对于嵌入式中继链和平行链，您必须拥有可公开访问</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="312" x="628" y="750.2153">和发现的整理者对等端口。这样你就可以与洛可可验证</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="208" x="628" y="765.3481">节点对等，否则你将无法产生区块！</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="628" y="780.481"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="628" y="795.6138">对等端口使用</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="line-through" textLength="135" x="710" y="795.6138">port &lt;collator node&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="260" x="628" y="810.7466">--port &lt;relay node&gt;这两个 CLI 标志设置，</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="195" x="628" y="825.8794">请务必分别对两个节点执行此操作</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="628" y="841.0122"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="323" x="628" y="856.145">您很可能至少希望您的collator的 --ws-port &lt;ws port&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="319" x="628" y="871.2778">端口也打开，以允许您自己（和其他人）通过 Polkadot</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="205" x="628" y="886.4106">应用程序 UI 或 API 调用与其连接。</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1261" x="0" y="920.043"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1261" y1="920.043" y2="920.043"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1261" y1="923.043" y2="923.043"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="172" x="544.5" y="909.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="153" x="550.5" y="925.5435">register and request</text><line style="stroke:#181818;stroke-width:1.0;" x1="458" x2="500" y1="963.7422" y2="963.7422"/><line style="stroke:#181818;stroke-width:1.0;" x1="500" x2="500" y1="963.7422" y2="976.7422"/><line style="stroke:#181818;stroke-width:1.0;" x1="459" x2="500" y1="976.7422" y2="976.7422"/><polygon fill="#181818" points="469,972.7422,459,976.7422,469,980.7422,465,976.7422" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="158" x="465" y="958.6763">Register as a parathread</text><line style="stroke:#181818;stroke-width:1.0;" x1="671" x2="713" y1="1119.9375" y2="1119.9375"/><line style="stroke:#181818;stroke-width:1.0;" x1="713" x2="713" y1="1119.9375" y2="1132.9375"/><line style="stroke:#181818;stroke-width:1.0;" x1="672" x2="713" y1="1132.9375" y2="1132.9375"/><polygon fill="#181818" points="682,1128.9375,672,1132.9375,682,1136.9375,678,1132.9375" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="678" y="1114.8716">申请开通你的平行链插槽</text><path d="M268,1020.0078 L268,1105.0078 L666,1105.0078 L666,1030.0078 L656,1020.0078 L268,1020.0078 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M656,1020.0078 L656,1030.0078 L666,1030.0078 L656,1020.0078 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="349" x="274" y="1037.0747">永久插槽是分配给当前在 Polkadot 上拥有平行链插槽的团队</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="364" x="274" y="1052.2075">（在成功的插槽租赁拍卖之后）的平行链插槽，因此需要不断测</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="377" x="274" y="1067.3403">试他们的代码库以与现实世界中的最新前沿功能兼容（洛可可）。</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="274" y="1082.4731"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="274" y="1097.606">只有有限数量的永久插槽可用</text><path d="M833,989.7422 L833,1135.7422 L1166,1135.7422 L1166,999.7422 L1156,989.7422 L833,989.7422 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1156,989.7422 L1156,999.7422 L1166,999.7422 L1156,989.7422 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="312" x="839" y="1006.8091">临时插槽是平行链插槽，以连续的循环方式动态分配。</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="839" y="1021.9419"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="312" x="839" y="1037.0747">在每个租期开始时，一定数量的平行线程（最多为中继</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="312" x="839" y="1052.2075">链配置中定义的最大值）会在一定时间内自动升级为平</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="312" x="839" y="1067.3403">行链。在租约结束期间处于活动状态的平行链会自动降</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="312" x="839" y="1082.4731">级为平行线程，以释放插槽供其他人在后续期间使用。</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="839" y="1097.606"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="284" x="839" y="1112.7388">临时插槽旨在供尚未在 Polkadot 上拥有平行链插</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="247" x="839" y="1127.8716">槽的团队使用，并计划在不久的将来使用。</text><path d="M485,1145.9375 L485,1336.9375 L857,1336.9375 L857,1155.9375 L847,1145.9375 L485,1145.9375 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M847,1145.9375 L847,1155.9375 L857,1155.9375 L847,1145.9375 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="286" x="491" y="1163.0044">在平行链作为平行线程激活后，相关项目团队应在</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="63" x="491" y="1178.1372">Rococo 上</text><a href="https://github.com/paritytech/subport/issues/new?assignees=&amp;labels=Rococo&amp;template=rococo.yaml" target="_top" title="https://github.com/paritytech/subport/issues/new?assignees=&amp;labels=Rococo&amp;template=rococo.yaml" xlink:actuate="onRequest" xlink:href="https://github.com/paritytech/subport/issues/new?assignees=&amp;labels=Rococo&amp;template=rococo.yaml" xlink:show="new" xlink:title="https://github.com/paritytech/subport/issues/new?assignees=&amp;labels=Rococo&amp;template=rococo.yaml" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="195" x="554" y="1178.1372">打开永久或临时平行链插槽的请求</text></a><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="13" x="749" y="1178.1372">。</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="491" y="1193.27"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="258" x="491" y="1208.4028">Rococo 运行时需要 sudo 访问权限来分配槽</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="340" x="491" y="1223.5356">(AssignSlotOrigin = EnsureRoot&lt;Self::AccountId&gt;;)。</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="491" y="1238.6685"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="320" x="491" y="1253.8013">Rococo sudo 密钥目前由 Parity Technologies 控制，</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="351" x="491" y="1268.9341">因此要进行获取插槽所需的操作，请在完成上述操作并准备好</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="344" x="491" y="1284.0669">连接后转到 Subport repo 并打开 Rococo Slot Request！</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="274" x="491" y="1299.1997">激活您的插槽后，Parity 团队成员将做出回应。</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="491" y="1314.3325"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="312" x="491" y="1329.4653">最终，该过程旨在通过洛可可式治理框架由社区驱动。</text><line style="stroke:#181818;stroke-width:1.0;" x1="458" x2="500" y1="1492.8594" y2="1492.8594"/><line style="stroke:#181818;stroke-width:1.0;" x1="500" x2="500" y1="1492.8594" y2="1505.8594"/><line style="stroke:#181818;stroke-width:1.0;" x1="459" x2="500" y1="1505.8594" y2="1505.8594"/><polygon fill="#181818" points="469,1501.8594,459,1505.8594,469,1509.8594,465,1505.8594" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151" x="465" y="1487.7935">assign a temporary slot</text><path d="M5,1347.5313 L5,1508.5313 L453,1508.5313 L453,1357.5313 L443,1347.5313 L5,1347.5313 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M443,1347.5313 L443,1357.5313 L453,1357.5313 L443,1347.5313 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="237" x="11" y="1364.5981">1. Open Polkadot-JS Apps for Rococo.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197" x="11" y="1379.731">2. Click Developer &gt; Extrinsics.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="411" x="11" y="1394.8638">3. Select the account you want to use to submit the transaction.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="221" x="11" y="1409.9966">4. Select the assignedSlots pallet .</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="317" x="11" y="1425.1294">5. Choose the assignTempParachainSlot function.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="194" x="11" y="1440.2622">6. Insert your reserved ParaID.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="350" x="11" y="1455.395">Make sure you use the ParaID you previously reserved.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="272" x="11" y="1470.5278">7. Select Current for the LeasePeriodStart.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="427" x="11" y="1485.6606">If the current slot is full, you will be assigned the next available slot.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="225" x="11" y="1500.7935">8. Sign and submit the transaction.</text><path d="M628,1377.7969 L628,1477.7969 L1094,1477.7969 L1094,1387.7969 L1084,1377.7969 L628,1377.7969 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1084,1377.7969 L1084,1387.7969 L1094,1387.7969 L1084,1377.7969 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="445" x="634" y="1394.8638">给定 1 天的租期，洛可可分配的平行链插槽的当前设置是（在撰写本文时）：</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="251" x="634" y="1409.9966">1. 永久插槽最短持续时间：1 年（365 天）</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184" x="634" y="1425.1294">2. 临时时段最短持续时间：3 天</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="261" x="634" y="1440.2622">3. 永久插槽的最大数量：最多 25 个永久插槽</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="209" x="634" y="1455.395">4. 最大临时槽数：最多 20 个临时槽</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="399" x="634" y="1470.5278">5. 每个租期分配的最大临时时段：每 3 天临时租期最多 5 个临时时段</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1261" x="0" y="1534.4258"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1261" y1="1534.4258" y2="1534.4258"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1261" y1="1537.4258" y2="1537.4258"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="142" x="559.5" y="1523.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="123" x="565.5" y="1539.9263">Congratulations!</text><path d="M220,1561.9922 L220,1631.9922 L696,1631.9922 L696,1571.9922 L686,1561.9922 L220,1561.9922 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M686,1561.9922 L686,1571.9922 L696,1571.9922 L686,1561.9922 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="445" x="226" y="1579.0591">Parity 团队激活您的插槽后，您可以在 Rococo 测试网络上测试您的平行链。</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="226" y="1594.1919"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="403" x="226" y="1609.3247">请注意，当您的临时插槽租约结束时，平行链会自动降级为平行线程。</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="455" x="226" y="1624.4575">注册和批准的插槽以循环方式自动循环，因此您可以不时作为平行链重新上线。</text></g></svg></figure>
<h2 id="access-evm-accounts"><a class="header" href="#access-evm-accounts">Access EVM accounts</a></h2>
<blockquote>
<p><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#substrate%E5%AE%98%E6%96%B9%E6%95%99%E7%A8%8B%E6%A2%B3%E7%90%86%E4%B8%8E%E7%BB%83%E4%B9%A0">返回顶部</a></p>
</blockquote>
<h3 id="ethereum-core-concepts-and-terminology"><a class="header" href="#ethereum-core-concepts-and-terminology">Ethereum core concepts and terminology</a></h3>
<h3 id="ethereum-virtual-machine-evm-basics"><a class="header" href="#ethereum-virtual-machine-evm-basics">Ethereum Virtual Machine (EVM) basics</a></h3>
<h3 id="decentralized-applications-and-smart-contracts"><a class="header" href="#decentralized-applications-and-smart-contracts">Decentralized applications and smart contracts</a></h3>
<h3 id="pallet-design-principles"><a class="header" href="#pallet-design-principles">Pallet design principles</a></h3>
<h3 id="truffle"><a class="header" href="#truffle">Truffle</a></h3>
<p><a href="https://trufflesuite.com/truffle/">Truffle - Truffle Suite</a></p>
<h3 id="remix-ide"><a class="header" href="#remix-ide">Remix IDE</a></h3>
<p><a href="http://remix.ethereum.org/#optimize=false&amp;runs=200&amp;evmVersion=null&amp;version=soljson-v0.8.7+commit.e28d00a7.js">Remix - Ethereum IDE</a></p>
<h3 id="时序图-6"><a class="header" href="#时序图-6">时序图</a></h3>
<figure><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1802px" preserveAspectRatio="none" style="width:1159px;height:1802px;background:#FFFFFF;" version="1.1" viewBox="0 0 1159 1802" width="1159px" zoomAndPan="magnify"><defs/><g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="291" x2="291" y1="67.25" y2="1735.8047"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="477.5" x2="477.5" y1="67.25" y2="1735.8047"/><rect fill="#E2E2F0" height="44.9531" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="50" x="266" y="21.2969"/><text fill="#000000" font-family="sans-serif" font-size="18" font-weight="bold" lengthAdjust="spacing" textLength="36" x="273" y="45.0049">终端</text><line style="stroke:#181818;stroke-width:1.0;" x1="266" x2="316" y1="54.25" y2="54.25"/><rect fill="#E2E2F0" height="44.9531" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="50" x="266" y="1734.8047"/><text fill="#000000" font-family="sans-serif" font-size="18" font-weight="bold" lengthAdjust="spacing" textLength="36" x="273" y="1758.5127">终端</text><line style="stroke:#181818;stroke-width:1.0;" x1="266" x2="316" y1="1767.7578" y2="1767.7578"/><rect fill="#E2E2F0" height="61.25" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="249" x="353.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="18" font-weight="bold" lengthAdjust="spacing" textLength="235" x="360.5" y="28.708">Polkadot-JS application</text><line style="stroke:#181818;stroke-width:1.0;" x1="353.5" x2="602.5" y1="37.9531" y2="37.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="450" y="55.9482">波卡前端</text><rect fill="#E2E2F0" height="61.25" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="249" x="353.5" y="1734.8047"/><text fill="#000000" font-family="sans-serif" font-size="18" font-weight="bold" lengthAdjust="spacing" textLength="235" x="360.5" y="1758.5127">Polkadot-JS application</text><line style="stroke:#181818;stroke-width:1.0;" x1="353.5" x2="602.5" y1="1767.7578" y2="1767.7578"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="450" y="1785.7529">波卡前端</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1152" x="0" y="97.8164"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1152" y1="97.8164" y2="97.8164"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1152" y1="100.8164" y2="100.8164"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="71" x="540.5" y="87.25"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="52" x="546.5" y="103.3169">本节背景</text><path d="M5,125.3828 L5,346.3828 L577,346.3828 L577,135.3828 L567,125.3828 L5,125.3828 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M567,125.3828 L567,135.3828 L577,135.3828 L567,125.3828 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="11" y="142.4497">本教程说明了如何使用</text><a href="https://github.com/paritytech/frontier" target="_top" title="https://github.com/paritytech/frontier" xlink:actuate="onRequest" xlink:href="https://github.com/paritytech/frontier" xlink:show="new" xlink:title="https://github.com/paritytech/frontier" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="49" x="145" y="142.4497">Frontier</text></a><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="275" x="198" y="142.4497">项目中的 crate 来构建与以太坊兼容的区块链，</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="405" x="11" y="157.5825">该区块链可以访问基于以太坊的账户并执行基于 Solidity 的智能合约。</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="11" y="172.7153"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="326" x="11" y="187.8481">Frontier 项目的两个主要目标是使您能够执行以下操作：</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="456" x="11" y="202.981">1. 使用本地 Substrate 节点运行未经修改的以太坊去中心化应用程序(Dapp)。</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172" x="11" y="218.1138">2. 从以太坊主网络导入状态。</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="11" y="233.2466"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="273" x="11" y="248.3794">本教程使用预定义的节点模板来提供工作环境。</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="11" y="263.5122">该模板是使用</text><a href="https://github.com/paritytech/frontier/blob/master/docs/node-template-release.md" target="_top" title="https://github.com/paritytech/frontier/blob/master/docs/node-template-release.md" xlink:actuate="onRequest" xlink:href="https://github.com/paritytech/frontier/blob/master/docs/node-template-release.md" xlink:show="new" xlink:title="https://github.com/paritytech/frontier/blob/master/docs/node-template-release.md" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="101" x="93" y="263.5122">Frontier发布指南</text></a><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="194" y="263.5122">中的说明生成的。</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="11" y="278.645"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="286" x="11" y="293.7778">如果你想为自己生成一个独立的模板，你可以使用</text><a href="https://github.com/paritytech/frontier/blob/master/.maintain/node-template-release.sh" target="_top" title="https://github.com/paritytech/frontier/blob/master/.maintain/node-template-release.sh" xlink:actuate="onRequest" xlink:href="https://github.com/paritytech/frontier/blob/master/.maintain/node-template-release.sh" xlink:show="new" xlink:title="https://github.com/paritytech/frontier/blob/master/.maintain/node-template-release.sh" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="196" x="301" y="293.7778">node-template-release.sh 模板</text></a><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="497" y="293.7778">生成脚本。</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="11" y="308.9106"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="11" y="324.0435">如果您使用</text><a href="https://github.com/paritytech/frontier" target="_top" title="https://github.com/paritytech/frontier" xlink:actuate="onRequest" xlink:href="https://github.com/paritytech/frontier" xlink:show="new" xlink:title="https://github.com/paritytech/frontier" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="76" x="76" y="324.0435">frontier 分支</text></a><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="369" x="152" y="324.0435">或模板生成脚本构建自己的节点，请注意 Frontier 使用其自己的</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="521" x="15" y="339.1763">Substrate crates 版本，您可能需要更新 Cargo 文件中的依赖项以匹配项目中的依赖项。</text><line style="stroke:#181818;stroke-width:1.0;" x1="291" x2="333" y1="460.6719" y2="460.6719"/><line style="stroke:#181818;stroke-width:1.0;" x1="333" x2="333" y1="460.6719" y2="473.6719"/><line style="stroke:#181818;stroke-width:1.0;" x1="292" x2="333" y1="473.6719" y2="473.6719"/><polygon fill="#181818" points="302,469.6719,292,473.6719,302,477.6719,298,473.6719" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="298" y="455.606">chain specification file</text><path d="M449,357.2422 L449,563.2422 L977,563.2422 L977,367.2422 L967,357.2422 L449,357.2422 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M967,357.2422 L967,367.2422 L977,367.2422 L967,357.2422 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="371" x="455" y="374.3091">frontier-node-template 中的开发链规范定义了一个创世区块，</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="294" x="455" y="389.4419">该创世区块已预先配置了 alice 账户的 EVM 账户。</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="455" y="404.5747"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="467" x="455" y="419.7075">当您在开发模式下启动此节点时，alice 的 EVM 帐户将默认分配一定数量的eth。</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="374" x="455" y="434.8403">您将使用此帐户查看 EVM 帐户详细信息并调用以太坊智能合约。</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="455" y="449.9731"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="504" x="455" y="465.106">启动节点后，您将能够使用 Polkadot-JS 应用程序查看 alice 的 EVM 帐户的详细信息。</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="300" x="455" y="480.2388">terminal -&gt; terminal: clone -&gt; compile -&gt; start</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="455" y="495.3716">note left</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="507" x="455" y="510.5044">git clone https://github.com/substrate-developer-hub/frontier-node-template.git</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="455" y="525.6372">cd frontier-node-template</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="455" y="540.77">cargo build --release</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="285" x="455" y="555.9028">./target/release/frontier-template-node --dev</text><line style="stroke:#181818;stroke-width:1.0;" x1="478" x2="520" y1="590.1016" y2="590.1016"/><line style="stroke:#181818;stroke-width:1.0;" x1="520" x2="520" y1="590.1016" y2="603.1016"/><line style="stroke:#181818;stroke-width:1.0;" x1="479" x2="520" y1="603.1016" y2="603.1016"/><polygon fill="#181818" points="489,599.1016,479,603.1016,489,607.1016,485,603.1016" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="485" y="585.0356">connect local node</text><line style="stroke:#181818;stroke-width:1.0;" x1="478" x2="520" y1="787.6289" y2="787.6289"/><line style="stroke:#181818;stroke-width:1.0;" x1="520" x2="520" y1="787.6289" y2="800.6289"/><line style="stroke:#181818;stroke-width:1.0;" x1="479" x2="520" y1="800.6289" y2="800.6289"/><polygon fill="#181818" points="489,796.6289,479,800.6289,489,804.6289,485,800.6289" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="389" x="485" y="782.563">Settings &gt;&gt; Developer &gt;&gt; Define to create an EVM Account</text><path d="M239,616.1016 L239,958.1016 L473,958.1016 L473,626.1016 L463,616.1016 L239,616.1016 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M463,616.1016 L463,626.1016 L473,626.1016 L463,616.1016 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="245" y="633.1685">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="253" y="648.3013">"Address": "MultiAddress",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="205" x="253" y="663.4341">"LookupSource": "MultiAddress",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="253" y="678.5669">"Account": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="265" y="693.6997">"nonce": "U256",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="265" y="708.8325">"balance": "U256"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="12" x="253" y="723.9653">},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="253" y="739.0981">"Transaction": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="265" y="754.231">"nonce": "U256",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="265" y="769.3638">"action": "String",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="265" y="784.4966">"gas_price": "u64",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="265" y="799.6294">"gas_limit": "u64",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="265" y="814.7622">"value": "U256",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="265" y="829.895">"input": "Vec&lt;u8&gt;",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150" x="265" y="845.0278">"signature": "Signature"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="12" x="253" y="860.1606">},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="253" y="875.2935">"Signature": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="63" x="265" y="890.4263">"v": "u64",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="265" y="905.5591">"r": "H256",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="265" y="920.6919">"s": "H256"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="253" y="935.8247">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="245" y="950.9575">}</text><line style="stroke:#181818;stroke-width:1.0;" x1="478" x2="520" y1="1080.0195" y2="1080.0195"/><line style="stroke:#181818;stroke-width:1.0;" x1="520" x2="520" y1="1080.0195" y2="1093.0195"/><line style="stroke:#181818;stroke-width:1.0;" x1="479" x2="520" y1="1093.0195" y2="1093.0195"/><polygon fill="#181818" points="489,1089.0195,479,1093.0195,489,1097.0195,485,1093.0195" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="485" y="1074.9536">Developer &gt;&gt; RPC calls</text><path d="M649,969.0234 L649,1190.0234 L1142,1190.0234 L1142,979.0234 L1132,969.0234 L649,969.0234 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1132,969.0234 L1132,979.0234 L1142,979.0234 L1132,969.0234 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="269" x="655" y="986.0903">1. Verify that your node is still running and</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="337" x="655" y="1001.2231">the Polkadot-JS application is connected to the node.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="258" x="655" y="1016.356">2. Click Developer, then select RPC calls.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="383" x="655" y="1031.4888">3. On the Submission tab, select eth as the endpoint to call.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="456" x="655" y="1046.6216">4. Select getBalance(address, number) from the list of functions to call.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="472" x="655" y="1061.7544">5. Specify the EVM account identifier for the alice account for the address.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="655" y="1076.8872"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="223" x="655" y="1092.02">The predefined account address is:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="337" x="655" y="1107.1528">- 0xd43593c715fdd31c61141abd04a99fd6822c8558.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="655" y="1122.2856"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="398" x="655" y="1137.4185">The address for the account was calculated fromthe public key</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="320" x="655" y="1152.5513">for the alice account using Substrate EVM utilities.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="655" y="1167.6841"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="655" y="1182.8169">6. Click Submit RPC call.</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1152" x="0" y="1216.4492"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1152" y1="1216.4492" y2="1216.4492"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1152" y1="1219.4492" y2="1219.4492"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="197" x="477.5" y="1205.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="178" x="483.5" y="1221.9497">deploy a smart contract</text><path d="M285,1244.0156 L285,1344.0156 L670,1344.0156 L670,1254.0156 L660,1244.0156 L285,1244.0156 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M660,1244.0156 L660,1254.0156 L670,1254.0156 L660,1244.0156 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="273" x="291" y="1261.0825">现在您已经了解了如何查询以太坊地址的余额，</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="364" x="291" y="1276.2153">您可能想探索如何部署和调用以太坊智能合约并测试相关功能。</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="291" y="1291.3481"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="296" x="291" y="1306.481">本教程使用定义 ERC-20 代币的 Truffle 示例合约。</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="270" x="291" y="1321.6138">您还可以使用 Polkadot JS SDK 和 Typescript</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="291" y="1336.7466">创建 ERC-20 代币合约。</text><line style="stroke:#181818;stroke-width:1.0;" x1="291" x2="333" y1="1370.9453" y2="1370.9453"/><line style="stroke:#181818;stroke-width:1.0;" x1="333" x2="333" y1="1370.9453" y2="1383.9453"/><line style="stroke:#181818;stroke-width:1.0;" x1="292" x2="333" y1="1383.9453" y2="1383.9453"/><polygon fill="#181818" points="302,1379.9453,292,1383.9453,302,1387.9453,298,1383.9453" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173" x="298" y="1365.8794">create the ERC-20 contract</text><line style="stroke:#181818;stroke-width:1.0;" x1="478" x2="520" y1="1454.9766" y2="1454.9766"/><line style="stroke:#181818;stroke-width:1.0;" x1="520" x2="520" y1="1454.9766" y2="1467.9766"/><line style="stroke:#181818;stroke-width:1.0;" x1="479" x2="520" y1="1467.9766" y2="1467.9766"/><polygon fill="#181818" points="489,1463.9766,479,1467.9766,489,1471.9766,485,1467.9766" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="247" x="485" y="1419.645">Developer &gt;&gt; Extrinsics &gt;&gt; ALICE &gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216" x="485" y="1434.7778">evm &gt;&gt; create &gt;&gt; Configure &gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="260" x="485" y="1449.9106">Submit Transaction &gt;&gt; Sign and Submit</text><path d="M64,1396.9453 L64,1481.9453 L473,1481.9453 L473,1406.9453 L463,1396.9453 L64,1396.9453 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M463,1396.9453 L463,1406.9453 L473,1406.9453 L463,1396.9453 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43" x="70" y="1414.0122">source</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="324" x="134" y="1414.0122">0xd43593c715fdd31c61141abd04a99fd6822c8558</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="19" x="70" y="1429.145">init</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="274" x="102" y="1429.145">raw bytecode hex value from MyToken.json</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="34" x="70" y="1444.2778">value</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="134" y="1444.2778">0</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="54" x="70" y="1459.4106">gasLimit</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80" x="134" y="1459.4106">4294967295</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="70" y="1474.5435">maxFeePerGas</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="198" y="1474.5435">100000000</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1152" x="0" y="1508.1758"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1152" y1="1508.1758" y2="1508.1758"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1152" y1="1511.1758" y2="1511.1758"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="393" x="379.5" y="1497.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="374" x="385.5" y="1513.6763">view the smart contract、view -&gt; transfer -&gt; verify</text><line style="stroke:#181818;stroke-width:1.0;" x1="478" x2="520" y1="1551.875" y2="1551.875"/><line style="stroke:#181818;stroke-width:1.0;" x1="520" x2="520" y1="1551.875" y2="1564.875"/><line style="stroke:#181818;stroke-width:1.0;" x1="479" x2="520" y1="1564.875" y2="1564.875"/><polygon fill="#181818" points="489,1560.875,479,1564.875,489,1568.875,485,1564.875" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="287" x="485" y="1546.8091">Network &gt;&gt; Explorer &gt;&gt; evm.Created event</text><line style="stroke:#181818;stroke-width:1.0;" x1="478" x2="520" y1="1635.9063" y2="1635.9063"/><line style="stroke:#181818;stroke-width:1.0;" x1="520" x2="520" y1="1635.9063" y2="1648.9063"/><line style="stroke:#181818;stroke-width:1.0;" x1="479" x2="520" y1="1648.9063" y2="1648.9063"/><polygon fill="#181818" points="489,1644.9063,479,1648.9063,489,1652.9063,485,1648.9063" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="221" x="485" y="1615.7075">Developer &gt;&gt; Extrinsics &gt;&gt; ALICE</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="276" x="485" y="1630.8403">&gt;&gt; evm &gt;&gt; call transfer(address, uint256)</text><path d="M355,1577.875 L355,1677.875 L473,1677.875 L473,1587.875 L463,1577.875 L355,1577.875 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M463,1577.875 L463,1587.875 L473,1587.875 L463,1577.875 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43" x="361" y="1594.9419">source</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="39" x="361" y="1610.0747">target</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="361" y="1625.2075">input</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="34" x="361" y="1640.3403">value</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="54" x="361" y="1655.4731">gasLimit</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="361" y="1670.606">maxFeePerGas</text><line style="stroke:#181818;stroke-width:1.0;" x1="478" x2="520" y1="1704.8047" y2="1704.8047"/><line style="stroke:#181818;stroke-width:1.0;" x1="520" x2="520" y1="1704.8047" y2="1717.8047"/><line style="stroke:#181818;stroke-width:1.0;" x1="479" x2="520" y1="1717.8047" y2="1717.8047"/><polygon fill="#181818" points="489,1713.8047,479,1717.8047,489,1721.8047,485,1717.8047" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="247" x="485" y="1699.7388">Network &gt;&gt; Explorer &gt;&gt; evm.Excuted</text></g></svg></figure>
<h1 id="参考资源-44"><a class="header" href="#参考资源-44">参考资源</a></h1>
<h2 id="substrate文档练习"><a class="header" href="#substrate文档练习">substrate文档练习</a></h2>
<ul>
<li>
<p><a href="https://web.archive.org/web/20220628074841/https://mp.weixin.qq.com/s/2DuNX0-a14yPKT1nJNjk7Q">构建一条链的体验</a></p>
<blockquote>
<p>substrate官方教程里面的<a href="https://docs.substrate.io/tutorials/v3/create-your-first-substrate-chain/">第一课</a>名称叫做创建我们的第一条链，
实际上我觉得应该叫做启动substrate默认模板链的节点更贴切，因为这个教程里面实际上就是把一个用substrate已经开发好的模板链的代码拉下来，然后编译一下，然后再启动起来。
这个过程实际上和我们拉一个比特币的代码，然后编译下然后再启动 ，并没有太大的不同。</p>
</blockquote>
<ul>
<li>
<p>substrate 开发环境</p>
<blockquote>
<ul>
<li>启动链的节点：
&gt; 这里要用到node-template的代码。node-template实际上是官方提供的使用substrate开发的模板链，
&gt; 可以理解为substrate官方提供的样例，后续任何人想使用substrate可以在这个样例的基础上进行修改，这样开发链就更方便。
&gt; 这就好比以前的好多山寨链，在btc的源码上改下创世区块的配置，就是一条新链。 那么substrate其实也一样，提供了node-template这样一个模板，后续根据需求在这个上面改吧改吧，就能产生一条新链。</li>
</ul>
</blockquote>
</li>
<li>
<p>使用polkadot-js访问节点:
在substrate官方的教程中，是使用了substrate的前端模板来访问刚才启动的节点。但是在实际的开发中，后端人员其实更多的使用polkadot-js-app来访问我们的节点，所以这里我们也使用它来访问我们的节点。</p>
</li>
<li>
<p><a href="https://docs.substrate.io/tutorials/v3/create-your-first-substrate-chain/">文档资料</a></p>
</li>
</ul>
</li>
<li>
<p><a href="https://web.archive.org/web/20220628084629/https://mp.weixin.qq.com/s/GSWxgEA-CtdB8pi-gHe1ig">Substrate快速入门</a></p>
<blockquote>
<p>substrate采用模块化的方法进行开发，它定义了一组丰富的原语，给开发人员提供了强大的、熟悉的编程方法。</p>
</blockquote>
<ul>
<li>
<p>使用方式介绍：</p>
<ol>
<li>
<p>使用substrate node: 使用json文件启动</p>
</li>
<li>
<p>使用substrate frame: 业务逻辑自由</p>
<blockquote>
<p>frame其实是一组模块（pallet）和支持库。使用substrate
frame可以轻松的创建自己的自定义运行时，因为frame是用来构建底层节点的。使用frame还可以配置数据类型，也可以从模块库中选择甚至是添加自己定义的模块。</p>
</blockquote>
</li>
<li>
<p>使用substrate core: runtime自由</p>
<blockquote>
<p>使用substrate code运行开发者完全从头开始设计运行时（runtime，问题：什么是runtime？），当然此种方式也是使用substrate自由度最大的方式。</p>
</blockquote>
</li>
</ol>
</li>
<li>
<p>Substrate Client:</p>
<blockquote>
<p>substrate客户端是基于substrate实现的区块链的节点客户端（可以理解为全节点），它主要由以下几个组件组成（以下也就是告诉我们实现一条链由哪几部分组成）：</p>
</blockquote>
<ol>
<li>存储: 用来维持区块链系统所呈现的状态演变。substrate提供了的存储方式是一种简单有效的key-value对存储机制的方式。</li>
<li>Runtime: 这里就可以回答上面的问题，什么是runtime？runtime定义了区块的处理方式，主要是状态转换的逻辑。在substrate中，runtime code被编译成wasm作为区块链存储状态的一部分。</li>
<li>p2p网络: 允许客户端和其它网络参与者进行通信。</li>
<li>共识: 提供了一种逻辑，能使网络参与者就区块链的状态达成一致。substrate支持提供自定义的共识引擎。</li>
<li>RPC: 远程过程调用。</li>
<li>telemetry: 通过嵌入式Prometheus服务器的方式对外展示（我理解应该是类似于区块链浏览器一样的东西，或者是提供信息给区块链浏览器展示）。</li>
</ol>
</li>
</ul>
</li>
<li>
<p><a href="https://web.archive.org/web/20220628065030/https://mp.weixin.qq.com/s/MrnenO7AWhrf_-3Qs-aRJg">构建一个PoE(Prove of Existence)去中心化的应用</a></p>
<blockquote>
<p>substrat官方手册的第三个例子，使用substrate来创建自定义的存在证明dapp。我们本节的主要内容分为以下三步：</p>
</blockquote>
<ol>
<li>基于node template启动一条substrate的链。</li>
<li>修改node template来添加我们自己定制的Poe pallet，并实现我们的PoE API。</li>
<li>修改前端模板以添加与PoE API交互的自定义用户界面。</li>
</ol>
<ul>
<li>接口设计</li>
<li><strong>创建自定义pallet</strong>
<blockquote>
<p>node
template的运行时是基于FRAME来实现的。FRAME是一个代码库，允许我们使用一系列pallet来构建底层的运行时。pallet可以看出是定义区块链功能的单个逻辑模块。subtrate为我们提供了一些已经构建好的pallet，我们在定义运行时时可以直接使用。</p>
</blockquote>
</li>
</ul>
</li>
<li>
<p><a href="https://web.archive.org/web/20220628065034/https://mp.weixin.qq.com/s/w9Cj7jWkTo-PIBxtIyV9xQ">使用substrate构建私有网络</a></p>
<blockquote>
<p>本节内容：</p>
</blockquote>
<ol>
<li>基于模板启动substrate区块链网络；</li>
<li>生成ed25519和sr25519 密钥对用于网络授权；</li>
<li>创建和编辑chainspec json文件。</li>
</ol>
<ul>
<li><a href="https://substrate.dev/docs/en/tutorials/start-a-private-network/">参考资料</a></li>
</ul>
</li>
<li>
<p><a href="https://web.archive.org/web/20220628070053/https://mp.weixin.qq.com/s/1Yf6H6NoEOlpYQlBtuhy7A">构建kitties链条</a></p>
<blockquote>
<p>分两部分，一是介绍如何构建kitties pallet，包括创建与kittes交互的功能；另一部分是介绍开发前端UI，与我们第一部分的链进行交互。
目标：</p>
</blockquote>
<ol>
<li>学习构建和运行substrate节点的基本模式。</li>
<li>编写自定义框架pallet并集成到运行时。</li>
<li>了解如何创建和更新存储项。</li>
<li>编写pellet相关辅助函数。</li>
<li>使用PolkadotJs API将substrate节点连接到自定义前端。</li>
</ol>
<ul>
<li>kitties功能：
<ol>
<li>可以通过一些原始来源或者通过使用现有小猫进行繁殖创造。</li>
<li>以其所有者设定的价格出售。</li>
<li>从一个所有者转移到另一个所有者。</li>
</ol>
</li>
<li><a href="https://docs.substrate.io/tutorials/v3/kitties/pt1/#tutorial-objectives">参考资料</a></li>
</ul>
</li>
<li>
<p><a href="https://web.archive.org/web/20220628070149/https://mp.weixin.qq.com/s/dOghynr1eVMdtXITwY5clQ">构建授权网络</a></p>
<blockquote>
<p>无许可准入区块链网络我们比较常见，例如比特币、以太坊都是无准入的。那么授权准入网络在哪些地方可能出现呢?</p>
</blockquote>
<ol>
<li>专用网络或者是联盟链网络；</li>
<li>高度管控的环境；</li>
<li>大规模测试预公开网络。</li>
</ol>
<blockquote>
<p>目标</p>
</blockquote>
<ol>
<li>修改node-template工程添加node-authorization pallet。</li>
<li>加载部分节点并授权新节点加入网络。</li>
</ol>
</li>
</ul>
<h2 id="pallet基础"><a class="header" href="#pallet基础">pallet基础</a></h2>
<h3 id="尝试添加pallet到runtime"><a class="header" href="#尝试添加pallet到runtime">尝试添加pallet到runtime</a></h3>
<ul>
<li>
<p><a href="https://web.archive.org/web/20220628065009/https://mp.weixin.qq.com/s/iQ6a-diWMfYDghuLVPJd9Q">添加一个pallet到runtime</a></p>
<blockquote>
<p>substrate node template提供了一个最小的可工作的运行时，但是为了保持精炼，它并不包括Frame中的大多数的Pallet。本节我们将学习如何将Pallet添加到runtime中。</p>
</blockquote>
<ol>
<li>安装Node Template</li>
<li>导入Pallet</li>
<li>配置Pallet</li>
<li>将Nicks添加到construct_runtime!中</li>
</ol>
<ul>
<li><a href="https://docs.substrate.io/tutorials/work-with-pallets/add-a-pallet/">Add a pallet to the runtime | Substrate_ Docs</a></li>
</ul>
</li>
</ul>
<h2 id="智能合约"><a class="header" href="#智能合约">智能合约</a></h2>
<h3 id="初探ink"><a class="header" href="#初探ink">初探ink!</a></h3>
<ul>
<li><a href="https://web.archive.org/web/20220628070102/https://mp.weixin.qq.com/s/tvva1vogIcyN60tWcBPqww">初探ink!智能合约开发</a>
<ul>
<li>
<p><a href="https://web.archive.org/web/20220628095113/https://zhuanlan.zhihu.com/p/468304741">发展两年的波卡智能合约语言ink!将会带来什么影响？ - 知乎</a></p>
<blockquote>
<p>ink!是由Parity在这里开发智能合约语言Rust编写智能合同并编译成Wasm代码。
智能合同是在分散区块链网络上运行的计算机协议，可视为可自动执行的应用程序。
ink!它不同于其他更成熟的智能合约语言Parity的烙印。ink!最初是通过使用Rust宏系统生成自定义语法和风格，开发智能合约。
但是这种方法偏离了Rust在不牺牲易用性或开发性的前提下，开发人员熟悉和喜欢的语言诞生了ink!2.0.为开发人员提供最大的灵活性。简单来说，整合后现在ink!所有的结构和语法都是纯的Rust</p>
</blockquote>
</li>
<li>
<p><a href="https://docs.substrate.io/tutorials/v3/ink-workshop/pt1/">参考</a></p>
</li>
</ul>
</li>
</ul>
<h3 id="深入ink"><a class="header" href="#深入ink">深入ink!</a></h3>
<ul>
<li>
<p><a href="https://web.archive.org/web/20220628070203/https://mp.weixin.qq.com/s/lPkXiu4hyYryHCqx-peRmQ">深入ink!智能合约</a></p>
<blockquote>
<p>学习智能合约的开发，主要包括：</p>
</blockquote>
<ul>
<li>ink!智能合约的结构；</li>
<li>存储单个的值和hash map；</li>
<li>安全的设置或获取这些值；</li>
<li>编写public和private函数；</li>
<li>配置Rust使用安全的数学库。</li>
</ul>
<blockquote>
<p>总的来说，写ink！合约和直接用Rust编码没有太大的区别，只要能使用Rust都能很快的编写合约。</p>
</blockquote>
</li>
</ul>
<h3 id="erc20"><a class="header" href="#erc20">ERC20</a></h3>
<ul>
<li>
<p><a href="https://web.archive.org/web/20220628065106/https://mp.weixin.qq.com/s/fLZc_lQxe1jpgfHmmZ65Lg">ERC20合约开发</a></p>
<ul>
<li><a href="https://web.archive.org/web/20220628095517/https://www.jb51.net/blockchain/797814.html">ERC20协议是什么意思?一文读懂ERC20协议_区块链技术_区块链_脚本之家</a></li>
</ul>
<blockquote>
<p>学习写一个ERC20合约，主要包括：</p>
</blockquote>
<ul>
<li>初始token设置；</li>
<li>支持transfer；</li>
<li>通过substrate触发事件。</li>
</ul>
</li>
</ul>
<h2 id="连接其他链"><a class="header" href="#连接其他链">连接其他链</a></h2>
<h3 id="中继链连接"><a class="header" href="#中继链连接">中继链连接</a></h3>
<ul>
<li><a href="https://web.archive.org/web/20220628065121/https://mp.weixin.qq.com/s/QSJRjdvqKgbY9eMbdhpVOA">Relay Chain</a></li>
</ul>
<blockquote>
<p>学习启动一个relay chain， 通过cumus来创建自己的parachain，并且在在本地测试网络中将parachain连接到relaychain。</p>
</blockquote>
<h3 id="平行链连接"><a class="header" href="#平行链连接">平行链连接</a></h3>
<ul>
<li>
<p><a href="https://web.archive.org/web/20220628074818/https://mp.weixin.qq.com/s/hF3vevPi4ZLuXwR2Ehhp_A">连接parachain</a></p>
<blockquote>
<p>上一节，我们启动了relaychain的节点，本节将连接parachain到relaychain节点。 主要包括以下内容：</p>
</blockquote>
<ul>
<li>启动parachain；</li>
<li>parachain注册；</li>
<li>和parachain交互；</li>
<li>连接到添加的parachain节点。</li>
</ul>
</li>
</ul>
<h2 id="测试-1"><a class="header" href="#测试-1">测试</a></h2>
<h3 id="编写测试"><a class="header" href="#编写测试">编写测试</a></h3>
<ul>
<li>
<p><a href="https://github.com/KuanHsiaoKuo/learn-substrate-easy/blob/main/9%E7%BC%96%E5%86%99tests.md">learn-substrate-easy/9编写tests.md at main · KuanHsiaoKuo/learn-substrate-easy</a></p>
</li>
<li>
<p><a href="https://web.archive.org/web/20220701080314/https://mp.weixin.qq.com/s/8DsbCwL8XkiIEbTlHx4oAg">为pallet编写benchmarking</a></p>
<blockquote>
<p>为pallet编写benchmarking分两种情况，如下：</p>
</blockquote>
<ol>
<li>对函数进行性能测试时需要的构造条件不会涉及到本pallet以外的其它pallet；</li>
<li>在对函数进行性能测试时需要先使用其它的 pallet 构造测试的先决条件。</li>
</ol>
</li>
</ul>
<div id="admonition-大部分用第一种" class="admonition info">
<div class="admonition-title">
<p>大部分用第一种</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#admonition-大部分用第一种"></a></p>
</div>
<div>
<ul>
<li>第一种情况相对来说比较简单，这个也比较好找到例子。
<ul>
<li>第二种情况则比较复杂，写起来也比较麻烦。</li>
<li>不过在我们的开发中，大部分都是第一种情况。</li>
</ul>
</li>
</ul>
</div>
</div>
<h3 id="benchmarking"><a class="header" href="#benchmarking">benchmarking</a></h3>
<ul>
<li><a href="https://github.com/KuanHsiaoKuo/learn-substrate-easy/blob/main/10%E7%BC%96%E5%86%99benchmarking.md">learn-substrate-easy/10编写benchmarking.md at main · KuanHsiaoKuo/learn-substrate-easy</a></li>
<li><a href="https://github.com/KuanHsiaoKuo/learn-substrate-easy/blob/main/12%E7%BC%96%E5%86%99%E5%A4%8D%E6%9D%82%E7%9A%84benchmarking.md">learn-substrate-easy/12编写复杂的benchmarking.md at main · KuanHsiaoKuo/learn-substrate-easy</a></li>
</ul>
<h2 id="升级"><a class="header" href="#升级">升级</a></h2>
<ul>
<li>
<p><a href="https://github.com/KuanHsiaoKuo/learn-substrate-easy/blob/main/11%E5%8D%87%E7%BA%A7runtime.md">learn-substrate-easy/11升级runtime.md at main · KuanHsiaoKuo/learn-substrate-easy</a></p>
</li>
<li>
<p><a href="https://github.com/KuanHsiaoKuo/learn-substrate-easy/blob/main/12%E5%8D%87%E7%BA%A7substrate%E7%89%88%E6%9C%AC.md">learn-substrate-easy/12升级substrate版本.md at main · KuanHsiaoKuo/learn-substrate-easy</a></p>
</li>
<li>
<p><a href="https://web.archive.org/web/20220628065113/https://mp.weixin.qq.com/s/qvqsKqn_h79Uig30jgQk7A">无分叉runtime升级</a></p>
<blockquote>
<p>substrate框架的特性之一就是支持无分叉运行时升级。无分叉升级时以区块链自身能力支持和保护的方式增强区块链运行时的一种手段，区块链的运行时定义了区块链可以保持的状态，还定义了改变该装填的逻辑。
substrate可以在不分叉的情况下更新runtime，因为运行时的定义本身就是substrate链中的一个元素，网络参与者可以通过交易函数，特别是set_code函数来更新该值。
由于运行时状态的更新受到区块链共识机制和加密安全的约束，网络参与者可以在不分叉的情况下使用不受信任分发的更新或者扩展的运行时逻辑，甚至不需要发布新的区块链客户端。</p>
</blockquote>
<ul>
<li>本节内容：
<ol>
<li>使用sudo调用将schelduler</li>
<li>pallet包含到runtime中；</li>
<li>调用runtime升级。</li>
</ol>
</li>
</ul>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="深入substrate-pallet"><a class="header" href="#深入substrate-pallet">深入substrate pallet</a></h1>
<!--ts-->
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html#%E6%B7%B1%E5%85%A5substrate-pallet">深入substrate pallet</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html#pallet">Pallet</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html#pallet%E7%BB%84%E4%BB%B6%E6%B7%B1%E5%85%A5">Pallet组件深入</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html#1-pallet-hooks">1. Pallet Hooks</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html#2-pallet-extrinsics">2. Pallet Extrinsics</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html#3-pallet-errors">3. Pallet Errors</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html#4-pallet-config">4. Pallet Config</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html#5-pallet-use-other-pallet">5. Pallet Use Other Pallet</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html#6-pallet-extension">6. Pallet Extension</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html#7-pallet-debug">7. Pallet Debug</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html#8-pallet-rpc">8. Pallet RPC</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html#9-pallet-benchmarking">9. Pallet Benchmarking</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html#pallet-1">pallet</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html#%E7%BC%96%E5%86%99pallet%E5%88%B0rust%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86">编写pallet到rust前置知识</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html#%E7%BC%96%E5%86%99%E7%AE%80%E5%8D%95%E5%88%B0pallet">编写简单到pallet</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html#pallet%E7%9A%84%E7%BB%84%E6%88%90">pallet的组成</a></li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html#pallet%E6%8A%80%E5%B7%A7%E7%BB%86%E8%8A%82">Pallet技巧细节</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html#storage%E9%93%BE%E4%B8%8A%E5%90%84%E4%B8%AA%E7%B1%BB%E5%9E%8B%E4%BD%BF%E7%94%A8">storage（链上）各个类型使用</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html#error%E7%B1%BB%E5%9E%8B%E7%9A%84%E4%BD%BF%E7%94%A8">Error类型的使用</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html#%E5%86%99%E8%B0%83%E5%BA%A6%E5%87%BD%E6%95%B0%E7%9A%84%E5%A5%97%E8%B7%AF">写调度函数的套路</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html#hooks%E7%9A%84%E4%BD%BF%E7%94%A8">hooks的使用</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html#pallet%E4%B8%AD%E7%9A%84config">pallet中的Config</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html#%E5%9C%A8pallet%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%85%B6%E5%AE%83pallet">在pallet中使用其它pallet</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html#%E5%B0%81%E8%A3%85%E5%92%8C%E6%89%A9%E5%B1%95%E7%8E%B0%E6%9C%89pallet">封装和扩展现有pallet</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html#%E8%B0%83%E8%AF%95">调试</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html#pallet%E4%B8%AD%E7%9A%84%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2">pallet中的类型转换；</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html#%E5%9C%A8pallet%E4%B8%AD%E4%BD%BF%E7%94%A8%E9%93%BE%E4%B8%8B%E5%B7%A5%E4%BD%9C%E8%80%85offchain-worker">在pallet中使用链下工作者（Offchain worker）</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html#%E5%9C%A8pallet%E4%B8%AD%E9%93%BE%E4%B8%8A%E5%86%99%E6%9C%AC%E5%9C%B0%E5%AD%98%E5%82%A8offchain-index">在pallet中链上写本地存储（offchain index）；</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html#%E5%9C%A8pallet%E7%9A%84ocw%E4%B8%AD%E4%BD%BF%E7%94%A8%E9%93%BE%E4%B8%8B%E5%AD%98%E5%82%A8offchain-storage">在pallet的ocw中使用链下存储（offchain storage）；</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html#%E5%9C%A8pallet%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%85%B6%E5%AE%83pallet%E4%BD%BF%E7%94%A8%E5%85%B6%E5%AE%83pallet%E7%9A%84%E5%AD%98%E5%82%A8">在pallet中使用其它pallet（使用其它pallet的存储）；</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html#%E5%9C%A8pallet%E4%B8%AD%E6%B7%BB%E5%8A%A0rpc%E6%8E%A5%E5%8F%A3">在pallet中添加rpc接口</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html#%E4%B8%BA%E6%9F%90%E4%BA%9Btrait%E6%8F%90%E4%BE%9B%E9%BB%98%E8%AE%A4%E5%AE%9E%E7%8E%B0">为某些trait提供默认实现。</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:57 UTC 2022 -->
<!--te-->
<h1 id="pallet"><a class="header" href="#pallet">Pallet</a></h1>
<h2 id="pallet组件深入"><a class="header" href="#pallet组件深入">Pallet组件深入</a></h2>
<blockquote>
<p><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html#substrate%E5%AE%98%E6%96%B9%E6%95%99%E7%A8%8B%E6%A2%B3%E7%90%86%E4%B8%8E%E7%BB%83%E4%B9%A0">返回顶部</a></p>
</blockquote>
<h3 id="1-pallet-hooks"><a class="header" href="#1-pallet-hooks">1. Pallet Hooks</a></h3>
<div id="admonition-基于执行过程看hooks" class="admonition info">
<div class="admonition-title">
<p>基于执行过程看hooks</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html#admonition-基于执行过程看hooks"></a></p>
</div>
<div>
<figure><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="910px" preserveAspectRatio="none" style="width:765px;height:910px;background:#FFFFFF;" version="1.1" viewBox="0 0 765 910" width="765px" zoomAndPan="magnify"><defs/><g><ellipse cx="196" cy="20" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"/><rect fill="#90EE90" height="121.8281" style="stroke:#000000;stroke-width:1.5;" width="605" x="116" y="40"/><path d="M256,40 L256,49.2969 L246,59.2969 L116,59.2969 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="119" y="53.9951">Initializes the block</text><path d="M286,69.2969 L286,105.5625 L266,109.5625 L286,113.5625 L286,149.8281 A0,0 0 0 0 286,149.8281 L711,149.8281 A0,0 0 0 0 711,149.8281 L711,79.2969 L701,69.2969 L286,69.2969 A0,0 0 0 0 286,69.2969 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M701,69.2969 L701,79.2969 L711,79.2969 L701,69.2969 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="292" y="86.3638">会执行所有pallet</text><line style="stroke:#181818;stroke-width:1.0;" x1="286" x2="711" y1="94.4297" y2="94.4297"/><line style="stroke:#181818;stroke-width:1.0;" x1="286" x2="711" y1="96.4297" y2="96.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="248" x="292" y="111.4966">就是construct_runtime!中包含的pallet，</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="404" x="292" y="126.6294">并且也是按照construct_runtime!中定义的顺序的on_initialize函数，</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="299" x="292" y="141.7622">不过会最先执行System模块的（frame-system）.</text><rect fill="#F1F1F1" height="47.9375" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="140" x="126" y="85.5938"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="71" x="136" y="106.7324">on_initialize</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="120" x="136" y="120.7012">区块初始化的时候调用</text><rect fill="none" height="232.1094" style="stroke:#000000;stroke-width:1.5;" width="172" x="110" y="171.8281"/><path d="M247,171.8281 L247,181.125 L237,191.125 L110,191.125 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="113" y="185.8232">Upgrade the block</text><rect fill="#F1F1F1" height="47.9375" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="104" x="144" y="208.125"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="80" x="154" y="229.2637">pre_upgrade</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="84" x="154" y="243.2324">升级之前的检查</text><rect fill="#F1F1F1" height="47.9375" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="152" x="120" y="276.0625"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="129" x="130" y="297.2012">on_runtime_upgrade</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="132" x="130" y="311.1699">执行模块升级的时候调用</text><rect fill="#F1F1F1" height="47.9375" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="107" x="142.5" y="344"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="87" x="152.5" y="365.1387">post_upgrade</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="84" x="152.5" y="379.1074">升级之后的处理</text><rect fill="none" height="96.2344" style="stroke:#000000;stroke-width:1.5;" width="122" x="135" y="413.9375"/><path d="M176,413.9375 L176,423.2344 L166,433.2344 L135,433.2344 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="138" y="427.9326">Test</text><rect fill="#F1F1F1" height="47.9375" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="102" x="145" y="450.2344"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="82" x="155" y="471.373">integrity_test</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="72" x="155" y="485.3418">运行集成测试</text><rect fill="none" height="124.1719" style="stroke:#000000;stroke-width:1.5;" width="716" x="38" y="520.1719"/><path d="M181,520.1719 L181,529.4688 L171,539.4688 L38,539.4688 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133" x="41" y="534.167">Executes extrinsics</text><path d="M364,581.8398 L364,590.4063 L344,594.4063 L364,598.4063 L364,606.9727 A0,0 0 0 0 364,606.9727 L744,606.9727 A0,0 0 0 0 744,606.9727 L744,591.8398 L734,581.8398 L364,581.8398 A0,0 0 0 0 364,581.8398 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M734,581.8398 L734,591.8398 L744,591.8398 L734,581.8398 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="359" x="370" y="598.9067">区块初始化后，就会根据交易（extrinsics）列表的顺序执行。</text><rect fill="#F1F1F1" height="75.875" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="296" x="48" y="556.4688"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="110" x="58" y="577.6074">offchain_worker：</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="163" x="58" y="591.5762">在一个 pallet 上实现此函数后</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="276" x="58" y="605.5449">可以在此函数中长时间的执行需要链下执行的功能。</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="192" x="58" y="619.5137">该函数会在每次区块导入的时候调用</text><rect fill="none" height="203.0625" style="stroke:#000000;stroke-width:1.5;" width="723.5" x="11" y="654.3438"/><path d="M148,654.3438 L148,663.6406 L138,673.6406 L11,673.6406 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="14" y="668.3389">Finalizes the block</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="350" x="21" y="690.6406"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="330" x="31" y="711.7793">on_idle：区块finalize的时候调用，不过比on_finalize先调用</text><path d="M327.5,734.6094 L327.5,786.0078 L307.5,790.0078 L327.5,794.0078 L327.5,845.4063 A0,0 0 0 0 327.5,845.4063 L724.5,845.4063 A0,0 0 0 0 724.5,845.4063 L724.5,744.6094 L714.5,734.6094 L327.5,734.6094 A0,0 0 0 0 327.5,734.6094 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M714.5,734.6094 L714.5,744.6094 L724.5,744.6094 L714.5,734.6094 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="195" x="333.5" y="751.6763">区块中的交易执行完后，确认区块</text><line style="stroke:#181818;stroke-width:1.0;" x1="327.5" x2="724.5" y1="759.7422" y2="759.7422"/><line style="stroke:#181818;stroke-width:1.0;" x1="327.5" x2="724.5" y1="761.7422" y2="761.7422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="333.5" y="776.8091">确认区块时会调用所有pallet</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="261" x="333.5" y="791.9419">（就是construct_runtime!中包含的pallet，</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="291" x="333.5" y="807.0747">并且也是按照construct_runtime!中定义的顺序）</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="177" x="333.5" y="822.2075">的on_idle和on_finalize函数，</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="376" x="333.5" y="837.3403">不过这次最后执行System模块（frame-system）的hooks函数.</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="223" x="84.5" y="773.0234"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="203" x="94.5" y="794.1621">on_initialize：区块初始化的时候调用</text><ellipse cx="196" cy="888.4063" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;fill:none;"/><ellipse cx="196" cy="888.4063" fill="#222222" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="196" x2="196" y1="30" y2="85.5938"/><polygon fill="#181818" points="192,75.5938,196,85.5938,200,75.5938,196,79.5938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="196" x2="196" y1="256.0625" y2="276.0625"/><polygon fill="#181818" points="192,266.0625,196,276.0625,200,266.0625,196,270.0625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="196" x2="196" y1="324" y2="344"/><polygon fill="#181818" points="192,334,196,344,200,334,196,338" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="196" x2="196" y1="133.5313" y2="208.125"/><polygon fill="#181818" points="192,198.125,196,208.125,200,198.125,196,202.125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="196" x2="196" y1="391.9375" y2="450.2344"/><polygon fill="#181818" points="192,440.2344,196,450.2344,200,440.2344,196,444.2344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="196" x2="196" y1="498.1719" y2="556.4688"/><polygon fill="#181818" points="192,546.4688,196,556.4688,200,546.4688,196,550.4688" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="196" x2="196" y1="724.6094" y2="773.0234"/><polygon fill="#181818" points="192,763.0234,196,773.0234,200,763.0234,196,767.0234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="196" x2="196" y1="632.3438" y2="690.6406"/><polygon fill="#181818" points="192,680.6406,196,690.6406,200,680.6406,196,684.6406" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="196" x2="196" y1="806.9922" y2="877.4063"/><polygon fill="#181818" points="192,867.4063,196,877.4063,200,867.4063,196,871.4063" style="stroke:#181818;stroke-width:1.0;"/></g></svg></figure>
</div>
</div>
<h3 id="2-pallet-extrinsics"><a class="header" href="#2-pallet-extrinsics">2. Pallet Extrinsics</a></h3>
<p><a id="Pallet-Extrinsics"></a>Pallet-Extrinsics</p>
<h3 id="3-pallet-errors"><a class="header" href="#3-pallet-errors">3. Pallet Errors</a></h3>
<p><a id="Pallet-Errors"></a>Pallet-Errors</p>
<h3 id="4-pallet-config"><a class="header" href="#4-pallet-config">4. Pallet Config</a></h3>
<p><a id="Pallet-Config"></a>Pallet-Config</p>
<h3 id="5-pallet-use-other-pallet"><a class="header" href="#5-pallet-use-other-pallet">5. Pallet Use Other Pallet</a></h3>
<p><a id="Pallet-Use-Other-Pallet"></a>Pallet-Use-Other-Pallet</p>
<h3 id="6-pallet-extension"><a class="header" href="#6-pallet-extension">6. Pallet Extension</a></h3>
<p><a id="Pallet-Extension"></a>Pallet-Extension</p>
<h3 id="7-pallet-debug"><a class="header" href="#7-pallet-debug">7. Pallet Debug</a></h3>
<p><a id="Pallet-Debug"></a>Pallet-Debug</p>
<h3 id="8-pallet-rpc"><a class="header" href="#8-pallet-rpc">8. Pallet RPC</a></h3>
<p><a id="Pallet-RPC"></a>Pallet-RPC</p>
<h3 id="9-pallet-benchmarking"><a class="header" href="#9-pallet-benchmarking">9. Pallet Benchmarking</a></h3>
<p><a id="Pallet-Benchmarking"></a>Pallet-Benchmarking</p>
<h1 id="参考资源-45"><a class="header" href="#参考资源-45">参考资源</a></h1>
<h2 id="pallet-1"><a class="header" href="#pallet-1">pallet</a></h2>
<h3 id="编写pallet到rust前置知识"><a class="header" href="#编写pallet到rust前置知识">编写pallet到rust前置知识</a></h3>
<ul>
<li>
<p><a href="https://github.com/KuanHsiaoKuo/learn-substrate-easy/blob/main/5%E7%BC%96%E5%86%99pallet%E7%9A%84Rust%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86.md">learn-substrate-easy/5编写pallet的Rust前置知识.md at main · KuanHsiaoKuo/learn-substrate-easy</a></p>
<blockquote>
<p><a href="https://web.archive.org/web/20220627101518/https://mp.weixin.qq.com/s/wPVbEeIVKdXGro0QYsmJBg">Pallet前置知识</a></p>
</blockquote>
<ul>
<li>trait的孤儿规则</li>
<li>trait对象</li>
<li>trait的继承</li>
<li>关联类型</li>
<li>定义Config trait，然后为Pallet实现相应的trait，最后在main函数中使用它</li>
</ul>
</li>
</ul>
<h3 id="编写简单到pallet"><a class="header" href="#编写简单到pallet">编写简单到pallet</a></h3>
<ul>
<li><a href="https://github.com/KuanHsiaoKuo/learn-substrate-easy/blob/main/6%E7%BC%96%E5%86%99%E7%AE%80%E5%8D%95%E7%9A%84pallet.md">learn-substrate-easy/6编写简单的pallet.md at main · KuanHsiaoKuo/learn-substrate-easy</a>
<ul>
<li>
<p>node-template的结构</p>
</li>
<li>
<p>编写pallet的一般格式, 整理出7个部分, 1和2基本上是固定的写法，而对于后面的3-7部分，则是根据实际需要写或者不写。关于模板中每部分的解释，可以参考文档.</p>
<ol>
<li>依赖;</li>
<li>pallet类型声明;</li>
<li>config trait;</li>
<li>定义要使用的链上存储;</li>
<li>事件;</li>
<li>钩子函数;</li>
<li>交易调用函数;</li>
</ol>
</li>
<li>
<p>举例编写simple-pallet</p>
<blockquote>
<p>功能介绍: simple-pallet是一个存证的pallet，简单说就是提供一个存取一段hash到链上的功能，和从链上读取的功能。</p>
</blockquote>
</li>
<li>
<p>将pallet添加到runtime中</p>
</li>
<li>
<p>编译运行</p>
</li>
<li>
<p>调试使用pallet中的功能</p>
</li>
</ul>
</li>
</ul>
<div id="admonition-相关资料" class="admonition info">
<div class="admonition-title">
<p>相关资料</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html#admonition-相关资料"></a></p>
</div>
<div>
<ul>
<li><a href="https://docs.substrate.io/reference/frame-pallets/#pallets">FRAME pallets | Substrate_ Docs</a> </li>
<li><a href="https://github.com/KuanHsiaoKuo/learn-substrate-easy-source/tree/main/substrate-node-template/pallets/simple-pallet">learn-substrate-easy-source/substrate-node-template/pallets/simple-pallet at main · KuanHsiaoKuo/learn-substrate-easy-source</a></li>
</ul>
</div>
</div>
<h3 id="pallet的组成"><a class="header" href="#pallet的组成">pallet的组成</a></h3>
<ul>
<li>
<p><a href="https://github.com/KuanHsiaoKuo/learn-substrate-easy/blob/main/7Pallet%E7%9A%84%E7%BB%84%E6%88%90.md">learn-substrate-easy/7Pallet的组成.md at main · KuanHsiaoKuo/learn-substrate-easy</a></p>
<blockquote>
<p>要想熟练的开发pallet，我们必须得把pallet中的各个组成部分弄清楚。本节，我们就按照模板中的各个部分的顺序来讲解pallet的组成</p>
</blockquote>
<ol>
<li>导出和依赖：Pub mod pallet{}就是将我们的pallet暴露出来， pub use pallet::*;是可以使用pallet中的所有类型，函数，数据等</li>
<li>pallet类型声明：它是一系列trait和方法的拥有者，实际的作用类似于占位符，这里举例rust程序</li>
<li>config trait： 这部分是指定Runtime的配置trait，Pallet中使用的一些类型和常量在此trait中进行配置。</li>
<li>Storage-定义要使用的链上存储： 存储（Storage）允许我们在链上存储数据，使用它存储的数据可以通过Runtime进行访问。substrate提供了四种存储方式，分别是：
<ul>
<li>Storage Value: 存储单个的值, 无键</li>
<li>Storage Map: 以map方式存储，单键，key-value</li>
<li>Storage Double Map: 以双键方式存储，(key1, key2)-value</li>
<li>Storage N Map: 以多键方式存储，(key1, key2, …, keyn)-value</li>
</ul>
</li>
<li>Event-事件：当pallet需要把运行时上的更改或变化通知给外部主体时，就需要用到事件。事件是一个枚举类型</li>
<li>hooks-钩子函数：钩子函数，是在区块链运行过程中希望固定执行的函数，例如我们希望在每个区块构建之前、之后的时候执行某些逻辑等，就可以把这些逻辑放在钩子函数中</li>
<li>Extrinsic-调度函数，交易调用函数: Extrinsic则是<strong>可以从runtime外部可以调用的函数，也是pallet对外提供的逻辑功能</strong>。比如交易</li>
</ol>
<blockquote>
<p><a href="https://kaisery.github.io/trpl-zh-cn/ch07-03-paths-for-referring-to-an-item-in-the-module-tree.html#%E4%BD%BF%E7%94%A8-pub-%E5%85%B3%E9%94%AE%E5%AD%97%E6%9A%B4%E9%9C%B2%E8%B7%AF%E5%BE%84">路径用于引用模块树中的项 - Rust 程序设计语言 简体中文版</a></p>
</blockquote>
</li>
</ul>
<h2 id="pallet技巧细节"><a class="header" href="#pallet技巧细节">Pallet技巧细节</a></h2>
<h3 id="storage链上各个类型使用"><a class="header" href="#storage链上各个类型使用">storage（链上）各个类型使用</a></h3>
<ul>
<li><a href="https://github.com/KuanHsiaoKuo/learn-substrate-easy/blob/main/8.1storage%E4%BD%BF%E7%94%A8%E4%BB%8B%E7%BB%8D.md">learn-substrate-easy/8.1storage使用介绍.md at main · KuanHsiaoKuo/learn-substrate-easy</a></li>
<li><a href="https://docs.substrate.io/main-docs/build/runtime-storage/#best-practices">Runtime storage | Substrate_ Docs</a></li>
</ul>
<div id="admonition-区别pallet用到的storage和平时开发谈到的持久化storage" class="admonition tip">
<div class="admonition-title">
<p>区别pallet用到的storage和平时开发谈到的持久化storage</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html#admonition-区别pallet用到的storage和平时开发谈到的持久化storage"></a></p>
</div>
<div>
<p>在pallet中要使用的storage更多的其实是一个应用层的概念，如果用城市建造来类比，持久化存储就像是整个城市的马路或者是管道，而我们谈论的storage则是某个具体建筑或者房屋里面的水管会小路，至于这些小水管（或小路）是怎么和整个城市的大路联系起来的，不是我们讨论的范围。</p>
</div>
</div>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// 表示下面定义一个pallet storage
#[pallet::storage]
// 自动为storage生成一个getter函数，名字叫some_value
// 后续可以在pallet使用some_value()函数来获取该Storage中存储的值
#[pallet::getter(fn some_value)]
pub(super) type SomeValue = StorageValue&lt;_, u64, ValueQuery&gt;;
<span class="boring">}
</span></code></pre></pre>
<h3 id="error类型的使用"><a class="header" href="#error类型的使用">Error类型的使用</a></h3>
<ul>
<li><a href="https://web.archive.org/web/20220627112629/https://mp.weixin.qq.com/s/cNijF5h2Yn7R-K0ryoOJrA">pallet中Error类型的使用</a>
&gt;
在runtime代码执行时，代码必须是“非抛出的”，或者说不应该panic，应该是优雅的处理错误，所以在写pallet代码时，允许我们自定义错误类型，当错误发生时，可以返回我们定义的错误类型。这里的Error类型是指运行时在执行调度函数（也就是交易函数）时返回的错误。因为在调度函数执行时，返回的结果为DispatchResult类型，当执行结果错误时，返回DispatchError。
<ul>
<li>错误类型的定义</li>
<li>在函数中返回错误</li>
<li>简单示例</li>
</ul>
</li>
</ul>
<h3 id="写调度函数的套路"><a class="header" href="#写调度函数的套路">写调度函数的套路</a></h3>
<ul>
<li>
<p><a href="https://mp.weixin.qq.com/s/Xnv5aNiLn-NoH6obouaONg">substrate轻松学：写调度函数</a></p>
<blockquote>
<p>调度函数在substrate官方文档里面叫做Extrinsics（外部调用），详细的Extrinsics介绍可以参考这里.
在substrate中共有三种Extrinsics，分别是Inherents、Signed transactions和Unsigned transactions。
而在我们开发pallet的过程中，比较常用到的是后两种，所以我们这里也主要介绍后两种，对于Inherents有兴趣的小伙伴可以自己看官方文档研究下。</p>
</blockquote>
<ul>
<li>Signed transactions</li>
<li>Unsigned transactions</li>
<li>通常写法：调度函数的位置-&gt;函数体的写法-&gt;权重-&gt;transactional</li>
<li>示例</li>
<li></li>
</ul>
<p>参考：<a href="https://docs.substrate.io/v3/concepts/extrinsics/">extrinsics</a>
&amp;<a href="https://docs.substrate.io/v3/runtime/weights-and-fees/">weights-and-fees</a></p>
</li>
</ul>
<h3 id="hooks的使用"><a class="header" href="#hooks的使用">hooks的使用</a></h3>
<ul>
<li>
<p><a href="https://github.com/KuanHsiaoKuo/learn-substrate-easy/blob/main/8.4Hooks%E5%87%BD%E6%95%B0%E4%BD%BF%E7%94%A8.md">learn-substrate-easy/8.4Hooks函数使用.md at main · KuanHsiaoKuo/learn-substrate-easy</a></p>
</li>
<li>
<p><a href="https://web.archive.org/web/20220628021501/https://mp.weixin.qq.com/s/tPyB9CuTVP2Y1DGgl_VPyQ">hooks: pallet的🪝钩子函数使用</a></p>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/%E8%BF%90%E8%A1%8C%E5%9B%BE.png" alt="运行图" /></p>
</li>
</ul>
<div id="admonition-交易到打包的过程" class="admonition tip">
<div class="admonition-title">
<p>交易到打包的过程</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html#admonition-交易到打包的过程"></a></p>
</div>
<div>
<ol>
<li>用户通过钱包发起交易;</li>
<li>和钱包相连的全节点收到交易后会把交易广播到网络中;</li>
<li>然后根据共识算法打包区块，某个全节点获得了打包权（图中画的是节点4），
然后将交易打包到区块中;</li>
<li>打包好区块后，将区块广播到网络中;</li>
<li>其它每个节点收到区块后验证，然后执行区块里面的交易，更新自己本地的账本。</li>
</ol>
</div>
</div>
<pre><code>- substrate中的执行过程
    1. 初始化区块（Initializes the block）
    2. 执行区块（Executes extrinsics）
    3. 确认区块（ Finalizes the block）.
- hooks介绍:
    1. on_finalize: 在区块 finalize 的时候调用。
    2. on_idle：区块finalize的时候调用，不过比on_finalize先调用。
    3. on_initialize：区块初始化的时候调用。
    4. on_runtime_upgrade：执行模块升级的时候调用。
    5. pre_upgrade：升级之前的检查。
    6. post_upgrade：升级之后的处理。
    7. offchain_worker：在一个 pallet 上实现此函数后可以在此函数中长时间的执行需要链下执行的功能。该函数会在每次区块导入的时候调用。后续我们讲ocw使用的时候就需要和这个函数打交道。
    8. integrity_test：运行集成测试。
- 示例
- [资料](https://docs.substrate.io/v3/concepts/execution/)
- [substrate源码](https://paritytech.github.io/substrate/master/frame_support/traits/trait.Hooks.html)
</code></pre>
<h3 id="pallet中的config"><a class="header" href="#pallet中的config">pallet中的Config</a></h3>
<ul>
<li><a href="https://github.com/KuanHsiaoKuo/learn-substrate-easy/blob/main/8.5pallet%E4%B8%AD%E7%9A%84Config.md">learn-substrate-easy/8.5pallet中的Config.md at main · KuanHsiaoKuo/learn-substrate-easy</a></li>
<li><a href="https://web.archive.org/web/20220627112755/https://mp.weixin.qq.com/s/JOaBn4bkda2LicV3Lyb4tw">pallet中的config</a>
<ul>
<li>好好理解rust中关于trait和关联类型相关的知识</li>
<li>pallet 简单示例: 介绍一个存储学生信息的pallet，其中存储逻辑写在extrinsic中</li>
<li>在Config中定义配置类型：主要使用trait约束和关联类型改写</li>
<li>在runtime中指定具体的类型</li>
<li>构建、交互与调试</li>
<li><a href="https://docs.substrate.io/v3/runtime/events-and-errors/">参考资料</a></li>
</ul>
</li>
</ul>
<h3 id="在pallet中使用其它pallet"><a class="header" href="#在pallet中使用其它pallet">在pallet中使用其它pallet</a></h3>
<ul>
<li><a href="https://github.com/KuanHsiaoKuo/learn-substrate-easy/blob/main/8.6%E5%9C%A8pallet%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%85%B6%E5%AE%83pallet.md">learn-substrate-easy/8.6在pallet中使用其它pallet.md at main · KuanHsiaoKuo/learn-substrate-easy</a></li>
<li><a href="https://web.archive.org/web/20220627101725/https://mp.weixin.qq.com/s/z4fefNUb3avcae0htHpxgQ">在pallet中使用其他pallet</a>
<ul>
<li>
<p>在自己的pallet中使用其它的pallet主要有以下几种情况：</p>
<ol>
<li>指定某个现成的pallet: 在pallet的config中定义类型，然后runtime中使用时指定这个类型为frame中指定某个现成的pallet；</li>
<li>指定某个自定义的pallet: 在pallet的config中定义类型，然后runtime中使用时指定这个类型为frame中指定某个自定义的pallet；</li>
<li>封装和扩展现有的 pallet 。</li>
</ol>
</li>
<li>
<p>在runtime中直接指定某个类型为其它的pallet</p>
<blockquote>
<p>这种方式比较常见的就是在pallet中定义currency类型，然后用指定currency类型为balances
pallet。详细的可以看substrate中node中的使用，在pallet_assets中使用了pallet_balances，就是通过指定前者的currency类型为后者</p>
</blockquote>
<ul>
<li><a href="https://github.com/paritytech/substrate/blob/master/bin/node/runtime/src/lib.rs#L1343">详情</a></li>
</ul>
</li>
<li>
<p>pallet中使用其它pallet的storage</p>
<blockquote>
<p>自定义两个pallet，分别叫做pallet-use-other-pallet1和pallet-storage-provider，然后我们在前一个pallet中读取和存储后一个pallet</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<h3 id="封装和扩展现有pallet"><a class="header" href="#封装和扩展现有pallet">封装和扩展现有pallet</a></h3>
<ul>
<li><a href="https://github.com/KuanHsiaoKuo/learn-substrate-easy/blob/main/8.7%E5%B0%81%E8%A3%85%E5%92%8C%E6%89%A9%E5%B1%95%E7%8E%B0%E6%9C%89pallet.md">learn-substrate-easy/8.7封装和扩展现有pallet.md at main · KuanHsiaoKuo/learn-substrate-easy</a></li>
<li><a href="https://web.archive.org/web/20220627113013/https://mp.weixin.qq.com/s/23wuRo4gj4oH-3EG74NnTA">封装和扩展现有的pallet</a>
<ul>
<li>
<p>这里使用substrate提供的contracts pallet，然后对其中的功能进行封装。</p>
<blockquote>
<p>在我们的封装中，将contracts pallet的call函数封装成sudo_call，即需要root权限才能调用。同时，我们在runtime中加载contracts时，去掉直接调用contracts函数的方式。</p>
</blockquote>
</li>
<li>
<p>整个方式我们分成两大步骤，如下：</p>
<ol>
<li>编写extend-pallet;</li>
<li>在runtime配置extend- pallet 和contracts pallet。</li>
</ol>
</li>
<li>
<p><a href="https://www.shawntabrizi.com/substrate/extending-substrate-runtime-modules/">文档资料</a></p>
</li>
</ul>
</li>
</ul>
<h3 id="调试"><a class="header" href="#调试">调试</a></h3>
<ul>
<li><a href="https://github.com/KuanHsiaoKuo/learn-substrate-easy/blob/main/8.8%E8%B0%83%E8%AF%95.md">learn-substrate-easy/8.8调试.md at main · KuanHsiaoKuo/learn-substrate-easy</a></li>
<li><a href="https://web.archive.org/web/20220627113043/https://mp.weixin.qq.com/s/Ddu-CPgRz-U7uO4PkUnp2g">调试pallet</a>
<ul>
<li>在pallet开发时主要有以下几种调试方式：
<ol>
<li>logging uilities;</li>
<li>printable trait;</li>
<li>print函数;</li>
<li>if_std.</li>
</ol>
</li>
<li>使用logging uilities</li>
<li>使用 printable trait</li>
<li>使用print函数</li>
<li>使用 if_std</li>
<li><a href="https://docs.substrate.io/v3/runtime/debugging/">文档资料</a></li>
</ul>
</li>
</ul>
<h3 id="pallet中的类型转换"><a class="header" href="#pallet中的类型转换">pallet中的类型转换；</a></h3>
<h3 id="在pallet中使用链下工作者offchain-worker"><a class="header" href="#在pallet中使用链下工作者offchain-worker">在pallet中使用链下工作者（Offchain worker）</a></h3>
<ul>
<li><a href="https://github.com/KuanHsiaoKuo/learn-substrate-easy/blob/main/8.9%E4%BD%BF%E7%94%A8OCW%E6%8F%90%E4%BA%A4%E7%AD%BE%E5%90%8D%E4%BA%A4%E6%98%93.md">learn-substrate-easy/8.9使用OCW提交签名交易.md at main · KuanHsiaoKuo/learn-substrate-easy</a></li>
<li><a href="https://github.com/KuanHsiaoKuo/learn-substrate-easy/blob/main/8.10%E5%9C%A8ocw%E4%B8%AD%E6%8F%90%E4%BA%A4%E6%9C%AA%E7%AD%BE%E5%90%8D%E4%BA%A4%E6%98%93.md">learn-substrate-easy/8.10在ocw中提交未签名交易.md at main · KuanHsiaoKuo/learn-substrate-easy</a></li>
<li><a href="https://github.com/KuanHsiaoKuo/learn-substrate-easy/blob/main/8.11%E5%9C%A8ocw%E4%B8%AD%E6%8F%90%E4%BA%A4%E5%85%B7%E6%9C%89%E7%AD%BE%E5%90%8Dpayload%E7%9A%84%E6%9C%AA%E7%AD%BE%E5%90%8D%E4%BA%A4%E6%98%93.md">learn-substrate-easy/8.11在ocw中提交具有签名payload的未签名交易.md at main · KuanHsiaoKuo/learn-substrate-easy</a></li>
<li><a href="https://github.com/KuanHsiaoKuo/learn-substrate-easy/blob/main/8.12%E5%9C%A8ocw%E4%B8%AD%E4%BD%BF%E7%94%A8%E9%93%BE%E4%B8%8B%E5%AD%98%E5%82%A8.md">learn-substrate-easy/8.12在ocw中使用链下存储.md at main · KuanHsiaoKuo/learn-substrate-easy</a></li>
<li><a href="https://github.com/KuanHsiaoKuo/learn-substrate-easy/blob/main/8.14%E5%9C%A8ocw%E4%B8%AD%E5%8F%91%E9%80%81http%E8%AF%B7%E6%B1%82.md">learn-substrate-easy/8.14在ocw中发送http请求.md at main · KuanHsiaoKuo/learn-substrate-easy</a></li>
</ul>
<h3 id="在pallet中链上写本地存储offchain-index"><a class="header" href="#在pallet中链上写本地存储offchain-index">在pallet中链上写本地存储（offchain index）；</a></h3>
<ul>
<li><a href="https://github.com/KuanHsiaoKuo/learn-substrate-easy/blob/main/8.13%E4%BD%BF%E7%94%A8offchain_index.md">learn-substrate-easy/8.13使用offchain_index.md at main · KuanHsiaoKuo/learn-substrate-easy</a></li>
</ul>
<h3 id="在pallet的ocw中使用链下存储offchain-storage"><a class="header" href="#在pallet的ocw中使用链下存储offchain-storage">在pallet的ocw中使用链下存储（offchain storage）；</a></h3>
<h3 id="在pallet中使用其它pallet使用其它pallet的存储"><a class="header" href="#在pallet中使用其它pallet使用其它pallet的存储">在pallet中使用其它pallet（使用其它pallet的存储）；</a></h3>
<ul>
<li><a href="https://github.com/KuanHsiaoKuo/learn-substrate-easy/blob/main/8.6%E5%9C%A8pallet%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%85%B6%E5%AE%83pallet.md">learn-substrate-easy/8.6在pallet中使用其它pallet.md at main · KuanHsiaoKuo/learn-substrate-easy</a></li>
</ul>
<h3 id="在pallet中添加rpc接口"><a class="header" href="#在pallet中添加rpc接口">在pallet中添加rpc接口</a></h3>
<ul>
<li>
<p><a href="https://github.com/KuanHsiaoKuo/learn-substrate-easy/blob/main/8.15%E5%9C%A8pallet%E4%B8%AD%E6%B7%BB%E5%8A%A0rpc%E6%8E%A5%E5%8F%A3.md">learn-substrate-easy/8.15在pallet中添加rpc接口.md at main · KuanHsiaoKuo/learn-substrate-easy</a></p>
</li>
<li>
<p><a href="https://web.archive.org/web/20220627101825/https://mp.weixin.qq.com/s/_QTUGTAWLreUVcNJcVKBjA">为pallet自定义rpc接口</a></p>
<blockquote>
<p>pallet写好后需要通过runtime加载到链上（就是runtime/src/lib.rs中的construct_runtime宏包含的部分）。
那么对应到我们的测试，如果对pallet进行测试，我们也需要构建一个runtime测试环境，然后在这个环境中加载pallet，对pallet进行测试。
所以，编写pallet的测试就分为以下几部分：</p>
</blockquote>
<ol>
<li>编写 mock runtime;</li>
<li>编写pallet的genesis config;</li>
<li>编写测试。</li>
</ol>
<ul>
<li><a href="https://docs.substrate.io/v3/runtime/custom-rpcs/">文档资料</a></li>
</ul>
</li>
</ul>
<h3 id="为某些trait提供默认实现"><a class="header" href="#为某些trait提供默认实现">为某些trait提供默认实现。</a></h3>
<ul>
<li><a href="https://web.archive.org/web/20220627101811/https://mp.weixin.qq.com/s/ZU5SYYrL6OORWGEbRev7Zg">为pallet编写tests</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="深入substrate-runtime"><a class="header" href="#深入substrate-runtime">深入substrate runtime</a></h1>
<!--ts-->
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_runtime.html#%E6%B7%B1%E5%85%A5substrate-runtime">深入substrate runtime</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_runtime.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_runtime.html#runtime%E6%80%BB%E8%A7%88">Runtime总览</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_runtime.html#frame%E4%B8%8Eruntime">FRAME与Runtime</a></li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:57 UTC 2022 -->
<!--te-->
<h1 id="参考资源-46"><a class="header" href="#参考资源-46">参考资源</a></h1>
<h2 id="runtime总览"><a class="header" href="#runtime总览">Runtime总览</a></h2>
<ul>
<li><a href="https://core.tetcoin.org/docs/zh-CN/knowledgebase/runtime/">Runtime 总览 · Substrate Developer Hub</a></li>
</ul>
<h2 id="frame与runtime"><a class="header" href="#frame与runtime">FRAME与Runtime</a></h2>
<ul>
<li><a href="https://core.tetcoin.org/docs/zh-CN/knowledgebase/runtime/frame">FRAME · Substrate Developer Hub</a></li>
</ul>
<blockquote>
<p>Framework for Runtime Aggregation of Modularized Entities (FRAME) 是一组可简化 runtime 开发的模块（称为 pallets ）和支持库。 其中 pallets
指的是 FRAME 中那些单一功能模块，承载着特定业务逻辑。</p>
</blockquote>
<pre><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 560 460" width="560" height="460">
  <!-- svg-source:excalidraw -->
  
  <defs>
    <style>
      @font-face {
        font-family: "Virgil";
        src: url("https://excalidraw.com/Virgil.woff2");
      }
      @font-face {
        font-family: "Cascadia";
        src: url("https://excalidraw.com/Cascadia.woff2");
      }
    </style>
  </defs>
  <rect x="0" y="0" width="560" height="460" fill="#ffffff"></rect><g stroke-linecap="round" transform="translate(10 10) rotate(0 200 40)"><path d="M0 0 C0 0, 0 0, 0 0 M0 0 C0 0, 0 0, 0 0 M0.18 5.63 C0.42 5.51, 1.5 2.74, 4.94 0.3 M-0.5 6.07 C1.14 4.68, 2.54 3.14, 5.31 0.49 M1.17 11.11 C2.7 9.45, 6.98 5.74, 10.1 0.62 M0.6 11.27 C2.97 7.96, 7.22 4.94, 10.68 -0.33 M-1.58 17.51 C7.54 13.78, 12.1 6.53, 17.52 0.15 M-0.53 17.71 C5.91 12.98, 10.16 5.19, 16.34 0.86 M-0.54 24.65 C3.16 18.03, 9.04 12.49, 22.59 1.6 M-0.51 23.39 C5.44 19.29, 9.59 14.58, 20.46 0.77 M-0.31 29.15 C10.76 19.78, 19.47 10.93, 25.93 1.86 M-0.6 31.31 C9.56 20.32, 19.05 10.34, 26.67 0.03 M1.02 35.53 C4.91 30.08, 11.3 21.27, 31.9 -0.65 M0.08 35.99 C7.79 27.89, 15.87 19.98, 31.95 -0.03 M-1.12 40.52 C6.11 31.8, 16.36 22.83, 37.93 0.56 M0.86 41.87 C7.19 34.73, 14.19 25.05, 36.51 -0.02 M-1.11 47.65 C16.48 32.61, 29.36 12.47, 44.46 0.29 M0.73 48.95 C11.9 36.87, 21.41 22.81, 43.18 -0.17 M2.18 56.26 C16.65 32.84, 36.1 14.12, 48.34 0.04 M1.05 53.83 C10.65 43.65, 19.43 30.74, 47.37 0.98 M-1.17 59.9 C18.05 39.8, 40.73 17.86, 52.82 0.23 M-0.51 61.1 C16.43 43.57, 32.2 24.37, 52.41 -1.02 M1.11 67.29 C16.96 44.93, 35.97 24.14, 56.93 -1.39 M-1.24 66.39 C20.72 44.72, 40.51 20.76, 57.52 0.76 M0.25 72.97 C19.79 47.52, 39.44 26.43, 65.48 -1.51 M-0.18 74 C13.97 59.43, 26.33 43.24, 63.16 -0.97 M1.12 77.81 C17.84 56.78, 36.22 36.32, 70.45 -0.89 M0.02 79.47 C15.46 60.16, 31.7 42.03, 69 -0.43 M4.15 81.06 C24.7 60.59, 43.52 37.15, 72.93 -0.08 M3.56 82.67 C31.02 50.3, 59.07 18.07, 75.24 -0.41 M7.52 82.74 C23.91 63.88, 37.9 47.39, 80.6 -1.08 M7.03 82.18 C32.86 52.22, 58.74 24.16, 78.61 1.11 M15.1 81.89 C34.66 56.45, 57.56 33.53, 85.61 0.93 M13.95 82.61 C37.03 55.39, 60.73 30.35, 85.71 -0.76 M17.14 82.89 C31.89 65.65, 48.13 46.67, 90.07 -0.06 M18.8 82.95 C34.12 66.16, 48.22 49.4, 90.93 -0.42 M23.55 80.78 C50.06 54.02, 72.12 25.37, 95.94 -0.58 M24.88 82.89 C52.35 50.8, 80.8 17.77, 95.88 0.54 M27.39 81.58 C50.1 61.37, 67.68 37.79, 102.51 -1.39 M29.2 83.19 C56.86 51.71, 83.05 21.12, 101.28 0.68 M36.11 81.31 C49.77 63.78, 66.38 46.08, 104.3 0.85 M34.21 81.75 C52.25 59.85, 72.03 39.27, 106.36 -0.95 M38.28 82.62 C63.9 54.06, 89.78 26.06, 112.54 -0.11 M40.02 82.24 C57.09 61.7, 75.46 39.82, 110.78 0.56 M44.33 81.31 C67.52 58.58, 88.48 35.83, 116.39 0.95 M45.55 81.67 C69.14 53.85, 92.66 25.45, 115.35 1.05 M51.8 83.38 C70.6 59.13, 90.95 38.15, 123.74 -0.72 M51.32 81.47 C76.12 54.03, 101.05 27.25, 121.28 0.88 M54.78 83.4 C77.91 55.67, 100.27 32.3, 127.85 0.74 M55.3 82.87 C74.34 61.7, 94.59 39.67, 126.29 -0.44 M61.88 80.75 C79.96 62.17, 96.95 39.13, 130.67 0.82 M60.39 83.2 C84.33 55.68, 106.65 28.64, 132.42 -0.21 M65.63 81.99 C90.81 51.49, 118.67 21.21, 138.29 1.01 M66.27 83.3 C83.4 61.37, 102 40.51, 136.9 -0.16 M72.45 81.14 C88.36 64.18, 105.14 46.89, 144.86 -0.94 M70.82 81.76 C99.1 52.31, 125.24 21.45, 142.59 0.89 M76.04 82.02 C102.75 52.55, 131.96 23.42, 148 1.34 M76.04 82.39 C100.05 54.67, 124.1 29.17, 148.85 -0.63 M83.38 82.51 C110.03 48.36, 139.57 17.73, 152.79 1.09 M81.45 82.44 C103.12 59.51, 123.91 34.54, 153.97 0.3 M88.12 80.94 C113.54 52.8, 141.8 19.86, 159.19 -1.17 M87.98 82.06 C109.12 56.23, 130.68 30.87, 158.06 -0.37 M92.53 80.34 C120.51 53.07, 145.95 21.44, 165.94 0.55 M93.39 82.53 C117.5 53.54, 143.29 24.99, 163.47 -0.39 M96.96 82.78 C114.2 59.59, 133.63 42.08, 170.05 2.13 M98.19 81.71 C114.03 64.39, 129.42 44.62, 169.7 1.08 M101.73 81.65 C118.77 64.97, 132.56 47.88, 174.73 -0.42 M103.01 82.3 C120.94 63.3, 138.1 44.48, 175.79 -1.11 M108.61 84.04 C137.52 50.51, 165.31 19.58, 180.77 1.4 M108.55 83.24 C129.55 58.84, 149.42 37.02, 179.24 0.16 M114.76 82.98 C140.39 52.81, 168.16 21.02, 186.56 -1.13 M114.96 82 C137.94 55.67, 162.29 27.71, 186.4 -0.3 M118.11 83.8 C135.72 63.48, 149.52 45.26, 191.47 -1.64 M119.73 82.01 C141.2 57.49, 164.95 30.36, 191.4 0.3 M123.38 80.4 C152.49 53.06, 176.08 19.51, 195.8 -0.36 M125.13 82.88 C139.91 64.58, 154.92 48.88, 196.52 0.09 M131.44 81.64 C150.36 59.03, 169.88 36.97, 200.25 0.22 M130.12 81.88 C153.5 56.43, 175.32 29.37, 201.14 0.9 M137.32 83.53 C157.81 55.81, 181.43 31.23, 205.79 1.63 M135.71 82.16 C160 54.35, 184.52 25.18, 206.13 -0.42 M139.57 83.69 C165 50.73, 193.64 24.19, 213.18 1.76 M140.91 82.19 C163.26 54.5, 187.17 28.06, 212.74 0.36 M146.27 81.51 C172.49 50.92, 201.26 20.49, 218.84 1.13 M146.12 82.04 C162.01 63.4, 178.15 44.77, 217.01 0.18 M152.43 80.6 C176.11 53, 203.04 21.89, 222.31 -0.74 M151.04 82.76 C175.03 54.34, 198.63 28.97, 222.69 -0.94 M157.26 81.75 C177.95 58.38, 196.77 31.34, 230.21 0.94 M155.41 83.47 C172.95 63.12, 187.97 45.23, 227.66 -0.6 M160.91 81.56 C187.96 48.47, 217.34 17.56, 231.65 0.57 M162.22 82.91 C187.7 53.33, 213.17 23.91, 232.79 0.37 M167.21 80.96 C192.5 57.1, 216.35 27.49, 237.51 1.17 M165.87 82.12 C188.15 59.46, 208.69 34.86, 237.73 -0.03 M170.9 80.29 C195.74 56.1, 220.14 24.56, 243.17 -0.97 M171.93 82.43 C187.18 65.67, 200.79 48.68, 243.07 -0.37 M177.09 83.62 C199.34 59.92, 217.21 35.01, 249.24 2.18 M178.07 81.91 C200.34 56.55, 223.49 28.06, 249.57 -0.16 M181.21 81.03 C203.9 57.62, 221.51 35.36, 254.82 -0.47 M182.42 82.6 C204.31 57.2, 226.27 33.9, 254.85 -0.82 M188.46 80.98 C202.72 63.73, 217.56 45.19, 258.94 -0.87 M188.51 82.97 C214.5 52.41, 242.95 19.9, 259.35 -0.28 M193.67 80.57 C210.06 65.53, 224.44 50.22, 266.51 0.49 M193.67 81.17 C209.12 63.97, 224.2 46.96, 265.71 -0.67 M196.85 81.86 C212.93 66.72, 229.21 47.33, 269.76 0.94 M197.95 83.44 C214.65 64.82, 230.72 46.39, 270.67 1.05 M203.05 82.21 C231.68 51.07, 256.96 20.54, 274.14 -0.13 M204.48 81.4 C231.76 49.51, 259.47 17.41, 276.49 -0.61 M209.79 82.58 C225.52 64.73, 237.36 49.53, 279.81 1.1 M208.43 82.44 C224.89 62.92, 240.86 44.13, 280.86 -0.26 M215.08 81.8 C237.93 54.74, 259.65 29.35, 287.55 1.15 M215.38 83.02 C241.97 49.83, 271.13 15.84, 286.29 0.64 M220.75 80.98 C241.6 59.01, 262.44 33.77, 292.19 -0.4 M220.24 83.06 C237.89 60.8, 257.64 40.48, 292.04 -0.81 M224.48 81.72 C243.36 60.61, 264.27 38.73, 296.56 -0.65 M225.66 81.24 C245.36 60.76, 263.69 38.26, 297.5 -0.65 M231.18 82.47 C251.83 59.72, 268.27 40.56, 300.94 0.97 M230.94 83.38 C256.53 51.09, 283.2 21.48, 302.1 -0.7 M236.94 80.86 C256.18 56.07, 276.02 35.12, 308.97 -1 M236.41 81.76 C260.89 51.6, 287.46 22.02, 306.75 -0.22 M240.48 81.97 C262.73 56.26, 286.46 33.66, 313.1 0.27 M240.37 81.48 C264.21 54.93, 288.16 27, 311.69 -0.57 M247.1 80.66 C270.43 51.63, 298.47 21.33, 316.53 0.19 M247.46 81.77 C270.92 55.61, 293.84 26.72, 317.94 -0.84 M252.06 81.92 C271.07 60.43, 288.75 40.82, 322.65 1.09 M251.6 82.39 C272.46 58.39, 293.27 33.58, 323.21 -0.55 M256.58 83.1 C284.38 54.51, 307.23 25.93, 328.98 0.51 M256.4 82.93 C279.82 55.93, 303 29.26, 329.26 -1.28 M263.25 82.3 C284.78 54.06, 305.98 27.9, 332.57 1.55 M262.01 83.17 C285.66 56.18, 310.31 29.22, 333.85 0.68 M267.31 81.41 C293.13 52.96, 316.12 26.61, 340 1.12 M266.95 83.16 C294.17 52.52, 320.21 22.01, 340.13 -1.34 M271.38 82.64 C286.09 65.86, 302.84 49.63, 344.78 0.32 M272.22 81.83 C292.13 59.89, 312.15 35.9, 344.55 0.96 M278.16 83.13 C303.02 52.4, 329.09 24.34, 348.61 1.44 M278.55 82.58 C294.01 64.13, 310.76 46.46, 349.6 -0.06 M283.74 83.97 C309.71 53.39, 337.02 20.76, 354.17 -1.43 M283.11 82.37 C306.88 56.23, 329.18 30.68, 355.02 -0.4 M287.01 84.57 C304.36 61.55, 323.96 43.08, 359.76 2.16 M289.45 83.07 C311.05 55.78, 334.93 29.86, 359.95 0.22 M295.6 82.88 C320.96 51.38, 351.83 20.16, 366.63 -1.97 M294.85 81.78 C321.26 51.68, 347.19 21.44, 366.73 0.39 M299.33 81.82 C324.98 50.48, 353.86 20.85, 370.39 -0.24 M298.3 82.23 C313.57 64.19, 329.16 46.79, 369.77 -0.59 M304.17 81.47 C331.36 50.78, 358.97 22.47, 376.98 -1.06 M305.85 83.04 C327.08 56.46, 348.68 30.68, 375.94 0.6 M309.61 81.5 C337.04 51.47, 362.17 20.27, 382.08 1.52 M310.54 83.15 C332.89 56.39, 357.42 28.64, 381.54 -0.34 M314.66 81.39 C336.97 57.88, 362.86 30.84, 387.04 -1.91 M315.8 82.1 C341.92 51.15, 369.93 19, 386.64 0.01 M319.26 82.78 C344.09 54.18, 366.27 29.02, 390.36 0.22 M321.35 83.42 C333.93 65.36, 349.81 47.24, 392.03 1.11 M326.22 81.79 C342.74 64.22, 356.15 46.61, 399.57 -1.23 M326.65 82.91 C350.68 54.48, 376.13 24.86, 397.61 -0.15 M330.68 83.33 C346.95 62.89, 365.16 43, 401.43 1.7 M330.71 82.08 C350.97 59.13, 371.64 36.61, 401.97 2.37 M338.01 81.39 C356.86 59.58, 377.48 35.92, 401.77 8.39 M337.62 82.39 C357.91 57.42, 379.99 33.22, 400.82 7.4 M341.25 81.37 C362.79 57.67, 383.56 33.43, 400.89 12.89 M342.34 82.69 C359.95 62.4, 378.69 39.97, 401.77 13.6 M347.11 80.41 C360.34 67.99, 374.73 52.81, 402.96 18.3 M348.19 81.46 C368.71 58.36, 390.96 33.02, 402.21 18.87 M353.31 81.66 C371.01 59.04, 390.52 39.16, 403.39 24.59 M352.72 82.26 C366.01 66.36, 379.09 50.27, 402.19 26.31 M358.6 82.62 C372.29 65.37, 386.63 51.93, 400.11 31.62 M357.12 82 C375.3 63.92, 389.97 44.78, 402.13 32.18 M364.15 81.46 C375.92 66.43, 394.82 47.81, 400.33 39.73 M362.12 82.32 C376.58 65.25, 390.36 49.93, 401.04 38.58 M367.52 81.32 C375.32 74.77, 382.45 65.1, 401.19 44.29 M369.42 81.91 C374.72 73.02, 381.53 65.12, 401.71 45 M372.06 80.6 C387.01 68.02, 394.73 55.59, 403.1 48.76 M373.56 81.86 C382.78 71.16, 392.62 58.71, 401.43 49.45 M380.88 81.33 C386.28 74.54, 394.57 66.38, 403.14 55.03 M379.36 82.03 C385.42 74.44, 391.56 68.97, 401.91 55.76 M382.27 83.42 C389.49 78.25, 389.7 72.61, 400.39 64.43 M383.82 82.36 C388.9 78.12, 391.47 74.53, 402.05 62.71 M390.91 81.81 C393.98 77.45, 398.16 72.77, 400.63 68.33 M388.86 82.02 C393.35 78.2, 397.26 71.78, 401.13 67.64 M393.95 81.52 C397.36 79.97, 398.93 79.26, 402.15 73.72 M394.68 82.52 C396.84 80.01, 399.11 77.29, 401.15 74.8" stroke="#ced4da" stroke-width="0.5" fill="none"></path><path d="M-0.53 0.34 C122.72 -0.34, 244.64 1.13, 400.55 0.3 M399.75 -1.77 C402.59 18.38, 401.87 38.52, 400.65 81.2 M399.5 80.09 C293.85 79.04, 188.39 80.28, -0.69 80.51 M-1.62 78.14 C1.46 55.02, 1.22 30.18, -0.67 1.64" stroke="#000000" stroke-width="1.5" fill="none" stroke-dasharray="1.5 7"></path></g><g transform="translate(167.5 30) rotate(0 49 12.5)"><text x="0" y="18" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">RUNTIME</text></g><g transform="translate(70 50) rotate(0 146.5 12.5)"><text x="0" y="18" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">(APIs, Execution Environment)</text></g><g stroke-linecap="round" transform="translate(10 110) rotate(0 200 40)"><path d="M0 0 C0 0, 0 0, 0 0 M0 0 C0 0, 0 0, 0 0 M-0.46 6.36 C1.82 4.21, 3.06 2.89, 4.93 0.4 M-0.32 6.63 C1.99 4.3, 3.47 1.34, 5.33 0.76 M-0.62 13.11 C1.05 10.17, 4.56 7.06, 9.85 0.09 M-0.15 12.55 C2.47 9.15, 4.86 6.7, 10.47 -0.63 M1.78 16.89 C6.13 12.64, 9.04 8.16, 14.37 0.82 M-0.96 18.08 C4.16 13.58, 9.28 7.58, 14.92 0.11 M1.75 25.28 C5.09 19.05, 10.7 13.89, 21.63 1.51 M-0.2 23.15 C3.51 19.97, 8.42 14.62, 21.12 0.63 M1.8 31.08 C11.05 19.12, 19.47 7.38, 24.25 2.11 M0.76 31.37 C5.08 24.83, 11.67 16.99, 26.51 -0.02 M-0.07 37.98 C11.59 24.9, 20.93 12, 31.19 -0.3 M0.64 37.77 C9.69 23.74, 20.37 13.3, 31.64 0.32 M0.14 41.38 C6.31 33.65, 16.93 24.11, 36.95 -1.04 M0.36 41.62 C14.35 25.55, 29.8 9.78, 36.05 0.06 M1.14 46.97 C12.32 36.68, 22.06 22.14, 43.54 0.34 M0.24 47.93 C15.4 30.37, 31.18 12.75, 41.67 0.25 M1.63 55.79 C13.48 40.23, 24.98 28.08, 45.91 -1.48 M0.72 54.6 C11.37 41.38, 24.89 25.98, 46.73 -0.09 M1.77 62.53 C14.66 45.25, 29.94 26.77, 53.85 -1.4 M0.31 61.76 C16.03 42.98, 31.48 27.03, 53.16 0.37 M0.41 68.62 C17.44 47.46, 36.8 25.02, 57.51 -1.51 M0.31 66.83 C18.95 45.15, 38.83 21.57, 58.52 0.6 M-0.14 72.73 C15.25 54.81, 29.1 40.3, 65.25 1.18 M0.01 72.14 C15.56 54.09, 33.27 36.82, 63.34 -0.4 M0.55 79.43 C15.28 62.92, 29.32 46.09, 69.13 1.07 M0.86 79.54 C22.49 51.94, 46.55 25.33, 69.13 -0.33 M3.01 83.13 C26.67 58.71, 47.11 32.52, 74.84 0.3 M2.87 81.41 C18.65 64, 33.55 43.92, 73.69 -1.16 M5.99 82.53 C27.71 59.28, 46.67 34.71, 79.12 -0.97 M8.25 83.13 C31.77 54.65, 55.02 28.68, 79.07 0.15 M14.44 82.83 C41.07 52, 67.18 18.57, 83.7 -0.26 M13.82 82.36 C39.5 51.34, 68.23 20.74, 84.95 0.01 M20.18 82.09 C44.06 52.49, 68.56 23.21, 88.76 1.62 M19.17 81.37 C40.7 57.8, 60.36 32.74, 90.58 -0.45 M23.21 80.52 C51.15 50.05, 77.11 20.19, 94.86 0.79 M24.44 81.39 C44.34 60.15, 62.98 37.88, 96.14 -1.03 M27.16 80.81 C44.03 63.5, 58.41 44.07, 100.35 0.68 M29.2 82.96 C57.27 51.16, 84.62 19.18, 100.69 0.87 M34.56 83.17 C51.74 61.04, 72.16 38.59, 107.33 0.28 M34.27 82.05 C51.36 62.28, 69.77 40.66, 105.54 0.59 M41.57 81.89 C65.54 53.53, 94.71 22.06, 111.11 0.53 M39.81 82.58 C61.47 55.27, 85.68 28.96, 112.19 -0.42 M46.68 83.96 C72.78 54.62, 98.33 21.39, 117.45 1.32 M44.6 82.12 C66.74 59.94, 87.09 35.14, 117.05 0.47 M52.01 82.06 C71.91 60.81, 89.13 38.11, 123.28 0.06 M50.73 82.89 C71.69 56.78, 95.01 30.69, 122.64 0.66 M56.74 80.92 C70.64 64.02, 86.82 45.19, 127.45 0.29 M55.53 83.15 C80.44 53.74, 105.16 27.14, 127.78 0.94 M59.04 81.58 C80.88 62.05, 95.48 38.55, 134.02 -1.33 M60.96 81.53 C87.24 51.22, 116.06 20.91, 133.34 -0.44 M65.54 83.8 C84.02 61.54, 105.68 37.26, 135.62 1.36 M65.55 82.39 C92.05 53, 118.98 22.7, 137.15 0.57 M73.22 82.26 C85.75 64.44, 101.83 46.02, 141.48 -1.71 M71.77 82.14 C88.62 60.93, 107.42 40.29, 142.39 -0.8 M74.88 80.94 C91.16 64.31, 104.41 48.13, 148.82 -0.51 M75.94 82.59 C98.69 55.55, 122.23 28.7, 148.52 0.16 M81.05 81.41 C107.39 54.77, 132.59 22.97, 154.79 1.39 M81.68 81.32 C100.12 61.87, 115.74 42.38, 153.65 -0.99 M85.48 81.16 C104.78 62.86, 121.61 41.39, 159.91 -0.84 M87.74 82.99 C112.44 54.01, 135.66 27.11, 159.48 0.49 M91.01 81.89 C108.61 62.71, 126.56 45.09, 164.03 0.97 M93.49 81.68 C117.92 52.77, 141.52 24.85, 163.71 -0.11 M99.06 83.84 C114.51 65, 127.11 47.63, 169.72 0.38 M98.76 82.29 C112.19 65.76, 125.16 50.06, 168.92 -0.66 M103.54 82.09 C122.7 60.19, 140.65 37.16, 174.26 -1.44 M103.27 82.8 C132.4 50.14, 160.56 16.15, 174.97 -0.78 M108.31 80.89 C128.49 57.77, 153.59 32.85, 181.04 0.7 M108.55 81.7 C125.66 63.51, 140.22 44.4, 179.96 0.46 M113.07 81.94 C134.53 58.33, 155.84 33.46, 187.5 -1.77 M113.33 82.25 C135.78 57.18, 156.98 33.91, 186.58 -0.11 M118.86 82.75 C140.49 60.38, 161.66 36.88, 192.61 1.2 M119.46 81.9 C147.72 50.17, 175.79 16.6, 191.03 0.59 M125.97 80.89 C141.53 62.59, 156.06 43.3, 196.75 0.55 M125.28 82.57 C152.06 51.51, 176.74 21.84, 195.45 -0.76 M131.35 80.38 C150.11 59.01, 170.08 34.69, 201.18 0.48 M129.59 82.06 C145.66 63.63, 160.47 45.77, 200.79 0.46 M134.6 83.91 C155.3 58.21, 179.42 31.8, 207.97 0.66 M134.98 82.31 C164.52 48.82, 192.67 17.52, 207.25 0.12 M139.35 83.27 C159.19 62.35, 176.52 45.04, 211.44 0.68 M139.8 82.83 C159.86 59.97, 180.44 37.45, 211.17 -0.24 M147.27 83.53 C166.73 59.53, 186.82 35.27, 218.09 -1.78 M145.54 80.98 C160.93 64.09, 177.5 48.41, 217.43 -0.15 M151.43 81.46 C166.75 63.69, 185.82 43.84, 222.05 1.47 M150.73 81.35 C170.33 58.32, 190.08 36.77, 222.37 0.2 M157.63 82.54 C174.77 60.99, 195.37 37.86, 229.01 -0.6 M155.7 82.84 C178.05 56.21, 200.58 30.73, 228.2 -0.76 M161.11 83.52 C186.74 53.27, 212.67 24.78, 231.65 -1.94 M161.77 82.25 C190.54 48.48, 218.84 17.18, 233.88 0.44 M165.25 81.01 C186.77 60.05, 210.04 32.8, 236.94 -0.32 M167.43 82.88 C194.72 51.25, 222.72 19.23, 238.89 0.34 M172.88 82.52 C189.02 64.65, 206.79 42.85, 244.84 -0.82 M172.09 82.62 C197.83 52.11, 221.2 23.59, 243.41 -0.84 M177.7 82.8 C201.16 56.76, 223.23 31.56, 249.04 -1.2 M176.99 82.32 C195.9 62.03, 214.62 40.41, 249.54 0.42 M184.21 82.1 C205.21 56.86, 227.82 29.46, 254.2 1.09 M183.62 83.07 C204.09 57.55, 225.8 33.23, 253.98 -0.01 M187.17 82.55 C215.15 48.72, 243.95 16.68, 261.44 -0.71 M188.58 82.61 C209.82 56.33, 231.69 31.96, 260 -0.51 M195.52 82.41 C221.96 51.55, 251.22 17.07, 266.26 1.58 M194.04 82.65 C218.59 53.51, 244.43 24.43, 264.83 0.57 M199.83 84.44 C224.04 52.76, 248.43 27.12, 271.94 1.46 M198.63 83.21 C217.51 61.39, 235.72 38.99, 269.56 0.3 M204.22 82.14 C223.43 60.48, 240.89 41.08, 275.53 -2.01 M203.83 81.95 C222.66 59.78, 243.36 38.02, 276.52 -0.49 M209.81 84.16 C229 59.85, 247.61 40.25, 281.26 2.16 M208.88 82.54 C236.1 51.24, 264.87 18.65, 281.24 0.09 M214.67 80.5 C232.96 63.08, 250.57 40.19, 286.49 1.17 M215.2 81.99 C241.57 51.14, 267.47 21.21, 285.82 -0.6 M221.23 82.94 C239.38 58.55, 259.88 39.9, 291.13 0.77 M219.3 83 C241.34 57.59, 263.27 34.01, 290.85 -0.43 M224.22 83.25 C246.1 56.62, 268.46 32.72, 295.59 1.52 M225.16 81.3 C254.35 50.77, 281.47 17.49, 296.8 -0.17 M230.14 81.56 C252.16 58.18, 271.47 35.88, 302.22 1.17 M231.15 82 C257.76 50.48, 284.4 19.3, 301.96 -0.07 M237.16 80.65 C261.01 53.96, 285.17 25.59, 309.25 -1.06 M236.44 82.9 C255.71 60.91, 273.85 39.68, 307.8 0.38 M242.59 82.3 C259.81 61.33, 279.4 40.14, 312.19 1.82 M241.93 82.91 C263.76 55.08, 288.96 28.07, 312.91 -0.13 M246.78 81.53 C263.74 60.92, 282.08 39.48, 317.84 0.9 M246.59 81.29 C270.92 54.46, 293.28 26.88, 318.39 -0.42 M252.59 82.99 C268.72 62.92, 285.1 45.72, 321.65 1.67 M252.43 82.1 C269.58 61.51, 287.47 42.52, 323.79 0.54 M257.31 83.22 C278.13 59.43, 294.7 39.36, 329.72 0.37 M256.88 81.44 C278.43 58.94, 298.46 34.92, 328.45 -0.03 M264.12 83 C284.46 54.99, 310.81 27.19, 332.19 -1.76 M261.7 81.91 C283.96 57.47, 305.51 32.9, 333.48 0.62 M269.32 82.36 C285.19 62.97, 306.2 39.24, 341.21 -2.13 M266.72 82.58 C288.46 59.35, 309.64 34.48, 339.1 -0.92 M273.12 81.2 C291.88 60.09, 309.61 39.76, 344.37 1.53 M272.04 81.68 C294.84 59.43, 316.62 33.7, 344.6 -0.78 M276.29 81.84 C293.75 64.39, 308.92 49.88, 349.96 0.2 M277.23 82.15 C296.17 61.01, 314.76 40.65, 349.06 1.17 M285.51 82.03 C304.34 58.71, 321.31 36.09, 355.71 0.13 M284.04 82.73 C306.03 56.73, 327.07 32.26, 354.55 -1.02 M286.73 81.34 C312.48 54.99, 337.26 23.68, 359.52 -0.57 M288.35 83.33 C310.58 57.31, 332.02 31.31, 360.31 1.21 M295.17 81.43 C311.09 61.43, 331.49 40.55, 366.7 -0.89 M293.54 81.35 C310.51 61.85, 327.37 44.14, 366.5 -1 M300.74 84.35 C316.09 62.2, 331.85 44.34, 369.47 -0.58 M298.42 83.04 C324.55 53.16, 350.23 23.97, 371.11 0.43 M305.96 80.88 C328.58 57.34, 350.57 28.54, 374.82 -1.89 M304.64 81.84 C322.4 61, 340.02 40.57, 376.38 -0.14 M311.42 80.85 C338.12 50.18, 366.7 18.68, 380 -1.19 M310.57 81.7 C335.26 54.83, 359.66 27.77, 381.66 0.29 M313.7 81.4 C331.53 64.51, 349.1 45.98, 388.48 1.28 M314.72 81.46 C338.39 54.69, 363.19 26.16, 387.87 0.66 M318.82 81.37 C347.25 52.15, 371.2 25.85, 393.29 1.77 M319.67 82.18 C346.5 54.54, 371.29 26.1, 392.39 0.24 M324.18 81.54 C352.82 54.6, 374.01 28.01, 397.09 -0.7 M325.42 81.46 C353.98 51.2, 380.06 20.17, 397.44 -0.06 M331.97 82.98 C345.89 64.66, 366.01 44.15, 402.16 1.51 M331.37 82.85 C355.97 54.77, 378.25 26.08, 401.72 2.2 M335.15 83.36 C354.84 63.18, 373.24 42.21, 402.45 6.93 M337.65 82.1 C351.71 64.75, 366.72 46.18, 400.76 8.29 M342.86 83.27 C360.15 62.31, 375.36 44.95, 402.83 12.31 M341.09 82.58 C365.74 55.71, 389.3 28.1, 401.76 13.65 M346.36 82.49 C359.16 67.65, 371.46 53.72, 400.54 18.92 M346.57 81.58 C364.09 63.45, 381.22 42.19, 401.44 19.23 M352.46 82.36 C371.55 59.27, 388.41 41.28, 400.56 24.39 M353 81.7 C363.76 68.1, 375.81 54.62, 400.94 25.41 M357.48 82.06 C368.46 68.39, 383.43 55.53, 402.93 33.76 M358.63 81.12 C373.54 63.96, 389.55 44.95, 401.52 31.99 M364.69 80.91 C374.96 66.64, 387.7 55.15, 401.4 36.03 M363.05 83.04 C377.94 66.41, 393.3 48.09, 400.78 36.86 M370.2 82.73 C379.53 69.82, 387.5 60.86, 400.21 42.76 M368.53 81.92 C378.04 69.79, 386.83 60.69, 401.83 43.57 M372.45 82.1 C383.1 71.19, 390.95 59.9, 403.34 49.06 M373.95 82.91 C384.58 70.99, 393.89 59.76, 402.05 50.38 M378.13 80.71 C387.49 74.41, 393.28 62.36, 399.97 56.01 M380.22 82.14 C386.39 72.55, 393.97 64.68, 401.01 55.69 M383.62 81.66 C389.27 75.81, 398.7 68.92, 401.72 63.6 M384.17 82.1 C387.98 77.94, 392.25 73.68, 401.16 63.06 M388.29 82.5 C391.52 79.26, 397.06 74.07, 403.33 69.33 M389.3 82.7 C392.3 79.11, 395.41 73.58, 401.13 68.8 M394.96 82.04 C397.31 80.8, 397.69 78.69, 401.63 73.86 M394.93 82.57 C397.13 79.46, 399.66 77.47, 401.59 74.71" stroke="#ced4da" stroke-width="0.5" fill="none"></path><path d="M0.88 0.23 C118.36 1.68, 236.33 0.38, 398.97 0.47 M401.35 1.44 C401.34 28.03, 398.14 56.96, 399.45 78.62 M399.83 78.89 C269.1 79.99, 137.09 78.99, -0.09 80.32 M-1.08 81.77 C1.73 50.15, 0.67 22.38, 0.54 -0.61" stroke="#000000" stroke-width="1.5" fill="none" stroke-dasharray="1.5 7"></path></g><g transform="translate(123 130) rotate(0 93.5 12.5)"><text x="0" y="18" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">EXECUTIVE MODE</text></g><g transform="translate(141.5 150) rotate(0 75 12.5)"><text x="0" y="18" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">(Orchestration)</text></g><g stroke-linecap="round" transform="translate(10 210) rotate(0 20 70)"><path d="M0 0 C0 0, 0 0, 0 0 M0 0 C0 0, 0 0, 0 0 M-0.08 6.45 C1.55 3.68, 3.02 2.83, 4.48 -0.44 M-0.54 6.61 C0.89 4.82, 2.25 3.61, 5.28 0.1 M0.05 11.45 C2.46 9.72, 6.79 4.86, 9.84 -1.05 M-0.63 12.82 C4.36 7, 8.04 3.21, 11.32 -0.01 M-1.01 19.77 C5.68 12.92, 13.47 6.15, 17.53 2.02 M-0.22 18.86 C4.23 12.46, 9.53 8.57, 16.4 -0.41 M-1.09 23.8 C9.69 16.07, 14.46 5.62, 20.08 -1.13 M0.72 23.91 C4.95 18.56, 8.65 13.42, 20.74 0.07 M-0.95 29 C6.82 20.71, 15.94 11.13, 27.61 0.23 M-0.04 29.88 C4.75 25, 11.32 17.47, 25.26 -0.68 M1.4 35.64 C11.57 24.95, 23.13 10.77, 32 -0.13 M0.22 37.73 C8.24 26.05, 17.86 16.18, 31.56 0.89 M-0.61 41.29 C12.83 25.11, 28.43 7.53, 38.12 -1.33 M0.22 43.36 C8.63 32.18, 18.68 22.34, 37.02 0.33 M0.58 49.38 C10.05 36.1, 20.75 23.3, 42.46 0.41 M0.87 48.18 C13.42 34.01, 27.64 17.13, 41.86 2.02 M2 56.23 C13.16 37.26, 29 24.64, 41.24 7.37 M0.99 55.16 C14.56 38.12, 30.37 20.51, 40.75 6.81 M1.52 59.39 C13.25 48.28, 21.24 37.08, 42.91 13.31 M0.21 61.25 C12.57 47.34, 23.19 32.69, 41.76 14.04 M1.19 68.69 C11.59 50.87, 23.98 37.86, 39.7 20.36 M-1.23 67.38 C8.34 56.5, 16.13 47.38, 41.36 20.42 M1.92 74.8 C11.56 59.3, 25.38 44.43, 40.86 24.28 M-0.33 73.14 C16.2 55.37, 31.66 34.82, 42.19 26.39 M0.2 79.82 C10.39 68.63, 18.16 56.94, 39.46 31.12 M-0.16 80.32 C14.46 62.39, 30.33 43.7, 41.26 32.72 M1.43 86.29 C15.99 66.82, 27.48 53.26, 43.58 36.13 M0.94 84.04 C10.4 73.84, 19.83 62.62, 41.69 36.57 M1.28 91.57 C8.16 82.01, 17.2 70.71, 39.85 44.23 M-0.76 92.06 C12.29 76.7, 25.02 62.56, 41.59 43.85 M-0.96 96.82 C10.18 87.2, 18.37 75.03, 40.65 48.96 M0.35 97.9 C15.82 79.88, 31.76 61.58, 41.87 49.32 M-1.71 101.64 C15.89 86.89, 29.11 70.94, 42.87 57.07 M0.45 104.39 C14.28 87.12, 28.08 69.25, 42.39 55.16 M1.66 108.6 C16.16 93.49, 28.11 77.48, 40.6 63.12 M0.44 110.35 C12.92 95.06, 25.32 80.58, 41.12 62.6 M2.08 114.29 C9.94 100.88, 24.85 87.87, 42.46 66.51 M-0.29 114.58 C15.66 98.31, 30.81 80.73, 40.96 68.97 M-1.79 121.66 C15.45 105.11, 33.33 84.14, 40.96 73.79 M-0.95 122.3 C12.1 108.09, 22.81 96.09, 41.59 75.1 M-2.22 127.05 C9.19 115.01, 20.65 103.12, 41.87 79.73 M0.37 129.15 C13.22 112.8, 27.76 95.31, 40.24 80.35 M0.24 132.79 C18.39 116.35, 32.08 94.49, 40.87 85.89 M0.94 133.88 C11.34 121.6, 21.14 109.39, 40.87 86.26 M1.5 141.73 C9.51 129.44, 23.56 114.71, 42.3 93.18 M0.52 139.85 C12.44 126.62, 23.63 112.95, 40.37 93.11 M4.48 140.28 C18.07 127.48, 27.26 112.85, 42.45 96.9 M5.4 140.16 C12.5 130.85, 21.39 122.32, 42.31 98.01 M8.81 138.84 C19.21 130.65, 31.76 117.22, 40.96 103.09 M10.54 141.07 C22.61 126.95, 34.53 112.93, 41.82 105.27 M16.44 137.99 C23.17 130.05, 31.74 123.12, 40.14 111.56 M16.72 140.24 C23.15 132.57, 28.77 126.93, 41.37 110.49 M19.92 140.84 C30.29 129.88, 34.59 121.55, 39.66 116.47 M21.22 140.12 C26.62 133.42, 31.36 127.55, 40.94 117.12 M28.3 141.35 C29.1 136.78, 34.47 129.51, 41.3 124.9 M27.21 140.25 C32.42 133.9, 36.33 127.68, 41.24 124.1 M32.34 139.03 C35.34 137.28, 39.86 132.11, 42.05 129.64 M31.69 140.58 C34.49 136.79, 37.33 132.53, 42.2 128.91 M36.84 140.28 C38.43 138.1, 39.1 137.73, 41.04 135.75 M37.21 139.98 C38.48 138.43, 39.86 136.77, 41.53 135.21" stroke="#ced4da" stroke-width="0.5" fill="none"></path><path d="M-1.99 1.45 C15.81 -1.21, 29.81 -1.47, 39.2 0.56 M39.5 1.33 C41.25 26.41, 38.52 56.29, 38.44 138.62 M40.97 138.39 C26.91 140.82, 8.65 140.72, -0.32 138.67 M0.5 139.68 C2.01 86.43, 1.97 29.09, -1.22 1.67" stroke="#000000" stroke-width="1.5" fill="none" stroke-dasharray="1.5 7"></path></g><g stroke-linecap="round" transform="translate(70 210) rotate(0 20 70)"><path d="M0 0 C0 0, 0 0, 0 0 M0 0 C0 0, 0 0, 0 0 M0.19 5.89 C0.6 3.76, 2.43 2.86, 4.43 0.78 M-0.62 6.69 C1.18 4.34, 3.4 2.15, 4.97 0.21 M-0.57 11.25 C1.91 10.14, 6.49 5.07, 9.11 1.51 M0.74 12.73 C3.58 8.87, 7.69 3.79, 10.28 0.5 M1.4 20.35 C6.12 12.43, 7.67 9.17, 15.43 1.16 M0.08 19.22 C3.87 13.88, 9.9 7.38, 14.94 0.19 M0.3 22.9 C6.95 13.56, 16.75 8.04, 22.18 -0.4 M0.35 23.57 C7.14 16.82, 14.41 9.19, 20.78 -0.81 M0.85 31.84 C5.52 22.3, 10.48 16.19, 26.15 -0.91 M-0.72 29.5 C4.67 24.13, 12.3 16.45, 27.08 -0.33 M-1.25 36.99 C11.11 22.85, 20.76 8.49, 32.83 1.6 M-0.97 36.55 C8.64 29.12, 16.09 19.83, 31.52 -0.72 M-1.14 43.76 C6.87 31.93, 15.47 21.86, 37.04 1.94 M-0.24 42.66 C9.57 31.44, 18.1 20.7, 37.23 0.49 M-0.44 50.17 C8.97 38.5, 21.85 25.41, 43.2 -0.11 M-0.05 49.57 C12.82 34.39, 25.62 19.64, 42.07 2.2 M1.62 54.19 C12.72 41.89, 24.02 26.8, 43.03 8.22 M0.35 53.71 C9.72 42.65, 19.19 31.51, 42.36 6.23 M1.3 62.53 C16.43 41.88, 32.13 24.78, 41.74 13.99 M-0.89 61.38 C15.41 44.08, 28.93 27.62, 42.06 14.08 M-0.8 65.98 C11.13 53.82, 21.03 43.37, 39.13 19.85 M-0.33 67.63 C12.9 53.91, 25.1 39.37, 41.97 20.71 M0.68 72.39 C9.12 62.94, 20.6 49.03, 40.52 25.73 M-0.83 73.72 C12.46 58.95, 24.02 45.52, 41.63 25.66 M-1.85 77.64 C15.18 62.54, 32.8 42.23, 41.13 33.7 M-0.19 79.45 C9.81 69.25, 18.62 57.74, 41.79 32.48 M1.99 87.02 C14.26 66.83, 30.99 49.99, 42.94 35.5 M-0.21 85.12 C14.37 66.93, 29.17 50.34, 42.24 37.56 M-0.4 89.95 C10.08 80.15, 18.67 70.84, 39.8 45.14 M-0.61 91.68 C12.31 76.53, 24.74 62.45, 40.99 43.38 M-1.65 97.41 C13.09 82.62, 28.77 65.65, 42.28 50.41 M-0.06 98.63 C12.18 82.4, 26.14 65.89, 40.16 49.37 M-0.14 104.87 C16.6 86.82, 29.84 70.23, 42.08 57.75 M-0.85 104.39 C10.12 91.65, 21.23 79.37, 42.37 55.29 M0.41 109.26 C16.76 91.49, 30.95 73.04, 42.32 63.27 M-0.46 109.78 C13.53 94.47, 27.37 80.34, 42.12 61.72 M-0.23 116.36 C8.2 105.93, 19.68 94.05, 40.47 66.1 M0.32 114.87 C15.38 99.78, 28.41 82.88, 40.71 67.84 M-1.64 121.53 C10.87 107.51, 21.51 95.78, 39.4 75.13 M0.53 122.16 C14.85 105.55, 27.49 90.53, 40.36 73.74 M-1.95 129.09 C9.54 116.91, 21.01 105.52, 42.32 82.45 M-1.04 127.47 C9.63 116.95, 20.92 104.19, 41.13 80.19 M-1.4 133.34 C15.73 114.37, 32.76 98.06, 43.06 86.24 M0.5 133.35 C14.47 116.99, 28.57 100.81, 42.29 87.1 M-0.08 141.44 C8.47 129.8, 15.84 120.81, 42.48 91.79 M-0.42 139.51 C15.17 123.49, 30.58 106.57, 40.7 92.97 M6.29 140.8 C16 124.56, 31.53 111.63, 41.35 98.84 M6.27 140.65 C13.35 130.51, 21.46 120.7, 40.76 97.71 M9.65 139.93 C15.9 133.31, 26.21 123.73, 41.38 106.35 M10.7 140.78 C21.12 128.34, 31.16 117.41, 41.49 103.88 M16.89 138.97 C23.51 130.53, 28.09 124.11, 42.2 111.88 M16.38 140.2 C25.5 129.05, 36.76 116.95, 40.48 111.53 M19.71 138.46 C28.83 130.82, 36.96 120.38, 41.63 116.55 M21.01 139.74 C27.4 133.64, 33.4 127.34, 42.24 117.62 M26.13 139.96 C31.26 137.4, 32.45 133.95, 42.07 124 M26.12 139.9 C32.85 134.47, 36.33 128.24, 41.6 122.48 M31.64 140.68 C35.35 137.04, 38.44 134.65, 41.43 129.58 M31.31 140.83 C34.23 137.22, 36.83 135.06, 40.89 129.46 M37.75 139.54 C39.03 138.74, 39.51 136.95, 40.93 135.56 M37.3 140.02 C38.13 138.64, 39.28 138.05, 41.19 135.54" stroke="#ced4da" stroke-width="0.5" fill="none"></path><path d="M-1.6 -0.8 C14.68 -2.02, 27.64 -1.03, 39.5 1.33 M39.76 -1.56 C37.32 55.08, 39.08 108.38, 40.97 138.39 M40.52 139.68 C23.3 141.44, 8.62 141.46, 0.5 139.68 M-1.74 138.78 C0.95 88.19, -0.3 35.8, 1.63 0.85" stroke="#000000" stroke-width="1.5" fill="none" stroke-dasharray="1.5 7"></path></g><g stroke-linecap="round" transform="translate(130 210) rotate(0 20 70)"><path d="M0 0 C0 0, 0 0, 0 0 M0 0 C0 0, 0 0, 0 0 M-0.1 5.84 C1.27 5.35, 1.18 4.75, 4.27 0.94 M-0.66 6.38 C0.84 4.83, 2.43 3.78, 4.81 0.16 M-0.18 10.52 C4.05 9.48, 4.32 5.77, 11.83 1.34 M-0.39 11.69 C3.74 8.26, 6.92 5.3, 11.24 0.73 M1.47 18.25 C6.81 11.39, 10.28 6.38, 16.03 1.89 M-0.52 17.76 C3.15 14.98, 7.45 9.23, 15.64 -0.26 M2.19 25 C5.31 18.43, 10.73 10.71, 21.43 -1.1 M0.69 23.6 C6.03 15.51, 13.55 8.13, 21.68 0.61 M-1.48 30.38 C6.87 20.04, 16.99 13.38, 24.79 -1.68 M-0.59 31.31 C4.59 24.7, 10.81 18.84, 25.75 0.35 M-1.91 37.82 C11.14 24.84, 17.1 15.41, 30.47 -0.75 M0.11 36.5 C11.61 21.05, 24.83 6.77, 31.25 0.52 M-1.7 42.69 C10.18 32.38, 15.4 25.65, 36.13 0.54 M-0.44 42.87 C11.79 29.14, 22.71 15.95, 36.72 0.88 M-0.99 50.91 C8.64 36.7, 22.41 25.3, 41.35 2.68 M0.06 49.78 C15.66 31.1, 29.1 14.89, 41.88 1.19 M-0.16 55.99 C14.33 38.25, 27.44 25.02, 41.76 5.31 M0.19 55.32 C11.22 42.51, 23.52 27.72, 42.25 7.8 M1.56 61.36 C12.85 48.31, 24.92 32, 39.53 14.25 M0.69 61.68 C15.65 43.54, 29.03 26.27, 41.07 12.72 M-0.55 65.41 C13.75 51.64, 25.35 34.31, 40.92 20.37 M-0.79 68.24 C15.51 49.42, 29.88 32.81, 41.35 19.51 M-0.06 72.05 C9.96 61.25, 21.58 48.31, 39.53 26.89 M-0.47 73.16 C17 54.86, 32.79 35.47, 40.61 24.57 M-0.61 79.31 C12.25 65.24, 22.8 53.4, 41.08 31.95 M-0.27 79.97 C16.26 61.51, 30.89 41.55, 42.07 32.84 M-0.67 86.37 C8.19 75.13, 19.12 63.71, 40.64 37.65 M-0.08 85.67 C9.33 74.96, 18.19 65.15, 41.4 36.75 M1.93 89.89 C14.4 76.43, 25.43 62.62, 40.1 44.38 M-0.82 91.08 C12.09 77.79, 24.79 63.07, 40.65 43.68 M1.23 99.03 C9.14 87.38, 19.49 76.75, 41.45 51.87 M-0.71 96.91 C7.04 89.09, 16.08 78.99, 40.94 50.99 M1.94 104.08 C16.5 85.98, 30.31 68.05, 39.49 57.75 M0.91 104.37 C8.51 94.06, 18.46 82.36, 41.74 55.63 M0.07 110.98 C14.85 94.36, 27.31 77.88, 40.52 62.14 M0.79 110.77 C12.86 93.21, 26.53 79.32, 40.96 62.75 M0.28 114.38 C7.46 105.43, 19.12 94.69, 41.69 66.67 M0.51 114.62 C16.29 96.44, 33.57 78.57, 40.78 67.78 M1.28 119.97 C12.1 110.08, 21.49 95.95, 42.37 74.85 M0.38 120.93 C15.05 103.93, 30.34 86.87, 40.5 74.76 M1.12 129.54 C11.53 115.67, 21.56 105.2, 39.49 79.07 M0.21 128.36 C9.4 116.9, 21.39 103.26, 40.31 80.46 M1.91 135.53 C11.51 121.98, 23.56 107.22, 42.19 85.19 M0.45 134.76 C12.77 119.78, 24.85 107.7, 41.5 86.95 M0.56 141.62 C12.12 126.63, 26.05 110.44, 40.59 91.11 M0.46 139.83 C13.53 124.76, 27.78 107.65, 41.6 93.23 M5.25 139.69 C14.27 129.04, 22 121.57, 43.09 99.84 M5.4 139.1 C13.96 128.98, 24.62 119.81, 41.18 98.26 M11.19 140.35 C18.24 133.34, 24.22 125.78, 41.72 105.77 M11.5 140.46 C20.11 127.9, 31.14 116.28, 41.72 104.37 M16.27 141.04 C24.86 133.05, 30.6 123.78, 41.53 111.79 M16.13 139.31 C21.84 134.22, 26.27 126.17, 40.37 110.33 M19.26 140.43 C26.54 133.55, 31.23 125.4, 41.21 115.8 M21.52 141.04 C28.46 131.74, 35.19 124.77, 41.16 116.93 M27.71 140.73 C32.92 134.83, 37.32 126.37, 39.88 123.31 M27.09 140.27 C31.39 133.7, 38.39 128.08, 41.14 123.57 M33.03 140.06 C35.82 135.59, 39 131.11, 40.67 130.09 M32.27 139.52 C35.26 136.83, 37.02 132.98, 42.03 128.53 M37.14 139.43 C39.1 137.67, 40.41 136.16, 41.12 135.66 M37.51 139.69 C38.71 138.7, 39.73 137.28, 41.5 135.11" stroke="#ced4da" stroke-width="0.5" fill="none"></path><path d="M-0.97 -0.5 C14.46 1.79, 24.4 -0.94, 39.76 -1.56 M40.99 0.97 C39.37 34, 41.59 62.84, 40.52 139.68 M41.82 140.5 C30.34 141.44, 22.33 141.39, -1.74 138.78 M1.72 141.63 C0.04 85.82, -2.72 30.91, -1.89 1.28" stroke="#000000" stroke-width="1.5" fill="none" stroke-dasharray="1.5 7"></path></g><g stroke-linecap="round" transform="translate(190 210) rotate(0 20 70)"><path d="M0 0 C0 0, 0 0, 0 0 M0 0 C0 0, 0 0, 0 0 M0.47 5.68 C2.16 3.79, 3.21 2.79, 4.2 0.32 M0 6.22 C0.94 4.53, 2.88 3.37, 4.91 -0.02 M-0.39 13.24 C5.64 7.34, 9.79 4.01, 9.58 -0.74 M0.8 12.65 C4.75 8.23, 7.62 2.56, 11.27 -0.11 M1.65 18.85 C6.83 10.92, 12.34 7.62, 14.84 -1.03 M-1.02 18.46 C3.65 12.63, 7.93 8.41, 16.58 0.78 M-1.09 24.25 C5.13 17.52, 12.76 11.79, 22.11 -1.02 M-0.39 24.5 C5.9 18.55, 9.03 12.75, 20.52 -0.12 M0.72 29.02 C4.57 21.16, 13.66 17.59, 25.07 1.95 M0.86 29.98 C6.13 23.21, 12.06 15.1, 25.42 0.76 M0.05 35.46 C11.71 24.94, 26.69 10.5, 32.62 -0.85 M-0.52 36.24 C8.31 27.34, 14.74 18.71, 30.97 -0.02 M1.69 41.77 C14.75 26.66, 27.94 9.26, 35.71 0.96 M-0.65 42.36 C12.88 28.44, 24.49 16.24, 36.45 1.25 M0.63 49.06 C10.49 39.08, 19.09 28.45, 41.58 3.1 M0.85 49.59 C15.61 31.22, 32.23 12.79, 40.99 2.09 M0.96 54.71 C13.74 36.8, 29.63 18.78, 41.44 8.53 M-0.22 55.2 C9.74 44.01, 17.94 33.1, 42.38 7.22 M-1.07 59.15 C14.14 46.49, 26.92 28.14, 42.69 14.85 M-0.51 60.69 C14.7 44.19, 29.64 26.52, 41.19 12.44 M-2.16 67.2 C12.83 54.59, 24.93 40.4, 40 21.58 M-0.22 67.63 C15.8 48.07, 33.15 30.1, 40.98 19.33 M-1.59 71.06 C14.61 59.56, 24.55 44.11, 40.26 25.77 M0.32 72.14 C12.13 57.47, 27.04 43.06, 41.23 25.41 M-0.88 79.26 C16.56 62.16, 33.74 42.26, 40.92 33 M-1.04 80.25 C15.56 61.79, 28.88 45.41, 40.74 32.52 M1.08 84.07 C8.42 73.81, 14.84 64.18, 40.9 38.76 M-0.26 84.84 C12.48 70.51, 25.82 55.29, 42.56 36.72 M1.15 90.2 C15.52 74.3, 28.59 57.64, 39.68 43.18 M-0.07 90.74 C9.84 78.95, 21.15 67.62, 42.09 44.49 M0.8 98.21 C13.84 81.18, 25.73 67.38, 40.15 48.43 M-0.01 97.69 C8.73 88.63, 17.08 77.76, 41.98 50.59 M-1.52 101.49 C18.29 83.16, 33.5 64.86, 43 57.71 M-0.06 103.74 C9.18 92.6, 19.28 80.4, 41.57 56.48 M-0.05 109.18 C13.94 94.04, 28.11 78.79, 43.02 64.13 M0.74 109.62 C10.54 97.99, 20.64 87.79, 41.22 61.76 M1.2 115.6 C7.29 107.63, 18.69 95.47, 42.07 66.17 M1.23 114.69 C12.03 101.31, 23.83 87.11, 42.24 67 M-0.53 122.94 C14.3 107.52, 26.69 89.05, 42.08 72.4 M0.21 121.07 C10.42 110.44, 20.19 99.67, 42.03 74.98 M0.24 126.71 C14.13 108.93, 33.63 91.98, 41.99 80.85 M-0.62 127.54 C8.97 116.27, 18.85 105.08, 41.97 81.56 M-0.52 134.66 C10.73 119.68, 23.38 104.81, 42.09 88.02 M0.73 133.97 C16.36 116.2, 30.9 98.01, 41.82 87.04 M0.06 139.73 C8.2 129.16, 20.86 118.3, 42.35 91.76 M-1.11 140.73 C13.17 124.23, 25.03 110.8, 41.08 92.67 M5.88 141.43 C18.74 125.79, 29.16 112.17, 41.35 96.74 M6.37 139.52 C13.75 129.44, 22.98 121.51, 41.95 98.47 M11.18 140.69 C22.88 127.72, 33.55 113.82, 43.31 105.13 M10.81 140.68 C16.39 133.42, 22.44 125.06, 41.41 105.41 M17.86 140.36 C24.69 129.1, 33.81 122.34, 41.04 110.02 M15.44 139.21 C23.17 130.54, 31.98 121.26, 40.15 111.32 M19.3 140.01 C25.84 134.26, 32.51 127.89, 42.22 118.39 M20.81 139.96 C28.98 132.19, 36.98 122.58, 41.94 117.31 M25.89 138.55 C31.56 135.96, 37.43 126.9, 41.81 124.04 M27.49 139.8 C30.24 136.63, 33.27 133.09, 42.06 123.16 M30.55 139.3 C36.36 136.29, 38.12 132.59, 42.61 127.47 M31.24 140.67 C35.04 136.67, 39.3 131.63, 41.27 128.4 M37.06 139.61 C39.13 138.08, 39.55 137.19, 41.53 134.99 M37.23 140 C38.66 137.91, 40.46 136.73, 41.06 135.11" stroke="#ced4da" stroke-width="0.5" fill="none"></path><path d="M-1.06 -0.24 C13.1 -1.01, 30.71 0.74, 40.99 0.97 M38.21 0.52 C40.86 29.42, 42.98 60.87, 41.82 140.5 M41.52 138.26 C27.43 141.87, 18.43 140.61, 1.72 141.63 M-1.77 138.11 C1.64 90.72, -1.37 44.6, -1.91 -0.79" stroke="#000000" stroke-width="1.5" fill="none" stroke-dasharray="1.5 7"></path></g><g stroke-linecap="round" transform="translate(250 210) rotate(0 20 70)"><path d="M0 0 C0 0, 0 0, 0 0 M0 0 C0 0, 0 0, 0 0 M0.34 5.61 C1.69 3.87, 3.47 2.35, 5.5 0.01 M-0.09 6.32 C0.71 5.23, 2.49 3.16, 4.86 0.66 M1.65 10.99 C3.47 8.36, 8.17 3.71, 11.97 1.19 M-0.43 12.68 C4.11 7.63, 8.26 1.81, 11.34 0.13 M1.29 17.66 C4.6 11.17, 13.43 5.8, 13.83 0.36 M0.3 19.4 C4.22 14.04, 7.76 9.79, 14.94 0.41 M1.65 24.93 C4.49 16.53, 8.96 12.4, 19.95 0.77 M-0.11 23.34 C7.96 14.78, 14.95 7.05, 21.62 -0.8 M1.73 29.3 C7.25 23.04, 12.03 18.73, 27.96 -0.71 M-0.94 29.65 C8.5 22.18, 15.39 11.14, 26.4 -0.42 M1.54 37.61 C7.22 25.44, 15.04 16.3, 31.37 -1.38 M-0.87 35.96 C11.76 24.53, 22.79 9.7, 32.67 -0.48 M-0.88 41.36 C12.36 29.81, 22.03 15.78, 35.31 -0.06 M1.11 42.09 C14.65 26.33, 27.05 12.69, 37.26 0.33 M1.3 49.29 C16.4 33.09, 29.44 12.42, 43.15 2.72 M-0.15 48.7 C12.15 35.88, 22.48 22.47, 41.55 1.45 M-1.03 54.4 C10.75 42.92, 20.09 34.17, 40.62 8.3 M-0.17 55.34 C16.15 36.91, 32.2 18.84, 41.06 6.11 M-1.47 62.31 C15.28 46.04, 26.98 26.58, 40.3 12.87 M0.04 60.81 C8.45 50.37, 18.91 38.42, 40.39 13.33 M1.14 66.28 C14.78 53.54, 25.55 36.89, 41.15 20.35 M-0.26 67.26 C10.69 54.3, 22.17 42.3, 40.22 18.84 M1.47 71.78 C15.38 56.08, 32.12 37.46, 41.82 23.73 M0.63 72.75 C9.04 63.53, 17.13 53.27, 41.09 25.39 M0.4 79.1 C13.23 65.93, 25.94 48.67, 39.37 33.56 M0.07 78.93 C17.35 59.72, 33.76 41.43, 41.61 31.37 M-1.69 84.34 C14.7 70.88, 24.95 56.78, 40.53 37.08 M-0.2 86 C8.73 74.98, 18.76 63.23, 42.17 36.87 M0.52 89.78 C12.73 75.29, 27.94 60.77, 41.17 42.49 M-0.14 92.18 C12.44 77.93, 23.64 65.04, 41.87 44.08 M-1.44 96.91 C14.02 77.81, 32.89 61.07, 41.55 50.01 M-0.65 98.73 C15.06 80.99, 29.68 62.94, 40.25 49.29 M-1.1 105 C18.44 83.45, 34.62 66.37, 41.06 56.45 M-0.42 103.57 C11.64 91.13, 22.42 77.53, 41.51 55.58 M1.66 111.68 C13.56 94.92, 22.21 81.46, 42.93 61.82 M0.3 109.88 C13.81 92.39, 28.96 77.26, 41.68 62.37 M-0.09 115.97 C7.72 103.76, 18.92 94.14, 43.52 66.31 M-0.55 116.15 C11.04 102.67, 23.95 88.43, 41.34 68.49 M-0.93 122.64 C11.1 105.47, 25.53 89.83, 41.73 72.67 M0 122.6 C14.89 106.49, 27.86 90.27, 41.59 73.57 M0.23 129.21 C8.93 116.52, 19.69 108.91, 40.33 79.21 M-0.2 129.2 C11.8 115.6, 22.67 103.16, 40.75 81.12 M-1.15 134.56 C11.7 124.11, 18.16 113.37, 42.63 86.44 M-0.32 134.29 C15.33 116.68, 29.94 100.23, 41.57 86.1 M1.48 141.49 C7.59 130.31, 18.37 121.31, 39.23 93.57 M0.7 140.21 C14.25 124.63, 27.8 108.24, 41.4 93.54 M4.29 139.7 C17.32 123.11, 31.15 110.68, 43.28 97.58 M6.11 140.3 C16.03 128.76, 26.48 116.85, 41.95 98.64 M10.77 142.28 C21.32 126.11, 31.24 114.78, 41.94 105.58 M9.52 140.38 C18.8 131.91, 26.98 121.9, 42.2 105.07 M17.4 139.87 C23.31 130.93, 34.46 119.23, 39.64 109.8 M16.07 138.98 C21.5 133.84, 26.51 127.37, 40.17 111.11 M21.86 141.02 C27.59 136.02, 29.24 130.6, 40.81 116.23 M21.05 140.74 C27.55 133.45, 33.92 125.81, 41.04 116.22 M24.92 140.48 C31.75 133.2, 35.34 131.22, 42.61 123.11 M27.36 140.73 C31.33 134.85, 35.74 129.23, 40.41 122.66 M31.91 141.24 C34.03 137.07, 39.09 130.47, 40.54 129.76 M31.46 139.9 C33.6 137.72, 35.89 134.75, 41.17 128.63 M37.83 140.02 C38.5 138.71, 40.34 137.09, 40.98 135.61 M37.68 139.56 C38.13 138.73, 39.24 137.5, 41.15 135.28" stroke="#ced4da" stroke-width="0.5" fill="none"></path><path d="M0.37 0.99 C9.85 -1.88, 19.45 0.34, 38.21 0.52 M39.36 1.82 C39.57 39.47, 40.63 80.6, 41.52 138.26 M40.41 141.72 C32.06 141.08, 20.34 138.32, -1.77 138.11 M0.46 138.09 C0.15 89.06, 0.39 36.77, -1.44 -0.81" stroke="#000000" stroke-width="1.5" fill="none" stroke-dasharray="1.5 7"></path></g><g stroke-linecap="round" transform="translate(310 210) rotate(0 20 70)"><path d="M0 0 C0 0, 0 0, 0 0 M0 0 C0 0, 0 0, 0 0 M0.17 6.91 C0.96 4.24, 2.35 3.58, 5.34 0.2 M-0.43 6.27 C1.06 5.49, 1.84 4.25, 5.37 0.1 M1.21 13.38 C3.96 10.48, 6.79 5.46, 9.5 1.25 M-0.57 12.75 C3.3 9.17, 5.6 5.71, 11.2 -0.35 M1.07 16.66 C3.59 12.93, 6.14 8.28, 16.47 2.25 M-0.18 17.76 C5.43 11.63, 10.93 6.21, 16.31 0.75 M0.65 22.77 C6.58 19.53, 10.97 10.21, 20.52 -1.56 M0.83 24.44 C5.88 16.13, 11.84 10.41, 22.12 -0.66 M0.54 32.19 C9.24 18.88, 20.26 6.68, 24.37 -1.37 M-0.96 30.63 C8.15 19.84, 18.97 10.66, 27.14 0.66 M-0.74 36.36 C7.13 28.65, 15.26 16.47, 30.67 -1.94 M-0.86 37.65 C8.97 25.78, 19.33 13.92, 31.38 -0.69 M-0.15 40.95 C12.05 29.81, 23.73 15.13, 38.82 -0.61 M1.07 42.9 C15.2 26.26, 30.46 9, 37.59 0.44 M-1.75 50.86 C16.81 30.25, 31.79 13.43, 41.16 0.94 M0.46 49.26 C15.02 30.65, 30.1 13.49, 40.56 1.29 M0.16 53.58 C17.46 37.87, 31.6 18.12, 40.72 8.57 M0.49 54.02 C12.46 39.51, 27.22 23.89, 40.86 7.69 M-1.87 59.91 C14.53 42.09, 31 23.97, 41.41 13.11 M-0.93 60.01 C8.29 51.64, 17.34 41.82, 42.04 12.87 M0.49 67.42 C15.92 48.48, 30.27 32.44, 41.06 19.61 M0.7 66.49 C9.14 56.13, 21.48 42.62, 41.74 19.2 M-0.38 73.35 C11.38 55.87, 25.43 44.11, 42.45 24.96 M0.9 72.62 C11.86 59.28, 25.03 45.7, 41.73 25.3 M-1.63 77.56 C16.08 64.11, 27.78 43.79, 41.59 30.91 M-0.45 79.8 C15.03 61.8, 29.74 43.44, 40.23 31.5 M0.94 83.97 C14.85 66.53, 30.62 50.61, 40.65 39.41 M-0.14 85.61 C8.55 74.73, 18.33 63.2, 41.86 36.66 M-0.09 91.27 C9.78 78.22, 20.77 67.69, 41.04 45.37 M0.43 91.96 C15.04 75, 28.76 57.51, 40.75 43.43 M-0.8 98.3 C8.47 89.1, 18.46 78.77, 40.27 52.08 M0.19 97 C11.97 83.19, 25.84 67.02, 40.46 51.05 M0.37 103.06 C17.04 84.01, 33.38 66.22, 40.34 56.12 M-0.17 103.51 C14.25 86.41, 29.55 69.44, 42.37 56.83 M-0.99 111.59 C15.78 92.51, 30.93 74.46, 42.06 62.33 M0.09 110.33 C10.41 97.5, 21.4 87.39, 41.03 62.56 M1.58 117.43 C7.35 105.22, 17.1 95.13, 39.94 69.23 M-0.24 115.25 C8.99 105.98, 17.58 95.56, 41.14 68.34 M-1.47 122.3 C6.93 113.32, 15.92 103.69, 41.31 75.73 M0.75 122.16 C13.76 104.06, 29.08 88.7, 41.59 74.82 M1.2 127.56 C11.05 112.84, 24.66 98.15, 41.17 82.53 M0.04 127.98 C15.8 109.48, 30.95 91.77, 40.44 81.07 M2.13 135.11 C15.57 117.33, 31.63 97.83, 40.54 87.08 M0.03 134.04 C15.08 115.6, 30.7 99.53, 42.28 86.98 M1.44 138.36 C10.8 129.25, 18.72 115.08, 42.84 92.52 M-0.06 140.53 C12.37 127.72, 23.03 113.55, 40.6 92.68 M6.95 141.62 C12.7 130.89, 19.54 124.14, 42.77 99.12 M6.01 140.29 C16.28 127.78, 27.4 114.82, 41.74 99.43 M9.53 140.91 C21.26 128.31, 30.52 116.74, 39.36 104.96 M9.78 141.17 C21.59 127.69, 31.58 115.51, 41.98 104.82 M14.4 138.47 C20.59 131.03, 27.56 125.49, 40.91 109.35 M15.5 139 C23.73 130.6, 31.76 122.25, 41.45 111.61 M22.92 139.61 C27.95 131.77, 37.85 123.83, 41.3 117.8 M20.96 139.84 C27.35 132.17, 35.78 124.68, 40.55 117.18 M28.19 141.28 C31.62 134.86, 37.61 129.01, 42.36 124.95 M27.06 139.07 C30.24 135.96, 34.98 130.11, 41.31 123.95 M30.5 139.17 C34.52 137.17, 36.74 136.12, 40.97 128.22 M31.89 139.8 C33.68 138.17, 35.94 134.44, 42.13 129.14 M37.84 139.48 C38.63 138.32, 38.83 137.88, 41.88 134.73 M37.14 139.64 C38.28 138.94, 39.47 137.75, 41.18 135.35" stroke="#ced4da" stroke-width="0.5" fill="none"></path><path d="M0.62 -1.79 C14.46 -0.65, 26.55 1.46, 39.36 1.82 M41.02 1.52 C38.03 44.32, 41.44 92.21, 40.41 141.72 M38.09 138.23 C22.86 141.17, 8.15 138.16, 0.46 138.09 M-1.34 138.56 C-0.82 104.22, -1.78 67.68, -0.99 1.73" stroke="#000000" stroke-width="1.5" fill="none" stroke-dasharray="1.5 7"></path></g><g stroke-linecap="round" transform="translate(370 210) rotate(0 20 70)"><path d="M0 0 C0 0, 0 0, 0 0 M0 0 C0 0, 0 0, 0 0 M-0.8 5.82 C0.78 5.11, 1.76 3.5, 4.59 1.05 M-0.61 6.3 C1.65 4.2, 2.72 2.1, 4.69 0.44 M-1.31 13.5 C1.06 10.41, 3.86 6.02, 11.84 -1.62 M0.57 12.56 C2.92 8.11, 5.86 5.68, 10.98 -0.19 M-0.96 17.79 C4.43 16.41, 6.2 12.67, 17.51 -0.99 M0.54 19.27 C4.55 14.76, 8.66 8.92, 14.91 1.13 M-1.49 25.86 C6.68 18.65, 10.9 11.75, 22.68 -0.85 M0.87 23.19 C5.19 17.73, 9.51 11.89, 21.69 0.89 M-0.09 29.12 C9.29 18.96, 18.48 10.2, 27.63 1.14 M0.2 29.82 C7.27 23.77, 13.44 14.54, 25.88 -0.45 M0.87 37.6 C8 24.25, 17.01 16.14, 33.62 -1.29 M0.01 37.73 C11.79 22.58, 24.58 8.1, 30.95 -0.93 M-1.79 42.83 C11.12 27.44, 27.28 15.36, 38.67 0.98 M-0.11 42.26 C9.41 32.32, 18.9 19.99, 36.27 -0.66 M-1.33 50.47 C11.47 34.76, 25.11 19.18, 40.19 0.21 M-0.27 48.13 C13.47 33.84, 27.01 17.64, 42.18 0.94 M2.14 55.32 C17.28 36.84, 34.95 17.09, 43.02 7.38 M-0.54 55.53 C16.52 36.07, 32 18.48, 41.58 6.8 M1.17 61.65 C15.23 41.84, 30.03 25.18, 40.04 13.25 M-0.05 60.47 C16.55 43.48, 31.39 24.67, 40.9 14.19 M0.19 66.28 C11.03 52.72, 27.32 36.7, 39.6 21.16 M-1.19 66.83 C14.54 49.18, 30.46 31.27, 41.11 19.66 M-1.74 71.09 C8.34 63.96, 18.08 53.95, 42.87 24.37 M0.51 73.03 C16.05 54.43, 31.25 37.17, 41.46 25.35 M1.79 77.67 C8.3 68.89, 22.55 53.87, 42.54 30.63 M-0.38 79.57 C11.98 63.14, 25.54 49.75, 41.7 31.61 M1.79 84.28 C11.93 71.38, 26.03 58.27, 42.13 37.2 M-0.48 84.12 C15.61 68.77, 28.86 50.11, 41.79 37.02 M-0.64 92.24 C14.68 73.92, 28.96 54.63, 39.38 43.19 M0.35 90.9 C14.79 73.67, 30.18 57.08, 40.87 44.85 M-1.08 98.97 C7.41 87.77, 17.77 75.28, 41.59 48.63 M-0.3 97.75 C10.22 84.83, 21.17 73.28, 40.93 51.03 M0.97 104.53 C15.36 87.83, 27.93 69.97, 40.28 55 M-0.13 103.71 C9.01 94.04, 18.28 83.95, 41.07 56.83 M0.77 108.21 C11.1 96.14, 25.19 79.49, 39.97 63.85 M0 109.67 C16.52 90.71, 32.72 72.58, 40.65 62.42 M-0.36 115.59 C14.04 98.36, 29.95 81.29, 43.39 69.77 M-0.16 116.38 C16.43 97.73, 32.06 79.44, 42.03 67.97 M0.42 122.83 C10.58 108.89, 22.53 100.22, 40.98 74.82 M0.67 122.87 C7.92 111.82, 17.13 101.78, 40.52 75 M-1.29 127.77 C8.98 119.02, 17.78 107.81, 40.14 81.49 M-0.99 128.51 C7.52 119.33, 16.17 109.73, 41.07 81.45 M1.61 134.44 C13.09 115.25, 28.8 101.71, 41.95 87.31 M0.87 133.58 C12.22 118.79, 25.31 104.21, 41.52 87.29 M0.45 139.68 C16.29 120.9, 30.94 103.5, 39.92 93.41 M0.88 140.93 C15.3 123.19, 31.19 104.4, 40.75 93.14 M5.28 140.13 C18.21 122.98, 32.54 110.28, 43.2 99.58 M6.31 138.97 C14.78 129.95, 22.55 118.48, 42.43 98.31 M10.63 140.67 C20.75 131.76, 27.23 120.49, 40.11 104.58 M11.23 141.15 C16.95 132.71, 23.11 126.18, 41.93 105.19 M17.11 140.59 C23.83 132.12, 31.83 122.58, 41.34 113.21 M15.67 140.22 C24.63 130.51, 32.24 121.29, 40.1 111.3 M19.66 141.99 C28.74 132.32, 34.03 124.85, 42.73 116.83 M20.27 139.56 C25.22 133.61, 30.58 128.68, 41.4 115.94 M25.47 138.04 C30.97 133.72, 36.15 129.53, 41.93 124.02 M27.68 139.56 C31.76 133.83, 38.31 128.03, 41.13 123.75 M31.5 139.57 C34.1 136.34, 39.68 133.23, 40.22 129.37 M32.3 140.77 C35.13 136.65, 38.87 132.73, 42.05 129.56 M37.59 139.37 C38.16 139.04, 39.65 137.09, 41.41 135.72 M37.17 139.64 C38.35 138.79, 39.2 138.12, 41.23 135.19" stroke="#ced4da" stroke-width="0.5" fill="none"></path><path d="M0.69 -0.97 C16.41 -0.78, 27.68 1.41, 41.49 -0.66 M38.66 0.3 C39.42 27.3, 41.58 54.25, 39.4 139.03 M38.15 138.94 C28.76 138.78, 16.62 141.72, 0.37 140.99 M0.62 138.21 C1.64 90.89, -0.2 44.21, -0.64 1.82" stroke="#000000" stroke-width="1.5" fill="none" stroke-dasharray="1.5 7"></path></g><g transform="translate(130.75 250) rotate(0 102.5 12.5)"><text x="0" y="18" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#5c940d" text-anchor="start" style="white-space: pre;" direction="ltr">RUNTIME MODULES</text></g><g transform="translate(112.25 270) rotate(0 121 12.5)"><text x="0" y="18" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#5c940d" text-anchor="start" style="white-space: pre;" direction="ltr">(from FREME or custom)</text></g><g stroke-linecap="round" transform="translate(10 370) rotate(0 200 40)"><path d="M0 0 C0 0, 0 0, 0 0 M0 0 C0 0, 0 0, 0 0 M-0.22 6.11 C0.43 5.33, 2.43 3.27, 4.42 0.22 M-0.18 6.64 C1.29 4.84, 3.1 3.07, 5.27 0.24 M0.22 10.55 C2.08 7.31, 7.2 4.5, 11.19 0.09 M0.23 12.5 C3.07 8.65, 6.57 4.54, 9.97 -0.59 M0.22 18.45 C4.75 15.05, 7.11 6.95, 16.13 0.42 M0.76 17.93 C3.97 13.28, 8.24 8.86, 15.71 0.24 M-1.21 24.15 C6.81 18.14, 11.32 11.44, 22.55 1.49 M0.83 24.67 C5.84 18.88, 11.18 12.92, 20.3 0.15 M-0.38 30.45 C7.19 21.65, 16.89 10.97, 25.99 2.23 M0.79 30.44 C8.95 19.25, 19.22 9.59, 26.87 1.14 M-1.72 37.02 C9.31 24.86, 19.62 10.44, 30.58 0.11 M-0.34 36.67 C6.45 27.05, 15.63 19.44, 32.47 0.56 M0.94 40.63 C10.69 29.81, 18.3 18.4, 38.65 1.54 M-0.64 43.35 C10.78 31.04, 20.34 18.52, 37.83 0.37 M1.14 49.74 C13.09 32.89, 23.07 21.95, 40.64 -1.89 M-0.1 48.52 C11.89 33.81, 25.17 19.74, 42.75 -0.53 M1.03 53.48 C19.34 32.8, 35.48 14.36, 48.56 0.97 M0.1 55.44 C13.25 39, 24.64 25.26, 48.02 1.02 M0.82 60.06 C15.06 40.96, 34.76 25.08, 53.92 1.11 M-0.48 61.88 C20.66 35.88, 42.76 13.2, 52.82 -1.16 M0.05 65.76 C20.35 43.28, 40.95 17.09, 57.16 -0.31 M-0.78 67.24 C19.81 42.59, 42.69 18.84, 58.63 0.67 M-1.65 73.52 C13.19 55.39, 29.28 40.01, 65.6 0.3 M0.9 72.13 C17.03 52.72, 36.28 31.31, 64.64 0.61 M-1.89 77.51 C24.95 51.58, 45.52 26.25, 66.86 -0.64 M-0.84 78.99 C21.12 55.17, 41.76 31.77, 69.63 0.38 M2.4 83.15 C23.49 55.43, 44.66 30.76, 74.81 -1.64 M3.81 81.13 C28.72 53, 52.93 25.4, 73.42 -0.29 M9.18 81.5 C25.95 59.06, 47.59 39.55, 79.01 -1.78 M7.56 83.13 C36.94 50.06, 65.31 18.34, 78.74 -0.32 M15.2 83.52 C41.67 53.07, 65.44 19.82, 86.64 -0.46 M14.42 82.19 C38.82 53.78, 63.31 27.12, 84.65 -0.96 M16.73 82.38 C37.17 57.32, 57.18 35.7, 91.95 1 M17.84 82.43 C38.09 59.22, 59.19 36.47, 90.45 -0.39 M22.85 82.8 C42.39 63.16, 55.32 43.89, 94.18 -0.41 M24.52 81.22 C40.97 60.86, 59.51 42.98, 95.08 0.52 M30.86 81.31 C45.81 62.51, 62.2 41.07, 99 0.99 M29.3 81.6 C56.89 52.32, 85.73 20.55, 101.02 -0.32 M33.61 81.4 C53.21 61.47, 67.94 42.05, 104.46 -0.18 M34.91 82.3 C62.42 51.3, 89.68 18.84, 105.72 0.01 M38.21 81.96 C64.61 54.85, 87.19 31.18, 110.43 2.01 M40.16 82.35 C56.53 63.66, 72.32 45.12, 111.47 0.88 M46.71 83.99 C71.94 52.06, 100.9 20.13, 115.84 1.8 M45.11 82.72 C70.16 52.4, 96.41 22.32, 116.19 1.13 M49.42 83.53 C67 63.98, 80.94 44.99, 123.47 0.38 M49.87 81.34 C73.83 55.67, 96.94 27.27, 122.59 0.7 M54.35 82.06 C80.63 53.67, 106.41 23.04, 126.6 -1.61 M54.44 82.52 C77.34 59.02, 98.76 34.25, 126.37 1.23 M61.11 82.75 C88.73 48.69, 119.07 17.75, 132.35 -1.01 M60.17 81.24 C84.3 56.66, 105.21 30.59, 131.94 0.11 M66.37 80.84 C86.53 55.6, 112.77 30.89, 137.04 0.22 M65.64 82.5 C94.75 50.6, 123.31 17.68, 137.39 0.88 M69.83 83.89 C99.06 51.52, 121.67 23.43, 142.24 1.25 M72.07 81.69 C85.57 65.02, 98.96 48.49, 142.83 0.54 M75.58 82.13 C97.57 57.44, 120.83 30.94, 150.08 -1.28 M77.22 81.91 C102.87 52.97, 127.84 23.44, 147.33 -0.09 M82.12 80.74 C99.23 60.35, 119.08 40.89, 155.29 1.07 M82.82 82.33 C104.73 55.71, 126.23 30.91, 153.34 -1.05 M87.75 82.22 C103 66.72, 117.39 47.66, 160.59 0.84 M86.45 81.5 C116.44 49.24, 143.93 17.23, 159.55 1.12 M92.51 82.63 C108.46 63.39, 126.05 42.02, 164.62 0.95 M92.96 81.76 C117.48 54.05, 142.21 26.13, 165.34 0.74 M99.63 81.96 C116.46 61.69, 134 44.37, 169.43 -0.94 M98.37 82.5 C111.64 66.37, 127.82 48.23, 169.65 -0.7 M105.46 80.41 C123.83 57.41, 144.24 32.7, 176.33 -2.14 M103.28 82.58 C127.67 55.38, 151.05 26.38, 175.43 -1.18 M108.93 80.73 C126.65 62.44, 143.53 43.94, 181.42 1.4 M108.79 81.63 C135.5 49.92, 164.77 18.98, 180.5 0.21 M113.43 80.48 C130.05 61.13, 147.1 41.85, 187.46 1.35 M113.85 82.39 C133.99 57.7, 155.14 33.21, 186 0.58 M120.32 82.42 C147.37 51.72, 172.33 20.07, 191.35 1.39 M119.26 82.08 C135.64 62.29, 154.64 42.29, 191.25 -0.39 M122.82 82.76 C147.9 53.9, 168.1 31.08, 196.04 -0.53 M124.99 82.74 C148.94 55.23, 171.23 28.77, 196.2 -1.12 M131.47 81.49 C146.08 61.49, 164.39 45.8, 201.99 0.13 M130.14 82.55 C156.79 51.6, 183.16 20.45, 202.29 0.24 M136.03 82.69 C149.21 65.92, 163.3 46.9, 207.07 0.81 M136.3 82.18 C158.63 54.48, 182.76 28.58, 206.93 -0.91 M138.98 80.88 C161.31 55.58, 186.04 28.86, 210.05 0.21 M139.51 82.19 C160.22 59.75, 180.91 36.6, 212.31 0.82 M145.4 81.27 C173.55 52.26, 201.04 19.8, 218.5 0.51 M145.63 81.26 C169.59 55.25, 194.11 25.89, 217.88 0.05 M152.45 82.11 C167.28 64.74, 182.68 46.94, 224.24 -0.22 M150.25 81.66 C176.74 53.85, 200.19 25.75, 223.23 -0.95 M154.61 83.75 C181.78 53.92, 210.17 20.91, 227.27 -1.79 M155.45 82.25 C181.81 54.01, 204.76 26.94, 228.5 -0.93 M160.43 83.2 C186.65 49.65, 215.41 22.45, 231.22 -1.5 M160.98 82.1 C181.62 61.3, 200.65 37.32, 233.26 0.65 M167.25 82.68 C190.84 55.81, 212.87 29.92, 238.62 0.85 M166.46 83.14 C184.58 61.74, 202.8 42.37, 238.33 -0.27 M172.45 80.71 C193.77 60.45, 212.42 34.36, 245.63 -0.42 M173.11 82.14 C189.08 62.19, 206.46 43.02, 243.87 0.26 M176.92 84.39 C192.11 65.63, 207.38 44.84, 250.74 1.65 M176.67 83.17 C202.96 52.51, 227.48 22.14, 248.66 -0.19 M180.99 83.74 C210.03 50.07, 236.18 19.18, 256.07 -0.26 M183.8 82.87 C208.32 53, 234.61 23.69, 254.79 0.57 M187.86 83.99 C206.18 60.57, 221.82 42.69, 260.8 -1.4 M187 82.83 C208.75 59.24, 229.15 34.25, 259.59 0.83 M195.53 83.9 C217.88 55.6, 239.92 32.23, 263.1 -0.73 M192.98 82.89 C221 50.67, 250.87 16.08, 265.02 -0.79 M200.27 84.1 C215.45 61.03, 232.24 41.1, 269.6 1.49 M197.62 81.56 C214.75 64.48, 229.75 45.37, 269.61 0.07 M204.5 81.36 C222.91 58.94, 242.67 41.3, 277.28 -0.06 M204.34 81.27 C222.07 59.81, 242.44 38.85, 275.83 -0.18 M208.3 80.91 C226.21 59.39, 244.18 42.11, 278.94 -1.38 M209 82.81 C228.27 61.45, 247.91 39.67, 280 0.28 M213.29 82.79 C230.88 64.84, 248.23 46.31, 285.11 -0.91 M214.34 82.58 C237.78 54.84, 259.39 30.11, 285.74 -1 M218.09 82.12 C245.28 50.63, 274.22 19.09, 289.54 -1.16 M218.85 83.01 C242.17 56.77, 264.95 29.82, 291.8 0.67 M226.26 83.42 C250.82 53.18, 273.7 26.87, 295.07 -0.43 M225.21 81.85 C246.14 59.33, 264.43 37.24, 297.55 -0.64 M229.75 80.96 C251.76 57.63, 273.9 35.12, 303.12 1.53 M231.16 82.56 C256.83 51.54, 284.19 21.39, 302.81 -0.03 M236.77 81 C260.69 52.23, 287.43 24.77, 307.6 -0.22 M235.93 81.61 C255.49 60.13, 276.2 36.45, 307.33 0.48 M239.34 82.19 C264.9 52.52, 292.31 21.88, 312.36 -1.42 M241.17 82.87 C257.13 62.89, 272.6 45.01, 312.61 -0.62 M245.12 81.8 C274.61 51.85, 302.25 19.46, 317.13 -0.37 M247.28 82.89 C263.83 61.47, 282.48 40.59, 317.39 -0.07 M252.91 84.11 C274.83 56.06, 297.86 29.99, 322.92 0.43 M252.4 83.31 C277.42 53.01, 302.01 23.47, 323.52 -0.42 M256.57 82.64 C278.61 56.43, 299.55 34.21, 330.03 -1.43 M256.76 82.16 C282.48 54.72, 305.68 25.66, 329.34 0.25 M260.47 80.54 C288.62 51.87, 314.93 20.69, 335.41 -1.94 M261.63 82.24 C282.65 58.82, 302.76 37.13, 333.65 -0.26 M266.73 81.61 C293.76 53.8, 320.31 23.6, 338.65 1.6 M267.02 83.18 C285.4 62.51, 302.18 40.42, 339.04 -0.01 M273.99 82.85 C296.89 55.45, 318.22 28.95, 343.41 0.95 M273.91 82.02 C299.89 51.28, 325.04 21.04, 343.86 0.51 M278.11 81.07 C292.58 64.63, 308 46.29, 350.68 1.97 M277.41 82.89 C300.4 54.81, 323.43 28.84, 348.94 -0.58 M285.42 81.92 C299.43 63.32, 312.35 47, 355.49 -0.85 M283.54 81.98 C299.46 64.18, 314.5 47.46, 354.79 -0.97 M290.23 82.2 C308.68 60.33, 329.58 37.3, 361.69 0.22 M289.11 83 C307.45 60.39, 326.95 38.7, 359.76 0.52 M292.68 82.17 C315.25 58.53, 338.78 34.11, 365.17 1.2 M295.11 81.43 C314.75 57.93, 337.56 31.9, 365.83 -0.07 M300.25 83.91 C325.1 54.62, 348.49 25.21, 369.31 -1.31 M298.69 81.94 C315.1 63.88, 331.74 43.99, 371.49 0.56 M305.66 83.56 C325.66 56.11, 348.86 31.54, 376.94 0.2 M304.46 82.67 C327.1 55.48, 350.81 28.84, 376.15 0.31 M308.29 81.68 C334.96 53.82, 360.51 23.53, 381.76 0.48 M310.5 82.64 C331.43 56.39, 354.32 31.71, 381.05 0 M316.19 83.56 C336.74 57.16, 358.64 30.68, 388.27 -0.22 M315.7 82 C334 61.5, 351.82 40.41, 387.68 0.75 M319.44 81.52 C343.27 58.04, 364.23 32.36, 391.23 0.23 M319.68 83.49 C338.62 61.79, 357.63 41.06, 392.64 0.3 M328.11 83.2 C345.54 60.71, 367.26 33.98, 399.58 0.1 M326.2 82.68 C346.43 59.17, 365.34 35.48, 398.1 0.34 M329.74 81.94 C352.52 59.56, 369.38 37, 402.57 3.63 M331.08 83.39 C356.63 53.79, 380.71 27, 401.38 2.4 M335.21 81.01 C362.38 51.08, 386.24 20.69, 401.72 7.37 M337.6 81.97 C354.38 61.16, 373.19 39.77, 401.33 7.18 M340.23 84.01 C353.75 67.41, 365.97 53.78, 402.06 15.42 M342.37 82.7 C362.75 60.57, 381.87 37.2, 401.13 13.8 M347.24 83.08 C360.62 64.64, 375.69 49.12, 401.67 17.81 M346.8 82.1 C365.93 61.51, 382.71 40.66, 402.21 19.29 M350.9 81.32 C367.45 63.64, 382.05 47.91, 402.98 26.28 M352.96 82.29 C368 64.88, 381.71 48.69, 401.05 26.34 M359.94 81.01 C368.09 69.05, 381.17 54.53, 400.06 33.38 M358.99 81.3 C368.32 72.45, 375.89 60.56, 401 31.44 M362.7 81.99 C374.44 68.89, 387.46 55.07, 401.39 36.97 M363.02 82.48 C379.11 65.34, 393.83 47.72, 402.4 37.42 M369 81.93 C377.94 71.85, 387.52 59.26, 402.51 42.86 M368.59 82.78 C378.26 70.11, 388.41 59.3, 401.8 45.11 M375.58 82.68 C384.97 69.77, 394.88 59.21, 403.35 49.79 M374.51 82.12 C382.87 72.74, 390.83 62.56, 402.69 50.4 M380.08 82.53 C383.48 75.34, 388.98 70.58, 401.63 55.82 M378.3 81.72 C386.05 75.2, 390.86 68.75, 401.44 55.58 M382.44 82.58 C389.68 74.25, 395.06 70.3, 402.19 63.32 M384.12 81.5 C391.24 74.58, 396.35 68.67, 402.04 62.42 M390.13 83.71 C394.41 77.01, 397.41 71.97, 401.67 69.52 M389.44 83.05 C394.53 76.96, 399.15 71.38, 401.26 67.83 M395.02 81.83 C397.51 79.84, 400.02 76.14, 402.34 75.05 M394.62 81.84 C396.04 80.4, 398.48 78.67, 401.13 74.51" stroke="#ced4da" stroke-width="0.5" fill="none"></path><path d="M0.26 -0.3 C86.87 -1.12, 171.75 -0.77, 400.48 -0.93 M400.8 -0.3 C400.85 23.47, 401.9 47.58, 398.34 78.21 M399.98 79.07 C266.19 80.47, 130.59 81.23, -0.32 80.6 M1.32 79.03 C0 59.64, 1.73 34.31, -0.91 -1.81" stroke="#000000" stroke-width="1.5" fill="none" stroke-dasharray="1.5 7"></path></g><g transform="translate(128.5 390) rotate(0 88 12.5)"><text x="0" y="18" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">SYSTEM MODULE</text></g><g transform="translate(82 410) rotate(0 134.5 12.5)"><text x="0" y="18" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">(Core Types, Utils, Events)</text></g><g stroke-linecap="round" transform="translate(430 10) rotate(0 60 220)"><path d="M0 0 C0 0, 0 0, 0 0 M0 0 C0 0, 0 0, 0 0 M0.05 5.98 C1.2 5.06, 2.64 4.21, 5.66 0.02 M-0.6 6.23 C2.07 4.28, 3.82 1.95, 4.75 0.75 M-0.36 11.62 C3.42 7.69, 9.4 4.39, 10.5 0.82 M-0.36 11.92 C3.36 7.52, 7.3 4.73, 11.18 -0.75 M0.95 18.81 C5.72 10.26, 13 5.24, 14.6 1.54 M-0.98 18.74 C4.71 14.07, 9.47 7.55, 15.78 0.75 M1.1 22.53 C6.87 16.51, 16.07 5.5, 21.65 -1.48 M0.96 23.64 C6.77 15.93, 12.91 8.32, 20.52 -0.67 M-0.39 28.72 C11.23 20.55, 19.89 8.23, 27.75 1 M0.47 30.9 C9.03 20.08, 19.11 9.61, 25.28 0.06 M-1.21 37.19 C6.29 25.5, 15.86 19.33, 32.52 1.82 M0.01 36.12 C7.37 29.09, 13.89 19.52, 32.17 0.78 M-1.69 42.1 C7.69 33.65, 14.11 25.02, 36.54 0.03 M-0.41 42.75 C9.03 33.05, 18.06 23.57, 37.6 -0.66 M-0.05 50.53 C17.52 29.81, 34.09 11.78, 43.24 1.1 M-0.11 49.72 C12.61 34.47, 24.37 21.99, 41.71 -0.14 M0.84 55.5 C17.69 35.64, 36.49 14.17, 48.37 -0.68 M1.04 54.53 C15.85 37.17, 32.27 18.34, 48.21 0.15 M-1.05 62.36 C12.45 46.68, 22.32 32.99, 53.93 -1.95 M0.56 60.57 C16.13 42.62, 34.1 22.14, 53.86 -0.01 M-1.69 65.76 C22.49 44.04, 41.24 16.06, 57.61 0.08 M0.06 68.24 C12.03 53.02, 24.34 40.43, 58.33 0.53 M1.78 72.27 C18.53 52.2, 35.85 32.66, 62.71 -0.09 M0.46 72.51 C21.33 49.97, 40.66 25.77, 63.61 0.59 M1.75 80.96 C21.43 54.16, 44.24 30.51, 67.6 2.08 M0.14 79.59 C23.55 52.83, 47.15 24.7, 67.94 0.02 M-0.59 86.4 C25.79 52.34, 55.36 24.72, 75.65 1.45 M0.75 84.9 C23.97 56.22, 48.73 28.8, 75.2 0.05 M0.21 91.01 C29.42 57.03, 61.09 23.25, 80.65 1.58 M0.06 91.54 C17.66 70.8, 35.58 50.12, 78.82 0.63 M1.12 96.14 C29.67 62.84, 61.48 26.12, 84.78 -1.04 M-0.27 98.31 C28.37 64.68, 56.46 34.14, 85.16 -1.24 M1.35 102.58 C27.19 72.9, 51.34 39.72, 92.02 1.39 M-0.49 104.3 C21.03 79.37, 39.91 57.03, 89.47 -0.15 M-0.89 109.18 C35.55 64.8, 74.58 22.8, 94.11 0.26 M0.41 110.53 C34.84 71.2, 68.99 31.78, 95.25 0.06 M0.81 113.86 C35.79 78.91, 69.37 38.11, 99.97 0.87 M-0.53 115.02 C30.19 82.85, 59.21 48.5, 100.19 -0.34 M-1.41 119.98 C35.58 82.29, 71.95 37, 105.63 -1.28 M-0.37 122.13 C22.01 97.13, 42.67 72.03, 105.54 -0.67 M-0.47 129.35 C33.47 92.48, 62.67 54.53, 111.71 1.87 M0.51 127.64 C36 87.15, 72.13 43.73, 112.03 -0.46 M-1.59 132.8 C33.91 95.24, 63.89 58.75, 116.63 -0.02 M-0.39 134.37 C35.13 93.63, 70.21 55.24, 116.66 -0.37 M0.4 138.79 C25.55 108.41, 51.5 77.1, 120.75 -0.43 M0.46 140.78 C45.51 88.57, 92.85 34.32, 121.16 0.17 M0.37 144.41 C27.08 118.09, 51.58 91.14, 122.42 7.73 M0.37 145.02 C25.86 115.73, 51.39 86.71, 121.62 6.58 M-1.69 151.74 C24.97 124.45, 52.03 92.66, 121.07 13.47 M-0.6 153.33 C27.46 121.96, 54.78 90.57, 121.98 13.57 M-1.41 158.89 C45.95 106.83, 89.44 55.34, 119.55 19.19 M0.03 158.08 C46.55 103.76, 93.54 49.48, 121.89 18.71 M0.75 164.53 C26.78 135.41, 48.47 108.89, 119.97 26.46 M-0.62 164.4 C26.88 131.39, 54.18 99.56, 121.02 25.09 M0.13 170.55 C38.54 124.76, 76.16 81.08, 122.46 32.55 M0.43 171.77 C46.35 115.42, 95.23 58.74, 121.2 32.03 M1.21 175.02 C36.43 136.59, 71.42 95.08, 121.85 37.03 M0.7 177.09 C31.36 140.15, 63.79 105.25, 121.7 36.62 M-0.97 182.54 C31.17 147.24, 64.8 110.74, 120.97 42.81 M0.22 182.06 C33.52 146.45, 65.05 108.77, 121.91 42.82 M0.48 189.34 C34.7 151.44, 64.52 116.88, 120.11 50.47 M0.25 190.24 C44.48 136.47, 89.61 85.62, 121.27 48.81 M0.99 193.76 C34.2 152.44, 68.28 115.11, 122.23 55.3 M0.47 194.66 C42.57 143.75, 87.29 93.29, 120.01 56.07 M-0.71 200.91 C36.92 157.86, 76.06 117.51, 121.77 61.85 M-0.83 200.41 C39.77 154.83, 80.17 108, 120.35 61.01 M0.66 205.64 C41.4 156.06, 87.37 105.14, 119.29 68.56 M1.02 206.75 C40.82 161.96, 80.04 114.33, 120.71 67.53 M0.37 212.93 C31.51 177.06, 61.78 142.97, 120.83 74.74 M-0.09 213.41 C35.24 172.23, 70.79 130.46, 121.38 73.1 M-1.02 220.9 C44.59 172.36, 84.8 123.8, 121.24 80.96 M-1.19 220.74 C37.86 175.57, 77.17 130.34, 121.52 79.16 M1.06 225.39 C37.95 178.82, 74.8 134.66, 119.59 88.04 M-0.17 226.26 C39.87 181.07, 80.61 135.6, 120.87 87.17 M-0.12 230.54 C42.03 182.7, 81.57 137.31, 121.77 93.65 M-0.49 232.29 C44.95 180.7, 88.98 129.51, 121.9 91.18 M-1.3 237.8 C23.77 209.82, 50.43 182.19, 121.3 98.88 M-0.46 236.99 C32.84 199.16, 66.64 159.33, 121.07 99.52 M0.23 244.33 C42.38 193.14, 85.93 144.96, 120.54 105.29 M0.62 243.78 C27.22 212.45, 55.23 181.83, 121.53 103.78 M-0.09 251.97 C44.91 200.07, 90.96 145.89, 120.2 109.21 M-0.72 250.36 C38.94 205.98, 76.67 162.68, 121.04 110.24 M-1.42 257.85 C27.15 221.01, 58.53 188.98, 120.54 118.83 M1.02 256.34 C38.39 210.6, 78.06 166.5, 120.73 116.89 M1.26 262.95 C46.47 209.22, 96.78 155.63, 122.16 120.74 M0.52 261.85 C45.38 210.09, 89.73 158.65, 122.26 123.1 M0.41 267.17 C45.07 214.72, 92.53 163.72, 120.67 128.51 M-0.63 267.58 C24.84 237.32, 51.1 207.65, 120.04 128.16 M-0.66 273.62 C45.15 221.62, 90.94 172.39, 121.36 134.48 M1.02 275.18 C37.25 230.8, 74.21 187.36, 120.31 136.14 M-0.47 279.69 C45.28 228.37, 88.68 176.15, 121.86 142.34 M0.46 281.33 C39.44 235.81, 80.25 189.33, 121.32 140.49 M-0.67 285.61 C37.66 244.41, 79.16 199.43, 120.92 145.7 M0.47 286.32 C45.34 233.49, 92.41 179.4, 120.52 147.62 M-1.32 293.04 C39.64 245.5, 78.5 201.16, 119.64 153.12 M0.78 293.67 C23.41 263.77, 49.9 233.44, 121.32 154.01 M0.4 298.08 C27.4 268.64, 51.21 239.08, 122.95 158.46 M0.82 299.21 C41.82 251.19, 84.24 202.05, 120.99 159.54 M-0.39 305.66 C27.7 271.52, 57.82 237.93, 120.87 165.93 M-0.36 304.41 C34.37 264.44, 69.49 225.31, 121.41 166.59 M1.03 310.51 C36.61 268.64, 74.58 225.02, 121.21 172.61 M0.64 311.52 C39.07 265.16, 79.84 219.46, 120.27 171.63 M-0.32 315.78 C42.43 267.18, 84.67 218.23, 120.34 177.11 M0.77 317.09 C37.68 275.53, 75.01 231.7, 121.22 177.82 M-0.37 321.61 C29.49 290.79, 59.79 257.3, 122.41 182.52 M0.72 322.66 C47.63 269.86, 96.16 214.29, 121.66 183.09 M1.24 328.14 C46.51 272.99, 93.96 220.96, 122.83 188.81 M0.66 328.75 C33.62 289.72, 66.56 250.8, 121.63 190.53 M0.63 335.9 C38.26 291.32, 76.64 250.22, 119.56 195.84 M-0.85 335.28 C46.73 284.6, 90.29 232.22, 121.57 196.4 M0.93 340.78 C44.48 289.35, 95.3 234.01, 119.77 203.95 M-1.1 341.64 C43.38 289.68, 86.87 240.17, 120.49 202.8 M-0.95 346.67 C24.91 319.15, 50.59 288.14, 120.63 208.51 M0.95 347.26 C24.32 316.62, 50.07 286.92, 121.16 209.22 M-1.66 351.99 C51.28 296.54, 96.19 241.33, 122.54 212.98 M-0.16 353.25 C41.09 304.25, 84.03 253.74, 120.87 213.67 M1.91 358.75 C36.79 318.34, 74.67 276.14, 122.59 219.25 M0.4 359.46 C33.06 322.05, 64.87 287.06, 121.36 219.98 M-1.94 366.88 C27.14 336.4, 49.88 304.85, 119.83 228.65 M-0.39 365.83 C27.38 335.95, 52.51 306.4, 121.49 226.93 M1.54 371.26 C39.99 326.88, 78.8 282.37, 120.02 232.55 M-0.62 371.49 C41.71 323.57, 83.55 273.42, 120.54 231.83 M-1.7 376.32 C31.52 340.94, 62.03 308.03, 122.28 236.95 M-0.25 378.33 C42.25 330.94, 84.21 282.44, 120.29 239.1 M0.19 384.58 C34.2 343.46, 68.2 305.03, 122.47 245.45 M-0.97 383.66 C39.08 341.94, 77.66 296.44, 120.84 244.4 M0.24 391.71 C29.56 356.84, 62.92 318.43, 120.53 251.68 M-0.41 390.21 C33.9 349.47, 71.27 307.74, 121.49 250.94 M0.11 394.87 C42.86 342.91, 86.69 292.33, 119.82 258.26 M0.76 396.56 C36.13 353.97, 71 311, 120.49 257.58 M1.37 403.75 C45.01 347.9, 90.4 295.89, 121.83 261.43 M0.57 403.16 C29.39 364.8, 60.87 329.22, 121.24 263.43 M0.2 409.1 C30.02 369.91, 60.78 333.73, 122.88 269.57 M-0.08 408.98 C26.75 376.31, 55.72 341.96, 121.48 269.46 M0.13 413.38 C38.99 370.55, 78.8 326.55, 119.41 276.29 M-0.17 415.08 C46.46 361.45, 93.7 307.17, 121.99 275.55 M0.65 420.49 C25.36 391.7, 48.81 364.61, 121.44 282.74 M-0.54 420.46 C42.93 370.38, 87.29 320.41, 120.57 281.88 M1.95 426.37 C23.58 398.06, 50.54 372.4, 121.81 286.67 M-0.65 427.63 C30.78 388.71, 63.32 351.79, 120.74 288.01 M-0.4 431.56 C38.85 388.76, 75.36 345.95, 120.94 292.95 M-0.43 433.26 C36.59 392.06, 71.43 350.54, 120.96 294.43 M-0.12 440.25 C33.67 402.11, 67.37 362.95, 121.51 298.22 M-0.5 438.2 C30.34 404.08, 60.28 369.04, 120.77 299.24 M1.8 441.59 C36.02 405.72, 69.89 365.28, 119.78 305.87 M3.35 442.88 C47.17 389.04, 93.08 336.05, 120.6 306.16 M7.16 442.77 C31.29 416.33, 55.89 386.71, 120.99 310.4 M6.65 443.37 C43.25 399.2, 81.12 358.06, 120.64 312.92 M11.26 441.6 C45.23 406.01, 78.27 370.88, 122.67 316.47 M12.46 442.02 C50.15 401.08, 86.85 358.15, 120.58 317.36 M16.86 443.05 C37.77 417.67, 57.19 394.32, 121.35 323.45 M17.78 443.01 C42.22 413.16, 67.64 386.49, 121.83 323.97 M24.84 443.28 C53.56 407.96, 79.61 374.79, 121.26 332 M23.69 442.45 C45.12 419.59, 65.04 397.47, 120.69 329.56 M27.65 444 C52.82 414.94, 80.16 382.5, 119.66 337.12 M29.28 441.73 C61.83 403.84, 95.48 364.22, 121.1 336.28 M35.23 440.75 C59.24 412.37, 86.83 379.97, 120.21 342.49 M34.99 441.88 C69.68 402.35, 103.7 362.77, 120.54 343.03 M40.47 441.26 C55.36 422.41, 73.25 404.66, 122.31 349.47 M38.59 442.88 C60.89 418.48, 80.89 395.21, 120.79 348.49 M45.1 441.69 C72.17 410.5, 98.8 381.99, 121.78 355.74 M44.55 442.01 C62.92 420.03, 82.42 400.9, 121.14 354.75 M49.21 441.03 C74.55 414.52, 99.7 385.59, 121.61 359.82 M49.94 443.24 C70.88 418.57, 90.85 395.48, 120.51 359.94 M57.09 441.3 C76.96 421.05, 93.87 400.36, 123.22 368.11 M55.85 441.51 C72.09 421.78, 89.46 402.56, 121.28 366.22 M58.74 442.01 C73.13 429.6, 84.03 412.62, 121.9 371.27 M61.29 442.12 C86.21 415.86, 110.51 386.72, 120.14 372.24 M67.79 440.32 C85.52 416.58, 108.15 394.12, 122.09 379.22 M66.61 441.04 C80.32 426.72, 95.67 408.82, 119.87 379.16 M70.91 441.46 C87.21 423.07, 105.24 402.23, 120.11 385.72 M71.39 442.3 C90.61 420.21, 109.34 400.45, 121.5 385.24 M77.78 443 C94.71 421.53, 110.38 403.55, 120.88 390.97 M77.84 442.26 C89.98 427.2, 103.55 413.12, 121.53 391.49 M82.51 441.16 C98.12 423.01, 111.8 407.86, 123.17 398.59 M82.74 443.03 C95.61 426.17, 108.91 411.1, 120.66 396.73 M89.6 443.14 C101.53 427.94, 113.67 412.77, 121.08 402.04 M86.8 442.78 C96.04 433.42, 105 422.61, 121.7 402.92 M91.33 441.42 C99.22 436.35, 105.93 428.98, 121.3 409.58 M92.62 443.07 C100.84 434.07, 108.35 424.95, 120.31 410.28 M97.75 442.07 C104.9 434.83, 114.78 424.27, 119.81 414.9 M98.03 441.22 C103.76 436.02, 109.86 427.98, 120.22 414.86 M102.1 443.08 C106.33 435.83, 112.13 428.75, 120.66 421.67 M104.06 441.64 C108.72 435.68, 115.22 429.51, 121.37 421.16 M110.07 443.4 C109.97 440.37, 114.17 434.15, 123.17 426.56 M107.65 442.93 C111.58 436.86, 116.72 432.5, 121.71 428.21 M113.13 441.8 C114.59 439.44, 115.82 437.79, 121.26 434.82 M113.31 441.77 C115.14 440.62, 117.11 438.61, 121.61 433.88" stroke="#ced4da" stroke-width="0.5" fill="none"></path><path d="M-0.61 0.79 C37.44 -1.45, 74.9 0.79, 120.94 0.4 M119.9 0.27 C119.89 118.78, 120.97 236.69, 119.39 439.22 M120.84 438.54 C90.6 440.53, 58.56 438.55, -1.88 440.87 M-0.65 440.99 C-0.22 299.04, -0.78 157.55, -0.13 -0.16" stroke="#000000" stroke-width="1.5" fill="none" stroke-dasharray="1.5 7"></path></g><g transform="translate(441.5 212) rotate(0 48.5 25)"><text x="48.5" y="18" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr">SUPPORT</text><text x="48.5" y="43" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr">LIBRARY</text></g></svg></pre>
<div id="admonition-runtime-库把所有-pallets-组件整合起来" class="admonition info">
<div class="admonition-title">
<p>Runtime 库把所有 pallets 组件整合起来。 </p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_runtime.html#admonition-runtime-库把所有-pallets-组件整合起来"></a></p>
</div>
<div>
<p>它可用于定义和配置 runtime 里所含的模块 ( pallet )，
使模块之间得以联动来实现最终 runtime 的整体功能。 
当 runtime 接收到外部调用消息时，它会通过 Executive 模块
来将这些调用分派给相应的 pallets 进行处理。</p>
</div>
</div>
<div style="break-before: page; page-break-before: always;"></div><h1 id="substrate备忘录"><a class="header" href="#substrate备忘录">Substrate备忘录📕</a></h1>
<!--ts-->
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_ref.html#substrate%E5%A4%87%E5%BF%98%E5%BD%95">Substrate备忘录<g-emoji class="g-emoji" alias="closed_book" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4d5.png">📕</g-emoji>
</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_ref.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a></li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:57 UTC 2022 -->
<!--te-->
<h1 id="参考资源-47"><a class="header" href="#参考资源-47">参考资源</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="substrate市场交流"><a class="header" href="#substrate市场交流">Substrate市场交流</a></h1>
<div id="admonition-explore-more" class="admonition tip">
<div class="admonition-title">
<p>Explore More</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#admonition-explore-more"></a></p>
</div>
<div>
<p>这里可以看作是自由竞技分享场，从Runtimes、Pallets和Projects三个方面学习和分享
<a href="https://marketplace.substrate.io/">Home | Substrate_ Marketplace</a></p>
</div>
</div>
<!--ts-->
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#substrate%E5%B8%82%E5%9C%BA%E4%BA%A4%E6%B5%81">Substrate市场交流</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#runtimes">Runtimes</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#pallets">Pallets</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#projects">Projects</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#case-study">Case Study</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#acala-network-defi">Acala Network: Defi</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#case-study-1">Case Study</a></li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#astar-network-smart-contracts">Astar Network: Smart Contracts</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#case-study-2">Case Study</a></li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#equilibrium">Equilibrium</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#case-study-3">Case Study</a></li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#moonbeam-smart-contracts">Moonbeam: Smart Contracts</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#case-study-4">Case Study</a></li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#polkadex-defi-infrastructure">Polkadex: DeFi, Infrastructure</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#case-study-5">Case Study</a></li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#unique-network-nfts">Unique Network: NFTs</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#case-study-6">Case Study</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#%E5%88%86%E7%B1%BB%E4%BB%8B%E7%BB%8D-144">分类介绍: 144</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#defi-35">DeFi: 35</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#wallet-16">Wallet: 16</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#identity-14">Identity: 14</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#social-5">Social: 5</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#smart-contracts-10">Smart Contracts: 10</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#file-storage-5">File Storage: 5</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#bluzelle">Bluzelle</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#cere">Cere</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#crust-network">Crust Network</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#datdot">DatDot</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#equilibriumco">Equilibrium.co</a></li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#iot-4">IoT: 4</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#data-highway">Data Highway</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#nodle">Nodle</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#origin-trail">Origin Trail</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#robonomicsairalabs">Robonomics(Airalabs)</a></li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#gaming-7">Gaming: 7</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#ajuna-network">Ajuna Network</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#bitcountry">Bit.Country</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#celer-network">Celer Network</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#everdream-soft">Everdream Soft</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#gamedao">GameDAO</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#sensorium-corporation">Sensorium Corporation</a></li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#bridge-4">Bridge: 4</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#infrastructure-39">Infrastructure: 39</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#relay-chain-2">Relay Chain: 2</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#nfts-1">NFTs: 1</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#unique-network">Unique Network</a></li>
</ul>
</li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a></li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:56 UTC 2022 -->
<!--te-->
<div id="admonition-他山之石可以攻玉" class="admonition tip">
<div class="admonition-title">
<p>他山之石，可以攻玉</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#admonition-他山之石可以攻玉"></a></p>
</div>
<div>
<p>都知道Substrate框架开发区块链项目功能强大，那么这里可以先看看Substrate至少能做到什么程度</p>
</div>
</div>
<h1 id="runtimes"><a class="header" href="#runtimes">Runtimes</a></h1>
<ul>
<li><a href="https://marketplace.substrate.io/runtimes/">Runtimes | Substrate_ Marketplace</a></li>
</ul>
<h1 id="pallets"><a class="header" href="#pallets">Pallets</a></h1>
<ul>
<li><a href="https://marketplace.substrate.io/pallets/">Pallets | Substrate_ Marketplace</a></li>
</ul>
<h1 id="projects"><a class="header" href="#projects">Projects</a></h1>
<ul>
<li><a href="https://marketplace.substrate.io/projects/">Projects | Substrate_ Marketplace</a></li>
</ul>
<h2 id="case-study"><a class="header" href="#case-study">Case Study</a></h2>
<p>这里主要重点看几个案例学习项目。</p>
<h3 id="acala-network-defi"><a class="header" href="#acala-network-defi">Acala Network: Defi</a></h3>
<img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/Acala%20Network.png" alt="img" style="zoom: 25%;" />
<p>Acala is a decentralized stablecoin platform that powers cross-blockchain open finance applications.</p>
<h4 id="case-study-1"><a class="header" href="#case-study-1">Case Study</a></h4>
<p><a href="https://substrate.io/ecosystem/projects/case-studies/acala/">Acala Network Case Study | Substrate_</a></p>
<h3 id="astar-network-smart-contracts"><a class="header" href="#astar-network-smart-contracts">Astar Network: Smart Contracts</a></h3>
<img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/Astar%20Network.png" alt="img" style="zoom:150%;" />
<p>Astar Network is a scaling dapps platform on Substrate compatible with Ethereum Virtual Machine (EVM) and connected to
Polkadot.</p>
<h4 id="case-study-2"><a class="header" href="#case-study-2">Case Study</a></h4>
<p><a href="https://substrate.io/ecosystem/projects/case-studies/astar/">Astar Network Case Study | Substrate_</a></p>
<h3 id="equilibrium"><a class="header" href="#equilibrium">Equilibrium</a></h3>
<img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/equilibrium.png" alt="img" style="zoom:65%;" />
<p>Equilibrium introduces a cross-chain money market that combines pooled lending with synthetic asset generation and
trading</p>
<h4 id="case-study-3"><a class="header" href="#case-study-3">Case Study</a></h4>
<p><a href="https://substrate.io/ecosystem/projects/case-studies/equilibrium/">Equilibrium Case Study | Substrate_</a></p>
<h3 id="moonbeam-smart-contracts"><a class="header" href="#moonbeam-smart-contracts">Moonbeam: Smart Contracts</a></h3>
<img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/Moonbeam.png" alt="img" style="zoom:150%;" />
<p>Decentralized and permissionless, Moonbeam provides an Ethereum-compatible smart contract platform that makes it easy to
build natively interoperable applications.</p>
<h4 id="case-study-4"><a class="header" href="#case-study-4">Case Study</a></h4>
<p><a href="https://substrate.io/ecosystem/projects/case-studies/moonbeam/">Moonbeam Case Study | Substrate_</a></p>
<h3 id="polkadex-defi-infrastructure"><a class="header" href="#polkadex-defi-infrastructure">Polkadex: DeFi, Infrastructure</a></h3>
<img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/Polkadex.png" alt="img" style="zoom:67%;" />
<p>Polkadex is a Open Source, Decentralized Exchange Platform that features feeless trades, Market Order, AMM and full
focus on UI.</p>
<h4 id="case-study-5"><a class="header" href="#case-study-5">Case Study</a></h4>
<p><a href="https://substrate.io/ecosystem/projects/case-studies/polkadex/">Polkadex Case Study | Substrate_</a></p>
<h3 id="unique-network-nfts"><a class="header" href="#unique-network-nfts">Unique Network: NFTs</a></h3>
<img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/Unique%20Network-6253646.png" alt="img" style="zoom:400%;" />
<p>Unique Network is an infrastructure for the next generation NFTs, offering developers independence from network-wide
transaction fees and upgrades.</p>
<h4 id="case-study-6"><a class="header" href="#case-study-6">Case Study</a></h4>
<p><a href="https://substrate.io/ecosystem/projects/case-studies/unique/">Unique Network Case Study | Substrate_</a></p>
<h2 id="分类介绍-144"><a class="header" href="#分类介绍-144">分类介绍: 144</a></h2>
<p>这里主要学习网站上面的分类方法，首先分成DeFi、Wallet、Identity、Social、Smart Contracts、File Storage、IoT、Gaming、Bridge、Infrastructure、Relay
Chain、NFTs这些类别，然后再加上是否企业级别的标记.</p>
<div id="admonition-关于案例学习" class="admonition tip">
<div class="admonition-title">
<p>关于案例学习</p>
<p><a class="admonition-anchor-link" href="layer5_ecosystem/7_business/blockchain/substrate/substrate_marketplace.html#admonition-关于案例学习"></a></p>
</div>
<div>
<p>这里的项目有些直接提供案例学习，也会有相应标出</p>
</div>
</div>
<h2 id="defi-35"><a class="header" href="#defi-35">DeFi: 35</a></h2>
<h2 id="wallet-16"><a class="header" href="#wallet-16">Wallet: 16</a></h2>
<h2 id="identity-14"><a class="header" href="#identity-14">Identity: 14</a></h2>
<h2 id="social-5"><a class="header" href="#social-5">Social: 5</a></h2>
<h2 id="smart-contracts-10"><a class="header" href="#smart-contracts-10">Smart Contracts: 10</a></h2>
<h2 id="file-storage-5"><a class="header" href="#file-storage-5">File Storage: 5</a></h2>
<h3 id="bluzelle"><a class="header" href="#bluzelle">Bluzelle</a></h3>
<img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/Bluzelle.png" alt="img" style="zoom:50%;" />
<p>The Bluzelle project enables dapps to store their data in a place that is both decentralized and mutable</p>
<h3 id="cere"><a class="header" href="#cere">Cere</a></h3>
<img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/cere.svg" alt="img" style="zoom:50%;" />
<p>Delivers fast-tracked consumer enterprise adoption through decentralized data clouds, data interoperability and SaaS
DeFi.</p>
<h3 id="crust-network"><a class="header" href="#crust-network">Crust Network</a></h3>
<img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/crust%20network.png" alt="img" style="zoom:67%;" />
<p>Crust Network implements a decentralized cloud blockchain based on Polkadot. It is designed to build a decentralized
cloud ecosystem that values data privacy and ownership.</p>
<h3 id="datdot"><a class="header" href="#datdot">DatDot</a></h3>
<img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/DatDot.png" alt="img" style="zoom:40%;" />
<p>DatDot is a Distributed (peer-to-peer ) File Hosting Network, leveraging on the Dat Protocol and Substrate.</p>
<h3 id="equilibriumco"><a class="header" href="#equilibriumco">Equilibrium.co</a></h3>
<img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/equilibrium.co.svg" alt="img" style="zoom: 200%;" />
<p>Equillibrium is building a Rust-based implementation of the InterPlanetary File System (IPFS) Protocol.</p>
<h2 id="iot-4"><a class="header" href="#iot-4">IoT: 4</a></h2>
<h3 id="data-highway"><a class="header" href="#data-highway">Data Highway</a></h3>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/data%20highway.png" alt="img" /></p>
<p>DataHighway is a DAO that incentivizes the community to run a sophisticated IoT parachain based on Polkadot using the
DHX token.</p>
<h3 id="nodle"><a class="header" href="#nodle">Nodle</a></h3>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/Nodle.png" alt="img" /></p>
<p>Nodle is the world’s largest ecosystem of connected devices, providing infrastructure, software and access to data for
the Internet of Things.</p>
<h3 id="origin-trail"><a class="header" href="#origin-trail">Origin Trail</a></h3>
<img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/Origin%20Trail.svg" alt="img" style="zoom: 400%;" />
<p>OriginTrail is an ecosystem dedicated to making global supply chains work together by enabling a universal,
collaborative and trusted data exchange.</p>
<h3 id="robonomicsairalabs"><a class="header" href="#robonomicsairalabs">Robonomics(Airalabs)</a></h3>
<img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/robonomics%20(airalabs).png" alt="img" style="zoom:67%;" />
<p>Robonomics Network is a set of open-source packages for Robotics, Smart Cities and Industry 4.0 developers.</p>
<h2 id="gaming-7"><a class="header" href="#gaming-7">Gaming: 7</a></h2>
<h3 id="ajuna-network"><a class="header" href="#ajuna-network">Ajuna Network</a></h3>
<img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/Ajuna%20Network.png" alt="img" style="zoom: 33%;" />
<p>Ajuna Network is an infrastructure for Blockhain Games, featureing a full featured UnitySDK and UnrealSDK built on
Substrate.</p>
<h3 id="bitcountry"><a class="header" href="#bitcountry">Bit.Country</a></h3>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/Bit.Country.jpeg" alt="img" /></p>
<p>Bit.Country is a decentralized world where everyone can start their own metaverse with the token economy and DAO.</p>
<h3 id="celer-network"><a class="header" href="#celer-network">Celer Network</a></h3>
<img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/celer%20network.png" alt="img" style="zoom: 33%;" />
<p>Celer Network enables fast, easy and secure off-chain transactions for payment transactions and generalized off-chain
smart contract.</p>
<h3 id="everdream-soft"><a class="header" href="#everdream-soft">Everdream Soft</a></h3>
<img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/Everdream%20Soft.png" alt="img" style="zoom: 50%;" />
<p>Since 2014 is pinoneer in the integration and use of blockchain tools in the domain of gaming and digital collectibles.</p>
<h3 id="gamedao"><a class="header" href="#gamedao">GameDAO</a></h3>
<img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/Gamedao.png" alt="img" style="zoom:20%;" />
<p>GameDAO is democratic and transparent crowdfunding for video game creators, publishers, investors and gamers.</p>
<h3 id="sensorium-corporation"><a class="header" href="#sensorium-corporation">Sensorium Corporation</a></h3>
<img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/Sensorium%20Corporation.jpeg" alt="img" style="zoom:75%;" />
<p>Sensorium Galaxy leverages state-of-the-art blockchain technologies to make the future of content distribution safe for
both the public and artists.</p>
<h2 id="bridge-4"><a class="header" href="#bridge-4">Bridge: 4</a></h2>
<h2 id="infrastructure-39"><a class="header" href="#infrastructure-39">Infrastructure: 39</a></h2>
<h2 id="relay-chain-2"><a class="header" href="#relay-chain-2">Relay Chain: 2</a></h2>
<h2 id="nfts-1"><a class="header" href="#nfts-1">NFTs: 1</a></h2>
<h3 id="unique-network"><a class="header" href="#unique-network">Unique Network</a></h3>
<img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/Unique%20Network.png" alt="img" style="zoom: 250%;" />
<p>Unique Network is an infrastructure for the next generation NFTs, offering developers independence from network-wide
transaction fees and upgrades.</p>
<h2 id="参考资源-48"><a class="header" href="#参考资源-48">参考资源</a></h2>
<ul>
<li><a href="https://substrate.io/ecosystem/projects/">Projects | Substrate_</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="substrate惊奇资源"><a class="header" href="#substrate惊奇资源">Substrate惊奇资源</a></h1>
<!--ts-->
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/awesome_substrate.html#substrate%E6%83%8A%E5%A5%87%E8%B5%84%E6%BA%90">Substrate惊奇资源</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/awesome_substrate.html#resources">Resources</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/awesome_substrate.html#support">Support</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/awesome_substrate.html#social">Social</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/awesome_substrate.html#events">Events</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/awesome_substrate.html#blogs">Blogs</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/awesome_substrate.html#videos">Videos</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/awesome_substrate.html#templates">Templates</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/awesome_substrate.html#frame-pallets">FRAME Pallets</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/awesome_substrate.html#framework-extensions">Framework Extensions</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/awesome_substrate.html#client-libraries">Client Libraries</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/awesome_substrate.html#mobile">Mobile</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/awesome_substrate.html#tools">Tools</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/awesome_substrate.html#products-and-services">Products and Services</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/awesome_substrate.html#alternative-implementations">Alternative Implementations</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/awesome_substrate.html#scale-codec">SCALE Codec</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/substrate/awesome_substrate.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a></li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:54 UTC 2022 -->
<!--te-->
<h2 id="resources"><a class="header" href="#resources">Resources</a></h2>
<ul>
<li><a href="https://dotjobs.net/">DotJobs</a> - A job board for the Substrate and Polkadot ecosystem projects, maintained
by <a href="https://stateless.money/">Stateless.Money</a>.</li>
<li><a href="https://github.com/substrate-developer-hub/">Developer Hub GitHub</a> - Substrate Developer Hub repositories.</li>
<li><a href="https://substrate.io/ecosystem/projects/">Ecosystem Projects</a> - Projects and teams building with Substrate.</li>
<li><a href="https://github.com/w3f/Grants-Program/blob/master/docs/polkadot_stack.md">Polkadot Stack</a> - An <code>awesome list</code>
maintained by our friends at <a href="https://web3.foundation/">Web3 Foundation</a>.</li>
<li><a href="https://substrate.io/">Official Homepage</a> - Vision, ecosystem, opportunities, and much more.
<ul>
<li><a href="https://docs.substrate.io/">Docs</a> - Developer documentation.</li>
<li><a href="https://docs.substrate.io/tutorials">Tutorials</a> - Guided exercises to get you started.</li>
<li><a href="https://docs.substrate.io/how-to-guides">How-to guides</a> - Workflows outlined to achieve a specific goal.</li>
<li><a href="https://docs.substrate.io/rustdocs">Reference Docs</a> - Versioned API documentation.</li>
</ul>
</li>
<li>Technical Papers
<ul>
<li><a href="https://polkadot.network/Polkadot-lightpaper.pdf">Polkadot Lightpaper</a></li>
<li><a href="https://github.com/polkadot-io/polkadotpaper/raw/master/PolkaDotPaper.pdf">Polkadot: Vision for a heterogeneous multi-chain framework</a></li>
<li><a href="https://arxiv.org/abs/2005.13456.pdf">Overview of Polkadot and its Design Considerations</a>
<ul>
<li><a href="https://github.com/AmadeusGB/Overview-of-Polkadot">Chinese Translation</a> (by community)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="support"><a class="header" href="#support">Support</a></h2>
<ul>
<li><a href="https://substrate.io/ecosystem/substrate-builders-program/">Builders Program</a> - White-glove solutions and dedicated
support team for visionary teams using Substrate.</li>
<li><a href="https://substrate.stackexchange.com/">Stack Exchange</a> - The best place for all technical questions.</li>
<li><a href="https://web3.foundation/grants">Web3 Foundation Grants</a> - Funding for ecosystem development.</li>
</ul>
<h2 id="social"><a class="header" href="#social">Social</a></h2>
<ul>
<li><a href="https://t.me/substratedevs">Substrate Devs Chat (Telegram)</a> - Chat with other Substrate developers, also bridged
to <a href="https://matrix.to/#/#substratedevs:matrix.org">matrix</a>.</li>
<li><a href="https://twitter.com/substrate_io">Twitter</a> - Follow us to stay up-to-date.</li>
</ul>
<h2 id="events"><a class="header" href="#events">Events</a></h2>
<ul>
<li><a href="https://sub0.parity.io/">Sub0 Developer Conference</a> - Semiannual, online and in-person for all things Substrate.</li>
<li><a href="https://substrate.io/ecosystem/resources/seminar/">Substrate Seminar</a> - Bi-weekly collaborative learning sessions.</li>
</ul>
<h2 id="blogs"><a class="header" href="#blogs">Blogs</a></h2>
<ul>
<li><a href="https://dotleap.com/">DotLeap</a> - Polkadot and Substrate Community blog and newsletter.</li>
<li><a href="https://www.parity.io/blog/tag/parity-substrate">Official</a> - Published by Parity.</li>
</ul>
<h2 id="videos"><a class="header" href="#videos">Videos</a></h2>
<ul>
<li><a href="https://www.youtube.com/c/paritytech">Parity YouTube</a>
<ul>
<li><a href="https://www.youtube.com/playlist?list=PLp0_ueXY_enXRfoaW7sTudeQH10yDvFOS">Substrate Seminar (YouTube Archive)</a></li>
<li><a href="https://www.youtube.com/playlist?list=PLp0_ueXY_enUZk1RuEAU9ly5h0wy5FuLs">Sub0 Conference Oct. 2020</a></li>
<li><a href="https://www.youtube.com/playlist?list=PLp0_ueXY_enWZ4UZE7rM0hdT8Z_ZTjU5V">Sub0 Conference Dec. 2019</a></li>
<li><a href="https://www.youtube.com/playlist?list=PLp0_ueXY_enWqrfP_vR4PLhzQj76fLT8y">Sub0 Conference Apr. 2019</a></li>
</ul>
</li>
<li><a href="https://www.youtube.com/playlist?list=PLOyWqupZ-WGuAuS00rK-pebTMAOxW41W8">Polkadot Network Technical Explainers</a></li>
<li><a href="https://www.crowdcast.io/e/substrate-seminar-2/">Seminar Crowdcast</a> - Upcoming events and latest recordings.
<ul>
<li><a href="https://www.crowdcast.io/e/substrate-seminar/">Old Seminar Crowdcast</a> - Archive only.</li>
</ul>
</li>
<li><a href="https://www.youtube.com/watch?v=0IoUZdDi5Is">Substrate: A Rustic Vision for Polkadot by Gavin Wood at Web3 Summit 2018</a></li>
</ul>
<h2 id="templates"><a class="header" href="#templates">Templates</a></h2>
<ul>
<li><a href="https://github.com/substrate-developer-hub/substrate-node-template">Base</a> - Minimal FRAME-based node, derived
from <a href="https://github.com/paritytech/substrate/tree/master/bin/node-template">upstream</a>.</li>
<li><a href="https://github.com/paritytech/frontier/tree/master/template">Frontier</a> - Fronter enabled EVM and Ethereum RPC
compatible Substrate node, ready for hacking.</li>
<li><a href="https://github.com/substrate-developer-hub/substrate-front-end-template">Front-End</a> - Polkadot-JS API
and <a href="https://reactjs.org/">React</a> app to build front-ends for Substrate-based chains.</li>
<li><a href="https://github.com/substrate-developer-hub/substrate-parachain-template">Parachain</a> - Cumulus enabled Substrate node,
derived from <a href="https://github.com/paritytech/cumulus/tree/master/parachain-template">upstream</a>.</li>
<li><a href="https://github.com/kaichaosun/substrate-stencil"><code>substrate-stencil</code></a> - A template for a Substrate node that includes
staking and governance capabilities.</li>
</ul>
<h2 id="frame-pallets"><a class="header" href="#frame-pallets">FRAME Pallets</a></h2>
<ul>
<li><a href="https://github.com/smartcontractkit/chainlink-polkadot">Chainlink Feed Pallet</a> - Chainlink feed token interface.</li>
<li><a href="https://github.com/paritytech/substrate/tree/master/frame">Official in Substrate</a> - Large collection, Parity
maintained.</li>
<li><a href="https://github.com/open-web3-stack/open-runtime-module-library">Open Runtime Module Library (ORML)</a> - Community
maintained collection of Substrate runtime modules.</li>
<li><a href="https://github.com/sunshine-protocol/sunshine-bounty/tree/master/pallets">Sunshine Bounty</a> - Distributed autonomous
organization (DAO) for administering a bounty program.</li>
<li><a href="https://github.com/sunshine-protocol/sunshine-keybase/tree/master/identity/pallet">Sunshine Identity</a> -
Keybase-inspired identity management.</li>
<li><a href="https://github.com/sunshine-protocol/sunshine-keybase/tree/master/faucet/pallet">Sunshine Faucet</a> - Dispense
resources for a development chain.</li>
<li><a href="https://github.com/rmrk-team/rmrk-substrate">RMRK Pallets</a> - Nested, conditional &amp; Multi-resourced NFTs.</li>
</ul>
<h2 id="framework-extensions"><a class="header" href="#framework-extensions">Framework Extensions</a></h2>
<ul>
<li><a href="https://github.com/paritytech/parity-bridges-common">Bridges</a> - A collection of tools for cross-chain communication.</li>
<li><a href="https://github.com/paritytech/cumulus">Cumulus</a> - A set of tools for writing Substrate-based Polkadot parachains.</li>
<li><a href="https://docs.substrate.io/v3/runtime/frame/">FRAME</a> - A system for building Substrate runtimes.</li>
<li><a href="https://github.com/paritytech/frontier">Frontier</a> - End-to-end Ethereum emulation for Substrate chains.</li>
<li><a href="https://github.com/paritytech/ink">ink!</a> - Rust smart contract language for Substrate chains.</li>
<li><a href="https://book.integritee.network/">IntegriTEE</a> - Trusted off-chain execution framework that
uses <a href="https://en.wikipedia.org/wiki/Software_Guard_Extensions">Intel SGX</a> trusted execution environments.</li>
<li><a href="https://polkadot.js.org/">Polkadot-JS</a> - Rich JavaScript API framework for front-end development.</li>
</ul>
<h2 id="client-libraries"><a class="header" href="#client-libraries">Client Libraries</a></h2>
<ul>
<li><a href="https://github.com/usetech-llc/polkadot_api_dotnet">.Net API</a> - Maintained
by <a href="https://usetech.com/blockchain/">Usetech</a>.</li>
<li><a href="https://github.com/dotmog/SubstrateNetApi">.NET Standard API</a> - Used
in <a href="https://www.nuget.org/packages/SubstrateNetApi/">nuget</a>,
and <a href="https://github.com/darkfriend77/Unity3DExample">Unity 3D integration example</a>; Maintained
by <a href="https://dotmog.com/">DOTMog</a>.</li>
<li><a href="https://github.com/Aphoh/go-substrate-gen"><code>go-substrate-gen</code></a> - Generate go (de)serialization/client code from
substrate metadata.</li>
<li><a href="https://github.com/virto-network/sube"><code>sube</code></a> - Lightweight Rust client library and CLI with support for type
information.</li>
<li><a href="https://github.com/paritytech/substrate-subxt"><code>subxt</code></a> - Official Rust client.</li>
<li><a href="https://github.com/usetech-llc/polkadot_api_cpp">C++ API</a> - Maintained by Usetech.</li>
<li><a href="https://github.com/centrifuge/go-substrate-rpc-client/">Go RPC Client</a> - Maintained
by <a href="https://centrifuge.io/">Centrifuge</a>.</li>
<li><a href="https://github.com/NodleCode/substrate-client-kotlin">Kotlin Client</a> - Maintained
by <a href="https://github.com/NodleCode">Nodle.io</a>.</li>
<li><a href="https://github.com/polkadot-js/api/">Polkadot-JS API</a> - Semi-official JavaScript library for Substrate-based chains.</li>
<li><a href="https://github.com/polkascan/py-substrate-interface">Python Interface</a> - Maintained
by <a href="https://polkascan.org/">Polkascan Foundation</a>.</li>
<li><a href="https://github.com/scs/substrate-api-client">Rust API Client</a> - Rust client maintained
by <a href="https://www.scs.ch/">Supercomputing Systems AG</a>.</li>
<li><a href="https://github.com/itering/subscan-essentials">Subscan Go Utilities</a> - SS58 and more, developed by Subscan.</li>
</ul>
<h2 id="mobile"><a class="header" href="#mobile">Mobile</a></h2>
<ul>
<li><a href="https://github.com/soramitsu/fearless-utils-Android">Fearless Utils Android</a> - Android Substrate tools.</li>
<li><a href="https://github.com/soramitsu/fearless-utils-iOS">Fearless Utils iOS</a> - iOS Substrate tools.</li>
<li><a href="https://github.com/Pocket4D/Polkadot-Dart">Polkadot-Dart</a> - Dart Substrate API.</li>
<li><a href="https://github.com/polkawallet-io/sdk">PolkaWallet SDK</a> - Flutter SDK for Substrate-based App.</li>
<li><a href="https://github.com/paritytech/react-native-substrate-sign">React-Native-Substrate-Sign</a> - Rust library for React
Native.</li>
</ul>
<h2 id="tools"><a class="header" href="#tools">Tools</a></h2>
<p><a href="https://github.com/paritytech/substrate-debug-kit/tree/master/offline-election"><code>offline-election</code></a>, which is a tool
that is used to predict nominated proof-of-stake elections.</p>
<ul>
<li><a href="https://rs-ipfs.github.io/offchain-ipfs-manual/"><code>offchain::ipfs</code></a> - Substrate infused with <a href="https://ipfs.io/">IPFS</a>.</li>
<li><a href="https://github.com/shawntabrizi/polkadot-js-bundle"><code>polkadot-js-bundle</code></a> - A standalone JS bundle that contains
Polkadot{JS} libraries.</li>
<li><a href="https://github.com/shawntabrizi/polkadot-launch"><code>polkadot-launch</code></a> - Simple CLI tool to launch a local Polkadot test
network.</li>
<li><a href="https://github.com/paritytech/polkadot-runtime-prom-exporter/"><code>polkadot-runtime-prom-exporter</code></a> -
A <a href="https://prometheus.io/">Prometheus</a> exporter for Polkadot runtime metrics (modifiable for Substrate use).</li>
<li><a href="https://github.com/paritytech/polkadot-scripts"><code>polkadot-scripts</code></a> - A collection of scripts Parity uses to diagnose
Polkadot/Kusama.</li>
<li><a href="https://github.com/koute/polkadot-starship"><code>polkadot-starship</code></a> - Another tool to launch a local Polkadot test
network, with emphasis on the ability to run big testnets.</li>
<li><a href="https://github.com/chevdor/srtool-actions"><code>srtool-actions</code></a> - GitHub actions to easily use the <code>srtool</code> Docker image
to build your own runtime.</li>
<li><a href="https://github.com/chevdor/srtool-cli"><code>srtool-cli</code></a> - CLI frontend for the <code>srtool</code> Docker image.</li>
<li><a href="https://github.com/paritytech/srtool"><code>srtool</code></a> - Docker image to deterministically build a runtime.</li>
<li><a href="https://github.com/ascjones/subsee"><code>subsee</code></a> - CLI to inspect metadata of a Substrate node as JSON.</li>
<li><a href="https://github.com/shawntabrizi/substrate-balance-calculator"><code>substrate-balance-calculator</code></a> - Breakdown the
balances of your Substrate account.</li>
<li><a href="https://github.com/shawntabrizi/substrate-balance-graph"><code>substrate-balance-graph</code></a> - Create a graph of the token
balance over time of a Substrate address.</li>
<li><a href="https://github.com/shawntabrizi/substrate-graph-benchmarks"><code>substrate-graph-benchmarks</code></a> - Graph the benchmark
output of FRAME pallets.</li>
<li><a href="https://github.com/shawntabrizi/substrate-js-utilities"><code>substrate-js-utils</code></a> - A set of useful JavaScript utilities
for Substrate that uses the Polkadot{JS} API;
Also <a href="https://www.shawntabrizi.com/substrate-js-utilities/">deployed as a website</a>.</li>
<li><a href="https://github.com/shawntabrizi/substrate-society"><code>substrate-society</code></a> - A basic front-end for the FRAME Society
pallet.</li>
<li><a href="https://github.com/shawntabrizi/substrate-toml-lint"><code>substrate-toml-lint</code></a> - A toml parser and checker to avoid
common errors in Substrate projects.</li>
<li><a href="https://github.com/chevdor/subwasm"><code>subwasm</code></a> - CLI to inspect a runtime WASM blob offline. It shows information,
metadata and can compare runtimes. It can also help you fetch a runtime directly from a node.</li>
<li><a href="https://github.com/clearloop/sup"><code>sup</code></a> - Command line tool for generating or upgrading a Substrate node.</li>
<li><a href="https://aleph.im">Aleph.im</a> - Scalable, decentralized database, file storage, and computation services for Substrate
chains and more.</li>
<li><a href="https://github.com/paritytech/substrate-archive">Archive</a> - Indexing engine for Substrate chains.</li>
<li><a href="https://github.com/danforbes/substrate-devhub-utils">Dev Hub Utils</a> - <em>Unofficial</em> utilities for working with
official Substrate Developer Hub resources.</li>
<li><a href="https://github.com/patractlabs/europa">Europa</a> - A sandbox for the Substrate runtime execution environment.</li>
<li><a href="https://github.com/maxsam4/fork-off-substrate">Fork Off Substrate</a> - Script to help bootstrap a new chain with the
state of a running chain.</li>
<li><a href="https://github.com/centrifuge/fudge">fudge</a> - Core lib for accessing and (arbitrarily) manipulating substrate
databases, including the building and importing of local blocks.</li>
<li><a href="https://github.com/gantree-io/gantree-lib-nodejs">Gantree Library</a> - A suite of technologies for managing
Substrate-powered parachain networks via rapid spin-up &amp; tear-down.</li>
<li><a href="https://github.com/halva-suite/halva">Halva</a> - A toolchain for improving the experience of developing on Substrate.</li>
<li><a href="https://github.com/Joystream/hydra">Hydra</a> - A GraphQL framework for Substrate nodes.</li>
<li><a href="https://github.com/patractlabs/jupiter">Jupiter</a> - Testnet for smart contracts written for the FRAME Contracts pallet
and ink!.</li>
<li><a href="https://github.com/patractlabs/megaclite">Megaclite</a> - Zero-knowledge tools for the Polkadot ecosystem.</li>
<li><a href="https://www.parity.io/signer/">Parity Signer</a> - Upcycle an unused mobile phone into an air-gapped hardware wallet.</li>
<li><a href="https://github.com/SimplyVC/panic_polkadot">Polkadot PANIC</a> - Monitoring and alerting solution for Polkadot nodes by
Simply VC, compatible with many Substrate chains.</li>
<li><a href="https://wiki.polkadot.network/docs/build-tools-index">Polkadot Tool Index</a> - List of tools available for your
development with Polkadot and any Substrate chain including Block Explorers, Wallets, Network Monitoring &amp; Reporting,
Clients, Benchmarking, Fuzzing, Forking, SCALE Codec, CLI Tools and much more.</li>
<li><a href="https://polkadot.js.org/apps/">Polkadot-JS Apps UI</a> - Semi-official block explorer &amp; front-end for Substrate-based
chains.</li>
<li><a href="https://github.com/polkadot-js/extension">Polkadot-JS Extension</a> - Browser extension for interacting with
Substrate-based chains.</li>
<li><a href="https://polkascan.io/">Polkascan</a> - Multi-chain block explorer maintained by Polkascan Foundation.</li>
<li><a href="https://github.com/emostov/proxy-hot-wallet">Proxy Hot Wallet Demo</a> - A demonstration of a secure, convenient, and
flexible hot wallet architecture built on Substrate primitives.</li>
<li><a href="https://github.com/patractlabs/redspot">Redspot</a> - A <a href="https://www.trufflesuite.com/truffle">Truffle</a>-like toolkit for
smart contracts for the FRAME Contracts pallet and ink!.</li>
<li><a href="https://github.com/paritytech/substrate-api-sidecar">Sidecar</a> - REST service that runs alongside Substrate nodes.</li>
<li><a href="https://polkadot.subscan.io/tools/ss58_transform">SS58 Transform</a> - Display key’s addressees with all SS58 prefixes.</li>
<li><a href="https://github.com/w3f/staking-rewards-collector">Staking Rewards Collector</a> - A script to parse and output staking
rewards for a given Kusama or Polkadot address and cross-reference them with daily price data.</li>
<li><a href="https://substrate.dev/docs/en/knowledgebase/integrate/subkey">Subkey</a> - Command line utility for working with
cryptographic keys.</li>
<li><a href="https://subquery.network">SubQuery</a> - A GraphQL indexer and query service that allows users to easily create indexed
data sources and host them online for free.</li>
<li><a href="https://www.subscan.io/">Subscan</a> - Multi-network explorer for Substrate-based chains.</li>
<li><a href="https://subsquid.io">Subsquid</a> - An indexing framework (SDK + infrastructure) to quickly and easily turn Substrate
and EVM on-chain data into APIs and host them.</li>
<li><a href="https://github.com/arrudagates/substate">Substate</a> - 100% no-std/wasm compatible Substrate storage key generator
library for Rust.</li>
<li><a href="https://github.com/paritytech/substrate-debug-kit">Substrate debug-kit</a> - A collection of tools and libraries for
debugging Substrate-based chains.</li>
<li><a href="https://github.com/ETeissonniere/substrate-nodeops">Substrate Docker Builders</a> - A set of Dockerfiles and GitHub
Actions to auto-build and push a Docker image for Substrate-based chains.</li>
<li><a href="https://github.com/starkleytech/substrate-faucet">Substrate Faucet Bot</a> - Python-based faucet for development
purposes.</li>
<li><a href="https://github.com/playzero/substrate-graph">Substrate Graph</a> - GraphQL indexer for Substrate-based chains.</li>
<li><a href="https://github.com/paritytech/txwrapper">TxWrapper</a> - Helpful library for offline transaction creation.</li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=paritytech.vscode-substrate">VSCode Substrate</a> - Plugin for
Visual Studio Code.</li>
</ul>
<h2 id="products-and-services"><a class="header" href="#products-and-services">Products and Services</a></h2>
<ul>
<li><a href="https://onfinality.io">OnFinality</a> - Free and paid services to shared Substrate based nodes.</li>
</ul>
<h2 id="alternative-implementations"><a class="header" href="#alternative-implementations">Alternative Implementations</a></h2>
<ul>
<li><a href="https://github.com/ChainSafe/gossamer">Gossamer</a> - A Polkadot client implemented in Go;
from <a href="https://chainsafe.io/">ChainSafe</a>.</li>
<li><a href="https://kagome.readthedocs.io/en/latest/">Kagome</a> - A C++17 implementation of the Polkadot client;
from <a href="http://www.soramitsu.co.jp/">Soramitsu</a>.</li>
<li><a href="https://github.com/LimeChain/as-substrate-runtime">LimeChain AssemblyScript Runtime</a> - An account-based Substrate
proof-of-concept runtime written in AssemblyScript; from <a href="https://limechain.tech/">LimeChain</a>.</li>
</ul>
<h2 id="scale-codec"><a class="header" href="#scale-codec">SCALE Codec</a></h2>
<ul>
<li><a href="https://github.com/LimeChain/as-scale-codec">AssemblyScript</a> - Maintained by LimeChain.</li>
<li><a href="https://github.com/MatthewDarnell/cScale">C</a> - Maintained by Matthew Darnell.</li>
<li><a href="https://github.com/soramitsu/scale-codec-cpp">C++</a> - Maintained by Soramitsu.</li>
<li><a href="https://docs.substrate.io/v3/advanced/scale-codec/">Codec Definition</a> - Official codec documentation.</li>
<li><a href="https://github.com/itering/scale.go">Go</a> - Maintained by <a href="https://www.itering.com/">Itering</a>.</li>
<li><a href="https://github.com/airalab/hs-web3/tree/master/src/Codec">Haskell</a> - Maintained
by <a href="https://robonomics.network/">Robonomics Network</a>.</li>
<li><a href="https://github.com/emeraldpay/polkaj/tree/master/polkaj-scale">Java</a> - Maintained by <a href="https://emerald.cash/">Emerald</a>
.</li>
<li><a href="https://github.com/paritytech/parity-scale-codec">Parity SCALE Codec</a> - Reference implementation written in Rust.</li>
<li><a href="https://github.com/polkascan/py-scale-codec">Python</a> - Maintained by Polkascan Foundation.</li>
<li><a href="https://github.com/itering/scale.rb">Ruby</a> - Maintained by Itering.</li>
<li><a href="https://github.com/virto-network/scales">Scales</a> - Serializing SCALE using type information from a type registry.</li>
<li>JavaScript / TypeScript implementations:
<ul>
<li><a href="https://github.com/paritytech/parity-scale-codec-ts">paritytech/parity-scale-codec-ts</a> - Maintained by Parity
Technologies.</li>
<li><a href="https://github.com/polkadot-js/api/tree/master/packages/types">polkadot-js/api</a> - Maintained by Polkadot-JS.</li>
<li><a href="https://github.com/unstoppablejs/unstoppablejs/tree/main/packages/scale-ts#scale-ts">scale-ts</a> - Maintained by
Josep M Sobrepere.</li>
<li><a href="https://github.com/soramitsu/scale-codec-js-library">soramitsu/scale-codec-js-library</a> - Maintained by Soramitsu.</li>
</ul>
</li>
</ul>
<h2 id="参考资源-49"><a class="header" href="#参考资源-49">参考资源</a></h2>
<ul>
<li><a href="https://github.com/substrate-developer-hub/awesome-substrate/blob/master/README.md">awesome-substrate/README.md at master · substrate-developer-hub/awesome-substrate</a>
<blockquote>
<p>an awesome list is a list of awesome things curated by the Substrate community.</p>
</blockquote>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="nervosckb"><a class="header" href="#nervosckb">nervos/ckb</a></h1>
<!--ts-->
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/nervos_ckb_anatomy.html#nervosckb">nervos/ckb</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/nervos_ckb_anatomy.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/nervos_ckb_anatomy.html#online-book">online-book</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/nervos_ckb_anatomy.html#fragment">fragment</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/nervos_ckb_anatomy.html#local">local</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:53 UTC 2022 -->
<!--te-->
<h2 id="参考资源-50"><a class="header" href="#参考资源-50">参考资源</a></h2>
<h3 id="online-book-40"><a class="header" href="#online-book-40">online-book</a></h3>
<ul>
<li><a href="https://github.com/nervosnetwork/ckb">nervosnetwork/ckb: The Nervos CKB is a public permissionless blockchain, and the layer 1 of Nervos network.</a></li>
</ul>
<h3 id="fragment-40"><a class="header" href="#fragment-40">fragment</a></h3>
<h3 id="local-40"><a class="header" href="#local-40">local</a></h3>
<div style="break-before: page; page-break-before: always;"></div><h1 id="solana"><a class="header" href="#solana">Solana</a></h1>
<!--ts-->
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/solana.html#solana">Solana</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/solana.html#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">参考资源</a>
<ul>
<li><a href="layer5_ecosystem/7_business/blockchain/solana.html#online-book">online-book</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/solana.html#fragment">fragment</a></li>
<li><a href="layer5_ecosystem/7_business/blockchain/solana.html#local">local</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:43:54 UTC 2022 -->
<!--te-->
<h2 id="参考资源-51"><a class="header" href="#参考资源-51">参考资源</a></h2>
<h3 id="online-book-41"><a class="header" href="#online-book-41">online-book</a></h3>
<ul>
<li><a href="https://github.com/solana-labs/solana">solana-labs/solana: Web-Scale Blockchain for fast, secure, scalable, decentralized apps and marketplaces.</a></li>
</ul>
<h3 id="fragment-41"><a class="header" href="#fragment-41">fragment</a></h3>
<h3 id="local-41"><a class="header" href="#local-41">local</a></h3>
<div style="break-before: page; page-break-before: always;"></div><h1 id="生产实践"><a class="header" href="#生产实践">生产实践</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="优秀产品"><a class="header" href="#优秀产品">优秀产品</a></h1>
<!--ts-->
<ul>
<li><a href="layer5_ecosystem/7_business/products/products.html#%E4%BC%98%E7%A7%80%E4%BA%A7%E5%93%81">优秀产品</a>
<ul>
<li><a href="layer5_ecosystem/7_business/products/products.html#awesome-series">awesome series</a>
<ul>
<li><a href="layer5_ecosystem/7_business/products/products.html#rust-unofficialawesome-rust">rust-unofficial/awesome-rust</a></li>
<li><a href="layer5_ecosystem/7_business/products/products.html#rust-embeddedasesome-embedded-rust">rust-embedded/asesome-embedded-rust</a></li>
<li><a href="layer5_ecosystem/7_business/products/products.html#rust-in-blockchainawesome-blockchain-rust">rust-in-blockchain/awesome-blockchain-rust</a></li>
<li><a href="layer5_ecosystem/7_business/products/products.html#tako8kiawesome-alternatives-in-rust">TaKO8Ki/awesome-alternatives-in-rust</a></li>
<li><a href="layer5_ecosystem/7_business/products/products.html#rustbegginersawesome-rust-mentors">RustBegginers/awesome-rust-mentors</a></li>
<li><a href="layer5_ecosystem/7_business/products/products.html#awesome-rust-comawesome-rust">awesome-rust-com/awesome-rust</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Wed Jul 27 03:44:00 UTC 2022 -->
<!--te-->
<h2 id="awesome-series"><a class="header" href="#awesome-series">awesome series</a></h2>
<p><a href="https://github.com/topics/awesome">awesome · GitHub Topics</a></p>
<h3 id="rust-unofficialawesome-rust"><a class="header" href="#rust-unofficialawesome-rust">rust-unofficial/awesome-rust</a></h3>
<ul>
<li><a href="https://github.com/rust-unofficial/awesome-rust">rust-unofficial/awesome-rust: A curated list of Rust code and resources.</a></li>
</ul>
<h3 id="rust-embeddedasesome-embedded-rust"><a class="header" href="#rust-embeddedasesome-embedded-rust">rust-embedded/asesome-embedded-rust</a></h3>
<ul>
<li><a href="https://github.com/rust-embedded/awesome-embedded-rust">rust-embedded/awesome-embedded-rust: Curated list of resources for Embedded and Low-level development in the Rust programming language</a></li>
</ul>
<h3 id="rust-in-blockchainawesome-blockchain-rust"><a class="header" href="#rust-in-blockchainawesome-blockchain-rust">rust-in-blockchain/awesome-blockchain-rust</a></h3>
<ul>
<li><a href="https://github.com/rust-in-blockchain/awesome-blockchain-rust">rust-in-blockchain/awesome-blockchain-rust: Collect libraries and packages about blockchain/cryptography in Rust</a></li>
</ul>
<h3 id="tako8kiawesome-alternatives-in-rust"><a class="header" href="#tako8kiawesome-alternatives-in-rust">TaKO8Ki/awesome-alternatives-in-rust</a></h3>
<ul>
<li><a href="https://github.com/TaKO8Ki/awesome-alternatives-in-rust#terminal">TaKO8Ki/awesome-alternatives-in-rust: A curated list of replacements for existing software written in Rust</a></li>
</ul>
<h3 id="rustbegginersawesome-rust-mentors"><a class="header" href="#rustbegginersawesome-rust-mentors">RustBegginers/awesome-rust-mentors</a></h3>
<ul>
<li><a href="https://github.com/RustBeginners/awesome-rust-mentors">RustBeginners/awesome-rust-mentors: A list of rust lang mentors tagged by topics of interest</a></li>
</ul>
<h3 id="awesome-rust-comawesome-rust"><a class="header" href="#awesome-rust-comawesome-rust">awesome-rust-com/awesome-rust</a></h3>
<ul>
<li><a href="https://github.com/awesome-rust-com/awesome-rust">awesome-rust-com/awesome-rust: Awesome Rust</a></li>
<li><a href="https://awesome-rust.com/">Awesome Rust | awesome-rust</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="基础库"><a class="header" href="#基础库">基础库</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="框架引擎"><a class="header" href="#框架引擎">框架引擎</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="checklist"><a class="header" href="#checklist">Checklist</a></h1>
<ul>
<li>
<p>总览:</p>
<ul>
<li>[ ] This is an important note (<a href="../README.html#Note-1">Note-1</a>)</li>
</ul>
</li>
<li>
<p>Substrate教程梳理:</p>
<ul>
<li>[ ] pallet 前置Rust知识 (<a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_tutorials.html#Pallet-Preset">Pallet-Preset</a>)</li>
</ul>
</li>
<li>
<p>深入Substrate Pallet:</p>
<ul>
<li>[ ] pallet extrinsics 使用 (<a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html#Pallet-Extrinsics">Pallet-Extrinsics</a>)</li>
<li>[ ] pallet errors 使用 (<a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html#Pallet-Errors">Pallet-Errors</a>)</li>
<li>[ ] pallet config 使用 (<a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html#Pallet-Config">Pallet-Config</a>)</li>
<li>[ ] pallet 使用其他 Pallet (<a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html#Pallet-Use-Other-Pallet">Pallet-Use-Other-Pallet</a>)</li>
<li>[ ] pallet 扩展 使用 (<a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html#Pallet-Extension">Pallet-Extension</a>)</li>
<li>[ ] pallet 调试 (<a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html#Pallet-Debug">Pallet-Debug</a>)</li>
<li>[ ] pallet rpc 使用 (<a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html#Pallet-RPC">Pallet-RPC</a>)</li>
<li>[ ] pallet 基准测试 (<a href="layer5_ecosystem/7_business/blockchain/substrate/substrate_pallet.html#Pallet-Benchmarking">Pallet-Benchmarking</a>)</li>
</ul>
</li>
</ul>

            </main>

            <!--            <script src="https://utteranc.es/client.js"-->
            <!--                    repo="RustMagazine/rust_magazine_2022"-->
            <!--                    issue-term="title"-->
            <!--                    theme="github-light"-->
            <!--                    crossorigin="anonymous"-->
            <!--                    async></script>-->

            <nav class="nav-wrapper" aria-label="Page navigation">
                <!-- Mobile navigation buttons -->


                <div style="clear: both"></div>
            </nav>
        </div>
    </div>

    <nav class="nav-wide-wrapper" aria-label="Page navigation">

    </nav>

</div>




    <script type="text/javascript">
        window.playground_copyable = true;
    </script>

    <script src="ace.js" type="text/javascript" charset="utf-8"></script>
    <script src="editor.js" type="text/javascript" charset="utf-8"></script>
    <script src="mode-rust.js" type="text/javascript" charset="utf-8"></script>
    <script src="theme-dawn.js" type="text/javascript" charset="utf-8"></script>
    <script src="theme-tomorrow_night.js" type="text/javascript" charset="utf-8"></script>

    <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

<script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
<script src="highlight.js" type="text/javascript" charset="utf-8"></script>
<script src="book.js" type="text/javascript" charset="utf-8"></script>

<!-- Custom JS scripts -->
    <script type="text/javascript" src="assets/mermaid/mermaid.min.js"></script>
    <script type="text/javascript" src="assets/mermaid/mermaid-init.js"></script>
    <script type="text/javascript" src="assets/smart-anchor.js"></script>
    <script type="text/javascript" src="assets/pagetoc/sidebar.js"></script>

        <script type="text/javascript">
            window.addEventListener('load', function () {
                MathJax.Hub.Register.StartupHook('End', function () {
                    window.setTimeout(window.print, 100);
                });
            });
        </script>
</body>
</html>
